commit,file,added_code,deleted_code,hash_clean,cve_id,hash,repo_url,rel_type,score,extraction_status,text_norm,cluster_kmeans
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/AdminSidebar/index.jsx,"import React, { useEffect, useRef, useState } from ""react"";
import {
  BookOpen,
  Eye,
  GitHub,
  Key,
  Mail,
  Menu,
  MessageSquare,
  Settings,
  Users,
  X,
} from ""react-feather"";
import IndexCount from ""../Sidebar/IndexCount"";
import LLMStatus from ""../Sidebar/LLMStatus"";
import paths from ""../../utils/paths"";
import Discord from ""../Icons/Discord"";
import useLogo from ""../../hooks/useLogo"";

export default function AdminSidebar() {
  const { logo } = useLogo();
  const sidebarRef = useRef(null);

  return (
    <>
      <div
        ref={sidebarRef}
        style={{ height: ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative m-[16px] rounded-[26px] bg-white dark:bg-black-900 min-w-[15.5%] p-[18px] ""
      >
        <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
          {/* Header Information */}
          <div className=""flex w-full items-center justify-between"">
            <div className=""flex shrink-0 max-w-[50%] items-center justify-start"">
              <img
                src={logo}
                alt=""Logo""
                className=""rounded max-h-[40px]""
                style={{ objectFit: ""contain"" }}
              />
            </div>
            <div className=""flex gap-x-2 items-center text-slate-500"">
              <a
                href={paths.home()}
                className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
              >
                <X className=""h-4 w-4"" />
              </a>
            </div>
          </div>

          {/* Primary Body */}
          <div className=""h-[100%] flex flex-col w-full justify-between pt-4 overflow-y-hidden"">
            <div className=""h-auto sidebar-items dark:sidebar-items"">
              <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
                <Option
                  href={paths.admin.system()}
                  btnText=""System Preferences""
                  icon={<Settings className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.invites()}
                  btnText=""Invitation Management""
                  icon={<Mail className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.users()}
                  btnText=""User Management""
                  icon={<Users className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.workspaces()}
                  btnText=""Workspace Management""
                  icon={<BookOpen className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.chats()}
                  btnText=""Workspace Chat Management""
                  icon={<MessageSquare className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.appearance()}
                  btnText=""Appearance""
                  icon={<Eye className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.apiKeys()}
                  btnText=""API Keys""
                  icon={<Key className=""h-4 w-4 flex-shrink-0"" />}
                />
              </div>
            </div>
            <div>
              <div className=""flex flex-col gap-y-2"">
                <div className=""w-full flex items-center justify-between"">
                  <LLMStatus />
                  <IndexCount />
                </div>
              </div>

              {/* Footer */}
              <div className=""flex items-end justify-between mt-2"">
                <div className=""flex gap-x-1 items-center"">
                  <a
                    href={paths.github()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <GitHub className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.docs()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <BookOpen className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.discord()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 dark:bg-slate-800 hover:bg-slate-800 group""
                  >
                    <Discord className=""h-4 w-4 stroke-slate-400 group-hover:stroke-slate-200 dark:group-hover:stroke-slate-200"" />
                  </a>
                </div>
                <a
                  href={paths.mailToMintplex()}
                  className=""transition-all duration-300 text-xs text-slate-200 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                >
                  @MintplexLabs
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
}

export function SidebarMobileHeader() {
  const { logo } = useLogo();
  const sidebarRef = useRef(null);
  const [showSidebar, setShowSidebar] = useState(false);
  const [showBgOverlay, setShowBgOverlay] = useState(false);

  useEffect(() => {
    function handleBg() {
      if (showSidebar) {
        setTimeout(() => {
          setShowBgOverlay(true);
        }, 300);
      } else {
        setShowBgOverlay(false);
      }
    }
    handleBg();
  }, [showSidebar]);

  return (
    <>
      <div className=""flex justify-between relative top-0 left-0 w-full rounded-b-lg px-2 pb-4 bg-white dark:bg-black-900 text-slate-800 dark:text-slate-200"">
        <button
          onClick={() => setShowSidebar(true)}
          className=""rounded-md bg-stone-200 p-2 flex items-center justify-center text-slate-800 hover:bg-stone-300 group dark:bg-stone-800 dark:text-slate-200 dark:hover:bg-stone-900 dark:border dark:border-stone-800""
        >
          <Menu className=""h-6 w-6"" />
        </button>
        <div className=""flex shrink-0 w-fit items-center justify-start"">
          <img
            src={logo}
            alt=""Logo""
            className=""rounded w-full max-h-[40px]""
            style={{ objectFit: ""contain"" }}
          />
        </div>
      </div>
      <div
        style={{
          transform: showSidebar ? `translateX(0vw)` : `translateX(-100vw)`,
        }}
        className={`z-99 fixed top-0 left-0 transition-all duration-500 w-[100vw] h-[100vh]`}
      >
        <div
          className={`${
            showBgOverlay
              ? ""transition-all opacity-1""
              : ""transition-none opacity-0""
          }  duration-500 fixed top-0 left-0 bg-black-900 bg-opacity-75 w-screen h-screen`}
          onClick={() => setShowSidebar(false)}
        />
        <div
          ref={sidebarRef}
          className=""h-[100vh] fixed top-0 left-0  rounded-r-[26px] bg-white dark:bg-black-900 w-[80%] p-[18px] ""
        >
          <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
            {/* Header Information */}
            <div className=""flex w-full items-center justify-between gap-x-4"">
              <div className=""flex shrink-1 w-fit items-center justify-start"">
                <img
                  src={logo}
                  alt=""Logo""
                  className=""rounded w-full max-h-[40px]""
                  style={{ objectFit: ""contain"" }}
                />
              </div>
              <div className=""flex gap-x-2 items-center text-slate-500 shrink-0"">
                <a
                  href={paths.home()}
                  className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                >
                  <X className=""h-4 w-4"" />
                </a>
              </div>
            </div>

            {/* Primary Body */}
            <div className=""h-full flex flex-col w-full justify-between pt-4 overflow-y-hidden "">
              <div className=""h-auto md:sidebar-items md:dark:sidebar-items"">
                <div
                  style={{ height: ""calc(100vw - -3rem)"" }}
                  className="" flex flex-col gap-y-4 pb-8 overflow-y-scroll no-scroll""
                >
                  <Option
                    href={paths.admin.system()}
                    btnText=""System Preferences""
                    icon={<Settings className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.invites()}
                    btnText=""Invitation Management""
                    icon={<Mail className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.users()}
                    btnText=""User Management""
                    icon={<Users className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.workspaces()}
                    btnText=""Workspace Management""
                    icon={<BookOpen className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.chats()}
                    btnText=""Workspace Chat Management""
                    icon={<MessageSquare className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.appearance()}
                    btnText=""Appearance""
                    icon={<Eye className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.apiKeys()}
                    btnText=""API Keys""
                    icon={<Key className=""h-4 w-4 flex-shrink-0"" />}
                  />
                </div>
              </div>
              <div>
                <div className=""flex flex-col gap-y-2"">
                  <div className=""w-full flex items-center justify-between"">
                    <LLMStatus />
                    <IndexCount />
                  </div>
                </div>

                {/* Footer */}
                <div className=""flex items-end justify-between mt-2"">
                  <div className=""flex gap-x-1 items-center"">
                    <a
                      href={paths.github()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                    >
                      <GitHub className=""h-4 w-4 "" />
                    </a>
                    <a
                      href={paths.docs()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                    >
                      <BookOpen className=""h-4 w-4 "" />
                    </a>
                    <a
                      href={paths.discord()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 dark:bg-slate-800 hover:bg-slate-800 group""
                    >
                      <Discord className=""h-4 w-4 stroke-slate-400 group-hover:stroke-slate-200 dark:group-hover:stroke-slate-200"" />
                    </a>
                  </div>
                  <a
                    href={paths.mailToMintplex()}
                    className=""transition-all duration-300 text-xs text-slate-200 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                  >
                    @MintplexLabs
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
}

const Option = ({ btnText, icon, href }) => {
  const isActive = window.location.pathname === href;
  return (
    <div className=""flex gap-x-2 items-center justify-between"">
      <a
        href={href}
        className={`flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center ${
          isActive
            ? ""bg-gray-100 dark:bg-stone-600""
            : ""hover:bg-slate-100 dark:hover:bg-stone-900 ""
        }`}
      >
        {icon}
        <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold whitespace-nowrap overflow-hidden "">
          {btnText}
        </p>
      </a>
    </div>
  );
};",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR VAR VAR ""../VAR/VAR""; VAR VAR VAR ""../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR ""../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR VAR = VAR(VAR); VAR ( <> <VAR VAR={VAR} VAR={{ VAR: ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR-[16px] VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-VAR-[15.5%] VAR-[18px] "" > <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-0 VAR-VAR-[50%] VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4"" /> </VAR> </VAR> </VAR> {} <VAR VAR=""VAR-[100%] VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR:VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR /> <VAR /> </VAR> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-400 VAR-VAR:VAR-VAR-200 VAR:VAR-VAR:VAR-VAR-200"" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </> ); } VAR VAR VAR() { VAR { VAR } = VAR(); VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR() { VAR (VAR) { VAR(() => { VAR(VAR); }, 300); } VAR { VAR(VAR); } } VAR(); }, [VAR]); VAR ( <> <VAR VAR=""VAR VAR-VAR VAR VAR-0 VAR-0 VAR-VAR VAR-VAR-VAR VAR-2 VAR-4 VAR-VAR VAR:VAR-VAR-900 VAR-VAR-800 VAR:VAR-VAR-200""> <VAR VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR-VAR-200 VAR-2 VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-300 VAR VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR VAR:VAR-VAR-800"" > <VAR VAR=""VAR-6 VAR-6"" /> </VAR> <VAR VAR=""VAR VAR-0 VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> </VAR> <VAR VAR={{ VAR: VAR ? `VAR(0vw)` : `VAR(-100vw)`, }} VAR={`VAR-99 VAR VAR-0 VAR-0 VAR-VAR VAR-500 VAR-[100vw] VAR-[100vh]`} > <VAR VAR={`${ VAR ? ""VAR-VAR VAR-1"" : ""VAR-VAR VAR-0"" } VAR-500 VAR VAR-0 VAR-0 VAR-VAR-900 VAR-VAR-75 VAR-VAR VAR-VAR`} VAR={() => VAR(VAR)} /> <VAR VAR={VAR} VAR=""VAR-[100vh] VAR VAR-0 VAR-0 VAR-VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-[80%] VAR-[18px] "" > <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR VAR-1 VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500 VAR-0""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4"" /> </VAR> </VAR> </VAR> {} <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR ""> <VAR VAR=""VAR-VAR VAR:VAR-VAR VAR:VAR:VAR-VAR""> <VAR VAR={{ VAR: ""VAR(100vw - -3rem)"" }} VAR="" VAR VAR-VAR VAR-VAR-4 VAR-8 VAR-VAR-VAR VAR-VAR"" > <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR /> <VAR /> </VAR> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-400 VAR-VAR:VAR-VAR-200 VAR:VAR-VAR:VAR-VAR-200"" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </> ); } VAR VAR = ({ VAR, VAR, VAR }) => { VAR VAR = VAR.VAR.VAR === VAR; VAR ( <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR={`VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR ${ VAR ? ""VAR-VAR-100 VAR:VAR-VAR-600"" : ""VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 "" }`} > {VAR} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR ""> {VAR} </VAR> </VAR> </VAR> ); }; ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/ChatBubble/index.jsx,"import React from ""react"";

export default function ChatBubble({ message, type, popMsg }) {
  const isUser = type === ""user"";

  return (
    <div
      className={`flex w-full mt-2 items-center ${
        popMsg ? ""chat__message"" : """"
      } ${isUser ? ""justify-end"" : ""justify-start""}`}
    >
      <div
        className={`p-4 max-w-full md:max-w-[75%] ${
          isUser
            ? ""bg-slate-200 dark:bg-amber-800""
            : ""bg-orange-100 dark:bg-stone-700""
        } rounded-b-2xl ${isUser ? ""rounded-tl-2xl"" : ""rounded-tr-2xl""} ${
          isUser ? ""rounded-tr-sm"" : ""rounded-tl-sm""
        }`}
      >
        {message && (
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            {message}
          </p>
        )}
      </div>
    </div>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR VAR ""VAR""; VAR VAR VAR VAR({ VAR, VAR, VAR }) { VAR VAR = VAR === ""VAR""; VAR ( <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" } ${VAR ? ""VAR-VAR"" : ""VAR-VAR""}`} > <VAR VAR={`VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] ${ VAR ? ""VAR-VAR-200 VAR:VAR-VAR-800"" : ""VAR-VAR-100 VAR:VAR-VAR-700"" } VAR-VAR-2xl ${VAR ? ""VAR-VAR-2xl"" : ""VAR-VAR-2xl""} ${ VAR ? ""VAR-VAR-VAR"" : ""VAR-VAR-VAR"" }`} > {VAR && ( <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> {VAR} </VAR> )} </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/DefaultChat/index.jsx,"import React, { useEffect, useState } from ""react"";
import { GitHub, GitMerge, Mail, Plus } from ""react-feather"";
import NewWorkspaceModal, {
  useNewWorkspaceModal,
} from ""../Modals/NewWorkspace"";
import paths from ""../../utils/paths"";
import { isMobile } from ""react-device-detect"";
import { SidebarMobileHeader } from ""../Sidebar"";
import ChatBubble from ""../ChatBubble"";
import System from ""../../models/system"";

export default function DefaultChatContainer() {
  const [mockMsgs, setMockMessages] = useState([]);
  const [fetchedMessages, setFetchedMessages] = useState([]);
  const {
    showing: showingNewWsModal,
    showModal: showNewWsModal,
    hideModal: hideNewWsModal,
  } = useNewWorkspaceModal();
  const popMsg = !window.localStorage.getItem(""anythingllm_intro"");

  useEffect(() => {
    const fetchData = async () => {
      const fetchedMessages = await System.getWelcomeMessages();
      setFetchedMessages(fetchedMessages);
    };
    fetchData();
  }, []);

  const MESSAGES = [
    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            Welcome to AnythingLLM, AnythingLLM is an open-source AI tool by
            Mintplex Labs that turns <i>anything</i> into a trained chatbot you
            can query and chat with. AnythingLLM is a BYOK (bring-your-own-keys)
            software so there is no subscription, fee, or charges for this
            software outside of the services you want to use with it.
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            AnythingLLM is the easiest way to put powerful AI products like
            OpenAi, GPT-4, LangChain, PineconeDB, ChromaDB, and other services
            together in a neat package with no fuss to increase your
            productivity by 100x.
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            AnythingLLM can run totally locally on your machine with little
            overhead you wont even notice it's there! No GPU needed. Cloud and
            on-premises installation is available as well.
            <br />
            The AI tooling ecosystem gets more powerful everyday. AnythingLLM
            makes it easy to use.
          </p>
          <a
            href={paths.github()}
            target=""_blank""
            className=""mt-4 w-fit flex flex-grow gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900 dark:bg-stone-900""
          >
            <GitMerge className=""h-4 w-4"" />
            <p className=""text-slate-800 dark:text-slate-200 text-sm md:text-lg leading-loose"">
              Create an issue on Github
            </p>
          </a>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-end ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-slate-200 dark:bg-amber-800 rounded-b-2xl rounded-tl-2xl rounded-tr-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            How do I get started?!
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            It's simple. All collections are organized into buckets we call{"" ""}
            <b>""Workspaces""</b>. Workspaces are buckets of files, documents,
            images, PDFs, and other files which will be transformed into
            something LLM's can understand and use in conversation.
            <br />
            <br />
            You can add and remove files at anytime.
          </p>
          <button
            onClick={showNewWsModal}
            className=""mt-4 w-fit flex flex-grow gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900 dark:bg-stone-900""
          >
            <Plus className=""h-4 w-4"" />
            <p className=""text-slate-800 dark:text-slate-200 text-sm md:text-lg leading-loose"">
              Create your first workspace
            </p>
          </button>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-end ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-slate-200 dark:bg-amber-800 rounded-b-2xl rounded-tl-2xl rounded-tr-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            Is this like an AI dropbox or something? What about chatting? It is
            a chatbot isn't it?
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            AnythingLLM is more than a smarter Dropbox.
            <br />
            <br />
            AnythingLLM offers two ways of talking with your data:
            <br />
            <br />
            <i>Query:</i> Your chats will return data or inferences found with
            the documents in your workspace it has access to. Adding more
            documents to the Workspace make it smarter!
            <br />
            <br />
            <i>Conversational:</i> Your documents + your on-going chat history
            both contribute to the LLM knowledge at the same time. Great for
            appending real-time text-based info or corrections and
            misunderstandings the LLM might have.
            <br />
            <br />
            You can toggle between either mode <i>in the middle of chatting!</i>
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-end ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-slate-200 dark:bg-amber-800 rounded-b-2xl rounded-tl-2xl rounded-tr-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            Wow, this sounds amazing, let me try it out already!
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            Have Fun!
          </p>
          <div className=""flex flex-col md:flex-row items-start md:items-center gap-1 md:gap-4"">
            <a
              href={paths.github()}
              target=""_blank""
              className=""mt-4 w-fit flex flex-grow gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900 dark:bg-stone-900""
            >
              <GitHub className=""h-4 w-4"" />
              <p className=""text-slate-800 dark:text-slate-200 text-sm md:text-lg leading-loose"">
                Star on GitHub
              </p>
            </a>
            <a
              href={paths.mailToMintplex()}
              className=""mt-4 w-fit flex flex-grow gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900 dark:bg-stone-900""
            >
              <Mail className=""h-4 w-4"" />
              <p className=""text-slate-800 dark:text-slate-200 text-sm md:text-lg leading-loose"">
                Contact Mintplex Labs
              </p>
            </a>
          </div>
        </div>
      </div>
    </React.Fragment>,
  ];

  useEffect(() => {
    function processMsgs() {
      if (!!window.localStorage.getItem(""anythingllm_intro"")) {
        setMockMessages([...MESSAGES]);
        return false;
      } else {
        setMockMessages([MESSAGES[0]]);
      }

      var timer = 500;
      var messages = [];

      MESSAGES.map((child) => {
        setTimeout(() => {
          setMockMessages([...messages, child]);
          messages.push(child);
        }, timer);
        timer += 2_500;
      });
      window.localStorage.setItem(""anythingllm_intro"", 1);
    }

    processMsgs();
  }, []);

  return (
    <div
      style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
      className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
    >
      {isMobile && <SidebarMobileHeader />}
      {fetchedMessages.length === 0
        ? mockMsgs.map((content, i) => {
            return <React.Fragment key={i}>{content}</React.Fragment>;
          })
        : fetchedMessages.map((fetchedMessage, i) => {
            return (
              <React.Fragment key={i}>
                <ChatBubble
                  message={
                    fetchedMessage.user === """"
                      ? fetchedMessage.response
                      : fetchedMessage.user
                  }
                  type={fetchedMessage.user === """" ? ""response"" : ""user""}
                  popMsg={popMsg}
                />
              </React.Fragment>
            );
          })}
      {showingNewWsModal && <NewWorkspaceModal hideModal={hideNewWsModal} />}
    </div>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR, { VAR, } VAR ""../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR { VAR } VAR ""../VAR""; VAR VAR VAR ""../VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR([]); VAR { VAR: VAR, VAR: VAR, VAR: VAR, } = VAR(); VAR VAR = !VAR.VAR.VAR(""VAR""); VAR(() => { VAR VAR = VAR () => { VAR VAR = VAR VAR.VAR(); VAR(VAR); }; VAR(); }, []); VAR VAR = [ <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR, VAR VAR VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR <VAR>VAR</VAR> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR (VAR-VAR-VAR-VAR) VAR VAR VAR VAR VAR VAR, VAR, VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR, VAR-4, VAR, VAR, VAR, VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR 100x. </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR'VAR VAR! VAR VAR VAR. VAR VAR VAR-VAR VAR VAR VAR VAR VAR. <VAR /> VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR-4 VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR?! </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR'VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR{"" ""} <VAR>""VAR""</VAR>. VAR VAR VAR VAR VAR, VAR, VAR, VAR, VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR'VAR VAR VAR VAR VAR VAR VAR. <VAR /> <VAR /> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR} VAR=""VAR-4 VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR? VAR VAR VAR? VAR VAR VAR VAR VAR'VAR VAR? </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR. <VAR /> <VAR /> VAR VAR VAR VAR VAR VAR VAR VAR VAR: <VAR /> <VAR /> <VAR>VAR:</VAR> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR! <VAR /> <VAR /> <VAR>VAR:</VAR> VAR VAR + VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR-VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. <VAR /> <VAR /> VAR VAR VAR VAR VAR VAR <VAR>VAR VAR VAR VAR VAR!</VAR> </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR, VAR VAR VAR, VAR VAR VAR VAR VAR VAR! </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR! </VAR> <VAR VAR=""VAR VAR-VAR VAR:VAR-VAR VAR-VAR VAR:VAR-VAR VAR-1 VAR:VAR-4""> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR-4 VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-4 VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR.VAR>, ]; VAR(() => { VAR VAR() { VAR (!!VAR.VAR.VAR(""VAR"")) { VAR([...VAR]); VAR VAR; } VAR { VAR([VAR[0]]); } VAR VAR = 500; VAR VAR = []; VAR.VAR((VAR) => { VAR(() => { VAR([...VAR, VAR]); VAR.VAR(VAR); }, VAR); VAR += 2_500; }); VAR.VAR.VAR(""VAR"", 1); } VAR(); }, []); VAR ( <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} {VAR.VAR === 0 ? VAR.VAR((VAR, VAR) => { VAR <VAR.VAR VAR={VAR}>{VAR}</VAR.VAR>; }) : VAR.VAR((VAR, VAR) => { VAR ( <VAR.VAR VAR={VAR}> <VAR VAR={ VAR.VAR === """" ? VAR.VAR : VAR.VAR } VAR={VAR.VAR === """" ? ""VAR"" : ""VAR""} VAR={VAR} /> </VAR.VAR> ); })} {VAR && <VAR VAR={VAR} />} </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/EditingChatBubble/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";

export default function EditingChatBubble({
  message,
  index,
  type,
  handleMessageChange,
  removeMessage,
}) {
  const [isEditing, setIsEditing] = useState(false);
  const [tempMessage, setTempMessage] = useState(message[type]);
  const isUser = type === ""user"";

  return (
    <div
      className={`flex w-full mt-2 items-center ${
        isUser ? ""justify-end"" : ""justify-start""
      }`}
    >
      {isUser && (
        <button
          className=""flex items-center text-red-500 hover:text-red-700 transition mr-2""
          onClick={() => removeMessage(index)}
        >
          <X className=""mr-2"" size={20} />
        </button>
      )}
      <div
        className={`p-4 max-w-full md:max-w-[75%] ${
          isUser
            ? ""bg-slate-200 dark:bg-amber-800""
            : ""bg-orange-100 dark:bg-stone-700""
        } rounded-b-2xl ${isUser ? ""rounded-tl-2xl"" : ""rounded-tr-2xl""} ${
          isUser ? ""rounded-tr-sm"" : ""rounded-tl-sm""
        }`}
        onDoubleClick={() => setIsEditing(true)}
      >
        {isEditing ? (
          <input
            value={tempMessage}
            onChange={(e) => setTempMessage(e.target.value)}
            onBlur={() => {
              handleMessageChange(index, type, tempMessage);
              setIsEditing(false);
            }}
            autoFocus
          />
        ) : (
          tempMessage && (
            <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
              {tempMessage}
            </p>
          )
        )}
      </div>
      {!isUser && (
        <button
          className=""flex items-center text-red-500 hover:text-red-700 transition ml-2""
          onClick={() => removeMessage(index)}
        >
          <X className=""mr-2"" size={20} />
        </button>
      )}
    </div>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR({ VAR, VAR, VAR, VAR, VAR, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR[VAR]); VAR VAR = VAR === ""VAR""; VAR ( <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR-VAR"" : ""VAR-VAR"" }`} > {VAR && ( <VAR VAR=""VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR VAR-2"" VAR={() => VAR(VAR)} > <VAR VAR=""VAR-2"" VAR={20} /> </VAR> )} <VAR VAR={`VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] ${ VAR ? ""VAR-VAR-200 VAR:VAR-VAR-800"" : ""VAR-VAR-100 VAR:VAR-VAR-700"" } VAR-VAR-2xl ${VAR ? ""VAR-VAR-2xl"" : ""VAR-VAR-2xl""} ${ VAR ? ""VAR-VAR-VAR"" : ""VAR-VAR-VAR"" }`} VAR={() => VAR(VAR)} > {VAR ? ( <VAR VAR={VAR} VAR={(VAR) => VAR(VAR.VAR.VAR)} VAR={() => { VAR(VAR, VAR, VAR); VAR(VAR); }} VAR /> ) : ( VAR && ( <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> {VAR} </VAR> ) )} </VAR> {!VAR && ( <VAR VAR=""VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR VAR-2"" VAR={() => VAR(VAR)} > <VAR VAR=""VAR-2"" VAR={20} /> </VAR> )} </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/MangeWorkspace/Documents/ConfirmationModal/index.jsx,"import React from ""react"";
import { dollarFormat } from ""../../../../../utils/numbers"";

export default function ConfirmationModal({
  directories,
  hideConfirm,
  additions,
  updateWorkspace,
}) {
  function estimateCosts() {
    const cachedTokens = additions.map((filepath) => {
      const [parent, filename] = filepath.split(""/"");
      const details = directories.items
        .find((folder) => folder.name === parent)
        .items.find((file) => file.name === filename);

      const { token_count_estimate = 0, cached = false } = details;
      return cached ? token_count_estimate : 0;
    });
    const tokenEstimates = additions.map((filepath) => {
      const [parent, filename] = filepath.split(""/"");
      const details = directories.items
        .find((folder) => folder.name === parent)
        .items.find((file) => file.name === filename);

      const { token_count_estimate = 0 } = details;
      return token_count_estimate;
    });

    const totalTokens = tokenEstimates.reduce((a, b) => a + b, 0);
    const cachedTotal = cachedTokens.reduce((a, b) => a + b, 0);
    const dollarValue = 0.0004 * ((totalTokens - cachedTotal) / 1_000);

    return {
      dollarValue,
      dollarText:
        dollarValue < 0.01 ? ""< $0.01"" : `about ${dollarFormat(dollarValue)}`,
    };
  }

  const { dollarValue, dollarText } = estimateCosts();
  return (
    <dialog
      open={true}
      style={{ zIndex: 100 }}
      className=""fixed top-0 flex bg-black bg-opacity-50 w-[100vw] h-full items-center justify-center ""
    >
      <div className=""w-fit px-10 p-4 min-w-1/2 rounded-lg bg-white shadow dark:bg-stone-700 text-black dark:text-slate-200"">
        <div className=""flex flex-col w-full"">
          <p className=""font-semibold"">
            Are you sure you want to embed these documents?
          </p>

          <div className=""flex flex-col gap-y-1"">
            {dollarValue <= 0 ? (
              <p className=""text-base mt-4"">
                You will be embedding {additions.length} new documents into this
                workspace.
                <br />
                This will not incur any costs for OpenAI credits.
              </p>
            ) : (
              <p className=""text-base mt-4"">
                You will be embedding {additions.length} new documents into this
                workspace. <br />
                This will cost {dollarText} in OpenAI credits.
              </p>
            )}
          </div>

          <div className=""flex w-full justify-between items-center mt-4"">
            <button
              onClick={hideConfirm}
              className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
            >
              Cancel
            </button>
            <button
              onClick={updateWorkspace}
              className=""border border-gray-800 text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:border-slate-200 dark:hover:bg-stone-900""
            >
              Continue
            </button>
          </div>
        </div>
      </div>
    </dialog>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR VAR ""VAR""; VAR { VAR } VAR ""../../../../../VAR/VAR""; VAR VAR VAR VAR({ VAR, VAR, VAR, VAR, }) { VAR VAR() { VAR VAR = VAR.VAR((VAR) => { VAR [VAR, VAR] = VAR.VAR(""/""); VAR VAR = VAR.VAR .VAR((VAR) => VAR.VAR === VAR) .VAR.VAR((VAR) => VAR.VAR === VAR); VAR { VAR = 0, VAR = VAR } = VAR; VAR VAR ? VAR : 0; }); VAR VAR = VAR.VAR((VAR) => { VAR [VAR, VAR] = VAR.VAR(""/""); VAR VAR = VAR.VAR .VAR((VAR) => VAR.VAR === VAR) .VAR.VAR((VAR) => VAR.VAR === VAR); VAR { VAR = 0 } = VAR; VAR VAR; }); VAR VAR = VAR.VAR((VAR, VAR) => VAR + VAR, 0); VAR VAR = VAR.VAR((VAR, VAR) => VAR + VAR, 0); VAR VAR = 0.0004 * ((VAR - VAR) / 1_000); VAR { VAR, VAR: VAR < 0.01 ? ""< $0.01"" : `VAR ${VAR(VAR)}`, }; } VAR { VAR, VAR } = VAR(); VAR ( <VAR VAR={VAR} VAR={{ VAR: 100 }} VAR=""VAR VAR-0 VAR VAR-VAR VAR-VAR-50 VAR-[100vw] VAR-VAR VAR-VAR VAR-VAR "" > <VAR VAR=""VAR-VAR VAR-10 VAR-4 VAR-VAR-1/2 VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700 VAR-VAR VAR:VAR-VAR-200""> <VAR VAR=""VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR? </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1""> {VAR <= 0 ? ( <VAR VAR=""VAR-VAR VAR-4""> VAR VAR VAR VAR {VAR.VAR} VAR VAR VAR VAR VAR. <VAR /> VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> ) : ( <VAR VAR=""VAR-VAR VAR-4""> VAR VAR VAR VAR {VAR.VAR} VAR VAR VAR VAR VAR. <VAR /> VAR VAR VAR {VAR} VAR VAR VAR. </VAR> )} </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-4""> <VAR VAR={VAR} VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR={VAR} VAR=""VAR VAR-VAR-800 VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/MangeWorkspace/Documents/Directory/index.jsx,"import React, { useState } from ""react"";
import {
  FileMinus,
  FilePlus,
  Folder,
  FolderMinus,
  FolderPlus,
  Zap,
} from ""react-feather"";
import { nFormatter } from ""../../../../../utils/numbers"";
import System from ""../../../../../models/system"";

export default function Directory({
  files,
  parent = null,
  nested = 0,
  toggleSelection,
  isSelected,
}) {
  const [isExpanded, toggleExpanded] = useState(false);
  const [showDetails, toggleDetails] = useState(false);
  const [showZap, setShowZap] = useState(false);
  const handleDelete = async (name, meta) => {
    if (
      !window.confirm(
        ""Are you sure you want to delete this document?\nThis will require you to re-upload and re-embed it.\nThis document will be removed from any workspace that is currently referencing it.\nThis action is not reversible.""
      )
    )
      return false;
    document?.getElementById(meta?.id)?.remove();
    await System.deleteDocument(name, meta);
  };

  if (files.type === ""folder"") {
    return (
      <div style={{ marginLeft: nested }} className=""mb-2"">
        <div
          className={`flex items-center hover:bg-gray-100 gap-x-2 text-gray-800 dark:text-stone-200 dark:hover:bg-stone-800 px-2 rounded-lg`}
        >
          {files.items.some((files) => files.type === ""folder"") ? (
            <Folder className=""w-6 h-6"" />
          ) : (
            <button onClick={() => toggleSelection(files.name)}>
              {isSelected(files.name) ? (
                <FolderMinus className=""w-6 h-6 stroke-red-800 hover:fill-red-500"" />
              ) : (
                <FolderPlus className=""w-6 h-6 hover:stroke-green-800 hover:fill-green-500"" />
              )}
            </button>
          )}

          <div
            className=""flex gap-x-2 items-center  cursor-pointer w-full""
            onClick={() => toggleExpanded(!isExpanded)}
          >
            <h2 className=""text-base md:text-2xl"">{files.name}</h2>
            {files.items.some((files) => files.type === ""folder"") ? (
              <p className=""text-xs italic"">{files.items.length} folders</p>
            ) : (
              <p className=""text-xs italic"">
                {files.items.length} documents |{"" ""}
                {nFormatter(
                  files.items.reduce((a, b) => a + b.token_count_estimate, 0)
                )}{"" ""}
                tokens
              </p>
            )}
          </div>
        </div>
        {isExpanded &&
          files.items.map((item) => (
            <Directory
              key={item.name}
              parent={files.name}
              files={item}
              nested={nested + 20}
              toggleSelection={toggleSelection}
              isSelected={isSelected}
            />
          ))}
      </div>
    );
  }

  const { name, type: _type, ...meta } = files;
  return (
    <div className=""ml-[20px] my-2"" id={meta.id}>
      <div className=""flex items-center"">
        {meta?.cached && (
          <button
            type=""button""
            onClick={() => setShowZap(true)}
            className=""rounded-full p-1 hover:bg-stone-500 hover:bg-opacity-75""
          >
            <Zap className=""h-4 w-4 stroke-yellow-500 fill-yellow-400"" />
          </button>
        )}
        {showZap && (
          <dialog
            open={true}
            style={{ zIndex: 100 }}
            className=""fixed top-0 flex bg-black bg-opacity-50 w-[100vw] h-full items-center justify-center ""
          >
            <div className=""w-fit px-10 py-4 w-[25%] rounded-lg bg-white shadow dark:bg-stone-700 text-black dark:text-slate-200"">
              <div className=""flex flex-col w-full"">
                <p className=""font-semibold text-xl flex items-center gap-x-1 justify-left"">
                  What does{"" ""}
                  <Zap className=""h-4 w-4 stroke-yellow-500 fill-yellow-400"" />{"" ""}
                  mean?
                </p>
                <p className=""text-base mt-4"">
                  This symbol indicates that you have embed this document before
                  and will not have to pay to re-embed this document.
                </p>
                <div className=""flex w-full justify-center items-center mt-4"">
                  <button
                    onClick={() => setShowZap(false)}
                    className=""border border-gray-800 text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:border-slate-200 dark:hover:bg-stone-900""
                  >
                    Close
                  </button>
                </div>
              </div>
            </div>
          </dialog>
        )}

        <div
          className={`flex items-center gap-x-2 text-gray-800 dark:text-stone-200 hover:bg-gray-100 dark:hover:bg-stone-800 px-2 rounded-lg`}
        >
          <button onClick={() => toggleSelection(`${parent}/${name}`)}>
            {isSelected(`${parent}/${name}`) ? (
              <FileMinus className=""w-6 h-6 stroke-red-800 hover:fill-red-500"" />
            ) : (
              <FilePlus className=""w-6 h-6 hover:stroke-green-800 hover:fill-green-500"" />
            )}
          </button>
          <div
            className=""w-full items-center flex cursor-pointer""
            onClick={() => toggleDetails(!showDetails)}
          >
            <h3 className=""text-sm"">{name}</h3>
            <br />
          </div>
        </div>
      </div>
      {showDetails && (
        <div className=""w-full flex flex-col"">
          <div className=""ml-[20px] flex flex-col gap-y-1 my-1 p-2 rounded-md bg-slate-200 font-mono text-sm overflow-x-scroll"">
            {Object.entries(meta).map(([key, value], i) => {
              if (key === ""cached"") return null;
              return (
                <p key={i} className=""whitespace-pre"">
                  {key}: {value}
                </p>
              );
            })}
          </div>
          <div
            onClick={() => handleDelete(`${parent}/${name}`, meta)}
            className=""flex items-center justify-end w-full""
          >
            <button className=""text-sm text-slate-400 dark:text-stone-500 hover:text-red-500"">
              Purge Document
            </button>
          </div>
        </div>
      )}
    </div>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR { VAR } VAR ""../../../../../VAR/VAR""; VAR VAR VAR ""../../../../../VAR/VAR""; VAR VAR VAR VAR({ VAR, VAR = VAR, VAR = 0, VAR, VAR, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR, VAR) => { VAR ( !VAR.VAR( ""VAR VAR VAR VAR VAR VAR VAR VAR VAR?\VAR VAR VAR VAR VAR VAR-VAR VAR VAR-VAR VAR.\VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.\VAR VAR VAR VAR VAR."" ) ) VAR VAR; VAR?.VAR(VAR?.VAR)?.VAR(); VAR VAR.VAR(VAR, VAR); }; VAR (VAR.VAR === ""VAR"") { VAR ( <VAR VAR={{ VAR: VAR }} VAR=""VAR-2""> <VAR VAR={`VAR VAR-VAR VAR:VAR-VAR-100 VAR-VAR-2 VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800 VAR-2 VAR-VAR`} > {VAR.VAR.VAR((VAR) => VAR.VAR === ""VAR"") ? ( <VAR VAR=""VAR-6 VAR-6"" /> ) : ( <VAR VAR={() => VAR(VAR.VAR)}> {VAR(VAR.VAR) ? ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR-800 VAR:VAR-VAR-500"" /> ) : ( <VAR VAR=""VAR-6 VAR-6 VAR:VAR-VAR-800 VAR:VAR-VAR-500"" /> )} </VAR> )} <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR VAR-VAR"" VAR={() => VAR(!VAR)} > <VAR VAR=""VAR-VAR VAR:VAR-2xl"">{VAR.VAR}</VAR> {VAR.VAR.VAR((VAR) => VAR.VAR === ""VAR"") ? ( <VAR VAR=""VAR-VAR VAR"">{VAR.VAR.VAR} VAR</VAR> ) : ( <VAR VAR=""VAR-VAR VAR""> {VAR.VAR.VAR} VAR |{"" ""} {VAR( VAR.VAR.VAR((VAR, VAR) => VAR + VAR.VAR, 0) )}{"" ""} VAR </VAR> )} </VAR> </VAR> {VAR && VAR.VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR.VAR} VAR={VAR} VAR={VAR + 20} VAR={VAR} VAR={VAR} /> ))} </VAR> ); } VAR { VAR, VAR: VAR, ...VAR } = VAR; VAR ( <VAR VAR=""VAR-[20px] VAR-2"" VAR={VAR.VAR}> <VAR VAR=""VAR VAR-VAR""> {VAR?.VAR && ( <VAR VAR=""VAR"" VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR-1 VAR:VAR-VAR-500 VAR:VAR-VAR-75"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-500 VAR-VAR-400"" /> </VAR> )} {VAR && ( <VAR VAR={VAR} VAR={{ VAR: 100 }} VAR=""VAR VAR-0 VAR VAR-VAR VAR-VAR-50 VAR-[100vw] VAR-VAR VAR-VAR VAR-VAR "" > <VAR VAR=""VAR-VAR VAR-10 VAR-4 VAR-[25%] VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700 VAR-VAR VAR:VAR-VAR-200""> <VAR VAR=""VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR""> VAR VAR{"" ""} <VAR VAR=""VAR-4 VAR-4 VAR-VAR-500 VAR-VAR-400"" />{"" ""} VAR? </VAR> <VAR VAR=""VAR-VAR VAR-4""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR-VAR VAR VAR. </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-4""> <VAR VAR={() => VAR(VAR)} VAR=""VAR VAR-VAR-800 VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> </VAR> </VAR> </VAR> </VAR> )} <VAR VAR={`VAR VAR-VAR VAR-VAR-2 VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-800 VAR-2 VAR-VAR`} > <VAR VAR={() => VAR(`${VAR}/${VAR}`)}> {VAR(`${VAR}/${VAR}`) ? ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR-800 VAR:VAR-VAR-500"" /> ) : ( <VAR VAR=""VAR-6 VAR-6 VAR:VAR-VAR-800 VAR:VAR-VAR-500"" /> )} </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR"" VAR={() => VAR(!VAR)} > <VAR VAR=""VAR-VAR"">{VAR}</VAR> <VAR /> </VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR VAR VAR-VAR""> <VAR VAR=""VAR-[20px] VAR VAR-VAR VAR-VAR-1 VAR-1 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR-VAR""> {VAR.VAR(VAR).VAR(([VAR, VAR], VAR) => { VAR (VAR === ""VAR"") VAR VAR; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR""> {VAR}: {VAR} </VAR> ); })} </VAR> <VAR VAR={() => VAR(`${VAR}/${VAR}`, VAR)} VAR=""VAR VAR-VAR VAR-VAR VAR-VAR"" > <VAR VAR=""VAR-VAR VAR-VAR-400 VAR:VAR-VAR-500 VAR:VAR-VAR-500""> VAR VAR </VAR> </VAR> </VAR> )} </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/MangeWorkspace/Documents/index.jsx,"import React, { useState, useEffect } from ""react"";
import System from ""../../../../models/system"";
import Workspace from ""../../../../models/workspace"";
import paths from ""../../../../utils/paths"";
import { useParams } from ""react-router-dom"";
import Directory from ""./Directory"";
import ConfirmationModal from ""./ConfirmationModal"";
import { AlertTriangle } from ""react-feather"";

export default function DocumentSettings({ workspace }) {
  const { slug } = useParams();
  const [loading, setLoading] = useState(true);
  const [saving, setSaving] = useState(false);
  const [showConfirmation, setShowConfirmation] = useState(false);
  const [directories, setDirectories] = useState(null);
  const [originalDocuments, setOriginalDocuments] = useState([]);
  const [selectedFiles, setSelectFiles] = useState([]);
  const [hasFiles, setHasFiles] = useState(true);
  const [canDelete, setCanDelete] = useState(false);

  useEffect(() => {
    async function fetchKeys() {
      const localFiles = await System.localFiles();
      const originalDocs = workspace.documents.map((doc) => doc.docpath) || [];
      const hasAnyFiles = localFiles.items.some(
        (folder) => folder?.items?.length > 0
      );

      const canDelete = await System.getCanDeleteWorkspaces();
      setCanDelete(canDelete);
      setDirectories(localFiles);
      setOriginalDocuments([...originalDocs]);
      setSelectFiles([...originalDocs]);
      setHasFiles(hasAnyFiles);
      setLoading(false);
    }
    fetchKeys();
  }, []);

  const deleteWorkspace = async () => {
    if (
      !window.confirm(
        `You are about to delete your entire ${workspace.name} workspace. This will remove all vector embeddings on your vector database.\n\nThe original source files will remain untouched. This action is irreversible.`
      )
    )
      return false;
    await Workspace.delete(workspace.slug);
    workspace.slug === slug
      ? (window.location = paths.home())
      : window.location.reload();
  };

  const docChanges = () => {
    const changes = {
      adds: [],
      deletes: [],
    };

    selectedFiles.map((doc) => {
      const inOriginal = !!originalDocuments.find((oDoc) => oDoc === doc);
      if (!inOriginal) {
        changes.adds.push(doc);
      }
    });

    originalDocuments.map((doc) => {
      const selected = !!selectedFiles.find((oDoc) => oDoc === doc);
      if (!selected) {
        changes.deletes.push(doc);
      }
    });

    return changes;
  };

  const confirmChanges = (e) => {
    e.preventDefault();
    const changes = docChanges();
    changes.adds.length > 0 ? setShowConfirmation(true) : updateWorkspace(e);
  };

  const updateWorkspace = async (e) => {
    e.preventDefault();
    setSaving(true);
    setShowConfirmation(false);
    const changes = docChanges();
    await Workspace.modifyEmbeddings(workspace.slug, changes);
    setSaving(false);
    window.location.reload();
  };

  const isSelected = (filepath) => {
    const isFolder = !filepath.includes(""/"");
    return isFolder
      ? selectedFiles.some((doc) => doc.includes(filepath.split(""/"")[0]))
      : selectedFiles.some((doc) => doc.includes(filepath));
  };

  const toggleSelection = (filepath) => {
    const isFolder = !filepath.includes(""/"");
    const parent = isFolder ? filepath : filepath.split(""/"")[0];

    if (isSelected(filepath)) {
      const updatedDocs = isFolder
        ? selectedFiles.filter((doc) => !doc.includes(parent))
        : selectedFiles.filter((doc) => !doc.includes(filepath));
      setSelectFiles([...new Set(updatedDocs)]);
    } else {
      var newDocs = [];
      var parentDirs = directories.items.find((item) => item.name === parent);
      if (isFolder && parentDirs) {
        const folderItems = parentDirs.items;
        newDocs = folderItems.map((item) => parent + ""/"" + item.name);
      } else {
        newDocs = [filepath];
      }

      const combined = [...selectedFiles, ...newDocs];
      setSelectFiles([...new Set(combined)]);
    }
  };

  if (loading) {
    return (
      <>
        <div className=""p-6 flex h-full w-full max-h-[80vh] overflow-y-scroll"">
          <div className=""flex flex-col gap-y-1 w-full"">
            <p className=""text-slate-200 dark:text-stone-300 text-center"">
              loading workspace files
            </p>
          </div>
        </div>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600""></div>
      </>
    );
  }

  return (
    <>
      {showConfirmation && (
        <ConfirmationModal
          directories={directories}
          hideConfirm={() => setShowConfirmation(false)}
          additions={docChanges().adds}
          updateWorkspace={updateWorkspace}
        />
      )}
      <div className=""p-6 flex h-full w-full max-h-[80vh] overflow-y-scroll"">
        <div className=""flex flex-col gap-y-1 w-full"">
          {!hasFiles && (
            <div className=""mb-4 w-full gap-x-2 rounded-lg h-10 border bg-orange-200 border-orange-800 dark:bg-orange-300 text-orange-800 flex  items-center justify-center"">
              <AlertTriangle className=""h-6 w-6"" />
              <p className=""text-sm"">
                You don't have any files uploaded. Upload a file via the ""Upload
                Docs"" tab.
              </p>
            </div>
          )}

          <div className=""flex flex-col mb-2"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Select folders to add or remove from workspace.
            </p>
            <p className=""text-gray-800 dark:text-stone-400 text-xs italic"">
              {selectedFiles.length} documents in workspace selected.
            </p>
          </div>
          <div className=""w-full h-auto border border-slate-200 dark:border-stone-600 rounded-lg px-4 py-2"">
            {!!directories && (
              <Directory
                files={directories}
                toggleSelection={toggleSelection}
                isSelected={isSelected}
              />
            )}
          </div>
        </div>
      </div>
      <div
        className={`flex items-center ${
          canDelete ? ""justify-between"" : ""justify-end""
        } p-4 md:p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600`}
      >
        <button
          hidden={!canDelete}
          onClick={deleteWorkspace}
          type=""button""
          className=""border border-transparent text-gray-500 bg-white hover:bg-red-100 rounded-lg whitespace-nowrap text-sm font-medium px-5 py-2.5 hover:text-red-900 focus:z-10 dark:bg-transparent dark:text-gray-300 dark:hover:text-white dark:hover:bg-red-600""
        >
          Delete Workspace
        </button>

        <div className=""flex items-center"">
          <button
            disabled={saving}
            onClick={confirmChanges}
            type=""submit""
            className=""text-slate-200 bg-black-900 px-4 py-2 rounded-lg hover:bg-gray-900 whitespace-nowrap text-sm""
          >
            {saving ? ""Saving..."" : ""Confirm Changes""}
          </button>
        </div>
      </div>
    </>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR({ VAR }) { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR VAR = VAR.VAR.VAR((VAR) => VAR.VAR) || []; VAR VAR = VAR.VAR.VAR( (VAR) => VAR?.VAR?.VAR > 0 ); VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); VAR([...VAR]); VAR([...VAR]); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR VAR = VAR () => { VAR ( !VAR.VAR( `VAR VAR VAR VAR VAR VAR VAR ${VAR.VAR} VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.\VAR\VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR.` ) ) VAR VAR; VAR VAR.VAR(VAR.VAR); VAR.VAR === VAR ? (VAR.VAR = VAR.VAR()) : VAR.VAR.VAR(); }; VAR VAR = () => { VAR VAR = { VAR: [], VAR: [], }; VAR.VAR((VAR) => { VAR VAR = !!VAR.VAR((VAR) => VAR === VAR); VAR (!VAR) { VAR.VAR.VAR(VAR); } }); VAR.VAR((VAR) => { VAR VAR = !!VAR.VAR((VAR) => VAR === VAR); VAR (!VAR) { VAR.VAR.VAR(VAR); } }); VAR VAR; }; VAR VAR = (VAR) => { VAR.VAR(); VAR VAR = VAR(); VAR.VAR.VAR > 0 ? VAR(VAR) : VAR(VAR); }; VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR(VAR); VAR VAR = VAR(); VAR VAR.VAR(VAR.VAR, VAR); VAR(VAR); VAR.VAR.VAR(); }; VAR VAR = (VAR) => { VAR VAR = !VAR.VAR(""/""); VAR VAR ? VAR.VAR((VAR) => VAR.VAR(VAR.VAR(""/"")[0])) : VAR.VAR((VAR) => VAR.VAR(VAR)); }; VAR VAR = (VAR) => { VAR VAR = !VAR.VAR(""/""); VAR VAR = VAR ? VAR : VAR.VAR(""/"")[0]; VAR (VAR(VAR)) { VAR VAR = VAR ? VAR.VAR((VAR) => !VAR.VAR(VAR)) : VAR.VAR((VAR) => !VAR.VAR(VAR)); VAR([...VAR VAR(VAR)]); } VAR { VAR VAR = []; VAR VAR = VAR.VAR.VAR((VAR) => VAR.VAR === VAR); VAR (VAR && VAR) { VAR VAR = VAR.VAR; VAR = VAR.VAR((VAR) => VAR + ""/"" + VAR.VAR); } VAR { VAR = [VAR]; } VAR VAR = [...VAR, ...VAR]; VAR([...VAR VAR(VAR)]); } }; VAR (VAR) { VAR ( <> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR VAR-VAR-[80vh] VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR-VAR-200 VAR:VAR-VAR-300 VAR-VAR""> VAR VAR VAR </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""></VAR> </> ); } VAR ( <> {VAR && ( <VAR VAR={VAR} VAR={() => VAR(VAR)} VAR={VAR().VAR} VAR={VAR} /> )} <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR VAR-VAR-[80vh] VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR""> {!VAR && ( <VAR VAR=""VAR-4 VAR-VAR VAR-VAR-2 VAR-VAR VAR-10 VAR VAR-VAR-200 VAR-VAR-800 VAR:VAR-VAR-300 VAR-VAR-800 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-6 VAR-6"" /> <VAR VAR=""VAR-VAR""> VAR VAR'VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR ""VAR VAR"" VAR. </VAR> </VAR> )} <VAR VAR=""VAR VAR-VAR VAR-2""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-400 VAR-VAR VAR""> {VAR.VAR} VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR VAR-4 VAR-2""> {!!VAR && ( <VAR VAR={VAR} VAR={VAR} VAR={VAR} /> )} </VAR> </VAR> </VAR> <VAR VAR={`VAR VAR-VAR ${ VAR ? ""VAR-VAR"" : ""VAR-VAR"" } VAR-4 VAR:VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600`} > <VAR VAR={!VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600"" > VAR VAR </VAR> <VAR VAR=""VAR VAR-VAR""> <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-200 VAR-VAR-900 VAR-4 VAR-2 VAR-VAR VAR:VAR-VAR-900 VAR-VAR VAR-VAR"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> </VAR> </VAR> </> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/MangeWorkspace/Settings/index.jsx,"import React, { useState, useRef, useEffect } from ""react"";
import Workspace from ""../../../../models/workspace"";
import paths from ""../../../../utils/paths"";
import { chatPrompt } from ""../../../../utils/chat"";

export default function WorkspaceSettings({ workspace }) {
  const formEl = useRef(null);
  const [saving, setSaving] = useState(false);
  const [hasChanges, setHasChanges] = useState(false);
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(null);

  useEffect(() => {
    function setTimer() {
      if (success !== null) {
        setTimeout(() => {
          setSuccess(null);
        }, 3_000);
      }

      if (error !== null) {
        setTimeout(() => {
          setError(null);
        }, 3_000);
      }
    }
    setTimer();
  }, [success, error]);

  const handleUpdate = async (e) => {
    setError(null);
    setSuccess(null);
    setSaving(true);
    e.preventDefault();
    const data = {};
    const form = new FormData(formEl.current);
    for (var [key, value] of form.entries()) data[key] = value;
    const { workspace: updatedWorkspace, message } = await Workspace.update(
      workspace.slug,
      data
    );
    if (!!updatedWorkspace) {
      setSuccess(""Workspace updated!"");
    } else {
      setError(message);
    }
    setSaving(false);
  };

  const deleteWorkspace = async () => {
    if (
      !window.confirm(
        `You are about to delete your entire ${workspace.name} workspace. This will remove all vector embeddings on your vector database.\n\nThe original source files will remain untouched. This action is irreversible.`
      )
    )
      return false;
    await Workspace.delete(workspace.slug);
    workspace.slug === slug
      ? (window.location = paths.home())
      : window.location.reload();
  };

  return (
    <form ref={formEl} onSubmit={handleUpdate}>
      <div className=""p-6 flex h-full w-full max-h-[80vh] overflow-y-scroll"">
        <div className=""flex flex-col gap-y-1 w-full"">
          <div className=""flex flex-col mb-2"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Edit your workspace's settings
            </p>
          </div>

          <div className=""w-full flex flex-col gap-y-4"">
            <div>
              <input
                type=""text""
                disabled={true}
                defaultValue={workspace?.slug}
                className=""bg-gray-50 border disabled:bg-gray-400 disabled:text-gray-700 disabled:border-gray-400 disabled:dark:bg-stone-800 disabled:dark:border-stone-900 disabled:dark:text-stone-600 disabled:cursor-not-allowed border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                required={true}
                autoComplete=""off""
              />
            </div>

            <div>
              <div className=""flex flex-col gap-y-1 mb-4"">
                <label
                  htmlFor=""name""
                  className=""block text-sm font-medium text-gray-900 dark:text-white""
                >
                  Workspace Name
                </label>
                <p className=""text-xs text-gray-600 dark:text-stone-400"">
                  This will only change the display name of your workspace.
                </p>
              </div>
              <input
                name=""name""
                type=""text""
                minLength={2}
                maxLength={80}
                defaultValue={workspace?.name}
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                placeholder=""My Workspace""
                required={true}
                autoComplete=""off""
                onChange={() => setHasChanges(true)}
              />
            </div>

            <div>
              <div className=""flex flex-col gap-y-1 mb-4"">
                <label
                  htmlFor=""name""
                  className=""block text-sm font-medium text-gray-900 dark:text-white""
                >
                  LLM Temperature
                </label>
                <p className=""text-xs text-gray-600 dark:text-stone-400"">
                  This setting controls how ""random"" or dynamic your chat
                  responses will be.
                  <br />
                  The higher the number (2.0 maximum) the more random and
                  incoherent.
                  <br />
                  Recommended: 0.7
                </p>
              </div>
              <input
                name=""openAiTemp""
                type=""number""
                min={0.0}
                max={2.0}
                step={0.1}
                onWheel={(e) => e.target.blur()}
                defaultValue={workspace?.openAiTemp ?? 0.7}
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                placeholder=""0.7""
                required={true}
                autoComplete=""off""
                onChange={() => setHasChanges(true)}
              />
            </div>

            <div>
              <div className=""flex flex-col gap-y-1 mb-4"">
                <label
                  htmlFor=""name""
                  className=""block text-sm font-medium text-gray-900 dark:text-white""
                >
                  Prompt
                </label>
                <p className=""text-xs text-gray-600 dark:text-stone-400"">
                  The prompt that will be used on this workspace. Define the
                  context and instructions for the AI to generate a response.
                  You should to provide a carefully crafted prompt so the AI can
                  generate a relevant and accurate response.
                </p>
              </div>
              <textarea
                name=""openAiPrompt""
                maxLength={500}
                rows={5}
                defaultValue={chatPrompt(workspace)}
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                placeholder=""Given the following conversation, relevant context, and a follow up question, reply with an answer to the current question the user is asking. Return only your response to the question given the above information following the users instructions as needed.""
                required={true}
                wrap=""soft""
                autoComplete=""off""
                onChange={() => setHasChanges(true)}
              />
            </div>

            <div>
              <div className=""flex flex-col gap-y-1 mb-4"">
                <label
                  htmlFor=""name""
                  className=""block text-sm font-medium text-gray-900 dark:text-white""
                >
                  Chat History
                </label>
                <p className=""text-xs text-gray-600 dark:text-stone-400"">
                  The number of previous chats that will be included in the
                  response's short-term memory.
                  <br />
                  Recommend 20. Anything more than 45 is likely to lead to
                  continuous chat failures depending on message size.
                </p>
              </div>
              <input
                name=""openAiHistory""
                type=""number""
                min={1}
                max={45}
                step={1}
                onWheel={(e) => e.target.blur()}
                defaultValue={workspace?.openAiHistory ?? 20}
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                placeholder=""20""
                required={true}
                autoComplete=""off""
                onChange={() => setHasChanges(true)}
              />
            </div>
          </div>

          {error && (
            <p className=""text-red-600 dark:text-red-400 text-sm"">
              Error: {error}
            </p>
          )}
          {success && (
            <p className=""text-green-600 dark:text-green-400 text-sm"">
              Success: {success}
            </p>
          )}
        </div>
      </div>
      <div className=""flex items-center justify-between p-2 md:p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
        <button
          onClick={deleteWorkspace}
          type=""button""
          className=""border border-transparent text-gray-500 bg-white hover:bg-red-100 rounded-lg whitespace-nowrap text-sm font-medium px-5 py-2.5 hover:text-red-900 focus:z-10 dark:bg-transparent dark:text-gray-300 dark:hover:text-white dark:hover:bg-red-600""
        >
          Delete Workspace
        </button>
        {hasChanges && (
          <button
            type=""submit""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 whitespace-nowrap text-sm font-medium px-2 md:px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
          >
            {saving ? ""Updating..."" : ""Update workspace""}
          </button>
        )}
      </div>
    </form>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR } VAR ""../../../../VAR/VAR""; VAR VAR VAR VAR({ VAR }) { VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR() { VAR (VAR !== VAR) { VAR(() => { VAR(VAR); }, 3_000); } VAR (VAR !== VAR) { VAR(() => { VAR(VAR); }, 3_000); } } VAR(); }, [VAR, VAR]); VAR VAR = VAR (VAR) => { VAR(VAR); VAR(VAR); VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR: VAR, VAR } = VAR VAR.VAR( VAR.VAR, VAR ); VAR (!!VAR) { VAR(""VAR VAR!""); } VAR { VAR(VAR); } VAR(VAR); }; VAR VAR = VAR () => { VAR ( !VAR.VAR( `VAR VAR VAR VAR VAR VAR VAR ${VAR.VAR} VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.\VAR\VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR.` ) ) VAR VAR; VAR VAR.VAR(VAR.VAR); VAR.VAR === VAR ? (VAR.VAR = VAR.VAR()) : VAR.VAR.VAR(); }; VAR ( <VAR VAR={VAR} VAR={VAR}> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR VAR-VAR-[80vh] VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-2""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR'VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR={VAR} VAR={VAR?.VAR} VAR=""VAR-VAR-50 VAR VAR:VAR-VAR-400 VAR:VAR-VAR-700 VAR:VAR-VAR-400 VAR:VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-600 VAR:VAR-VAR-VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-4""> <VAR VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={2} VAR={80} VAR={VAR?.VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={VAR} VAR=""VAR"" VAR={() => VAR(VAR)} /> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-4""> <VAR VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-400""> VAR VAR VAR VAR ""VAR"" VAR VAR VAR VAR VAR VAR VAR. <VAR /> VAR VAR VAR VAR (2.0 VAR) VAR VAR VAR VAR VAR. <VAR /> VAR: 0.7 </VAR> </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={0.0} VAR={2.0} VAR={0.1} VAR={(VAR) => VAR.VAR.VAR()} VAR={VAR?.VAR ?? 0.7} VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""0.7"" VAR={VAR} VAR=""VAR"" VAR={() => VAR(VAR)} /> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-4""> <VAR VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR"" VAR={500} VAR={5} VAR={VAR(VAR)} VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR VAR VAR, VAR VAR, VAR VAR VAR VAR VAR, VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR} VAR=""VAR"" VAR=""VAR"" VAR={() => VAR(VAR)} /> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-4""> <VAR VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR'VAR VAR-VAR VAR. <VAR /> VAR 20. VAR VAR VAR 45 VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={1} VAR={45} VAR={1} VAR={(VAR) => VAR.VAR.VAR()} VAR={VAR?.VAR ?? 20} VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""20"" VAR={VAR} VAR=""VAR"" VAR={() => VAR(VAR)} /> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2 VAR:VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600"" > VAR VAR </VAR> {VAR && ( <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR VAR-2 VAR:VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> )} </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/MangeWorkspace/Upload/FileUploadProgress/index.jsx,"import React, { useState, useEffect, memo } from ""react"";
import Workspace from ""../../../../../models/workspace"";
import truncate from ""truncate"";
import { humanFileSize, milliToHms } from ""../../../../../utils/numbers"";
import { CheckCircle, XCircle } from ""react-feather"";
import { Grid } from ""react-loading-icons"";

function FileUploadProgressComponent({
  slug,
  file,
  rejected = false,
  reason = null,
  onUploadSuccess,
  onUploadError,
}) {
  const [timerMs, setTimerMs] = useState(10);
  const [status, setStatus] = useState(file?.rejected ? ""uploading"" : ""failed"");

  useEffect(() => {
    async function uploadFile() {
      const start = Number(new Date());
      const formData = new FormData();
      formData.append(""file"", file, file.name);
      const timer = setInterval(() => {
        setTimerMs(Number(new Date()) - start);
      }, 100);

      // Chunk streaming not working in production so we just sit and wait
      const { response, data } = await Workspace.uploadFile(slug, formData);
      if (!response.ok) {
        setStatus(""failed"");
        clearInterval(timer);
        onUploadError(data.error);
      } else {
        setStatus(""complete"");
        clearInterval(timer);
        onUploadSuccess();
      }
    }
    !!file && !rejected && uploadFile();
  }, []);

  if (rejected) {
    return (
      <div className=""w-fit px-2 py-2 flex items-center gap-x-4 rounded-lg bg-blue-100 border-blue-600 dark:bg-stone-800 bg-opacity-50 border dark:border-stone-600"">
        <div className=""w-6 h-6"">
          <XCircle className=""w-6 h-6 stroke-white bg-red-500 rounded-full p-1 w-full h-full"" />
        </div>
        <div className=""flex flex-col"">
          <p className=""text-black dark:text-stone-200 text-sm font-mono overflow-x-scroll"">
            {truncate(file.name, 30)}
          </p>
          <p className=""text-red-700 dark:text-red-400 text-xs font-mono"">
            {reason}
          </p>
        </div>
      </div>
    );
  }

  return (
    <div className=""w-fit px-2 py-2 flex items-center gap-x-4 rounded-lg bg-blue-100 border-blue-600 dark:bg-stone-800 bg-opacity-50 border dark:border-stone-600"">
      <div className=""w-6 h-6"">
        {status !== ""complete"" ? (
          <Grid className=""w-6 h-6 grid-loader"" />
        ) : (
          <CheckCircle className=""w-6 h-6 stroke-white bg-green-500 rounded-full p-1 w-full h-full"" />
        )}
      </div>
      <div className=""flex flex-col"">
        <p className=""text-black dark:text-stone-200 text-sm font-mono overflow-x-scroll"">
          {truncate(file.name, 30)}
        </p>
        <p className=""text-gray-700 dark:text-stone-400 text-xs font-mono"">
          {humanFileSize(file.size)} | {milliToHms(timerMs)}
        </p>
      </div>
    </div>
  );
}

export default memo(FileUploadProgressComponent);",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../../VAR/VAR""; VAR VAR VAR ""VAR""; VAR { VAR, VAR } VAR ""../../../../../VAR/VAR""; VAR { VAR, VAR } VAR ""VAR-VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR({ VAR, VAR, VAR = VAR, VAR = VAR, VAR, VAR, }) { VAR [VAR, VAR] = VAR(10); VAR [VAR, VAR] = VAR(VAR?.VAR ? ""VAR"" : ""VAR""); VAR(() => { VAR VAR VAR() { VAR VAR = VAR(VAR VAR()); VAR VAR = VAR VAR(); VAR.VAR(""VAR"", VAR, VAR.VAR); VAR VAR = VAR(() => { VAR(VAR(VAR VAR()) - VAR); }, 100);  VAR { VAR, VAR } = VAR VAR.VAR(VAR, VAR); VAR (!VAR.VAR) { VAR(""VAR""); VAR(VAR); VAR(VAR.VAR); } VAR { VAR(""VAR""); VAR(VAR); VAR(); } } !!VAR && !VAR && VAR(); }, []); VAR (VAR) { VAR ( <VAR VAR=""VAR-VAR VAR-2 VAR-2 VAR VAR-VAR VAR-VAR-4 VAR-VAR VAR-VAR-100 VAR-VAR-600 VAR:VAR-VAR-800 VAR-VAR-50 VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-6 VAR-6""> <VAR VAR=""VAR-6 VAR-6 VAR-VAR VAR-VAR-500 VAR-VAR VAR-1 VAR-VAR VAR-VAR"" /> </VAR> <VAR VAR=""VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR-VAR""> {VAR(VAR.VAR, 30)} </VAR> <VAR VAR=""VAR-VAR-700 VAR:VAR-VAR-400 VAR-VAR VAR-VAR""> {VAR} </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR=""VAR-VAR VAR-2 VAR-2 VAR VAR-VAR VAR-VAR-4 VAR-VAR VAR-VAR-100 VAR-VAR-600 VAR:VAR-VAR-800 VAR-VAR-50 VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-6 VAR-6""> {VAR !== ""VAR"" ? ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR"" /> ) : ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR VAR-VAR-500 VAR-VAR VAR-1 VAR-VAR VAR-VAR"" /> )} </VAR> <VAR VAR=""VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR-VAR""> {VAR(VAR.VAR, 30)} </VAR> <VAR VAR=""VAR-VAR-700 VAR:VAR-VAR-400 VAR-VAR VAR-VAR""> {VAR(VAR.VAR)} | {VAR(VAR)} </VAR> </VAR> </VAR> ); } VAR VAR VAR(VAR); ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/MangeWorkspace/Upload/index.jsx,"import React, { useState, useCallback, useEffect } from ""react"";
import Workspace from ""../../../../models/workspace"";
import paths from ""../../../../utils/paths"";
import FileUploadProgress from ""./FileUploadProgress"";
import { useDropzone } from ""react-dropzone"";
import { v4 } from ""uuid"";
import System from ""../../../../models/system"";
import { Frown } from ""react-feather"";
import showToast from ""../../../../utils/toast"";

export default function UploadToWorkspace({ workspace, fileTypes }) {
  const [ready, setReady] = useState(null);
  const [files, setFiles] = useState([]);

  const handleUploadSuccess = () => {
    showToast(""File uploaded successfully"", ""success"");
  };

  const handleUploadError = (message) => {
    showToast(`Error uploading file: ${message}`, ""error"");
  };

  const onDrop = useCallback(async (acceptedFiles, rejections) => {
    const newAccepted = acceptedFiles.map((file) => {
      return {
        uid: v4(),
        file,
      };
    });
    const newRejected = rejections.map((file) => {
      return {
        uid: v4(),
        file: file.file,
        rejected: true,
        reason: file.errors[0].code,
      };
    });

    setFiles([...files, ...newAccepted, ...newRejected]);
  }, []);

  useEffect(() => {
    async function checkProcessorOnline() {
      const online = await System.checkDocumentProcessorOnline();
      setReady(online);
    }
    checkProcessorOnline();
  }, []);

  const { getRootProps, getInputProps } = useDropzone({
    onDrop,
    accept: {
      ...fileTypes,
    },
  });

  const deleteWorkspace = async () => {
    if (
      !window.confirm(
        `You are about to delete your entire ${workspace.name} workspace. This will remove all vector embeddings on your vector database.\n\nThe original source files will remain untouched. This action is irreversible.`
      )
    )
      return false;
    await Workspace.delete(workspace.slug);
    workspace.slug === slug
      ? (window.location = paths.home())
      : window.location.reload();
  };

  if (ready === null) {
    return (
      <ModalWrapper deleteWorkspace={deleteWorkspace}>
        <div className=""outline-none transition-all cursor-wait duration-300 bg-stone-400 bg-opacity-20 flex h-[20rem] overflow-y-scroll overflow-x-hidden rounded-lg"">
          <div className=""flex flex-col gap-y-1 w-full h-full items-center justify-center"">
            <p className=""text-slate-400 text-xs"">
              Checking document processor is online - please wait.
            </p>
            <p className=""text-slate-400 text-xs"">
              this should only take a few moments.
            </p>
          </div>
        </div>
      </ModalWrapper>
    );
  }

  if (ready === false) {
    return (
      <ModalWrapper deleteWorkspace={deleteWorkspace}>
        <div className=""outline-none transition-all duration-300 bg-red-200 flex h-[20rem] overflow-y-scroll overflow-x-hidden rounded-lg"">
          <div className=""flex flex-col gap-y-1 w-full h-full items-center justify-center md:px-0 px-2"">
            <Frown className=""w-8 h-8 text-red-800"" />
            <p className=""text-red-800 text-xs text-center"">
              Document processor is offline.
            </p>
            <p className=""text-red-800 text-[10px] md:text-xs text-center"">
              you cannot upload documents from the UI right now
            </p>
          </div>
        </div>
      </ModalWrapper>
    );
  }

  return (
    <ModalWrapper deleteWorkspace={deleteWorkspace}>
      <div
        {...getRootProps()}
        className=""outline-none transition-all cursor-pointer duration-300 hover:bg-opacity-40 bg-stone-400 bg-opacity-20 flex h-[20rem] overflow-y-scroll overflow-x-hidden rounded-lg""
      >
        <input {...getInputProps()} />
        {files.length === 0 ? (
          <div className=""flex flex-col items-center justify-center w-full h-full"">
            <div className=""flex flex-col items-center justify-center pt-5 pb-6"">
              <svg
                aria-hidden=""true""
                className=""w-10 h-10 mb-3 text-gray-600 dark:text-slate-300""
                fill=""none""
                stroke=""currentColor""
                viewBox=""0 0 24 24""
                xmlns=""http://www.w3.org/2000/svg""
              >
                <path
                  strokeLinecap=""round""
                  strokeLinejoin=""round""
                  strokeWidth=""2""
                  d=""M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12""
                ></path>
              </svg>
              <p className=""mb-2 text-sm text-gray-600 dark:text-slate-300"">
                <span className=""font-semibold"">Click to upload</span> or drag
                and drop
              </p>
              <p className=""text-xs text-gray-600 dark:text-slate-300""></p>
            </div>
          </div>
        ) : (
          <div className=""flex flex-col w-full p-4 gap-y-2"">
            {files.map((file) => (
              <FileUploadProgress
                key={file.uid}
                file={file.file}
                slug={workspace.slug}
                rejected={file?.rejected}
                reason={file?.reason}
                onUploadSuccess={handleUploadSuccess}
                onUploadError={handleUploadError}
              />
            ))}
          </div>
        )}
      </div>
      <p className=""text-gray-600 dark:text-stone-400 text-xs "">
        supported file extensions are{"" ""}
        <code className=""text-xs bg-gray-200 text-gray-800 dark:bg-stone-800 dark:text-slate-400 font-mono rounded-sm px-1"">
          {Object.values(fileTypes).flat().join("" "")}
        </code>
      </p>
    </ModalWrapper>
  );
}

function ModalWrapper({ deleteWorkspace, children }) {
  return (
    <>
      <div className=""p-6 flex h-full w-full max-h-[80vh] overflow-y-scroll"">
        <div className=""flex flex-col gap-y-1 w-full"">
          <div className=""flex flex-col mb-2"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Add documents to your workspace.
            </p>
            <p className=""text-gray-600 dark:text-stone-400 text-xs "">
              These files will be uploaded to the document processor running on
              this AnythingLLM instance. These files are not sent or shared with
              a third party.
            </p>
            {process.env.NODE_ENV !== ""production"" && (
              <div className=""mt-2 text-gray-600 dark:text-stone-400 text-xs"">
                <div className=""w-[1px] bg-stone-400 w-full"" />
                Local Environment Notice: You must have the{"" ""}
                <code className=""text-xs bg-gray-200 text-gray-800 dark:bg-stone-800 dark:text-slate-400 font-mono rounded-sm px-1"">
                  python document processor app
                </code>{"" ""}
                running for these documents to process.
              </div>
            )}
          </div>
          {children}
        </div>
      </div>
      <div className=""flex items-center justify-between p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
        <button
          onClick={deleteWorkspace}
          type=""button""
          className=""border border-transparent text-gray-500 bg-white hover:bg-red-100 rounded-lg text-sm font-medium px-5 py-2.5 hover:text-red-900 focus:z-10 dark:bg-transparent dark:text-gray-300 dark:hover:text-white dark:hover:bg-red-600""
        >
          Delete Workspace
        </button>
      </div>
    </>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR VAR({ VAR, VAR }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR VAR = () => { VAR(""VAR VAR VAR"", ""VAR""); }; VAR VAR = (VAR) => { VAR(`VAR VAR VAR: ${VAR}`, ""VAR""); }; VAR VAR = VAR(VAR (VAR, VAR) => { VAR VAR = VAR.VAR((VAR) => { VAR { VAR: VAR(), VAR, }; }); VAR VAR = VAR.VAR((VAR) => { VAR { VAR: VAR(), VAR: VAR.VAR, VAR: VAR, VAR: VAR.VAR[0].VAR, }; }); VAR([...VAR, ...VAR, ...VAR]); }, []); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); } VAR(); }, []); VAR { VAR, VAR } = VAR({ VAR, VAR: { ...VAR, }, }); VAR VAR = VAR () => { VAR ( !VAR.VAR( `VAR VAR VAR VAR VAR VAR VAR ${VAR.VAR} VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.\VAR\VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR.` ) ) VAR VAR; VAR VAR.VAR(VAR.VAR); VAR.VAR === VAR ? (VAR.VAR = VAR.VAR()) : VAR.VAR.VAR(); }; VAR (VAR === VAR) { VAR ( <VAR VAR={VAR}> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-300 VAR-VAR-400 VAR-VAR-20 VAR VAR-[20rem] VAR-VAR-VAR VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR-400 VAR-VAR""> VAR VAR VAR VAR VAR - VAR VAR. </VAR> <VAR VAR=""VAR-VAR-400 VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> </VAR> ); } VAR (VAR === VAR) { VAR ( <VAR VAR={VAR}> <VAR VAR=""VAR-VAR VAR-VAR VAR-300 VAR-VAR-200 VAR VAR-[20rem] VAR-VAR-VAR VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR:VAR-0 VAR-2""> <VAR VAR=""VAR-8 VAR-8 VAR-VAR-800"" /> <VAR VAR=""VAR-VAR-800 VAR-VAR VAR-VAR""> VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR-VAR-800 VAR-[10px] VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR </VAR> </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR={VAR}> <VAR {...VAR()} VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-300 VAR:VAR-VAR-40 VAR-VAR-400 VAR-VAR-20 VAR VAR-[20rem] VAR-VAR-VAR VAR-VAR-VAR VAR-VAR"" > <VAR {...VAR()} /> {VAR.VAR === 0 ? ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-5 VAR-6""> <VAR VAR-VAR=""VAR"" VAR=""VAR-10 VAR-10 VAR-3 VAR-VAR-600 VAR:VAR-VAR-300"" VAR=""VAR"" VAR=""VAR"" VAR=""0 0 24 24"" VAR=""VAR: > <VAR VAR=""VAR"" VAR=""VAR"" VAR=""2"" VAR=""VAR 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"" ></VAR> </VAR> <VAR VAR=""VAR-2 VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300""> <VAR VAR=""VAR-VAR"">VAR VAR VAR</VAR> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300""></VAR> </VAR> </VAR> ) : ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-2""> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR.VAR} VAR={VAR.VAR} VAR={VAR?.VAR} VAR={VAR?.VAR} VAR={VAR} VAR={VAR} /> ))} </VAR> )} </VAR> <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR ""> VAR VAR VAR VAR{"" ""} <VAR VAR=""VAR-VAR VAR-VAR-200 VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-400 VAR-VAR VAR-VAR VAR-1""> {VAR.VAR(VAR).VAR().VAR("" "")} </VAR> </VAR> </VAR> ); } VAR VAR({ VAR, VAR }) { VAR ( <> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR VAR-VAR-[80vh] VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-2""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> {VAR.VAR.VAR !== ""VAR"" && ( <VAR VAR=""VAR-2 VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> <VAR VAR=""VAR-[1px] VAR-VAR-400 VAR-VAR"" /> VAR VAR VAR: VAR VAR VAR VAR{"" ""} <VAR VAR=""VAR-VAR VAR-VAR-200 VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-400 VAR-VAR VAR-VAR VAR-1""> VAR VAR VAR VAR </VAR>{"" ""} VAR VAR VAR VAR VAR VAR. </VAR> )} </VAR> {VAR} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR-VAR VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600"" > VAR VAR </VAR> </VAR> </> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/MangeWorkspace/index.jsx,"import React, { useState, useEffect } from ""react"";
import { Archive, Sliders, UploadCloud, X } from ""react-feather"";
import DocumentSettings from ""./Documents"";
import WorkspaceSettings from ""./Settings"";
import { useParams } from ""react-router-dom"";
import Workspace from ""../../../models/workspace"";
import System from ""../../../models/system"";
import UploadToWorkspace from ""./Upload"";

const TABS = {
  documents: DocumentSettings,
  settings: WorkspaceSettings,
  upload: UploadToWorkspace,
};

const noop = () => false;
export default function ManageWorkspace({
  hideModal = noop,
  providedSlug = null,
}) {
  const { slug } = useParams();
  const [selectedTab, setSelectedTab] = useState(""documents"");
  const [workspace, setWorkspace] = useState(null);
  const [fileTypes, setFileTypes] = useState(null);

  useEffect(() => {
    async function checkSupportedFiletypes() {
      const acceptedTypes = await System.acceptedDocumentTypes();
      setFileTypes(acceptedTypes ?? {});
    }
    checkSupportedFiletypes();
  }, []);

  useEffect(() => {
    async function fetchWorkspace() {
      const workspace = await Workspace.bySlug(providedSlug ?? slug);
      setWorkspace(workspace);
    }
    fetchWorkspace();
  }, [selectedTab, slug]);

  if (!workspace) return null;

  const Component = TABS[selectedTab || ""documents""];
  return (
    <div className=""fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] h-full bg-black bg-opacity-50 flex items-center justify-center"">
      <div
        className=""flex fixed top-0 left-0 right-0 w-full h-full""
        onClick={hideModal}
      />
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex flex-col gap-y-1 border-b dark:border-gray-600 px-4 pt-4 "">
            <div className=""flex items-start justify-between rounded-t "">
              <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
                Update ""{workspace.name}""
              </h3>
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
                data-modal-hide=""staticModal""
              >
                <X className=""text-gray-300 text-lg"" />
              </button>
            </div>
            <WorkspaceSettingTabs
              selectedTab={selectedTab}
              changeTab={setSelectedTab}
            />
          </div>
          <Component
            hideModal={hideModal}
            workspace={workspace}
            fileTypes={fileTypes}
          />
        </div>
      </div>
    </div>
  );
}

function WorkspaceSettingTabs({ selectedTab, changeTab }) {
  return (
    <div>
      <ul className=""flex md:flex-wrap overflow-x-scroll no-scroll -mb-px text-sm gap-x-2 font-medium text-center text-gray-500 dark:text-gray-400"">
        <WorkspaceTab
          active={selectedTab === ""documents""}
          displayName=""Documents""
          tabName=""documents""
          icon={<Archive className=""h-4 w-4 flex-shrink-0"" />}
          onClick={changeTab}
        />
        <WorkspaceTab
          active={selectedTab === ""upload""}
          displayName=""Upload Docs""
          tabName=""upload""
          icon={<UploadCloud className=""h-4 w-4 flex-shrink-0"" />}
          onClick={changeTab}
        />
        <WorkspaceTab
          active={selectedTab === ""settings""}
          displayName=""Settings""
          tabName=""settings""
          icon={<Sliders className=""h-4 w-4 flex-shrink-0"" />}
          onClick={changeTab}
        />
      </ul>
    </div>
  );
}

function WorkspaceTab({
  active = false,
  displayName,
  tabName,
  icon = """",
  onClick,
}) {
  const classes = active
    ? ""text-blue-600 border-blue-600 active dark:text-blue-400 dark:border-blue-400 bg-blue-500 bg-opacity-5""
    : ""border-transparent hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300"";
  return (
    <li className=""mr-2"">
      <button
        disabled={active}
        onClick={() => onClick(tabName)}
        className={
          ""flex items-center gap-x-1 p-4 border-b-2 rounded-t-lg group whitespace-nowrap "" +
          classes
        }
      >
        {icon} {displayName}
      </button>
    </li>
  );
}

export function useManageWorkspaceModal() {
  const [showing, setShowing] = useState(false);
  const showModal = () => {
    setShowing(true);
  };
  const hideModal = () => {
    setShowing(false);
  };

  return { showing, showModal, hideModal };
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR = { VAR: VAR, VAR: VAR, VAR: VAR, }; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR = VAR, }) { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(""VAR""); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR ?? {}); } VAR(); }, []); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(VAR ?? VAR); VAR(VAR); } VAR(); }, [VAR, VAR]); VAR (!VAR) VAR VAR; VAR VAR = VAR[VAR || ""VAR""]; VAR ( <VAR VAR=""VAR VAR-0 VAR-0 VAR-0 VAR-50 VAR-VAR VAR-4 VAR-VAR-VAR VAR-VAR-VAR VAR:VAR-0 VAR-[VAR(100%-1rem)] VAR-VAR VAR-VAR VAR-VAR-50 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR VAR-0 VAR-0 VAR-0 VAR-VAR VAR-VAR"" VAR={VAR} /> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR:VAR-VAR-600 VAR-4 VAR-4 ""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR ""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR ""{VAR.VAR}"" </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR} VAR={VAR} /> </VAR> <VAR VAR={VAR} VAR={VAR} VAR={VAR} /> </VAR> </VAR> </VAR> ); } VAR VAR({ VAR, VAR }) { VAR ( <VAR> <VAR VAR=""VAR VAR:VAR-VAR VAR-VAR-VAR VAR-VAR -VAR-VAR VAR-VAR VAR-VAR-2 VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> <VAR VAR={VAR === ""VAR""} VAR=""VAR"" VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR} /> <VAR VAR={VAR === ""VAR""} VAR=""VAR VAR"" VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR} /> <VAR VAR={VAR === ""VAR""} VAR=""VAR"" VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR} /> </VAR> </VAR> ); } VAR VAR({ VAR = VAR, VAR, VAR, VAR = """", VAR, }) { VAR VAR = VAR ? ""VAR-VAR-600 VAR-VAR-600 VAR VAR:VAR-VAR-400 VAR:VAR-VAR-400 VAR-VAR-500 VAR-VAR-5"" : ""VAR-VAR VAR:VAR-VAR-600 VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-300""; VAR ( <VAR VAR=""VAR-2""> <VAR VAR={VAR} VAR={() => VAR(VAR)} VAR={ ""VAR VAR-VAR VAR-VAR-1 VAR-4 VAR-VAR-2 VAR-VAR-VAR VAR VAR-VAR "" + VAR } > {VAR} {VAR} </VAR> </VAR> ); } VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR(VAR); }; VAR VAR = () => { VAR(VAR); }; VAR { VAR, VAR, VAR }; } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/NewWorkspace.jsx,"import React, { useRef, useState } from ""react"";
import { X } from ""react-feather"";
import Workspace from ""../../models/workspace"";

const noop = () => false;
export default function NewWorkspaceModal({ hideModal = noop }) {
  const formEl = useRef(null);
  const [error, setError] = useState(null);
  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {};
    const form = new FormData(formEl.current);
    for (var [key, value] of form.entries()) data[key] = value;
    const { workspace, message } = await Workspace.new(data);
    if (!!workspace) window.location.reload();
    setError(message);
  };

  return (
    <div className=""fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] h-full bg-black bg-opacity-50 flex items-center justify-center"">
      <div
        className=""flex fixed top-0 left-0 right-0 w-full h-full""
        onClick={hideModal}
      />
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Create a New Workspace
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form ref={formEl} onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""name""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Workspace Name
                  </label>
                  <input
                    name=""name""
                    type=""text""
                    id=""name""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""My Workspace""
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creating a workspace you will be able to add and remove
                  documents from it.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Create Workspace
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  );
}

export function useNewWorkspaceModal() {
  const [showing, setShowing] = useState(false);
  const showModal = () => {
    setShowing(true);
  };
  const hideModal = () => {
    setShowing(false);
  };

  return { showing, showModal, hideModal };
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR }) { VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!!VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR=""VAR VAR-0 VAR-0 VAR-0 VAR-50 VAR-VAR VAR-4 VAR-VAR-VAR VAR-VAR-VAR VAR:VAR-0 VAR-[VAR(100%-1rem)] VAR-VAR VAR-VAR VAR-VAR-50 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR VAR-0 VAR-0 VAR-0 VAR-VAR VAR-VAR"" VAR={VAR} /> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR} VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={VAR} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR(VAR); }; VAR VAR = () => { VAR(VAR); }; VAR { VAR, VAR, VAR }; } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/Password/MultiUserAuth.jsx,"import React, { useState } from ""react"";
import System from ""../../../models/system"";
import { AUTH_TOKEN, AUTH_USER } from ""../../../utils/constants"";

export default function MultiUserAuth() {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const handleLogin = async (e) => {
    setError(null);
    setLoading(true);
    e.preventDefault();
    const data = {};

    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { valid, user, token, message } = await System.requestToken(data);
    if (valid && !!token && !!user) {
      window.localStorage.setItem(AUTH_USER, JSON.stringify(user));
      window.localStorage.setItem(AUTH_TOKEN, token);
      window.location.reload();
    } else {
      setError(message);
      setLoading(false);
    }
    setLoading(false);
  };

  return (
    <form onSubmit={handleLogin}>
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
          <h3 className=""text-md md:text-xl font-semibold text-gray-900 dark:text-white"">
            This instance is password protected.
          </h3>
        </div>
        <div className=""p-6 space-y-6 flex h-full w-full"">
          <div className=""w-full flex flex-col gap-y-4"">
            <div>
              <label
                htmlFor=""username""
                className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
              >
                Instance Username
              </label>
              <input
                name=""username""
                type=""text""
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                required={true}
                autoComplete=""off""
              />
            </div>

            <div>
              <label
                htmlFor=""password""
                className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
              >
                Instance Password
              </label>
              <input
                name=""password""
                type=""password""
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                required={true}
                autoComplete=""off""
              />
            </div>
            {error && (
              <p className=""text-red-600 dark:text-red-400 text-sm"">
                Error: {error}
              </p>
            )}
            <p className=""text-gray-800 dark:text-slate-200 md:text-sm text-xs"">
              You will only have to enter this password once. After successful
              login it will be stored in your browser.
            </p>
          </div>
        </div>
        <div className=""flex items-center justify-end p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            disabled={loading}
            type=""submit""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            {loading ? ""Validating..."" : ""Submit""}
          </button>
        </div>
      </div>
    </form>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR { VAR, VAR } VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR, VAR, VAR } = VAR VAR.VAR(VAR); VAR (VAR && !!VAR && !!VAR) { VAR.VAR.VAR(VAR, VAR.VAR(VAR)); VAR.VAR.VAR(VAR, VAR); VAR.VAR.VAR(); } VAR { VAR(VAR); VAR(VAR); } VAR(VAR); }; VAR ( <VAR VAR={VAR}> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR:VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={VAR} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR""} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/Password/SingleUserAuth.jsx,"import React, { useState } from ""react"";
import System from ""../../../models/system"";
import { AUTH_TOKEN } from ""../../../utils/constants"";

export default function SingleUserAuth() {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const handleLogin = async (e) => {
    setError(null);
    setLoading(true);
    e.preventDefault();
    const data = {};

    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { valid, token, message } = await System.requestToken(data);
    if (valid && !!token) {
      window.localStorage.setItem(AUTH_TOKEN, token);
      window.location.reload();
    } else {
      setError(message);
      setLoading(false);
    }
    setLoading(false);
  };

  return (
    <form onSubmit={handleLogin}>
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
          <h3 className=""text-md md:text-xl font-semibold text-gray-900 dark:text-white"">
            This workspace is password protected.
          </h3>
        </div>
        <div className=""p-6 space-y-6 flex h-full w-full"">
          <div className=""w-full flex flex-col gap-y-4"">
            <div>
              <label
                htmlFor=""password""
                className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
              >
                Workspace Password
              </label>
              <input
                name=""password""
                type=""password""
                id=""password""
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                required={true}
                autoComplete=""off""
              />
            </div>
            {error && (
              <p className=""text-red-600 dark:text-red-400 text-sm"">
                Error: {error}
              </p>
            )}
            <p className=""text-gray-800 dark:text-slate-200 md:text-sm text-xs"">
              You will only have to enter this password once. After successful
              login it will be stored in your browser.
            </p>
          </div>
        </div>
        <div className=""flex items-center justify-end p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            disabled={loading}
            type=""submit""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            {loading ? ""Validating..."" : ""Submit""}
          </button>
        </div>
      </div>
    </form>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR, VAR } = VAR VAR.VAR(VAR); VAR (VAR && !!VAR) { VAR.VAR.VAR(VAR, VAR); VAR.VAR.VAR(); } VAR { VAR(VAR); VAR(VAR); } VAR(VAR); }; VAR ( <VAR VAR={VAR}> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR:VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={VAR} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR""} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/Settings/ApiKey/index.jsx,"import { useEffect, useState } from ""react"";
import System from ""../../../../models/system"";
import PreLoader from ""../../../Preloader"";
import paths from ""../../../../utils/paths"";
import showToast from ""../../../../utils/toast"";
import { CheckCircle, Copy, RefreshCcw, Trash } from ""react-feather"";

export default function ApiKey() {
  const [loading, setLoading] = useState(true);
  const [generating, setGenerating] = useState(false);
  const [copied, setCopied] = useState(false);
  const [deleting, setDeleting] = useState(false);
  const [apiKey, setApiKey] = useState(null);

  useEffect(() => {
    async function fetchExistingApiKey() {
      const { apiKey: _apiKey } = await System.getApiKey();
      setApiKey(_apiKey);
      setLoading(false);
    }
    fetchExistingApiKey();
  }, []);

  const generateApiKey = async () => {
    setGenerating(true);
    const isRefresh = !!apiKey;
    const { apiKey: newApiKey, error } = await System.generateApiKey();
    if (!!error) {
      showToast(error, ""error"");
    } else {
      showToast(
        isRefresh ? ""API key regenerated!"" : ""API key generated!"",
        ""info""
      );
      setApiKey(newApiKey);
    }
    setGenerating(false);
  };

  const removeApiKey = async () => {
    setDeleting(true);
    const ok = await System.deleteApiKey();
    if (ok) {
      showToast(""API key deleted from instance."", ""info"");
      setApiKey(null);
    } else {
      showToast(""API key could not be deleted."", ""error"");
    }
    setDeleting(false);
  };

  const copyToClipboard = async () => {
    window.navigator.clipboard.writeText(apiKey.secret);
    showToast(""API key copied to clipboard!"", ""info"");
    setCopied(true);
    setTimeout(() => {
      setCopied(false);
    }, 1200);
  };

  if (loading) {
    return (
      <div className=""relative w-full w-full max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between px-6 py-4"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Generate an API Key for your AnythingLLM instance.
            </p>
          </div>
          <div className=""px-1 md:px-8 pb-10 "">
            <PreLoader />
          </div>
        </div>
      </div>
    );
  }

  if (!apiKey) {
    return (
      <div className=""relative w-full w-full max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between px-6 py-4"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Generate an API Key for your AnythingLLM instance.
            </p>
          </div>
          <div className=""md:px-8 pb-10 "">
            <div className=""flex flex-col gap-y-1 text-gray-800 dark:text-stone-200 mb-2"">
              <p>
                No api key for this instance exists. Create one by clicking the
                button below.
              </p>
              <a
                href={paths.apiDocs()}
                target=""_blank""
                className=""dark:text-blue-300 text-blue-600 hover:underline""
              >
                View endpoint documentation &rarr;
              </a>
            </div>
            <button
              disabled={generating}
              type=""button""
              onClick={generateApiKey}
              className=""w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
            >
              {generating ? ""Generating..."" : ""Generate new API key""}
            </button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex flex-col items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Use this API key for interacting with your AnythingLLM instance
            programmatically.
          </p>
          <a
            href={paths.apiDocs()}
            target=""_blank""
            className=""dark:text-blue-300 text-blue-600 hover:underline""
          >
            View endpoint documentation &rarr;
          </a>
        </div>

        <div className=""md:px-8 pb-10"">
          <div className=""mb-6"">
            <div className=""flex flex-col md:flex-row items-center"">
              <div className=""flex md:flex-row flex-col gap-y-2 w-full gap-x-2 items-center px-4 md:px-0"">
                <input
                  key={apiKey.secret}
                  type=""text""
                  disabled={true}
                  className=""w-full md:w-1/2 bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                  defaultValue={apiKey.secret}
                  autoComplete=""off""
                  spellCheck={false}
                />
                <button
                  onClick={copyToClipboard}
                  disabled={copied}
                  className=""w-full flex justify-center items-center gap-x-2 md:w-fit disabled:bg-green-300 dark:disabled:bg-green-600 bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200 group hover:bg-gray-100 dark:hover:bg-stone-600""
                >
                  {copied ? (
                    <CheckCircle className=""stroke-green-800 dark:stroke-green-300"" />
                  ) : (
                    <Copy />
                  )}
                  <p className=""block md:hidden text-base"">Copy API Key</p>
                </button>
                <button
                  onClick={() => {
                    if (
                      !confirm(
                        ""Are you sure you want to refresh the API key? The old key will no longer work!""
                      )
                    )
                      return false;
                    generateApiKey();
                  }}
                  disabled={generating}
                  className=""w-full flex justify-center items-center gap-x-2 md:w-fit disabled:bg-green-300 dark:disabled:bg-green-600 bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200 group hover:bg-gray-100 dark:hover:bg-stone-600""
                >
                  <RefreshCcw />
                  <p className=""block md:hidden text-base"">
                    Regenerate API Key
                  </p>
                </button>
                <button
                  onClick={() => {
                    if (
                      !confirm(
                        ""Are you sure you want to delete the API key? All API keys will be deleted.""
                      )
                    )
                      return false;
                    removeApiKey();
                  }}
                  disabled={deleting}
                  className=""w-full flex justify-center items-center gap-x-2 md:w-fit disabled:bg-red-300 dark:disabled:bg-red-600 border border-red-500 text-red-900 placeholder-red-500 text-sm rounded-lg dark:bg-transparent focus:border-red-500 block p-2.5 dark:text-red-200 dark:placeholder-red-500 dark:border-red-200 group hover:bg-red-100 dark:hover:bg-red-600""
                >
                  <Trash />
                  <p className=""block md:hidden text-base"">Delete API Key</p>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR, VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR VAR() { VAR { VAR: VAR } = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR VAR = VAR () => { VAR(VAR); VAR VAR = !!VAR; VAR { VAR: VAR, VAR } = VAR VAR.VAR(); VAR (!!VAR) { VAR(VAR, ""VAR""); } VAR { VAR( VAR ? ""VAR VAR VAR!"" : ""VAR VAR VAR!"", ""VAR"" ); VAR(VAR); } VAR(VAR); }; VAR VAR = VAR () => { VAR(VAR); VAR VAR = VAR VAR.VAR(); VAR (VAR) { VAR(""VAR VAR VAR VAR VAR."", ""VAR""); VAR(VAR); } VAR { VAR(""VAR VAR VAR VAR VAR VAR."", ""VAR""); } VAR(VAR); }; VAR VAR = VAR () => { VAR.VAR.VAR.VAR(VAR.VAR); VAR(""VAR VAR VAR VAR VAR!"", ""VAR""); VAR(VAR); VAR(() => { VAR(VAR); }, 1200); }; VAR (VAR) { VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-1 VAR:VAR-8 VAR-10 ""> <VAR /> </VAR> </VAR> </VAR> ); } VAR (!VAR) { VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR:VAR-8 VAR-10 ""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR-800 VAR:VAR-VAR-200 VAR-2""> <VAR> VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR:VAR-VAR-300 VAR-VAR-600 VAR:VAR"" > VAR VAR VAR &VAR; </VAR> </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR VAR VAR""} </VAR> </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR:VAR-VAR-300 VAR-VAR-600 VAR:VAR"" > VAR VAR VAR &VAR; </VAR> </VAR> <VAR VAR=""VAR:VAR-8 VAR-10""> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR:VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR:VAR-VAR VAR-VAR VAR-VAR-2 VAR-VAR VAR-VAR-2 VAR-VAR VAR-4 VAR:VAR-0""> <VAR VAR={VAR.VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR:VAR-1/2 VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR={VAR.VAR} VAR=""VAR"" VAR={VAR} /> <VAR VAR={VAR} VAR={VAR} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR-2 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-600 VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200 VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-600"" > {VAR ? ( <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-300"" /> ) : ( <VAR /> )} <VAR VAR=""VAR VAR:VAR VAR-VAR"">VAR VAR VAR</VAR> </VAR> <VAR VAR={() => { VAR ( !VAR( ""VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR? VAR VAR VAR VAR VAR VAR VAR!"" ) ) VAR VAR; VAR(); }} VAR={VAR} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR-2 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-600 VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200 VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-600"" > <VAR /> <VAR VAR=""VAR VAR:VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> <VAR VAR={() => { VAR ( !VAR( ""VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR? VAR VAR VAR VAR VAR VAR."" ) ) VAR VAR; VAR(); }} VAR={VAR} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR-2 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-600 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR VAR:VAR-VAR-500 VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200 VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-600"" > <VAR /> <VAR VAR=""VAR VAR:VAR VAR-VAR"">VAR VAR VAR</VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/Settings/Appearance/index.jsx,"import { useEffect, useState } from ""react"";
import useLogo from ""../../../../hooks/useLogo"";
import usePrefersDarkMode from ""../../../../hooks/usePrefersDarkMode"";
import System from ""../../../../models/system"";
import EditingChatBubble from ""../../../EditingChatBubble"";
import AnythingLLMLight from ""../../../../media/logo/anything-llm-light.png"";
import AnythingLLMDark from ""../../../../media/logo/anything-llm-dark.png"";
import showToast from ""../../../../utils/toast"";

export default function Appearance() {
  const { logo: _initLogo } = useLogo();
  const prefersDarkMode = usePrefersDarkMode();
  const [logo, setLogo] = useState("""");
  const [hasChanges, setHasChanges] = useState(false);
  const [messages, setMessages] = useState([]);

  useEffect(() => {
    async function fetchMessages() {
      const messages = await System.getWelcomeMessages();
      setMessages(messages);
    }
    fetchMessages();
  }, []);

  useEffect(() => {
    async function setInitLogo() {
      setLogo(_initLogo || """");
    }
    setInitLogo();
  }, [_initLogo]);

  const handleFileUpload = async (event) => {
    const file = event.target.files[0];
    if (!file) return false;

    const formData = new FormData();
    formData.append(""logo"", file);
    const { success, error } = await System.uploadLogo(formData);
    if (!success) {
      console.error(""Failed to upload logo:"", error);
      showToast(`Failed to upload logo: ${error}`, ""error"");
      return;
    }

    const logoURL = await System.fetchLogo();
    setLogo(logoURL);
    showToast(""Image uploaded successfully."", ""success"");
  };

  const handleRemoveLogo = async () => {
    const { success, error } = await System.removeCustomLogo();
    if (!success) {
      console.error(""Failed to remove logo:"", error);
      showToast(`Failed to remove logo: ${error}`, ""error"");
      return;
    }

    const logoURL = await System.fetchLogo();
    setLogo(logoURL);
    showToast(""Image successfully removed."", ""success"");
  };

  const addMessage = (type) => {
    if (type === ""user"") {
      setMessages([
        ...messages,
        { user: ""Double click to edit..."", response: """" },
      ]);
    } else {
      setMessages([
        ...messages,
        { user: """", response: ""Double click to edit..."" },
      ]);
    }
  };

  const removeMessage = (index) => {
    setHasChanges(true);
    setMessages(messages.filter((_, i) => i !== index));
  };

  const handleMessageChange = (index, type, value) => {
    setHasChanges(true);
    const newMessages = [...messages];
    newMessages[index][type] = value;
    setMessages(newMessages);
  };

  const handleMessageSave = async () => {
    const { success, error } = await System.setWelcomeMessages(messages);
    if (!success) {
      showToast(`Failed to update welcome messages: ${error}`, ""error"");
      return;
    }
    showToast(""Successfully updated welcome messages."", ""success"");
    setHasChanges(false);
  };

  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Customize the appearance settings of AnythingLLM instance.
          </p>
        </div>

        <div className=""px-1 md:px-8 pb-10"">
          <div className=""mb-6"">
            <div className=""flex flex-col gap-y-2"">
              <h2 className=""leading-tight font-medium text-black dark:text-white"">
                Custom Logo
              </h2>
              <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                Change the logo that appears in the sidebar.
              </p>
            </div>
            <div className=""flex flex-col md:flex-row items-center"">
              <img
                src={logo}
                alt=""Uploaded Logo""
                className=""w-48 h-48 object-contain mr-6""
                onError={(e) =>
                  (e.target.src = prefersDarkMode
                    ? AnythingLLMLight
                    : AnythingLLMDark)
                }
              />
              <div className=""flex flex-col"">
                <div className=""mb-4"">
                  <label className=""cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"">
                    Upload Image
                    <input
                      type=""file""
                      accept=""image/*""
                      className=""hidden""
                      onChange={handleFileUpload}
                    />
                  </label>
                  <button
                    onClick={handleRemoveLogo}
                    className=""ml-4 cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                  >
                    Remove Custom Logo
                  </button>
                </div>
                <div className=""text-sm text-gray-600 dark:text-gray-300"">
                  Upload your logo. Recommended size: 800x200.
                </div>
              </div>
            </div>
          </div>
          <div className=""mb-6"">
            <div className=""flex flex-col gap-y-2"">
              <h2 className=""leading-tight font-medium text-black dark:text-white"">
                Custom Messages
              </h2>
              <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                Change the default messages that are displayed to the users.
              </p>
            </div>
            <div className=""mt-6 flex flex-col gap-y-6 bg-white dark:bg-black-900 p-4 rounded-lg"">
              {messages.map((message, index) => (
                <div key={index} className=""flex flex-col gap-y-2"">
                  {message.user && (
                    <EditingChatBubble
                      message={message}
                      index={index}
                      type=""user""
                      handleMessageChange={handleMessageChange}
                      removeMessage={removeMessage}
                    />
                  )}
                  {message.response && (
                    <EditingChatBubble
                      message={message}
                      index={index}
                      type=""response""
                      handleMessageChange={handleMessageChange}
                      removeMessage={removeMessage}
                    />
                  )}
                </div>
              ))}
              <div className=""flex gap-4 mt-4 justify-between"">
                <button
                  className=""self-end text-orange-500 hover:text-orange-700 transition""
                  onClick={() => addMessage(""response"")}
                >
                  + System Message
                </button>
                <button
                  className=""self-end text-orange-500 hover:text-orange-700 transition""
                  onClick={() => addMessage(""user"")}
                >
                  + User Message
                </button>
              </div>
            </div>
            {hasChanges && (
              <div className=""flex justify-center py-6"">
                <button
                  className=""ml-4 cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                  onClick={handleMessageSave}
                >
                  Save Messages
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR-VAR-VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR-VAR-VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR VAR() { VAR { VAR: VAR } = VAR(); VAR VAR = VAR(); VAR [VAR, VAR] = VAR(""""); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); } VAR(); }, []); VAR(() => { VAR VAR VAR() { VAR(VAR || """"); } VAR(); }, [VAR]); VAR VAR = VAR (VAR) => { VAR VAR = VAR.VAR.VAR[0]; VAR (!VAR) VAR VAR; VAR VAR = VAR VAR(); VAR.VAR(""VAR"", VAR); VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR.VAR(""VAR VAR VAR VAR:"", VAR); VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(""VAR VAR VAR."", ""VAR""); }; VAR VAR = VAR () => { VAR { VAR, VAR } = VAR VAR.VAR(); VAR (!VAR) { VAR.VAR(""VAR VAR VAR VAR:"", VAR); VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(""VAR VAR VAR."", ""VAR""); }; VAR VAR = (VAR) => { VAR (VAR === ""VAR"") { VAR([ ...VAR, { VAR: ""VAR VAR VAR VAR..."", VAR: """" }, ]); } VAR { VAR([ ...VAR, { VAR: """", VAR: ""VAR VAR VAR VAR..."" }, ]); } }; VAR VAR = (VAR) => { VAR(VAR); VAR(VAR.VAR((VAR, VAR) => VAR !== VAR)); }; VAR VAR = (VAR, VAR, VAR) => { VAR(VAR); VAR VAR = [...VAR]; VAR[VAR][VAR] = VAR; VAR(VAR); }; VAR VAR = VAR () => { VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR(`VAR VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR(""VAR VAR VAR VAR."", ""VAR""); VAR(VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-1 VAR:VAR-8 VAR-10""> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR:VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR VAR"" VAR=""VAR-48 VAR-48 VAR-VAR VAR-6"" VAR={(VAR) => (VAR.VAR.VAR = VAR ? VAR : VAR) } /> <VAR VAR=""VAR VAR-VAR""> <VAR VAR=""VAR-4""> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600""> VAR VAR <VAR VAR=""VAR"" VAR=""VAR/*"" VAR=""VAR"" VAR={VAR} /> </VAR> <VAR VAR={VAR} VAR=""VAR-4 VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300""> VAR VAR VAR. VAR VAR: 800x200. </VAR> </VAR> </VAR> </VAR> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR-6 VAR-VAR VAR:VAR-VAR-900 VAR-4 VAR-VAR""> {VAR.VAR((VAR, VAR) => ( <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-2""> {VAR.VAR && ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} VAR={VAR} /> )} {VAR.VAR && ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} VAR={VAR} /> )} </VAR> ))} <VAR VAR=""VAR VAR-4 VAR-4 VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR"" VAR={() => VAR(""VAR"")} > + VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR"" VAR={() => VAR(""VAR"")} > + VAR VAR </VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR VAR-VAR VAR-6""> <VAR VAR=""VAR-4 VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" VAR={VAR} > VAR VAR </VAR> </VAR> )} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/Settings/ExportImport/index.jsx,"import React, { useState, useEffect, useRef } from ""react"";
import { AlertCircle, CheckCircle, Download, Loader, X } from ""react-feather"";
import System from ""../../../../models/system"";
import { API_BASE } from ""../../../../utils/constants"";
import paths from ""../../../../utils/paths"";

const noop = () => false;
export default function ExportOrImportData({ hideModal = noop }) {
  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex flex-col items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Have multiple AnythingLLM instances or simply want to backup or
            re-import data from another instance? You can do so here.
            <br />
            <i>
              This will not automatically sync your vector database embeddings!
            </i>
          </p>
          <a
            className=""text-gray-400 dark:text-stone-500 my-2 text-xs""
            href={paths.exports()}
            target=""_blank""
          >
            View previous exports &rarr;
          </a>
        </div>
        <div className=""px-6 pb-6 space-y-6 flex h-full w-full"">
          <div className=""flex flex-col w-full gap-y-2"">
            <ExportData />
            <div className=""h-[1px] bg-slate-400 dark:bg-stone-600 w-full my-2"" />
            <ImportData />
          </div>
        </div>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}

function ExportData() {
  const [loading, setLoading] = useState(false);
  const [result, setResult] = useState(null);
  const [error, setError] = useState(null);
  const exportData = async function () {
    setLoading(true);
    const { filename, error } = await System.dataExport();
    setLoading(false);

    if (!filename) {
      setError(error);
    } else {
      setResult(filename);
      const link = document.createElement(""a"");
      link.href = `${API_BASE}/system/data-exports/${filename}`;
      link.target = ""_blank"";
      document.body.appendChild(link);
      link.click();
    }
  };

  if (loading) {
    return (
      <div className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-gray-200 rounded-lg dark:border-gray-600 bg-slate-200 group animate-pulse"">
        <p className=""text-gray-800 text-lg"">Exporting....</p>
        <p className=""text-gray-800 text-sm italic"">
          A download will start automatically.
        </p>
      </div>
    );
  }

  if (error) {
    return (
      <button
        type=""button""
        onClick={() => setError(null)}
        className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-red-200 rounded-lg dark:border-red-600 bg-red-200 group""
      >
        <p className=""text-red-800 text-sm"">{error}</p>
      </button>
    );
  }

  if (!!result) {
    return (
      <a
        target=""_blank""
        href={`${API_BASE}/system/data-exports/${result}`}
        className=""w-full flex gap-1 justify-center items-center px-6 py-4 border border-green-200 rounded-lg dark:border-green-600 bg-green-200 group""
      >
        <Download className=""h-4 w-4 text-green-800 "" />
        <p className=""text-green-800 text-sm"">Download Data Export</p>
      </a>
    );
  }

  return (
    <button
      onClick={exportData}
      type=""button""
      className=""w-full flex  justify-center px-6 py-4 border border-gray-200 rounded-lg dark:border-gray-600 hover:bg-slate-200 group""
    >
      <p className=""text-gray-800 dark:text-stone-200 group-hover:text-gray-800 text-lg"">
        Export AnythingLLM data
      </p>
    </button>
  );
}

function ImportData() {
  const inputRef = useRef(null);
  const [loading, setLoading] = useState(false);
  const [file, setFile] = useState(null);
  const [result, setResult] = useState(null);
  const [error, setError] = useState(null);
  const startInput = () => inputRef?.current?.click();
  const handleUpload = async (e) => {
    e.preventDefault();
    setError(null);
    setFile(null);
    setResult(null);

    const file = e.target.files?.[0];
    if (!file) {
      setError(""Invalid file upload"");
      return false;
    }

    setFile(file);
    setLoading(true);
    const formData = new FormData();
    formData.append(""file"", file, file.name);
    const { success, error } = await System.importData(formData);
    if (!success) {
      setError(error);
    } else {
      setResult(true);
    }

    setLoading(false);
    setFile(null);
  };

  if (loading) {
    return (
      <div className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-gray-200 rounded-lg dark:border-gray-600 bg-slate-200 group animate-pulse"">
        <p className=""text-gray-800 text-lg"">Importing....</p>
        <p className=""text-gray-800 text-sm italic"">{file.name}</p>
      </div>
    );
  }

  if (error) {
    return (
      <button
        type=""button""
        onClick={() => setError(null)}
        className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-red-200 rounded-lg dark:border-red-600 bg-red-200 group""
      >
        <p className=""text-red-800 text-sm"">{error}</p>
      </button>
    );
  }

  if (!!result) {
    return (
      <div className=""w-full flex flex-col gap-y-1 gap-1 justify-center items-center px-6 py-4 border border-green-200 rounded-lg dark:border-green-600 bg-green-200 group"">
        <div className=""flex items-center gap-x-1"">
          <CheckCircle className=""h-4 w-4 text-green-800 "" />
          <p className=""text-green-800 text-sm"">
            Import was completed successfully
          </p>
        </div>
        <p className=""text-green-800 text-xs italic"">
          please reload the page to see the results of the import.
        </p>
      </div>
    );
  }

  return (
    <>
      <input
        ref={inputRef}
        onChange={handleUpload}
        name=""import""
        type=""file""
        multiple=""false""
        accept="".zip""
        hidden={true}
      />
      <button
        type=""button""
        onClick={startInput}
        className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-gray-200 rounded-lg dark:border-gray-600 hover:bg-slate-200 group""
      >
        <p className=""text-gray-800 dark:text-stone-200 group-hover:text-gray-800 text-lg"">
          Import AnythingLLM data
        </p>
        <p className=""text-gray-800 dark:text-stone-200 group-hover:text-gray-800 text-xs italic"">
          this must be an export from an AnythingLLM instance.
        </p>
      </button>
    </>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR } VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR }) { VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR-VAR VAR VAR VAR VAR? VAR VAR VAR VAR VAR. <VAR /> <VAR> VAR VAR VAR VAR VAR VAR VAR VAR VAR! </VAR> </VAR> <VAR VAR=""VAR-VAR-400 VAR:VAR-VAR-500 VAR-2 VAR-VAR"" VAR={VAR.VAR()} VAR=""VAR"" > VAR VAR VAR &VAR; </VAR> </VAR> <VAR VAR=""VAR-6 VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-2""> <VAR /> <VAR VAR=""VAR-[1px] VAR-VAR-400 VAR:VAR-VAR-600 VAR-VAR VAR-2"" /> <VAR /> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR VAR () { VAR(VAR); VAR { VAR, VAR } = VAR VAR.VAR(); VAR(VAR); VAR (!VAR) { VAR(VAR); } VAR { VAR(VAR); VAR VAR = VAR.VAR(""VAR""); VAR.VAR = `${VAR}/VAR/VAR-VAR/${VAR}`; VAR.VAR = ""VAR""; VAR.VAR.VAR(VAR); VAR.VAR(); } }; VAR (VAR) { VAR ( <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR-VAR"">VAR....</VAR> <VAR VAR=""VAR-VAR-800 VAR-VAR VAR""> VAR VAR VAR VAR VAR. </VAR> </VAR> ); } VAR (VAR) { VAR ( <VAR VAR=""VAR"" VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR"" > <VAR VAR=""VAR-VAR-800 VAR-VAR"">{VAR}</VAR> </VAR> ); } VAR (!!VAR) { VAR ( <VAR VAR=""VAR"" VAR={`${VAR}/VAR/VAR-VAR/${VAR}`} VAR=""VAR-VAR VAR VAR-1 VAR-VAR VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-800 "" /> <VAR VAR=""VAR-VAR-800 VAR-VAR"">VAR VAR VAR</VAR> </VAR> ); } VAR ( <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR VAR VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR:VAR-VAR-200 VAR"" > <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR:VAR-VAR-800 VAR-VAR""> VAR VAR VAR </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => VAR?.VAR?.VAR(); VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR(VAR); VAR(VAR); VAR VAR = VAR.VAR.VAR?.[0]; VAR (!VAR) { VAR(""VAR VAR VAR""); VAR VAR; } VAR(VAR); VAR(VAR); VAR VAR = VAR VAR(); VAR.VAR(""VAR"", VAR, VAR.VAR); VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR(VAR); } VAR { VAR(VAR); } VAR(VAR); VAR(VAR); }; VAR (VAR) { VAR ( <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR-VAR"">VAR....</VAR> <VAR VAR=""VAR-VAR-800 VAR-VAR VAR"">{VAR.VAR}</VAR> </VAR> ); } VAR (VAR) { VAR ( <VAR VAR=""VAR"" VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR"" > <VAR VAR=""VAR-VAR-800 VAR-VAR"">{VAR}</VAR> </VAR> ); } VAR (!!VAR) { VAR ( <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-1 VAR-VAR VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-4 VAR-4 VAR-VAR-800 "" /> <VAR VAR=""VAR-VAR-800 VAR-VAR""> VAR VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR-800 VAR-VAR VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> ); } VAR ( <> <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR"" VAR=""VAR"" VAR="".VAR"" VAR={VAR} /> <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR:VAR-VAR-200 VAR"" > <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR:VAR-VAR-800 VAR-VAR""> VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR:VAR-VAR-800 VAR-VAR VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/Settings/LLMSelection/index.jsx,"import React, { useState } from ""react"";
import System from ""../../../../models/system"";
import OpenAiLogo from ""../../../../media/llmprovider/openai.png"";
import AzureOpenAiLogo from ""../../../../media/llmprovider/azure.png"";
import AnthropicLogo from ""../../../../media/llmprovider/anthropic.png"";
import showToast from ""../../../../utils/toast"";

const noop = () => false;
export default function LLMSelection({
  hideModal = noop,
  user,
  settings = {},
}) {
  const [hasChanges, setHasChanges] = useState(false);
  const [llmChoice, setLLMChoice] = useState(settings?.LLMProvider || ""openai"");
  const [saving, setSaving] = useState(false);
  const canDebug = settings.MultiUserMode
    ? settings?.CanDebug && user?.role === ""admin""
    : settings?.CanDebug;

  function updateLLMChoice(selection) {
    if (!canDebug || selection === llmChoice) return false;
    setHasChanges(true);
    setLLMChoice(selection);
  }

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { error } = await System.updateSystem(data);
    if (error) {
      showToast(`Failed to save LLM settings: ${error}`, ""error"");
    } else {
      showToast(""LLM settings saved successfully."", ""success"");
    }
    setSaving(false);
    setHasChanges(!!error ? true : false);
  };
  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            These are the credentials and settings for your preferred LLM chat &
            embedding provider. Its important these keys are current and correct
            or else AnythingLLM will not function properly.
          </p>
        </div>

        <form onSubmit={handleSubmit} onChange={() => setHasChanges(true)}>
          <div className=""px-6 space-y-6 flex h-full w-full"">
            <div className=""w-full flex flex-col gap-y-4"">
              <p className=""block text-sm font-medium text-gray-800 dark:text-slate-200"">
                LLM providers
              </p>
              <div className=""w-full flex overflow-x-scroll gap-x-4"">
                <input hidden={true} name=""LLMProvider"" value={llmChoice} />
                <LLMProviderOption
                  name=""OpenAI""
                  value=""openai""
                  link=""openai.com""
                  description=""The standard option for most non-commercial use. Provides both chat and embedding.""
                  checked={llmChoice === ""openai""}
                  image={OpenAiLogo}
                  onClick={updateLLMChoice}
                />
                <LLMProviderOption
                  name=""Azure OpenAi""
                  value=""azure""
                  link=""azure.microsoft.com""
                  description=""The enterprise option of OpenAI hosted on Azure services. Provides both chat and embedding.""
                  checked={llmChoice === ""azure""}
                  image={AzureOpenAiLogo}
                  onClick={updateLLMChoice}
                />
                <LLMProviderOption
                  name=""Anthropic Claude 2""
                  value=""anthropic-claude-2""
                  link=""anthropic.com""
                  description=""[COMING SOON] A friendly AI Assistant hosted by Anthropic. Provides chat services only!""
                  checked={llmChoice === ""anthropic-claude-2""}
                  image={AnthropicLogo}
                />
              </div>
              {llmChoice === ""openai"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      API Key
                    </label>
                    <input
                      type=""text""
                      name=""OpenAiKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""OpenAI API Key""
                      defaultValue={settings?.OpenAiKey ? ""*"".repeat(20) : """"}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Chat Model Selection
                    </label>
                    <select
                      disabled={!canDebug}
                      name=""OpenAiModelPref""
                      defaultValue={settings?.OpenAiModelPref}
                      required={true}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-stone-700 dark:border-slate-200 dark:placeholder-stone-500 dark:text-slate-200""
                    >
                      {[
                        ""gpt-3.5-turbo"",
                        ""gpt-3.5-turbo-0613"",
                        ""gpt-3.5-turbo-16k"",
                        ""gpt-4"",
                        ""gpt-4-0613"",
                        ""gpt-4-32k"",
                        ""gpt-4-32k-0613"",
                      ].map((model) => {
                        return (
                          <option key={model} value={model}>
                            {model}
                          </option>
                        );
                      })}
                    </select>
                  </div>
                </>
              )}

              {llmChoice === ""azure"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Azure Service Endpoint
                    </label>
                    <input
                      type=""url""
                      name=""AzureOpenAiEndpoint""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""https://my-azure.openai.azure.com""
                      defaultValue={settings?.AzureOpenAiEndpoint}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      API Key
                    </label>
                    <input
                      type=""password""
                      name=""AzureOpenAiKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""Azure OpenAI API Key""
                      defaultValue={
                        settings?.AzureOpenAiKey ? ""*"".repeat(20) : """"
                      }
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Chat Model Deployment Name
                    </label>
                    <input
                      type=""text""
                      name=""AzureOpenAiModelPref""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""Azure OpenAI chat model deployment name""
                      defaultValue={settings?.AzureOpenAiModelPref}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Embedding Model Deployment Name
                    </label>
                    <input
                      type=""text""
                      name=""AzureOpenAiEmbeddingModelPref""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""Azure OpenAI embedding model deployment name""
                      defaultValue={settings?.AzureOpenAiEmbeddingModelPref}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}

              {llmChoice === ""anthropic-claude-2"" && (
                <div className=""w-full h-40 items-center justify-center flex"">
                  <p className=""text-gray-800 dark:text-slate-400"">
                    This provider is unavailable and cannot be used in
                    AnythingLLM currently.
                  </p>
                </div>
              )}
            </div>
          </div>
          <div className=""w-full p-4"">
            <button
              hidden={!hasChanges}
              disabled={saving}
              type=""submit""
              className=""w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
            >
              {saving ? ""Saving..."" : ""Save changes""}
            </button>
          </div>
        </form>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}

const LLMProviderOption = ({
  name,
  link,
  description,
  value,
  image,
  checked = false,
  onClick,
}) => {
  return (
    <div onClick={() => onClick(value)}>
      <input
        type=""checkbox""
        value={value}
        className=""peer hidden""
        checked={checked}
        readOnly={true}
        formNoValidate={true}
      />
      <label className=""transition-all duration-300 inline-flex h-full w-60 cursor-pointer items-center justify-between rounded-lg border border-gray-200 bg-white p-5 text-gray-500 hover:bg-gray-50 hover:text-gray-600 peer-checked:border-blue-600 peer-checked:bg-blue-50 peer-checked:dark:bg-stone-800 peer-checked:text-gray-600 dark:border-slate-200 dark:bg-stone-800 dark:text-slate-400 dark:hover:bg-stone-700 dark:hover:text-slate-300 dark:peer-checked:text-slate-300"">
        <div className=""block"">
          <img src={image} alt={name} className=""mb-2 h-10 w-10 rounded-full"" />
          <div className=""w-full text-lg font-semibold"">{name}</div>
          <div className=""flex w-full flex-col gap-y-1 text-sm"">
            <p className=""text-xs text-slate-400"">{link}</p>
            {description}
          </div>
        </div>
      </label>
    </div>
  );
};",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR, VAR = {}, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR?.VAR || ""VAR""); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR.VAR ? VAR?.VAR && VAR?.VAR === ""VAR"" : VAR?.VAR; VAR VAR(VAR) { VAR (!VAR || VAR === VAR) VAR VAR; VAR(VAR); VAR(VAR); } VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR } = VAR VAR.VAR(VAR); VAR (VAR) { VAR(`VAR VAR VAR VAR VAR: ${VAR}`, ""VAR""); } VAR { VAR(""VAR VAR VAR VAR."", ""VAR""); } VAR(VAR); VAR(!!VAR ? VAR : VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR & VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR={VAR} VAR={() => VAR(VAR)}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR VAR-VAR-VAR VAR-VAR-4""> <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR-VAR VAR. VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR VAR"" VAR=""VAR"" VAR=""VAR.VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR VAR 2"" VAR=""VAR-VAR-2"" VAR=""VAR.VAR"" VAR=""[VAR VAR] VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR!"" VAR={VAR === ""VAR-VAR-2""} VAR={VAR} /> </VAR> {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR"" VAR={VAR?.VAR ? ""*"".VAR(20) : """"} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR={!VAR} VAR=""VAR"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR VAR-VAR VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-700 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" > {[ ""VAR-3.5-VAR"", ""VAR-3.5-VAR-0613"", ""VAR-3.5-VAR-16k"", ""VAR-4"", ""VAR-4-0613"", ""VAR-4-32k"", ""VAR-4-32k-0613"", ].VAR((VAR) => { VAR ( <VAR VAR={VAR} VAR={VAR}> {VAR} </VAR> ); })} </VAR> </VAR> </> )} {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR: VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR VAR"" VAR={ VAR?.VAR ? ""*"".VAR(20) : """" } VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR VAR VAR VAR"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR VAR VAR VAR"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} {VAR === ""VAR-VAR-2"" && ( <VAR VAR=""VAR-VAR VAR-40 VAR-VAR VAR-VAR VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> )} </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-4""> <VAR VAR={!VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } VAR VAR = ({ VAR, VAR, VAR, VAR, VAR, VAR = VAR, VAR, }) => { VAR ( <VAR VAR={() => VAR(VAR)}> <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR VAR"" VAR={VAR} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR VAR-60 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-5 VAR-VAR-500 VAR:VAR-VAR-50 VAR:VAR-VAR-600 VAR-VAR:VAR-VAR-600 VAR-VAR:VAR-VAR-50 VAR-VAR:VAR:VAR-VAR-800 VAR-VAR:VAR-VAR-600 VAR:VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-400 VAR:VAR:VAR-VAR-700 VAR:VAR:VAR-VAR-300 VAR:VAR-VAR:VAR-VAR-300""> <VAR VAR=""VAR""> <VAR VAR={VAR} VAR={VAR} VAR=""VAR-2 VAR-10 VAR-10 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR"">{VAR}</VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-400"">{VAR}</VAR> {VAR} </VAR> </VAR> </VAR> </VAR> ); }; ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/Settings/MultiUserMode/index.jsx,"import React, { useState } from ""react"";
import System from ""../../../../models/system"";
import { AUTH_TOKEN, AUTH_USER } from ""../../../../utils/constants"";
import paths from ""../../../../utils/paths"";

const noop = () => false;
export default function MultiUserMode({ hideModal = noop }) {
  const [saving, setSaving] = useState(false);
  const [success, setSuccess] = useState(false);
  const [error, setError] = useState(null);
  const [useMultiUserMode, setUseMultiUserMode] = useState(false);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    setSuccess(false);
    setError(null);

    const form = new FormData(e.target);
    const data = {
      username: form.get(""username""),
      password: form.get(""password""),
    };

    const { success, error } = await System.setupMultiUser(data);
    if (success) {
      setSuccess(true);
      setSaving(false);
      setTimeout(() => {
        window.localStorage.removeItem(AUTH_USER);
        window.localStorage.removeItem(AUTH_TOKEN);
        window.location = paths.admin.users();
      }, 2_000);
      return;
    }

    setError(error);
    setSaving(false);
  };

  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Update your AnythingLLM instance to support multiple concurrent
            users with their own workspaces. As the admin you can view all
            workspaces and add people into workspaces as well. This change is
            not reversible and will permanently alter your AnythingLLM
            installation.
          </p>
        </div>
        {(error || success) && (
          <div className=""w-full flex px-6"">
            {error && (
              <div className=""w-full bg-red-300 text-red-800 font-semibold px-4 py-2 rounded-lg"">
                {error}
              </div>
            )}
            {success && (
              <div className=""w-full bg-green-300 text-green-800 font-semibold px-4 py-2 rounded-lg"">
                Your page will refresh in a few seconds.
              </div>
            )}
          </div>
        )}
        <div className=""p-6 space-y-6 flex h-full w-full"">
          <div className=""w-full flex flex-col gap-y-4"">
            <form onSubmit={handleSubmit}>
              <div className="""">
                <label className=""mb-2.5 block font-medium text-black dark:text-white"">
                  Enable Multi-User Mode
                </label>

                <label className=""relative inline-flex cursor-pointer items-center"">
                  <input
                    type=""checkbox""
                    onClick={() => setUseMultiUserMode(!useMultiUserMode)}
                    checked={useMultiUserMode}
                    className=""peer sr-only pointer-events-none""
                  />
                  <div className=""pointer-events-none peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-stone-400 dark:peer-focus:ring-blue-800""></div>
                </label>
              </div>
              <div className=""w-full flex flex-col gap-y-2 my-2"">
                {useMultiUserMode && (
                  <>
                    <p className=""text-gray-800 dark:text-stone-200 text-sm bg-gray-200 dark:bg-stone-800 rounded-lg p-4"">
                      By default, you will be the only admin. As an admin you
                      will need to create accounts for all new users or admins.
                      Do not lose your password as only an Admin user can reset
                      passwords.
                    </p>
                    <div>
                      <label
                        htmlFor=""username""
                        className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                      >
                        Admin account username
                      </label>
                      <input
                        name=""username""
                        type=""text""
                        className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                        placeholder=""Your admin username""
                        minLength={2}
                        required={true}
                        autoComplete=""off""
                      />
                    </div>
                    <div>
                      <label
                        htmlFor=""password""
                        className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                      >
                        Admin account password
                      </label>
                      <input
                        name=""password""
                        type=""text""
                        className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                        placeholder=""Your admin password""
                        minLength={8}
                        required={true}
                        autoComplete=""off""
                      />
                    </div>
                    <button
                      disabled={saving}
                      type=""submit""
                      className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                    >
                      {saving ? ""Enabling..."" : ""Enable Multi-User mode""}
                    </button>
                  </>
                )}
              </div>
            </form>
          </div>
        </div>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR, VAR } VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR(VAR); VAR(VAR); VAR VAR = VAR VAR(VAR.VAR); VAR VAR = { VAR: VAR.VAR(""VAR""), VAR: VAR.VAR(""VAR""), }; VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (VAR) { VAR(VAR); VAR(VAR); VAR(() => { VAR.VAR.VAR(VAR); VAR.VAR.VAR(VAR); VAR.VAR = VAR.VAR.VAR(); }, 2_000); VAR; } VAR(VAR); VAR(VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> {(VAR || VAR) && ( <VAR VAR=""VAR-VAR VAR VAR-6""> {VAR && ( <VAR VAR=""VAR-VAR VAR-VAR-300 VAR-VAR-800 VAR-VAR VAR-4 VAR-2 VAR-VAR""> {VAR} </VAR> )} {VAR && ( <VAR VAR=""VAR-VAR VAR-VAR-300 VAR-VAR-800 VAR-VAR VAR-4 VAR-2 VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> )} </VAR> )} <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR VAR={VAR}> <VAR VAR=""""> <VAR VAR=""VAR-2.5 VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR-VAR VAR </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR"" VAR={() => VAR(!VAR)} VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-VAR"" /> <VAR VAR=""VAR-VAR-VAR VAR VAR-6 VAR-11 VAR-VAR VAR-VAR-200 VAR:VAR VAR:VAR-[2px] VAR:VAR-[2px] VAR:VAR-5 VAR:VAR-5 VAR:VAR-VAR VAR:VAR VAR:VAR-VAR-300 VAR:VAR-VAR VAR:VAR-VAR VAR:VAR-[''] VAR-VAR:VAR-VAR-600 VAR-VAR:VAR:VAR-VAR-VAR VAR-VAR:VAR:VAR-VAR VAR-VAR:VAR-VAR VAR-VAR:VAR-4 VAR-VAR:VAR-VAR-300 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR:VAR-VAR-800""></VAR> </VAR> </VAR> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-2""> {VAR && ( <> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR VAR-4""> VAR VAR, VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR VAR"" VAR={2} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR VAR"" VAR={8} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR-VAR VAR""} </VAR> </> )} </VAR> </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/Settings/PasswordProtection/index.jsx,"import React, { useState } from ""react"";
import System from ""../../../../models/system"";
import { AUTH_TOKEN, AUTH_USER } from ""../../../../utils/constants"";
import showToast from ""../../../../utils/toast"";

const noop = () => false;
export default function PasswordProtection({
  hideModal = noop,
  settings = {},
}) {
  const [saving, setSaving] = useState(false);
  const [usePassword, setUsePassword] = useState(settings?.RequiresAuth);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);

    const form = new FormData(e.target);
    const data = {
      usePassword,
      newPassword: form.get(""password""),
    };

    const { success, error } = await System.updateSystemPassword(data);
    if (success) {
      showToast(""Your page will refresh in a few seconds."", ""success"");
      setSaving(false);
      setTimeout(() => {
        window.localStorage.removeItem(AUTH_USER);
        window.localStorage.removeItem(AUTH_TOKEN);
        window.location.reload();
      }, 3_000);
      return;
    } else {
      showToast(`Failed to update password: ${error}`, ""error"");
    }

    setSaving(false);
  };

  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Protect your AnythingLLM instance with a password. If you forget
            this there is no recovery method so ensure you save this password.
          </p>
        </div>
        <div className=""p-6 space-y-6 flex h-full w-full"">
          <div className=""w-full flex flex-col gap-y-4"">
            <form onSubmit={handleSubmit}>
              <div className="""">
                <label className=""mb-2.5 block font-medium text-black dark:text-white"">
                  Password Protect Instance
                </label>

                <label className=""relative inline-flex cursor-pointer items-center"">
                  <input
                    type=""checkbox""
                    name=""use_password""
                    onClick={() => setUsePassword(!usePassword)}
                    checked={usePassword}
                    className=""peer sr-only pointer-events-none""
                  />
                  <div className=""pointer-events-none peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-stone-400 dark:peer-focus:ring-blue-800""></div>
                </label>
              </div>
              <div className=""w-full flex flex-col gap-y-2 my-2"">
                {usePassword && (
                  <div>
                    <label
                      htmlFor=""password""
                      className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                    >
                      New Password
                    </label>
                    <input
                      name=""password""
                      type=""text""
                      className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                      placeholder=""Your Instance Password""
                      minLength={8}
                      required={true}
                      autoComplete=""off""
                    />
                  </div>
                )}
                <button
                  disabled={saving}
                  type=""submit""
                  className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                >
                  {saving ? ""Saving..."" : ""Save Changes""}
                </button>
              </div>
            </form>
          </div>
        </div>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR, VAR } VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR = {}, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR?.VAR); VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR VAR = VAR VAR(VAR.VAR); VAR VAR = { VAR, VAR: VAR.VAR(""VAR""), }; VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (VAR) { VAR(""VAR VAR VAR VAR VAR VAR VAR VAR."", ""VAR""); VAR(VAR); VAR(() => { VAR.VAR.VAR(VAR); VAR.VAR.VAR(VAR); VAR.VAR.VAR(); }, 3_000); VAR; } VAR { VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); } VAR(VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR VAR={VAR}> <VAR VAR=""""> <VAR VAR=""VAR-2.5 VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR"" VAR=""VAR"" VAR={() => VAR(!VAR)} VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-VAR"" /> <VAR VAR=""VAR-VAR-VAR VAR VAR-6 VAR-11 VAR-VAR VAR-VAR-200 VAR:VAR VAR:VAR-[2px] VAR:VAR-[2px] VAR:VAR-5 VAR:VAR-5 VAR:VAR-VAR VAR:VAR VAR:VAR-VAR-300 VAR:VAR-VAR VAR:VAR-VAR VAR:VAR-[''] VAR-VAR:VAR-VAR-600 VAR-VAR:VAR:VAR-VAR-VAR VAR-VAR:VAR:VAR-VAR VAR-VAR:VAR-VAR VAR-VAR:VAR-4 VAR-VAR:VAR-VAR-300 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR:VAR-VAR-800""></VAR> </VAR> </VAR> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-2""> {VAR && ( <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR VAR"" VAR={8} VAR={VAR} VAR=""VAR"" /> </VAR> )} <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> </VAR> </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/Settings/VectorDbs/index.jsx,"import React, { useState } from ""react"";
import System from ""../../../../models/system"";
import ChromaLogo from ""../../../../media/vectordbs/chroma.png"";
import PineconeLogo from ""../../../../media/vectordbs/pinecone.png"";
import LanceDbLogo from ""../../../../media/vectordbs/lancedb.png"";
import WeaviateLogo from ""../../../../media/vectordbs/weaviate.png"";
import QDrantLogo from ""../../../../media/vectordbs/qdrant.png"";

const noop = () => false;
export default function VectorDBSelection({
  hideModal = noop,
  user,
  settings = {},
}) {
  const [hasChanges, setHasChanges] = useState(false);
  const [vectorDB, setVectorDB] = useState(settings?.VectorDB || ""lancedb"");
  const [saving, setSaving] = useState(false);
  const [error, setError] = useState(null);
  const canDebug = settings.MultiUserMode
    ? settings?.CanDebug && user?.role === ""admin""
    : settings?.CanDebug;

  function updateVectorChoice(selection) {
    if (!canDebug || selection === vectorDB) return false;
    setHasChanges(true);
    setVectorDB(selection);
  }

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    setError(null);
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { error } = await System.updateSystem(data);
    setError(error);
    setSaving(false);
    setHasChanges(!!error ? true : false);
  };
  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            These are the credentials and settings for how your AnythingLLM
            instance will function. Its important these keys are current and
            correct.
          </p>
        </div>

        {!!error && (
          <div className=""mb-8 bg-red-700 dark:bg-orange-800 bg-opacity-30 border border-red-800 dark:border-orange-600 p-4 rounded-lg w-[90%] flex mx-auto"">
            <p className=""text-red-800 dark:text-orange-300 text-sm"">{error}</p>
          </div>
        )}

        <form onSubmit={handleSubmit} onChange={() => setHasChanges(true)}>
          <div className=""px-6 space-y-6 flex h-full w-full"">
            <div className=""w-full flex flex-col gap-y-4"">
              <p className=""block text-sm font-medium text-gray-800 dark:text-slate-200"">
                Vector database providers
              </p>
              <div className=""w-full flex md:flex-wrap overflow-x-scroll gap-4"">
                <input hidden={true} name=""VectorDB"" value={vectorDB} />
                <VectorDBOption
                  name=""Chroma""
                  value=""chroma""
                  link=""trychroma.com""
                  description=""Open source vector database you can host yourself or on the cloud.""
                  checked={vectorDB === ""chroma""}
                  image={ChromaLogo}
                  onClick={updateVectorChoice}
                />
                <VectorDBOption
                  name=""Pinecone""
                  value=""pinecone""
                  link=""pinecone.io""
                  description=""100% cloud-based vector database for enterprise use cases.""
                  checked={vectorDB === ""pinecone""}
                  image={PineconeLogo}
                  onClick={updateVectorChoice}
                />
                <VectorDBOption
                  name=""QDrant""
                  value=""qdrant""
                  link=""qdrant.tech""
                  description=""Open source local and distributed cloud vector database.""
                  checked={vectorDB === ""qdrant""}
                  image={QDrantLogo}
                  onClick={updateVectorChoice}
                />
                <VectorDBOption
                  name=""Weaviate""
                  value=""weaviate""
                  link=""weaviate.io""
                  description=""Open source local and cloud hosted multi-modal vector database.""
                  checked={vectorDB === ""weaviate""}
                  image={WeaviateLogo}
                  onClick={updateVectorChoice}
                />
                <VectorDBOption
                  name=""LanceDB""
                  value=""lancedb""
                  link=""lancedb.com""
                  description=""100% local vector DB that runs on the same instance as AnythingLLM.""
                  checked={vectorDB === ""lancedb""}
                  image={LanceDbLogo}
                  onClick={updateVectorChoice}
                />
              </div>
              {vectorDB === ""pinecone"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Pinecone DB API Key
                    </label>
                    <input
                      type=""password""
                      name=""PineConeKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""Pinecone API Key""
                      defaultValue={settings?.PineConeKey ? ""*"".repeat(20) : """"}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Pinecone Index Environment
                    </label>
                    <input
                      type=""text""
                      name=""PineConeEnvironment""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""us-gcp-west-1""
                      defaultValue={settings?.PineConeEnvironment}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Pinecone Index Name
                    </label>
                    <input
                      type=""text""
                      name=""PineConeIndex""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""my-index""
                      defaultValue={settings?.PineConeIndex}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}

              {vectorDB === ""chroma"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Chroma Endpoint
                    </label>
                    <input
                      type=""url""
                      name=""ChromaEndpoint""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""http://localhost:8000""
                      defaultValue={settings?.ChromaEndpoint}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}
              {vectorDB === ""lancedb"" && (
                <div className=""w-full h-40 items-center justify-center flex"">
                  <p className=""text-gray-800 dark:text-slate-400"">
                    There is no configuration needed for LanceDB.
                  </p>
                </div>
              )}
              {vectorDB === ""qdrant"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      QDrant API Endpoint
                    </label>
                    <input
                      type=""url""
                      name=""QdrantEndpoint""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""http://localhost:6633""
                      defaultValue={settings?.QdrantEndpoint}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Api Key
                    </label>
                    <input
                      type=""password""
                      name=""QdrantApiKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""wOeqxsYP4....1244sba""
                      defaultValue={settings?.QdrantApiKey}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}
              {vectorDB === ""weaviate"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Weaviate Endpoint
                    </label>
                    <input
                      type=""url""
                      name=""WeaviateEndpoint""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""http://localhost:8080""
                      defaultValue={settings?.WeaviateEndpoint}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Api Key
                    </label>
                    <input
                      type=""password""
                      name=""WeaviateApiKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""sk-123Abcweaviate""
                      defaultValue={settings?.WeaviateApiKey}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}
            </div>
          </div>
          <div className=""w-full p-4"">
            <button
              hidden={!hasChanges}
              disabled={saving}
              type=""submit""
              className=""w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
            >
              {saving ? ""Saving..."" : ""Save changes""}
            </button>
          </div>
        </form>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}

const VectorDBOption = ({
  name,
  link,
  description,
  value,
  image,
  checked = false,
  onClick,
}) => {
  return (
    <div onClick={() => onClick(value)}>
      <input
        type=""checkbox""
        value={value}
        className=""peer hidden""
        checked={checked}
        readOnly={true}
        formNoValidate={true}
      />
      <label className=""transition-all duration-300 inline-flex h-full w-60 cursor-pointer items-center justify-between rounded-lg border border-gray-200 bg-white p-5 text-gray-500 hover:bg-gray-50 hover:text-gray-600 peer-checked:border-blue-600 peer-checked:bg-blue-50 peer-checked:dark:bg-stone-800 peer-checked:text-gray-600 dark:border-slate-200 dark:bg-stone-800 dark:text-slate-400 dark:hover:bg-stone-700 dark:hover:text-slate-300 dark:peer-checked:text-slate-300"">
        <div className=""block"">
          <img src={image} alt={name} className=""mb-2 h-10 w-10 rounded-full"" />
          <div className=""w-full text-lg font-semibold"">{name}</div>
          <div className=""flex w-full flex-col gap-y-1 text-sm"">
            <p className=""text-xs text-slate-400"">{link}</p>
            {description}
          </div>
        </div>
      </label>
    </div>
  );
};",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR, VAR = {}, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR?.VAR || ""VAR""); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR.VAR ? VAR?.VAR && VAR?.VAR === ""VAR"" : VAR?.VAR; VAR VAR(VAR) { VAR (!VAR || VAR === VAR) VAR VAR; VAR(VAR); VAR(VAR); } VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR(VAR); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR } = VAR VAR.VAR(VAR); VAR(VAR); VAR(VAR); VAR(!!VAR ? VAR : VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> {!!VAR && ( <VAR VAR=""VAR-8 VAR-VAR-700 VAR:VAR-VAR-800 VAR-VAR-30 VAR VAR-VAR-800 VAR:VAR-VAR-600 VAR-4 VAR-VAR VAR-[90%] VAR VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-300 VAR-VAR"">{VAR}</VAR> </VAR> )} <VAR VAR={VAR} VAR={() => VAR(VAR)}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR VAR:VAR-VAR VAR-VAR-VAR VAR-4""> <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""100% VAR-VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR VAR-VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""100% VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> </VAR> {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR"" VAR={VAR?.VAR ? ""*"".VAR(20) : """"} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR-VAR-VAR-1"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR-VAR"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR: VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} {VAR === ""VAR"" && ( <VAR VAR=""VAR-VAR VAR-40 VAR-VAR VAR-VAR VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> )} {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR: VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR....1244sba"" VAR={VAR?.VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR: VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR-123Abcweaviate"" VAR={VAR?.VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-4""> <VAR VAR={!VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } VAR VAR = ({ VAR, VAR, VAR, VAR, VAR, VAR = VAR, VAR, }) => { VAR ( <VAR VAR={() => VAR(VAR)}> <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR VAR"" VAR={VAR} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR VAR-60 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-5 VAR-VAR-500 VAR:VAR-VAR-50 VAR:VAR-VAR-600 VAR-VAR:VAR-VAR-600 VAR-VAR:VAR-VAR-50 VAR-VAR:VAR:VAR-VAR-800 VAR-VAR:VAR-VAR-600 VAR:VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-400 VAR:VAR:VAR-VAR-700 VAR:VAR:VAR-VAR-300 VAR:VAR-VAR:VAR-VAR-300""> <VAR VAR=""VAR""> <VAR VAR={VAR} VAR={VAR} VAR=""VAR-2 VAR-10 VAR-10 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR"">{VAR}</VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-400"">{VAR}</VAR> {VAR} </VAR> </VAR> </VAR> </VAR> ); }; ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Modals/Settings/index.jsx,"import React, { useEffect, useState } from ""react"";
import { X } from ""react-feather"";
import ExportOrImportData from ""./ExportImport"";
import PasswordProtection from ""./PasswordProtection"";
import System from ""../../../models/system"";
import MultiUserMode from ""./MultiUserMode"";
import useUser from ""../../../hooks/useUser"";
import VectorDBSelection from ""./VectorDbs"";
import LLMSelection from ""./LLMSelection"";
import Appearance from ""./Appearance"";
import ApiKey from ""./ApiKey"";

export const TABS = {
  llm: LLMSelection,
  exportimport: ExportOrImportData,
  password: PasswordProtection,
  multiuser: MultiUserMode,
  vectordb: VectorDBSelection,
  appearance: Appearance,
  apikey: ApiKey,
};

const noop = () => false;
export default function SystemSettingsModal({ tab = null, hideModal = noop }) {
  const { user } = useUser();
  const [loading, setLoading] = useState(true);
  const [settings, setSettings] = useState(null);
  const Component = TABS[tab || ""llm""];

  useEffect(() => {
    async function fetchKeys() {
      const _settings = await System.keys();
      setSettings(_settings);
      setLoading(false);
    }
    fetchKeys();
  }, []);

  return (
    <div className=""fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] h-full bg-black bg-opacity-50 flex items-center justify-center"">
      <div
        className=""flex fixed top-0 left-0 right-0 w-full h-full""
        onClick={hideModal}
      />
      <div className=""relative w-full w-full md:w-1/2 max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex flex-col gap-y-1 border-b dark:border-gray-600 px-4 pt-4 "">
            <div className=""flex items-start justify-between rounded-t "">
              <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
                System Settings
              </h3>
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
                data-modal-hide=""staticModal""
              >
                <X className=""text-gray-300 text-lg"" />
              </button>
            </div>
          </div>
          {loading ? (
            <div className=""w-full flex h-[400px] p-6"">
              <div className=""w-full flex h-full bg-gray-200 dark:bg-stone-600 animate-pulse rounded-lg"" />
            </div>
          ) : (
            <Component hideModal={hideModal} user={user} settings={settings} />
          )}
        </div>
      </div>
    </div>
  );
}

export function useSystemSettingsModal() {
  const [showing, setShowing] = useState(false);
  const showModal = () => {
    setShowing(true);
  };
  const hideModal = () => {
    setShowing(false);
  };

  return { showing, showModal, hideModal };
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR = { VAR: VAR, VAR: VAR, VAR: VAR, VAR: VAR, VAR: VAR, VAR: VAR, VAR: VAR, }; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR = VAR }) { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR[VAR || ""VAR""]; VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR ( <VAR VAR=""VAR VAR-0 VAR-0 VAR-0 VAR-50 VAR-VAR VAR-4 VAR-VAR-VAR VAR-VAR-VAR VAR:VAR-0 VAR-[VAR(100%-1rem)] VAR-VAR VAR-VAR VAR-VAR-50 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR VAR-0 VAR-0 VAR-0 VAR-VAR VAR-VAR"" VAR={VAR} /> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR:VAR-1/2 VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR:VAR-VAR-600 VAR-4 VAR-4 ""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR ""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> </VAR> {VAR ? ( <VAR VAR=""VAR-VAR VAR VAR-[400px] VAR-6""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR VAR-VAR"" /> </VAR> ) : ( <VAR VAR={VAR} VAR={VAR} VAR={VAR} /> )} </VAR> </VAR> </VAR> ); } VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR(VAR); }; VAR VAR = () => { VAR(VAR); }; VAR { VAR, VAR, VAR }; } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Sidebar/ActiveWorkspaces/index.jsx,"import React, { useState, useEffect } from ""react"";
import { Book, Settings } from ""react-feather"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import Workspace from ""../../../models/workspace"";
import ManageWorkspace, {
  useManageWorkspaceModal,
} from ""../../Modals/MangeWorkspace"";
import paths from ""../../../utils/paths"";
import { useParams } from ""react-router-dom"";

export default function ActiveWorkspaces() {
  const { slug } = useParams();
  const [loading, setLoading] = useState(true);
  const [workspaces, setWorkspaces] = useState([]);
  const [selectedWs, setSelectedWs] = useState(null);
  const { showing, showModal, hideModal } = useManageWorkspaceModal();

  useEffect(() => {
    async function getWorkspaces() {
      const workspaces = await Workspace.all();
      setLoading(false);
      setWorkspaces(workspaces);
    }
    getWorkspaces();
  }, []);

  if (loading) {
    return (
      <>
        <Skeleton.default
          height={36}
          width=""100%""
          count={3}
          baseColor=""#292524""
          highlightColor=""#4c4948""
          enableAnimation={true}
        />
      </>
    );
  }

  return (
    <>
      {workspaces.map((workspace) => {
        const isActive = workspace.slug === slug;
        return (
          <div
            key={workspace.id}
            className=""flex gap-x-2 items-center justify-between""
          >
            <a
              href={isActive ? null : paths.workspace.chat(workspace.slug)}
              className={`flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center ${
                isActive
                  ? ""bg-gray-100 dark:bg-stone-600""
                  : ""hover:bg-slate-100 dark:hover:bg-stone-900 ""
              }`}
            >
              <Book className=""h-4 w-4 flex-shrink-0"" />
              <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold whitespace-nowrap overflow-hidden "">
                {workspace.name}
              </p>
            </a>
            <button
              onClick={() => {
                setSelectedWs(workspace);
                showModal();
              }}
              className=""rounded-md bg-stone-200 p-2 h-[36px] w-[15%] flex items-center justify-center text-slate-800 hover:bg-stone-300 group dark:bg-stone-800 dark:text-slate-200 dark:hover:bg-stone-900 dark:border dark:border-stone-800""
            >
              <Settings className=""h-3.5 w-3.5 transition-all duration-300 group-hover:rotate-90"" />
            </button>
          </div>
        );
      })}
      {showing && !!selectedWs && (
        <ManageWorkspace hideModal={hideModal} providedSlug={selectedWs.slug} />
      )}
    </>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR } VAR ""VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR, { VAR, } VAR ""../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR(VAR); VAR { VAR, VAR, VAR } = VAR(); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <> <VAR.VAR VAR={36} VAR=""100%"" VAR={3} VAR="" VAR="" VAR={VAR} /> </> ); } VAR ( <> {VAR.VAR((VAR) => { VAR VAR = VAR.VAR === VAR; VAR ( <VAR VAR={VAR.VAR} VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR"" > <VAR VAR={VAR ? VAR : VAR.VAR.VAR(VAR.VAR)} VAR={`VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR ${ VAR ? ""VAR-VAR-100 VAR:VAR-VAR-600"" : ""VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 "" }`} > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR ""> {VAR.VAR} </VAR> </VAR> <VAR VAR={() => { VAR(VAR); VAR(); }} VAR=""VAR-VAR VAR-VAR-200 VAR-2 VAR-[36px] VAR-[15%] VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-300 VAR VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR VAR:VAR-VAR-800"" > <VAR VAR=""VAR-3.5 VAR-3.5 VAR-VAR VAR-300 VAR-VAR:VAR-90"" /> </VAR> </VAR> ); })} {VAR && !!VAR && ( <VAR VAR={VAR} VAR={VAR.VAR} /> )} </> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Sidebar/Placeholder/index.jsx,"import React, { useRef } from ""react"";
import {
  BookOpen,
  Briefcase,
  Cpu,
  GitHub,
  Key,
  Plus,
  AlertCircle,
} from ""react-feather"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import paths from ""../../../utils/paths"";

export default function Sidebar() {
  const sidebarRef = useRef(null);

  // const handleWidthToggle = () => {
  //   if (!sidebarRef.current) return false;
  //   sidebarRef.current.classList.add('translate-x-[-100%]')
  // }

  return (
    <>
      <div
        ref={sidebarRef}
        style={{ height: ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative m-[16px] rounded-[26px] bg-white dark:bg-black-900 min-w-[15.5%] p-[18px] ""
      >
        {/* <button onClick={handleWidthToggle} className='absolute -right-[13px] top-[35%] bg-white w-auto h-auto bg-transparent flex items-center'>
        <svg width=""16"" height=""96"" viewBox=""0 0 16 96"" fill=""none"" xmlns=""http://www.w3.org/2000/svg"" stroke=""#141414""><path d=""M2.5 0H3C3 20 15 12 15 32V64C15 84 3 76 3 96H2.5V0Z"" fill=""black"" fill-opacity=""0.12"" stroke=""transparent"" stroke-width=""0px""></path><path d=""M0 0H2.5C2.5 20 14.5 12 14.5 32V64C14.5 84 2.5 76 2.5 96H0V0Z"" fill=""#141414""></path></svg>
        <ChevronLeft className='absolute h-4 w-4 text-white mr-1' />
      </button> */}

        <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
          {/* Header Information */}
          <div className=""flex w-full items-center justify-between"">
            <p className=""text-xl font-base text-slate-600 dark:text-slate-200"">
              AnythingLLM
            </p>
            <div className=""flex gap-x-2 items-center text-slate-500"">
              <button className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200"">
                <Key className=""h-4 w-4 "" />
              </button>
            </div>
          </div>

          {/* Primary Body */}
          <div className=""h-[100%] flex flex-col w-full justify-between pt-4 overflow-y-hidden"">
            <div className=""h-auto sidebar-items dark:sidebar-items"">
              <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
                <div className=""flex gap-x-2 items-center justify-between"">
                  <button className=""flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900"">
                    <Plus className=""h-4 w-4"" />
                    <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                      New workspace
                    </p>
                  </button>
                </div>
                <Skeleton.default
                  height={36}
                  width=""100%""
                  count={3}
                  baseColor=""#292524""
                  highlightColor=""#4c4948""
                  enableAnimation={true}
                />
              </div>
            </div>
            <div>
              <div className=""flex flex-col gap-y-2"">
                <div className=""w-full flex items-center justify-start"">
                  <div className=""flex w-fit items-center justify-end gap-x-2"">
                    <p className=""text-slate-400 leading-loose text-sm"">LLM</p>
                    <div className=""flex items-center gap-x-1 border border-red-400 px-2 bg-red-200 rounded-full"">
                      <p className=""text-red-700 leading-tight text-sm"">
                        offline
                      </p>
                      <AlertCircle className=""h-3 w-3 stroke-red-100 fill-red-400"" />
                    </div>
                  </div>
                </div>
                <a
                  href={paths.hosting()}
                  target=""_blank""
                  className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
                >
                  <Cpu className=""h-4 w-4"" />
                  <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                    Managed cloud hosting
                  </p>
                </a>
                <a
                  href={paths.hosting()}
                  target=""_blank""
                  className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100  dark:bg-stone-800 dark:hover:bg-stone-900""
                >
                  <Briefcase className=""h-4 w-4"" />
                  <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                    Enterprise Installation
                  </p>
                </a>
              </div>

              {/* Footer */}
              <div className=""flex items-end justify-between mt-2"">
                <div className=""flex gap-x-1 items-center"">
                  <a
                    href={paths.github()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <GitHub className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.docs()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <BookOpen className=""h-4 w-4 "" />
                  </a>
                </div>
                <a
                  href={paths.mailToMintplex()}
                  className=""transition-all duration-300 text-xs text-slate-200 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                >
                  @MintplexLabs
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR VAR = VAR(VAR);     VAR ( <> <VAR VAR={VAR} VAR={{ VAR: ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR-[16px] VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-VAR-[15.5%] VAR-[18px] "" > {/* <VAR VAR={VAR} VAR='VAR -VAR-[13px] VAR-[35%] VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR VAR-VAR'> <VAR VAR=""16"" VAR=""96"" VAR=""0 0 16 96"" VAR=""VAR"" VAR=""VAR: <VAR VAR='VAR VAR-4 VAR-4 VAR-VAR VAR-1' /> </VAR> */} <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500""> <VAR VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200""> <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> </VAR> </VAR> {} <VAR VAR=""VAR-[100%] VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR:VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900""> <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> </VAR> <VAR.VAR VAR={36} VAR=""100%"" VAR={3} VAR="" VAR="" VAR={VAR} /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR-400 VAR-VAR VAR-VAR"">VAR</VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR VAR-VAR-400 VAR-2 VAR-VAR-200 VAR-VAR""> <VAR VAR=""VAR-VAR-700 VAR-VAR VAR-VAR""> VAR </VAR> <VAR VAR=""VAR-3 VAR-3 VAR-VAR-100 VAR-VAR-400"" /> </VAR> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Sidebar/SettingsOverlay/index.jsx,"import React, { useEffect, useState } from ""react"";
import {
  X,
  Archive,
  Lock,
  Users,
  Database,
  MessageSquare,
  Eye,
  Key,
} from ""react-feather"";
import SystemSettingsModal, {
  useSystemSettingsModal,
} from ""../../Modals/Settings"";
import useLogo from ""../../../hooks/useLogo"";
import System from ""../../../models/system"";

const OVERLAY_ID = ""anything-llm-system-overlay"";
const OVERLAY_CLASSES = {
  enabled: [""z-10"", ""opacity-1""],
  disabled: [""-z-10"", ""opacity-0""],
};

export default function SettingsOverlay() {
  const { logo } = useLogo();
  const [tab, setTab] = useState(null);
  const [settings, setSettings] = useState(null);
  const [loading, setLoading] = useState(true);
  const { showing, hideModal, showModal } = useSystemSettingsModal();
  const selectTab = (tab = null) => {
    setTab(tab);
    showModal(true);
  };
  const handleModalClose = () => {
    hideModal();
    setTab(null);
  };

  useEffect(() => {
    async function fetchKeys() {
      const _settings = await System.keys();
      setSettings(_settings);
      setLoading(false);
    }
    fetchKeys();
  }, []);

  return (
    <div
      id={OVERLAY_ID}
      className=""absolute left-0 rounded-[26px] top-0 w-full h-full opacity-0 -z-10 p-[18px] transition-all duration-300 bg-white dark:bg-black-900 flex flex-col overflow-x-hidden items-between""
    >
      <div className=""flex w-full items-center justify-between"">
        <div className=""flex shrink-0 max-w-[50%] items-center justify-start"">
          <img
            src={logo}
            alt=""Logo""
            className=""rounded max-h-[40px]""
            style={{ objectFit: ""contain"" }}
          />
        </div>
        <div className=""flex gap-x-2 items-center text-slate-500"">
          <button
            onClick={() => {
              setTab(null);
              hideOverlay();
            }}
            className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
          >
            <X className=""h-4 w-4 "" />
          </button>
        </div>
      </div>

      <div className=""h-[100%] flex flex-col w-full justify-between pt-4 overflow-y-hidden"">
        <div className=""h-auto sidebar-items dark:sidebar-items"">
          <p className=""text-sm leading-loose my-2 text-slate-800 dark:text-slate-200 "">
            Select a setting to configure
          </p>
          {loading ? (
            <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
            </div>
          ) : (
            <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
              {!settings?.MultiUserMode && (
                <Option
                  btnText=""Appearance""
                  icon={<Eye className=""h-4 w-4 flex-shrink-0"" />}
                  isActive={tab === ""appearance""}
                  onClick={() => selectTab(""appearance"")}
                />
              )}
              <Option
                btnText=""LLM Preference""
                icon={<MessageSquare className=""h-4 w-4 flex-shrink-0"" />}
                isActive={tab === ""llm""}
                onClick={() => selectTab(""llm"")}
              />
              <Option
                btnText=""Vector Database""
                icon={<Database className=""h-4 w-4 flex-shrink-0"" />}
                isActive={tab === ""vectordb""}
                onClick={() => selectTab(""vectordb"")}
              />
              <Option
                btnText=""Export or Import""
                icon={<Archive className=""h-4 w-4 flex-shrink-0"" />}
                isActive={tab === ""exportimport""}
                onClick={() => selectTab(""exportimport"")}
              />
              {!settings?.MultiUserMode && (
                <>
                  <Option
                    btnText=""Password Protection""
                    icon={<Lock className=""h-4 w-4 flex-shrink-0"" />}
                    isActive={tab === ""password""}
                    onClick={() => selectTab(""password"")}
                  />
                  <Option
                    btnText=""Multi User Mode""
                    icon={<Users className=""h-4 w-4 flex-shrink-0"" />}
                    isActive={tab === ""multiuser""}
                    onClick={() => selectTab(""multiuser"")}
                  />
                  <Option
                    btnText=""API Key""
                    icon={<Key className=""h-4 w-4 flex-shrink-0"" />}
                    isActive={tab === ""apikey""}
                    onClick={() => selectTab(""apikey"")}
                  />
                </>
              )}
            </div>
          )}
        </div>
      </div>
      {showing && !!tab && (
        <SystemSettingsModal tab={tab} hideModal={handleModalClose} />
      )}
    </div>
  );
}

const Option = ({ btnText, icon, isActive, onClick }) => {
  return (
    <div className=""flex gap-x-2 items-center justify-between"">
      <button
        onClick={onClick}
        className={`flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center ${
          isActive
            ? ""bg-gray-100 dark:bg-stone-600""
            : ""hover:bg-slate-100 dark:hover:bg-stone-900 ""
        }`}
      >
        {icon}
        <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold whitespace-nowrap overflow-hidden "">
          {btnText}
        </p>
      </button>
    </div>
  );
};

function showOverlay() {
  document
    .getElementById(OVERLAY_ID)
    .classList.remove(...OVERLAY_CLASSES.disabled);
  document.getElementById(OVERLAY_ID).classList.add(...OVERLAY_CLASSES.enabled);
}

function hideOverlay() {
  document
    .getElementById(OVERLAY_ID)
    .classList.remove(...OVERLAY_CLASSES.enabled);
  document
    .getElementById(OVERLAY_ID)
    .classList.add(...OVERLAY_CLASSES.disabled);
}

export function useSystemSettingsOverlay() {
  return { showOverlay, hideOverlay };
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR VAR, { VAR, } VAR ""../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR = ""VAR-VAR-VAR-VAR""; VAR VAR = { VAR: [""VAR-10"", ""VAR-1""], VAR: [""-VAR-10"", ""VAR-0""], }; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR { VAR, VAR, VAR } = VAR(); VAR VAR = (VAR = VAR) => { VAR(VAR); VAR(VAR); }; VAR VAR = () => { VAR(); VAR(VAR); }; VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR ( <VAR VAR={VAR} VAR=""VAR VAR-0 VAR-[26px] VAR-0 VAR-VAR VAR-VAR VAR-0 -VAR-10 VAR-[18px] VAR-VAR VAR-300 VAR-VAR VAR:VAR-VAR-900 VAR VAR-VAR VAR-VAR-VAR VAR-VAR"" > <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-0 VAR-VAR-[50%] VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500""> <VAR VAR={() => { VAR(VAR); VAR(); }} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> </VAR> </VAR> <VAR VAR=""VAR-[100%] VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR:VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR-2 VAR-VAR-800 VAR:VAR-VAR-200 ""> VAR VAR VAR VAR VAR </VAR> {VAR ? ( <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> </VAR> ) : ( <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> {!VAR?.VAR && ( <VAR VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> )} <VAR VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> <VAR VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> <VAR VAR=""VAR VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> {!VAR?.VAR && ( <> <VAR VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> <VAR VAR=""VAR VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> <VAR VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> </> )} </VAR> )} </VAR> </VAR> {VAR && !!VAR && ( <VAR VAR={VAR} VAR={VAR} /> )} </VAR> ); } VAR VAR = ({ VAR, VAR, VAR, VAR }) => { VAR ( <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR={`VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR ${ VAR ? ""VAR-VAR-100 VAR:VAR-VAR-600"" : ""VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 "" }`} > {VAR} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR ""> {VAR} </VAR> </VAR> </VAR> ); }; VAR VAR() { VAR .VAR(VAR) .VAR.VAR(...VAR.VAR); VAR.VAR(VAR).VAR.VAR(...VAR.VAR); } VAR VAR() { VAR .VAR(VAR) .VAR.VAR(...VAR.VAR); VAR .VAR(VAR) .VAR.VAR(...VAR.VAR); } VAR VAR VAR() { VAR { VAR, VAR }; } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/Sidebar/index.jsx,"import React, { useEffect, useRef, useState } from ""react"";
import {
  AtSign,
  BookOpen,
  GitHub,
  LogOut,
  Menu,
  Package,
  Plus,
  Shield,
  Tool,
  X,
} from ""react-feather"";
import IndexCount from ""./IndexCount"";
import LLMStatus from ""./LLMStatus"";
import NewWorkspaceModal, {
  useNewWorkspaceModal,
} from ""../Modals/NewWorkspace"";
import ActiveWorkspaces from ""./ActiveWorkspaces"";
import paths from ""../../utils/paths"";
import Discord from ""../Icons/Discord"";
import useUser from ""../../hooks/useUser"";
import { userFromStorage } from ""../../utils/request"";
import { AUTH_TOKEN, AUTH_USER } from ""../../utils/constants"";
import useLogo from ""../../hooks/useLogo"";
import SettingsOverlay, { useSystemSettingsOverlay } from ""./SettingsOverlay"";

export default function Sidebar() {
  const { logo } = useLogo();
  const sidebarRef = useRef(null);
  const { showOverlay } = useSystemSettingsOverlay();
  const {
    showing: showingNewWsModal,
    showModal: showNewWsModal,
    hideModal: hideNewWsModal,
  } = useNewWorkspaceModal();

  return (
    <>
      <div
        ref={sidebarRef}
        style={{ height: ""calc(100% - 32px)"" }}
        className=""relative transition-all duration-500 relative m-[16px] rounded-[26px] bg-white dark:bg-black-900 min-w-[15.5%] p-[18px] ""
      >
        <SettingsOverlay />
        <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
          {/* Header Information */}
          <div className=""flex w-full items-center justify-between"">
            <div className=""flex shrink-0 max-w-[50%] items-center justify-start"">
              <img
                src={logo}
                alt=""Logo""
                className=""rounded max-h-[40px]""
                style={{ objectFit: ""contain"" }}
              />
            </div>
            <div className=""flex gap-x-2 items-center text-slate-500"">
              <AdminHome />
              <SettingsButton onClick={showOverlay} />
            </div>
          </div>

          {/* Primary Body */}
          <div className=""h-[100%] flex flex-col w-full justify-between pt-4 overflow-y-hidden"">
            <div className=""h-auto sidebar-items dark:sidebar-items"">
              <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
                <div className=""flex gap-x-2 items-center justify-between"">
                  <button
                    onClick={showNewWsModal}
                    className=""flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900""
                  >
                    <Plus className=""h-4 w-4"" />
                    <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                      New workspace
                    </p>
                  </button>
                </div>
                <ActiveWorkspaces />
              </div>
            </div>
            <div>
              <div className=""flex flex-col gap-y-2"">
                <div className=""w-full flex items-center justify-between"">
                  <LLMStatus />
                  <IndexCount />
                </div>
                <a
                  href={paths.feedback()}
                  target=""_blank""
                  className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
                >
                  <AtSign className=""h-4 w-4"" />
                  <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                    Feedback form
                  </p>
                </a>
                <ManagedHosting />
                <LogoutButton />
              </div>

              {/* Footer */}
              <div className=""flex items-end justify-between mt-2"">
                <div className=""flex gap-x-1 items-center"">
                  <a
                    href={paths.github()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <GitHub className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.docs()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <BookOpen className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.discord()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 dark:bg-slate-800 hover:bg-slate-800 group""
                  >
                    <Discord className=""h-4 w-4 stroke-slate-400 group-hover:stroke-slate-200 dark:group-hover:stroke-slate-200"" />
                  </a>
                </div>
                <a
                  href={paths.mailToMintplex()}
                  className=""transition-all duration-300 text-xs text-slate-500 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                >
                  @MintplexLabs
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      {showingNewWsModal && <NewWorkspaceModal hideModal={hideNewWsModal} />}
    </>
  );
}

export function SidebarMobileHeader() {
  const { logo } = useLogo();
  const sidebarRef = useRef(null);
  const [showSidebar, setShowSidebar] = useState(false);
  const [showBgOverlay, setShowBgOverlay] = useState(false);
  const { showOverlay } = useSystemSettingsOverlay();
  const {
    showing: showingNewWsModal,
    showModal: showNewWsModal,
    hideModal: hideNewWsModal,
  } = useNewWorkspaceModal();

  useEffect(() => {
    // Darkens the rest of the screen
    // when sidebar is open.
    function handleBg() {
      if (showSidebar) {
        setTimeout(() => {
          setShowBgOverlay(true);
        }, 300);
      } else {
        setShowBgOverlay(false);
      }
    }
    handleBg();
  }, [showSidebar]);

  return (
    <>
      <div className=""flex justify-between relative top-0 left-0 w-full rounded-b-lg px-2 pb-4 bg-white dark:bg-black-900 text-slate-800 dark:text-slate-200"">
        <button
          onClick={() => setShowSidebar(true)}
          className=""rounded-md bg-stone-200 p-2 flex items-center justify-center text-slate-800 hover:bg-stone-300 group dark:bg-stone-800 dark:text-slate-200 dark:hover:bg-stone-900 dark:border dark:border-stone-800""
        >
          <Menu className=""h-6 w-6"" />
        </button>
        <div className=""flex shrink-0 w-fit items-center justify-start"">
          <img
            src={logo}
            alt=""Logo""
            className=""rounded w-full max-h-[40px]""
            style={{ objectFit: ""contain"" }}
          />
        </div>
      </div>
      <div
        style={{
          transform: showSidebar ? `translateX(0vw)` : `translateX(-100vw)`,
        }}
        className={`z-99 fixed top-0 left-0 transition-all duration-500 w-[100vw] h-[100vh]`}
      >
        <div
          className={`${
            showBgOverlay
              ? ""transition-all opacity-1""
              : ""transition-none opacity-0""
          }  duration-500 fixed top-0 left-0 bg-black-900 bg-opacity-75 w-screen h-screen`}
          onClick={() => setShowSidebar(false)}
        />
        <div
          ref={sidebarRef}
          className=""relative h-[100vh] fixed top-0 left-0  rounded-r-[26px] bg-white dark:bg-black-900 w-[80%] p-[18px] ""
        >
          <SettingsOverlay />
          <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
            {/* Header Information */}
            <div className=""flex w-full items-center justify-between gap-x-4"">
              <div className=""flex shrink-1 w-fit items-center justify-start"">
                <img
                  src={logo}
                  alt=""Logo""
                  className=""rounded w-full max-h-[40px]""
                  style={{ objectFit: ""contain"" }}
                />
              </div>
              <div className=""flex gap-x-2 items-center text-slate-500 shink-0"">
                <AdminHome />
                <SettingsButton onClick={showOverlay} />
              </div>
            </div>

            {/* Primary Body */}
            <div className=""h-full flex flex-col w-full justify-between pt-4 overflow-y-hidden "">
              <div className=""h-auto md:sidebar-items md:dark:sidebar-items"">
                <div
                  style={{ height: ""calc(100vw - -3rem)"" }}
                  className="" flex flex-col gap-y-4 pb-8 overflow-y-scroll no-scroll""
                >
                  <div className=""flex gap-x-2 items-center justify-between"">
                    <button
                      onClick={showNewWsModal}
                      className=""flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900""
                    >
                      <Plus className=""h-4 w-4"" />
                      <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                        New workspace
                      </p>
                    </button>
                  </div>
                  <ActiveWorkspaces />
                </div>
              </div>
              <div>
                <div className=""flex flex-col gap-y-2"">
                  <div className=""w-full flex items-center justify-between"">
                    <LLMStatus />
                    <IndexCount />
                  </div>
                  <a
                    href={paths.feedback()}
                    target=""_blank""
                    className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
                  >
                    <AtSign className=""h-4 w-4"" />
                    <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                      Feedback form
                    </p>
                  </a>
                  <ManagedHosting />
                  <LogoutButton />
                </div>

                {/* Footer */}
                <div className=""flex items-end justify-between mt-2"">
                  <div className=""flex gap-x-1 items-center"">
                    <a
                      href={paths.github()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                    >
                      <GitHub className=""h-4 w-4 "" />
                    </a>
                    <a
                      href={paths.docs()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                    >
                      <BookOpen className=""h-4 w-4 "" />
                    </a>
                    <a
                      href={paths.discord()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 dark:bg-slate-800 hover:bg-slate-800 group""
                    >
                      <Discord className=""h-4 w-4 stroke-slate-400 group-hover:stroke-slate-200 dark:group-hover:stroke-slate-200"" />
                    </a>
                  </div>
                  <a
                    href={paths.mailToMintplex()}
                    className=""transition-all duration-300 text-xs text-slate-500 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                  >
                    @MintplexLabs
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        {showingNewWsModal && <NewWorkspaceModal hideModal={hideNewWsModal} />}
      </div>
    </>
  );
}

function AdminHome() {
  const { user } = useUser();
  if (!user || user?.role !== ""admin"") return null;
  return (
    <a
      href={paths.admin.system()}
      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
    >
      <Shield className=""h-4 w-4"" />
    </a>
  );
}

function LogoutButton() {
  if (!window.localStorage.getItem(AUTH_USER)) return null;
  const user = userFromStorage();
  if (!user.username) return null;

  return (
    <button
      onClick={() => {
        window.localStorage.removeItem(AUTH_USER);
        window.localStorage.removeItem(AUTH_TOKEN);
        window.location.replace(paths.home());
      }}
      className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
    >
      <LogOut className=""h-4 w-4"" />
      <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
        Log out of {user.username}
      </p>
    </button>
  );
}

function SettingsButton({ onClick }) {
  const { user } = useUser();

  if (!!user && user?.role !== ""admin"") return null;
  return (
    <button
      onClick={onClick}
      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
    >
      <Tool className=""h-4 w-4 "" />
    </button>
  );
}

function ManagedHosting() {
  if (window.location.origin.includes("".useanything.com"")) return null;
  return (
    <a
      href={paths.hosting()}
      target=""_blank""
      className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
    >
      <Package className=""h-4 w-4"" />
      <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
        Managed cloud hosting
      </p>
    </a>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR, { VAR, } VAR ""../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR ""../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR { VAR } VAR ""../../VAR/VAR""; VAR { VAR, VAR } VAR ""../../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR VAR = VAR(VAR); VAR { VAR } = VAR(); VAR { VAR: VAR, VAR: VAR, VAR: VAR, } = VAR(); VAR ( <> <VAR VAR={VAR} VAR={{ VAR: ""VAR(100% - 32px)"" }} VAR=""VAR VAR-VAR VAR-500 VAR VAR-[16px] VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-VAR-[15.5%] VAR-[18px] "" > <VAR /> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-0 VAR-VAR-[50%] VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500""> <VAR /> <VAR VAR={VAR} /> </VAR> </VAR> {} <VAR VAR=""VAR-[100%] VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR:VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> </VAR> <VAR /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR /> <VAR /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> <VAR /> <VAR /> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-400 VAR-VAR:VAR-VAR-200 VAR:VAR-VAR:VAR-VAR-200"" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-500 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> {VAR && <VAR VAR={VAR} />} </> ); } VAR VAR VAR() { VAR { VAR } = VAR(); VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR { VAR } = VAR(); VAR { VAR: VAR, VAR: VAR, VAR: VAR, } = VAR(); VAR(() => {   VAR VAR() { VAR (VAR) { VAR(() => { VAR(VAR); }, 300); } VAR { VAR(VAR); } } VAR(); }, [VAR]); VAR ( <> <VAR VAR=""VAR VAR-VAR VAR VAR-0 VAR-0 VAR-VAR VAR-VAR-VAR VAR-2 VAR-4 VAR-VAR VAR:VAR-VAR-900 VAR-VAR-800 VAR:VAR-VAR-200""> <VAR VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR-VAR-200 VAR-2 VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-300 VAR VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR VAR:VAR-VAR-800"" > <VAR VAR=""VAR-6 VAR-6"" /> </VAR> <VAR VAR=""VAR VAR-0 VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> </VAR> <VAR VAR={{ VAR: VAR ? `VAR(0vw)` : `VAR(-100vw)`, }} VAR={`VAR-99 VAR VAR-0 VAR-0 VAR-VAR VAR-500 VAR-[100vw] VAR-[100vh]`} > <VAR VAR={`${ VAR ? ""VAR-VAR VAR-1"" : ""VAR-VAR VAR-0"" } VAR-500 VAR VAR-0 VAR-0 VAR-VAR-900 VAR-VAR-75 VAR-VAR VAR-VAR`} VAR={() => VAR(VAR)} /> <VAR VAR={VAR} VAR=""VAR VAR-[100vh] VAR VAR-0 VAR-0 VAR-VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-[80%] VAR-[18px] "" > <VAR /> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR VAR-1 VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500 VAR-0""> <VAR /> <VAR VAR={VAR} /> </VAR> </VAR> {} <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR ""> <VAR VAR=""VAR-VAR VAR:VAR-VAR VAR:VAR:VAR-VAR""> <VAR VAR={{ VAR: ""VAR(100vw - -3rem)"" }} VAR="" VAR VAR-VAR VAR-VAR-4 VAR-8 VAR-VAR-VAR VAR-VAR"" > <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> </VAR> <VAR /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR /> <VAR /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> <VAR /> <VAR /> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-400 VAR-VAR:VAR-VAR-200 VAR:VAR-VAR:VAR-VAR-200"" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-500 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> {VAR && <VAR VAR={VAR} />} </VAR> </> ); } VAR VAR() { VAR { VAR } = VAR(); VAR (!VAR || VAR?.VAR !== ""VAR"") VAR VAR; VAR ( <VAR VAR={VAR.VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4"" /> </VAR> ); } VAR VAR() { VAR (!VAR.VAR.VAR(VAR)) VAR VAR; VAR VAR = VAR(); VAR (!VAR.VAR) VAR VAR; VAR ( <VAR VAR={() => { VAR.VAR.VAR(VAR); VAR.VAR.VAR(VAR); VAR.VAR.VAR(VAR.VAR()); }} VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR VAR {VAR.VAR} </VAR> </VAR> ); } VAR VAR({ VAR }) { VAR { VAR } = VAR(); VAR (!!VAR && VAR?.VAR !== ""VAR"") VAR VAR; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> ); } VAR VAR() { VAR (VAR.VAR.VAR.VAR("".VAR.VAR"")) VAR VAR; VAR ( <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/WorkspaceChat/ChatContainer/ChatHistory/Citation/index.jsx,"import { memo, useState } from ""react"";
import { Maximize2, Minimize2 } from ""react-feather"";
import { v4 } from ""uuid"";
import { decode as HTMLDecode } from ""he"";

function combineLikeSources(sources) {
  const combined = {};
  sources.forEach((source) => {
    const { id, title, text } = source;
    if (combined.hasOwnProperty(title)) {
      combined[title].text += `\n\n ---- Chunk ${id || """"} ---- \n\n${text}`;
      combined[title].references += 1;
    } else {
      combined[title] = { title, text, references: 1 };
    }
  });
  return Object.values(combined);
}

export default function Citations({ sources = [] }) {
  if (sources.length === 0) return null;

  return (
    <div className=""flex flex-col mt-4 justify-left"">
      <div className=""flex flex-col justify-left overflow-x-scroll "">
        <div className=""w-full flex overflow-x-scroll items-center gap-4 mt-1 doc__source"">
          {combineLikeSources(sources).map((source) => (
            <Citation id={source?.id || v4()} source={source} />
          ))}
        </div>
      </div>
      <p className=""w-fit text-gray-700 dark:text-stone-400 text-xs mt-1"">
        *citations may not be relevant to end result.
      </p>
    </div>
  );
}

const Citation = memo(({ source, id }) => {
  const [maximized, setMaximized] = useState(false);
  const { references = 0, title, text } = source;
  if (title?.length === 0 || text?.length === 0) return null;
  const handleMinMax = () => {
    setMaximized(!maximized);
    Array.from(
      document?.querySelectorAll(
        `div[data-citation]:not([data-citation=""${id}""])`
      )
    ).forEach((el) => {
      const func = maximized ? ""remove"" : ""add"";
      el.classList[func](""hidden"");
    });
  };

  return (
    <div
      key={id || v4()}
      data-citation={id || v4()}
      className={`transition-all duration-300 relative flex flex-col w-full md:w-80 h-40 bg-gray-100 dark:bg-stone-800 border border-gray-700 dark:border-stone-800 rounded-lg shrink-0 ${
        maximized ? ""md:w-full h-fit pb-4"" : """"
      }`}
    >
      <div className=""rounded-t-lg bg-gray-300 dark:bg-stone-900 px-4 py-2 w-full h-fit flex items-center justify-between"">
        <p className=""text-base text-gray-800 dark:text-slate-400 italic truncate w-3/4"">
          {title}
        </p>
        <button
          onClick={handleMinMax}
          className=""hover:dark:bg-stone-800 hover:bg-gray-200 dark:text-slate-400 text-gray-800 rounded-full p-1""
        >
          {maximized ? (
            <Minimize2 className=""h-4 w-4"" />
          ) : (
            <Maximize2 className=""h-4 w-4"" />
          )}
        </button>
      </div>
      <div
        className={`overflow-hidden relative w-full ${
          maximized ? ""overflow-y-scroll"" : """"
        }`}
      >
        <p className=""px-2 py-1 text-xs whitespace-pre-line text-gray-800 dark:text-slate-300 italic"">
          {references > 1 && (
            <p className=""text-xs text-gray-500 dark:text-slate-500 mb-2"">
              referenced {references} times.
            </p>
          )}
          {HTMLDecode(text)}
        </p>
        <div
          className={`absolute bottom-0 flex w-full h-[20px] fade-up-border rounded-b-lg ${
            maximized ? ""hidden"" : """"
          }`}
        />
      </div>
    </div>
  );
});",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR } VAR ""VAR-VAR""; VAR { VAR } VAR ""VAR""; VAR { VAR VAR VAR } VAR ""VAR""; VAR VAR(VAR) { VAR VAR = {}; VAR.VAR((VAR) => { VAR { VAR, VAR, VAR } = VAR; VAR (VAR.VAR(VAR)) { VAR[VAR].VAR += `\VAR\VAR ---- VAR ${VAR || """"} ---- \VAR\VAR${VAR}`; VAR[VAR].VAR += 1; } VAR { VAR[VAR] = { VAR, VAR, VAR: 1 }; } }); VAR VAR.VAR(VAR); } VAR VAR VAR VAR({ VAR = [] }) { VAR (VAR.VAR === 0) VAR VAR; VAR ( <VAR VAR=""VAR VAR-VAR VAR-4 VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR ""> <VAR VAR=""VAR-VAR VAR VAR-VAR-VAR VAR-VAR VAR-4 VAR-1 VAR""> {VAR(VAR).VAR((VAR) => ( <VAR VAR={VAR?.VAR || VAR()} VAR={VAR} /> ))} </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR:VAR-VAR-400 VAR-VAR VAR-1""> *VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> ); } VAR VAR = VAR(({ VAR, VAR }) => { VAR [VAR, VAR] = VAR(VAR); VAR { VAR = 0, VAR, VAR } = VAR; VAR (VAR?.VAR === 0 || VAR?.VAR === 0) VAR VAR; VAR VAR = () => { VAR(!VAR); VAR.VAR( VAR?.VAR( `VAR[VAR-VAR]:VAR([VAR-VAR=""${VAR}""])` ) ).VAR((VAR) => { VAR VAR = VAR ? ""VAR"" : ""VAR""; VAR.VAR[VAR](""VAR""); }); }; VAR ( <VAR VAR={VAR || VAR()} VAR-VAR={VAR || VAR()} VAR={`VAR-VAR VAR-300 VAR VAR VAR-VAR VAR-VAR VAR:VAR-80 VAR-40 VAR-VAR-100 VAR:VAR-VAR-800 VAR VAR-VAR-700 VAR:VAR-VAR-800 VAR-VAR VAR-0 ${ VAR ? ""VAR:VAR-VAR VAR-VAR VAR-4"" : """" }`} > <VAR VAR=""VAR-VAR-VAR VAR-VAR-300 VAR:VAR-VAR-900 VAR-4 VAR-2 VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-800 VAR:VAR-VAR-400 VAR VAR VAR-3/4""> {VAR} </VAR> <VAR VAR={VAR} VAR=""VAR:VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR-VAR-400 VAR-VAR-800 VAR-VAR VAR-1"" > {VAR ? ( <VAR VAR=""VAR-4 VAR-4"" /> ) : ( <VAR VAR=""VAR-4 VAR-4"" /> )} </VAR> </VAR> <VAR VAR={`VAR-VAR VAR VAR-VAR ${ VAR ? ""VAR-VAR-VAR"" : """" }`} > <VAR VAR=""VAR-2 VAR-1 VAR-VAR VAR-VAR-VAR VAR-VAR-800 VAR:VAR-VAR-300 VAR""> {VAR > 1 && ( <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-500 VAR-2""> VAR {VAR} VAR. </VAR> )} {VAR(VAR)} </VAR> <VAR VAR={`VAR VAR-0 VAR VAR-VAR VAR-[20px] VAR-VAR-VAR VAR-VAR-VAR ${ VAR ? ""VAR"" : """" }`} /> </VAR> </VAR> ); }); ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/WorkspaceChat/ChatContainer/ChatHistory/HistoricalMessage/index.jsx,"import { memo, forwardRef } from ""react"";
import { AlertTriangle } from ""react-feather"";
import Jazzicon from ""../../../../UserIcon"";
import renderMarkdown from ""../../../../../utils/chat/markdown"";
import { userFromStorage } from ""../../../../../utils/request"";
import Citations from ""../Citation"";

const HistoricalMessage = forwardRef(
  ({ message, role, workspace, sources = [], error = false }, ref) => {
    if (role === ""user"") {
      return (
        <div className=""flex justify-end mb-4 items-start"">
          <div className=""mr-2 py-1 px-4 w-fit md:max-w-[75%] bg-slate-200 dark:bg-amber-800 rounded-b-2xl rounded-tl-2xl rounded-tr-sm"">
            <span
              className={`inline-block p-2 rounded-lg whitespace-pre-line text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base`}
            >
              {message}
            </span>
          </div>
          <Jazzicon size={30} user={{ uid: userFromStorage()?.username }} />
        </div>
      );
    }

    if (error) {
      return (
        <div className=""flex justify-start mb-4 items-end"">
          <Jazzicon size={30} user={{ uid: workspace.slug }} />
          <div className=""ml-2 max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-t-2xl rounded-br-2xl rounded-bl-sm"">
            <span
              className={`inline-block p-2 rounded-lg bg-red-50 text-red-500`}
            >
              <AlertTriangle className=""h-4 w-4 mb-1 inline-block"" /> Could not
              respond to message.
            </span>
          </div>
        </div>
      );
    }

    return (
      <div ref={ref} className=""flex justify-start items-end mb-4"">
        <Jazzicon size={30} user={{ uid: workspace.slug }} />
        <div className=""ml-2 py-3 px-4 overflow-x-scroll w-fit md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-t-2xl rounded-br-2xl rounded-bl-sm"">
          <span
            className=""no-scroll whitespace-pre-line text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base flex flex-col gap-y-1""
            dangerouslySetInnerHTML={{ __html: renderMarkdown(message) }}
          />
          <Citations sources={sources} />
        </div>
      </div>
    );
  }
);

export default memo(HistoricalMessage);",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR""; VAR VAR VAR ""../../../../../VAR/VAR/VAR""; VAR { VAR } VAR ""../../../../../VAR/VAR""; VAR VAR VAR ""../VAR""; VAR VAR = VAR( ({ VAR, VAR, VAR, VAR = [], VAR = VAR }, VAR) => { VAR (VAR === ""VAR"") { VAR ( <VAR VAR=""VAR VAR-VAR VAR-4 VAR-VAR""> <VAR VAR=""VAR-2 VAR-1 VAR-4 VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR={`VAR-VAR VAR-2 VAR-VAR VAR-VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR`} > {VAR} </VAR> </VAR> <VAR VAR={30} VAR={{ VAR: VAR()?.VAR }} /> </VAR> ); } VAR (VAR) { VAR ( <VAR VAR=""VAR VAR-VAR VAR-4 VAR-VAR""> <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR={`VAR-VAR VAR-2 VAR-VAR VAR-VAR-50 VAR-VAR-500`} > <VAR VAR=""VAR-4 VAR-4 VAR-1 VAR-VAR"" /> VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR VAR-4""> <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-3 VAR-4 VAR-VAR-VAR VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR VAR VAR-VAR VAR-VAR-1"" VAR={{ VAR: VAR(VAR) }} /> <VAR VAR={VAR} /> </VAR> </VAR> ); } ); VAR VAR VAR(VAR); ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/WorkspaceChat/ChatContainer/ChatHistory/PromptReply/index.jsx,"import { forwardRef, memo } from ""react"";
import { AlertTriangle } from ""react-feather"";
import Jazzicon from ""../../../../UserIcon"";
import renderMarkdown from ""../../../../../utils/chat/markdown"";
import Citations from ""../Citation"";

const PromptReply = forwardRef(
  (
    { uuid, reply, pending, error, workspace, sources = [], closed = true },
    ref
  ) => {
    if (!reply && !sources.length === 0 && !pending && !error) return null;
    if (pending) {
      return (
        <div
          ref={ref}
          className=""chat__message flex justify-start mb-4 items-end""
        >
          <Jazzicon size={30} user={{ uid: workspace.slug }} />
          <div className=""ml-2 pt-2 px-6 w-fit md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-t-2xl rounded-br-2xl rounded-bl-sm"">
            <span className={`inline-block p-2`}>
              <div className=""dot-falling""></div>
            </span>
          </div>
        </div>
      );
    }

    if (error) {
      return (
        <div className=""chat__message flex justify-start mb-4 items-center"">
          <Jazzicon size={30} user={{ uid: workspace.slug }} />
          <div className=""ml-2 py-3 px-4 rounded-br-3xl rounded-tr-3xl rounded-tl-xl text-slate-100 "">
            <div className=""bg-red-50 text-red-500 rounded-lg w-fit flex flex-col p-2"">
              <span className={`inline-block`}>
                <AlertTriangle className=""h-4 w-4 mb-1 inline-block"" /> Could
                not respond to message.
              </span>
              <span className=""text-xs"">Reason: {error || ""unknown""}</span>
            </div>
          </div>
        </div>
      );
    }

    return (
      <div key={uuid} ref={ref} className=""mb-4 flex justify-start items-end"">
        <Jazzicon size={30} user={{ uid: workspace.slug }} />
        <div className=""ml-2 py-3 px-4 overflow-x-scroll w-fit md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-t-2xl rounded-br-2xl rounded-bl-sm"">
          <span
            className=""whitespace-pre-line text-slate-800 dark:text-slate-200 flex flex-col gap-y-1 font-[500] md:font-semibold text-sm md:text-base""
            dangerouslySetInnerHTML={{ __html: renderMarkdown(reply) }}
          />
          <Citations sources={sources} />
        </div>
      </div>
    );
  }
);

export default memo(PromptReply);",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR""; VAR VAR VAR ""../../../../../VAR/VAR/VAR""; VAR VAR VAR ""../VAR""; VAR VAR = VAR( ( { VAR, VAR, VAR, VAR, VAR, VAR = [], VAR = VAR }, VAR ) => { VAR (!VAR && !VAR.VAR === 0 && !VAR && !VAR) VAR VAR; VAR (VAR) { VAR ( <VAR VAR={VAR} VAR=""VAR VAR VAR-VAR VAR-4 VAR-VAR"" > <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-2 VAR-6 VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR={`VAR-VAR VAR-2`}> <VAR VAR=""VAR-VAR""></VAR> </VAR> </VAR> </VAR> ); } VAR (VAR) { VAR ( <VAR VAR=""VAR VAR VAR-VAR VAR-4 VAR-VAR""> <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-3 VAR-4 VAR-VAR-3xl VAR-VAR-3xl VAR-VAR-VAR VAR-VAR-100 ""> <VAR VAR=""VAR-VAR-50 VAR-VAR-500 VAR-VAR VAR-VAR VAR VAR-VAR VAR-2""> <VAR VAR={`VAR-VAR`}> <VAR VAR=""VAR-4 VAR-4 VAR-1 VAR-VAR"" /> VAR VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR-VAR"">VAR: {VAR || ""VAR""}</VAR> </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR-4 VAR VAR-VAR VAR-VAR""> <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-3 VAR-4 VAR-VAR-VAR VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR VAR-VAR VAR-VAR-1 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR"" VAR={{ VAR: VAR(VAR) }} /> <VAR VAR={VAR} /> </VAR> </VAR> ); } ); VAR VAR VAR(VAR); ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/WorkspaceChat/ChatContainer/PromptInput/index.jsx,"import React, { useState, useRef, memo, useEffect } from ""react"";
import { isMobile } from ""react-device-detect"";
import { Loader, Menu, X } from ""react-feather"";

export default function PromptInput({
  workspace,
  message,
  submit,
  onChange,
  inputDisabled,
  buttonDisabled,
}) {
  const [showMenu, setShowMenu] = useState(false);
  const formRef = useRef(null);
  const [_, setFocused] = useState(false);
  const handleSubmit = (e) => {
    setFocused(false);
    submit(e);
  };
  const captureEnter = (event) => {
    if (event.keyCode == 13) {
      if (!event.shiftKey) {
        submit(event);
      }
    }
  };
  const adjustTextArea = (event) => {
    if (isMobile) return false;
    const element = event.target;
    element.style.height = ""1px"";
    element.style.height =
      event.target.value.length !== 0
        ? 25 + element.scrollHeight + ""px""
        : ""1px"";
  };

  const setTextCommand = (command = """") => {
    const storageKey = `workspace_chat_mode_${workspace.slug}`;
    if (command === ""/query"") {
      window.localStorage.setItem(storageKey, ""query"");
      window.dispatchEvent(new Event(""workspace_chat_mode_update""));
      return;
    } else if (command === ""/conversation"") {
      window.localStorage.setItem(storageKey, ""chat"");
      window.dispatchEvent(new Event(""workspace_chat_mode_update""));
      return;
    }

    onChange({ target: { value: `${command} ${message}` } });
  };

  return (
    <div className=""w-full fixed md:absolute bottom-0 left-0 z-10 md:z-0"">
      <form
        onSubmit={handleSubmit}
        className=""flex flex-col gap-y-1 bg-white dark:bg-black-900 md:bg-transparent rounded-t-lg md:w-3/4 w-full mx-auto""
      >
        <div className=""flex items-center py-2 px-4 rounded-lg"">
          <CommandMenu
            workspace={workspace}
            show={showMenu}
            handleClick={setTextCommand}
            hide={() => setShowMenu(false)}
          />
          <button
            onClick={() => setShowMenu(!showMenu)}
            type=""button""
            className=""p-2 text-slate-500 bg-transparent rounded-md hover:bg-gray-200 dark:hover:bg-stone-500 dark:hover:text-slate-200""
          >
            <Menu className=""w-4 h-4 md:h-6 md:w-6"" />
          </button>
          <textarea
            onKeyUp={adjustTextArea}
            onKeyDown={captureEnter}
            onChange={onChange}
            required={true}
            maxLength={240}
            disabled={inputDisabled}
            onFocus={() => setFocused(true)}
            onBlur={(e) => {
              setFocused(false);
              adjustTextArea(e);
            }}
            value={message}
            className=""cursor-text max-h-[100px] md:min-h-[40px] block mx-2 md:mx-4 p-2.5 w-full text-[16px] md:text-sm rounded-lg border bg-gray-50 border-gray-300 placeholder-gray-400 text-gray-900 dark:text-white dark:bg-stone-600 dark:border-stone-700 dark:placeholder-stone-400""
            placeholder={
              isMobile
                ? ""Enter your message here.""
                : ""Shift + Enter for newline. Enter to submit.""
            }
          />
          <button
            ref={formRef}
            type=""submit""
            disabled={buttonDisabled}
            className=""inline-flex justify-center p-0 md:p-2 rounded-full cursor-pointer text-black-900 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-stone-500 group""
          >
            {buttonDisabled ? (
              <Loader className=""w-6 h-6 animate-spin"" />
            ) : (
              <svg
                aria-hidden=""true""
                className=""w-6 h-6 rotate-45 fill-gray-500 dark:fill-slate-500 group-hover:dark:fill-slate-200""
                fill=""currentColor""
                viewBox=""0 0 20 20""
                xmlns=""http://www.w3.org/2000/svg""
              >
                <path d=""M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z""></path>
              </svg>
            )}
            <span className=""sr-only"">Send message</span>
          </button>
        </div>
        <Tracking workspaceSlug={workspace.slug} />
      </form>
    </div>
  );
}

const Tracking = memo(({ workspaceSlug }) => {
  const storageKey = `workspace_chat_mode_${workspaceSlug}`;
  const [chatMode, setChatMode] = useState(
    window.localStorage.getItem(storageKey) ?? ""chat""
  );

  useEffect(() => {
    function watchForChatModeChange() {
      if (!workspaceSlug) return;
      window.addEventListener(`workspace_chat_mode_update`, () => {
        try {
          const chatMode = window.localStorage.getItem(storageKey);
          setChatMode(chatMode);
        } catch {}
      });
    }
    watchForChatModeChange();
  }, [workspaceSlug]);

  return (
    <div className=""flex flex-col md:flex-row w-full justify-center items-center gap-2 mb-2 px-4 mx:px-0"">
      <p className=""bg-gray-200 dark:bg-stone-600 text-gray-800 dark:text-slate-400 text-xs px-2 rounded-lg font-mono text-center"">
        Chat mode: {chatMode}
      </p>
      <p className=""text-slate-400 text-xs text-center"">
        Responses from system may produce inaccurate or invalid responses - use
        with caution.
      </p>
    </div>
  );
});

function CommandMenu({ workspace, show, handleClick, hide }) {
  if (!show) return null;
  const COMMANDS = [
    {
      cmd: ""/conversation"",
      description: ""- switch to chat mode (remembers recent chat history) ."",
    },
    {
      cmd: ""/query"",
      description: ""- switch to query mode (does not remember previous chats)."",
    },
    { cmd: ""/reset"", description: ""- clear current chat history."" },
  ];

  return (
    <div className=""absolute top-[-25vh] md:top-[-23vh] min-h-[200px] flex flex-col rounded-lg border border-slate-400 p-2 pt-4 bg-gray-50 dark:bg-stone-600"">
      <div className=""flex justify-between items-center border-b border-slate-400 px-2 py-1 "">
        <p className=""text-gray-800 dark:text-slate-200"">Available Commands</p>
        <button
          type=""button""
          onClick={hide}
          className=""p-2 rounded-lg hover:bg-gray-200 hover:dark:bg-slate-500 rounded-full text-gray-800 dark:text-slate-400""
        >
          <X className=""h-4 w-4"" />
        </button>
      </div>

      <div className=""flex flex-col"">
        {COMMANDS.map((item, i) => {
          const { cmd, description } = item;
          return (
            <div className=""border-b border-slate-400 p-1"">
              <button
                key={i}
                type=""button""
                onClick={() => {
                  handleClick(cmd);
                  hide();
                }}
                className=""w-full px-4 py-2 flex items-center rounded-lg hover:bg-gray-300 hover:dark:bg-slate-500 gap-x-1 disabled:cursor-not-allowed""
              >
                <p className=""text-gray-800 dark:text-slate-200 font-semibold"">
                  {cmd}
                </p>
                <p className=""text-gray-800 dark:text-slate-300 text-sm"">
                  {description}
                </p>
              </button>
            </div>
          );
        })}
      </div>
    </div>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR { VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR({ VAR, VAR, VAR, VAR, VAR, VAR, }) { VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = (VAR) => { VAR(VAR); VAR(VAR); }; VAR VAR = (VAR) => { VAR (VAR.VAR == 13) { VAR (!VAR.VAR) { VAR(VAR); } } }; VAR VAR = (VAR) => { VAR (VAR) VAR VAR; VAR VAR = VAR.VAR; VAR.VAR.VAR = ""1px""; VAR.VAR.VAR = VAR.VAR.VAR.VAR !== 0 ? 25 + VAR.VAR + ""VAR"" : ""1px""; }; VAR VAR = (VAR = """") => { VAR VAR = `VAR${VAR.VAR}`; VAR (VAR === ""/VAR"") { VAR.VAR.VAR(VAR, ""VAR""); VAR.VAR(VAR VAR(""VAR"")); VAR; } VAR VAR (VAR === ""/VAR"") { VAR.VAR.VAR(VAR, ""VAR""); VAR.VAR(VAR VAR(""VAR"")); VAR; } VAR({ VAR: { VAR: `${VAR} ${VAR}` } }); }; VAR ( <VAR VAR=""VAR-VAR VAR VAR:VAR VAR-0 VAR-0 VAR-10 VAR:VAR-0""> <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR VAR-VAR-VAR VAR:VAR-3/4 VAR-VAR VAR-VAR"" > <VAR VAR=""VAR VAR-VAR VAR-2 VAR-4 VAR-VAR""> <VAR VAR={VAR} VAR={VAR} VAR={VAR} VAR={() => VAR(VAR)} /> <VAR VAR={() => VAR(!VAR)} VAR=""VAR"" VAR=""VAR-2 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 VAR:VAR-6 VAR:VAR-6"" /> </VAR> <VAR VAR={VAR} VAR={VAR} VAR={VAR} VAR={VAR} VAR={240} VAR={VAR} VAR={() => VAR(VAR)} VAR={(VAR) => { VAR(VAR); VAR(VAR); }} VAR={VAR} VAR=""VAR-VAR VAR-VAR-[100px] VAR:VAR-VAR-[40px] VAR VAR-2 VAR:VAR-4 VAR-2.5 VAR-VAR VAR-[16px] VAR:VAR-VAR VAR-VAR VAR VAR-VAR-50 VAR-VAR-300 VAR-VAR-400 VAR-VAR-900 VAR:VAR-VAR VAR:VAR-VAR-600 VAR:VAR-VAR-700 VAR:VAR-VAR-400"" VAR={ VAR ? ""VAR VAR VAR VAR."" : ""VAR + VAR VAR VAR. VAR VAR VAR."" } /> <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR-VAR VAR-0 VAR:VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR-200 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-500 VAR"" > {VAR ? ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR"" /> ) : ( <VAR VAR-VAR=""VAR"" VAR=""VAR-6 VAR-6 VAR-45 VAR-VAR-500 VAR:VAR-VAR-500 VAR-VAR:VAR:VAR-VAR-200"" VAR=""VAR"" VAR=""0 0 20 20"" VAR=""VAR: > <VAR VAR=""VAR.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z""></VAR> </VAR> )} <VAR VAR=""VAR-VAR"">VAR VAR</VAR> </VAR> </VAR> <VAR VAR={VAR.VAR} /> </VAR> </VAR> ); } VAR VAR = VAR(({ VAR }) => { VAR VAR = `VAR${VAR}`; VAR [VAR, VAR] = VAR( VAR.VAR.VAR(VAR) ?? ""VAR"" ); VAR(() => { VAR VAR() { VAR (!VAR) VAR; VAR.VAR(`VAR`, () => { VAR { VAR VAR = VAR.VAR.VAR(VAR); VAR(VAR); } VAR {} }); } VAR(); }, [VAR]); VAR ( <VAR VAR=""VAR VAR-VAR VAR:VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-2 VAR-2 VAR-4 VAR:VAR-0""> <VAR VAR=""VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR-800 VAR:VAR-VAR-400 VAR-VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR: {VAR} </VAR> <VAR VAR=""VAR-VAR-400 VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR - VAR VAR VAR. </VAR> </VAR> ); }); VAR VAR({ VAR, VAR, VAR, VAR }) { VAR (!VAR) VAR VAR; VAR VAR = [ { VAR: ""/VAR"", VAR: ""- VAR VAR VAR VAR (VAR VAR VAR VAR) ."", }, { VAR: ""/VAR"", VAR: ""- VAR VAR VAR VAR (VAR VAR VAR VAR VAR)."", }, { VAR: ""/VAR"", VAR: ""- VAR VAR VAR VAR."" }, ]; VAR ( <VAR VAR=""VAR VAR-[-25vh] VAR:VAR-[-23vh] VAR-VAR-[200px] VAR VAR-VAR VAR-VAR VAR VAR-VAR-400 VAR-2 VAR-4 VAR-VAR-50 VAR:VAR-VAR-600""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-400 VAR-2 VAR-1 ""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200"">VAR VAR</VAR> <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR-2 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-500 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-400"" > <VAR VAR=""VAR-4 VAR-4"" /> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR""> {VAR.VAR((VAR, VAR) => { VAR { VAR, VAR } = VAR; VAR ( <VAR VAR=""VAR-VAR VAR-VAR-400 VAR-1""> <VAR VAR={VAR} VAR=""VAR"" VAR={() => { VAR(VAR); VAR(); }} VAR=""VAR-VAR VAR-4 VAR-2 VAR VAR-VAR VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-500 VAR-VAR-1 VAR:VAR-VAR-VAR"" > <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR""> {VAR} </VAR> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-300 VAR-VAR""> {VAR} </VAR> </VAR> </VAR> ); })} </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/components/WorkspaceChat/index.jsx,"import React, { useEffect, useState } from ""react"";
import Workspace from ""../../models/workspace"";
import LoadingChat from ""./LoadingChat"";
import ChatContainer from ""./ChatContainer"";
import paths from ""../../utils/paths"";

export default function WorkspaceChat({ loading, workspace }) {
  const [history, setHistory] = useState([]);
  const [loadingHistory, setLoadingHistory] = useState(true);

  useEffect(() => {
    async function getHistory() {
      if (loading) return;
      if (!workspace?.slug) {
        setLoadingHistory(false);
        return false;
      }

      const chatHistory = await Workspace.chatHistory(workspace.slug);
      setHistory(chatHistory);
      setLoadingHistory(false);
    }
    getHistory();
  }, [workspace, loading]);

  if (loadingHistory) return <LoadingChat />;
  if (!loading && !loadingHistory && !workspace) {
    return (
      <>
        {loading === false && !workspace && (
          <dialog
            open={true}
            style={{ zIndex: 100 }}
            className=""fixed top-0 flex bg-black bg-opacity-50 w-[100vw] h-full items-center justify-center ""
          >
            <div className=""w-fit px-10 p-4 w-1/4 rounded-lg bg-white shadow dark:bg-stone-700 text-black dark:text-slate-200"">
              <div className=""flex flex-col w-full"">
                <p className=""font-semibold text-red-500"">
                  We cannot locate this workspace!
                </p>
                <p className=""text-sm mt-4"">
                  It looks like a workspace by this name is not available.
                </p>

                <div className=""flex w-full justify-center items-center mt-4"">
                  <a
                    href={paths.home()}
                    className=""border border-gray-800 text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:border-slate-200 dark:hover:bg-stone-900""
                  >
                    Go back to homepage
                  </a>
                </div>
              </div>
            </div>
          </dialog>
        )}
        <LoadingChat />
      </>
    );
  }

  return <ChatContainer workspace={workspace} knownHistory={history} />;
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR VAR({ VAR, VAR }) { VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR VAR() { VAR (VAR) VAR; VAR (!VAR?.VAR) { VAR(VAR); VAR VAR; } VAR VAR = VAR VAR.VAR(VAR.VAR); VAR(VAR); VAR(VAR); } VAR(); }, [VAR, VAR]); VAR (VAR) VAR <VAR />; VAR (!VAR && !VAR && !VAR) { VAR ( <> {VAR === VAR && !VAR && ( <VAR VAR={VAR} VAR={{ VAR: 100 }} VAR=""VAR VAR-0 VAR VAR-VAR VAR-VAR-50 VAR-[100vw] VAR-VAR VAR-VAR VAR-VAR "" > <VAR VAR=""VAR-VAR VAR-10 VAR-4 VAR-1/4 VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700 VAR-VAR VAR:VAR-VAR-200""> <VAR VAR=""VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-500""> VAR VAR VAR VAR VAR! </VAR> <VAR VAR=""VAR-VAR VAR-4""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-4""> <VAR VAR={VAR.VAR()} VAR=""VAR VAR-VAR-800 VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR VAR VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> )} <VAR /> </> ); } VAR <VAR VAR={VAR} VAR={VAR} />; } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/ApiKeys/NewApiKeyModal/index.jsx,"import React, { useEffect, useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../models/admin"";
import paths from ""../../../../utils/paths"";
const DIALOG_ID = `new-api-key-modal`;

function hideModal() {
  document.getElementById(DIALOG_ID)?.close();
}

export const NewApiKeyModalId = DIALOG_ID;
export default function NewApiKeyModal() {
  const [apiKey, setApiKey] = useState(null);
  const [error, setError] = useState(null);
  const [copied, setCopied] = useState(false);

  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const { apiKey: newApiKey, error } = await Admin.generateApiKey();
    if (!!newApiKey) setApiKey(newApiKey);
    setError(error);
  };
  const copyApiKey = () => {
    if (!apiKey) return false;
    window.navigator.clipboard.writeText(apiKey.secret);
    setCopied(true);
  };
  useEffect(() => {
    function resetStatus() {
      if (!copied) return false;
      setTimeout(() => {
        setCopied(false);
      }, 3000);
    }
    resetStatus();
  }, [copied]);

  return (
    <dialog id={DIALOG_ID} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Create new API key
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                {apiKey && (
                  <input
                    type=""text""
                    defaultValue={`${apiKey.secret}`}
                    disabled={true}
                    className=""rounded-lg px-4 py-2 text-gray-800 bg-gray-100 dark:text-slate-200 dark:bg-stone-800""
                  />
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  Once created the API key can be used to programmatically
                  access and configure this AnythingLLM instance.
                </p>
                <a
                  href={paths.apiDocs()}
                  target=""_blank""
                  className=""text-blue-600 dark:text-blue-300 hover:underline""
                >
                  Read the API documentation &rarr;
                </a>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              {!apiKey ? (
                <>
                  <button
                    onClick={hideModal}
                    type=""button""
                    className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
                  >
                    Cancel
                  </button>
                  <button
                    type=""submit""
                    className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
                  >
                    Create API key
                  </button>
                </>
              ) : (
                <button
                  onClick={copyApiKey}
                  type=""button""
                  disabled={copied}
                  className=""w-full disabled:bg-green-200 disabled:text-green-600 text-gray-800 bg-gray-100 px-4 py-2 rounded-lg dark:text-slate-200 dark:bg-stone-900""
                >
                  {copied ? ""Copied API key"" : ""Copy API key""}
                </button>
              )}
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = `VAR-VAR-VAR-VAR`; VAR VAR() { VAR.VAR(VAR)?.VAR(); } VAR VAR VAR = VAR; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR { VAR: VAR, VAR } = VAR VAR.VAR(); VAR (!!VAR) VAR(VAR); VAR(VAR); }; VAR VAR = () => { VAR (!VAR) VAR VAR; VAR.VAR.VAR.VAR(VAR.VAR); VAR(VAR); }; VAR(() => { VAR VAR() { VAR (!VAR) VAR VAR; VAR(() => { VAR(VAR); }, 3000); } VAR(); }, [VAR]); VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} {VAR && ( <VAR VAR=""VAR"" VAR={`${VAR.VAR}`} VAR={VAR} VAR=""VAR-VAR VAR-4 VAR-2 VAR-VAR-800 VAR-VAR-100 VAR:VAR-VAR-200 VAR:VAR-VAR-800"" /> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR-VAR-600 VAR:VAR-VAR-300 VAR:VAR"" > VAR VAR VAR VAR &VAR; </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> {!VAR ? ( <> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR VAR </VAR> </> ) : ( <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR-800 VAR-VAR-100 VAR-4 VAR-2 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900"" > {VAR ? ""VAR VAR VAR"" : ""VAR VAR VAR""} </VAR> )} </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/ApiKeys/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import { PlusCircle } from ""react-feather"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import ApiKeyRow from ""./ApiKeyRow"";
import NewApiKeyModal, { NewApiKeyModalId } from ""./NewApiKeyModal"";
import paths from ""../../../utils/paths"";

export default function AdminApiKeys() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                API Keys
              </p>
              <button
                onClick={() =>
                  document?.getElementById(NewApiKeyModalId)?.showModal()
                }
                className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
              >
                <PlusCircle className=""h-4 w-4"" /> Generate New API Key
              </button>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              API keys allow the holder to programmatically access and manage
              this AnythingLLM instance.
            </p>
            <a
              href={paths.apiDocs()}
              target=""_blank""
              className=""text-blue-600 dark:text-blue-300 hover:underline""
            >
              Read the API documentation &rarr;
            </a>
          </div>
          <ApiKeysContainer />
        </div>
        <NewApiKeyModal />
      </div>
    </div>
  );
}

function ApiKeysContainer() {
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [apiKeys, setApiKeys] = useState([]);
  useEffect(() => {
    async function fetchExistingKeys() {
      const { apiKeys: foundKeys } = await Admin.getApiKeys();
      setApiKeys(foundKeys);
      setLoading(false);
    }
    fetchExistingKeys();
  }, []);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <table className=""md:w-3/4 w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
      <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
        <tr>
          <th scope=""col"" className=""px-6 py-3"">
            API Key
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created By
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {apiKeys.map((apiKey) => (
          <ApiKeyRow key={apiKey.id} apiKey={apiKey} />
        ))}
      </tbody>
    </table>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR={() => VAR?.VAR(VAR)?.VAR() } VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > <VAR VAR=""VAR-4 VAR-4"" /> VAR VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR-VAR-600 VAR:VAR-VAR-300 VAR:VAR"" > VAR VAR VAR VAR &VAR; </VAR> </VAR> <VAR /> </VAR> <VAR /> </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR { VAR: VAR } = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <VAR VAR=""VAR:VAR-3/4 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} /> ))} </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/Appearance/index.jsx,"import React, { useState, useEffect } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import Admin from ""../../../models/admin"";
import AnythingLLMLight from ""../../../media/logo/anything-llm-light.png"";
import AnythingLLMDark from ""../../../media/logo/anything-llm-dark.png"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import useLogo from ""../../../hooks/useLogo"";
import System from ""../../../models/system"";
import EditingChatBubble from ""../../../components/EditingChatBubble"";
import showToast from ""../../../utils/toast"";

export default function Appearance() {
  const { logo: _initLogo } = useLogo();
  const [logo, setLogo] = useState("""");
  const prefersDarkMode = usePrefersDarkMode();
  const [hasChanges, setHasChanges] = useState(false);
  const [messages, setMessages] = useState([]);

  useEffect(() => {
    async function setInitLogo() {
      setLogo(_initLogo || """");
    }
    setInitLogo();
  }, [_initLogo]);

  useEffect(() => {
    async function fetchMessages() {
      const messages = await System.getWelcomeMessages();
      setMessages(messages);
    }
    fetchMessages();
  }, []);

  const handleFileUpload = async (event) => {
    const file = event.target.files[0];
    if (!file) return false;

    const formData = new FormData();
    formData.append(""logo"", file);
    const { success, error } = await Admin.uploadLogo(formData);
    if (!success) {
      showToast(`Failed to upload logo: ${error}`, ""error"");
      return;
    }

    const logoURL = await System.fetchLogo();
    setLogo(logoURL);
    showToast(""Image uploaded successfully."", ""success"");
  };

  const handleRemoveLogo = async () => {
    const { success, error } = await Admin.removeCustomLogo();
    if (!success) {
      console.error(""Failed to remove logo:"", error);
      showToast(`Failed to remove logo: ${error}`, ""error"");
      return;
    }

    const logoURL = await System.fetchLogo();
    setLogo(logoURL);
    showToast(""Image successfully removed."", ""success"");
  };

  const addMessage = (type) => {
    if (type === ""user"") {
      setMessages([
        ...messages,
        { user: ""Double click to edit..."", response: """" },
      ]);
    } else {
      setMessages([
        ...messages,
        { user: """", response: ""Double click to edit..."" },
      ]);
    }
  };

  const removeMessage = (index) => {
    setHasChanges(true);
    setMessages(messages.filter((_, i) => i !== index));
  };

  const handleMessageChange = (index, type, value) => {
    setHasChanges(true);
    const newMessages = [...messages];
    newMessages[index][type] = value;
    setMessages(newMessages);
  };

  const handleMessageSave = async () => {
    const { success, error } = await Admin.setWelcomeMessages(messages);
    if (!success) {
      showToast(`Failed to update welcome messages: ${error}`, ""error"");
      return;
    }
    showToast(""Successfully updated welcome messages."", ""success"");
    setHasChanges(false);
  };

  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""px-1 md:px-8"">
          <div className=""mb-6"">
            <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
              Appearance Settings
            </p>
            <p className=""mt-2 text-sm font-base text-slate-600 dark:text-slate-200"">
              Customize the appearance settings of your platform.
            </p>
          </div>
          <div className=""mb-6"">
            <div className=""flex flex-col gap-y-2"">
              <h2 className=""leading-tight font-medium text-black dark:text-white"">
                Custom Logo
              </h2>
              <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                Change the logo that appears in the sidebar.
              </p>
            </div>
            <div className=""flex md:flex-row flex-col items-center"">
              <img
                src={logo}
                alt=""Uploaded Logo""
                className=""w-48 h-48 object-contain mr-6""
                onError={(e) =>
                  (e.target.src = prefersDarkMode
                    ? AnythingLLMLight
                    : AnythingLLMDark)
                }
              />
              <div className=""flex flex-col"">
                <div className=""mb-4"">
                  <label className=""cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"">
                    Upload Image
                    <input
                      type=""file""
                      accept=""image/*""
                      className=""hidden""
                      onChange={handleFileUpload}
                    />
                  </label>
                  <button
                    onClick={handleRemoveLogo}
                    className=""ml-4 cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                  >
                    Remove Custom Logo
                  </button>
                </div>
                <div className=""text-sm text-gray-600 dark:text-gray-300"">
                  Upload your logo. Recommended size: 800x200.
                </div>
              </div>
            </div>
          </div>
          <div className=""mb-6"">
            <div className=""flex flex-col gap-y-2"">
              <h2 className=""leading-tight font-medium text-black dark:text-white"">
                Custom Messages
              </h2>
              <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                Change the default messages that are displayed to the users.
              </p>
            </div>
            <div className=""mt-6 flex flex-col gap-y-6"">
              {messages.map((message, index) => (
                <div key={index} className=""flex flex-col gap-y-2"">
                  {message.user && (
                    <EditingChatBubble
                      message={message}
                      index={index}
                      type=""user""
                      handleMessageChange={handleMessageChange}
                      removeMessage={removeMessage}
                    />
                  )}
                  {message.response && (
                    <EditingChatBubble
                      message={message}
                      index={index}
                      type=""response""
                      handleMessageChange={handleMessageChange}
                      removeMessage={removeMessage}
                    />
                  )}
                </div>
              ))}
              <div className=""flex gap-4 mt-4 justify-between"">
                <button
                  className=""self-end text-orange-500 hover:text-orange-700 transition""
                  onClick={() => addMessage(""response"")}
                >
                  + System Message
                </button>
                <button
                  className=""self-end text-orange-500 hover:text-orange-700 transition""
                  onClick={() => addMessage(""user"")}
                >
                  + User Message
                </button>
              </div>
            </div>
            {hasChanges && (
              <div className=""flex justify-center py-6"">
                <button
                  className=""ml-4 cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                  onClick={handleMessageSave}
                >
                  Save Messages
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR/VAR-VAR-VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR/VAR-VAR-VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR { VAR: VAR } = VAR(); VAR [VAR, VAR] = VAR(""""); VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR(VAR || """"); } VAR(); }, [VAR]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); } VAR(); }, []); VAR VAR = VAR (VAR) => { VAR VAR = VAR.VAR.VAR[0]; VAR (!VAR) VAR VAR; VAR VAR = VAR VAR(); VAR.VAR(""VAR"", VAR); VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(""VAR VAR VAR."", ""VAR""); }; VAR VAR = VAR () => { VAR { VAR, VAR } = VAR VAR.VAR(); VAR (!VAR) { VAR.VAR(""VAR VAR VAR VAR:"", VAR); VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(""VAR VAR VAR."", ""VAR""); }; VAR VAR = (VAR) => { VAR (VAR === ""VAR"") { VAR([ ...VAR, { VAR: ""VAR VAR VAR VAR..."", VAR: """" }, ]); } VAR { VAR([ ...VAR, { VAR: """", VAR: ""VAR VAR VAR VAR..."" }, ]); } }; VAR VAR = (VAR) => { VAR(VAR); VAR(VAR.VAR((VAR, VAR) => VAR !== VAR)); }; VAR VAR = (VAR, VAR, VAR) => { VAR(VAR); VAR VAR = [...VAR]; VAR[VAR][VAR] = VAR; VAR(VAR); }; VAR VAR = VAR () => { VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR(`VAR VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR(""VAR VAR VAR VAR."", ""VAR""); VAR(VAR); }; VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-6""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR-2 VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR VAR:VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR VAR"" VAR=""VAR-48 VAR-48 VAR-VAR VAR-6"" VAR={(VAR) => (VAR.VAR.VAR = VAR ? VAR : VAR) } /> <VAR VAR=""VAR VAR-VAR""> <VAR VAR=""VAR-4""> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600""> VAR VAR <VAR VAR=""VAR"" VAR=""VAR/*"" VAR=""VAR"" VAR={VAR} /> </VAR> <VAR VAR={VAR} VAR=""VAR-4 VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300""> VAR VAR VAR. VAR VAR: 800x200. </VAR> </VAR> </VAR> </VAR> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR-6""> {VAR.VAR((VAR, VAR) => ( <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-2""> {VAR.VAR && ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} VAR={VAR} /> )} {VAR.VAR && ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} VAR={VAR} /> )} </VAR> ))} <VAR VAR=""VAR VAR-4 VAR-4 VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR"" VAR={() => VAR(""VAR"")} > + VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR"" VAR={() => VAR(""VAR"")} > + VAR VAR </VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR VAR-VAR VAR-6""> <VAR VAR=""VAR-4 VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" VAR={VAR} > VAR VAR </VAR> </VAR> )} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/Chats/ChatRow/index.jsx,"import { useRef } from ""react"";
import Admin from ""../../../../models/admin"";
import truncate from ""truncate"";
import { X } from ""react-feather"";

export default function ChatRow({ chat }) {
  const rowRef = useRef(null);
  const handleDelete = async () => {
    if (
      !window.confirm(
        `Are you sure you want to delete this chat?\n\nThis action is irreversible.`
      )
    )
      return false;
    rowRef?.current?.remove();
    await Admin.deleteChat(chat.id);
  };

  return (
    <>
      <tr ref={rowRef} className=""bg-transparent"">
        <td className=""px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"">
          {chat.id}
        </td>
        <td className=""px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"">
          {chat.user?.username}
        </td>
        <td className=""px-6 py-4 font-mono"">{chat.workspace?.name}</td>
        <td
          onClick={() => {
            document.getElementById(`chat-${chat.id}-prompt`)?.showModal();
          }}
          className=""px-6 py-4 hover:dark:bg-stone-700 hover:bg-gray-100 cursor-pointer""
        >
          {truncate(chat.prompt, 40)}
        </td>
        <td
          onClick={() => {
            document.getElementById(`chat-${chat.id}-response`)?.showModal();
          }}
          className=""px-6 py-4 hover:dark:bg-stone-600 hover:bg-gray-100 cursor-pointer""
        >
          {truncate(JSON.parse(chat.response)?.text, 40)}
        </td>
        <td className=""px-6 py-4"">{chat.createdAt}</td>
        <td className=""px-6 py-4 flex items-center gap-x-6"">
          <button
            onClick={handleDelete}
            className=""font-medium text-red-600 dark:text-red-300 px-2 py-1 rounded-lg hover:bg-red-50 hover:dark:bg-red-800 hover:dark:bg-opacity-20""
          >
            Delete
          </button>
        </td>
      </tr>
      <TextPreview text={chat.prompt} modalName={`chat-${chat.id}-prompt`} />
      <TextPreview
        text={JSON.parse(chat.response)?.text}
        modalName={`chat-${chat.id}-response`}
      />
    </>
  );
}

function hideModal(modalName) {
  document.getElementById(modalName)?.close();
}

const TextPreview = ({ text, modalName }) => {
  return (
    <dialog id={modalName} className=""bg-transparent outline-none w-full"">
      <div className=""relative w-full max-w-2xl max-h-full min-w-1/2"">
        <div className=""min-w-1/2 relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Viewing Text
            </h3>
            <button
              onClick={() => hideModal(modalName)}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <div className=""w-full p-4 w-full flex"">
            <pre className=""w-full flex h-[200px] py-2 px-4 overflow-scroll rounded-lg bg-stone-400 bg-gray-200 text-gray-800 dark:text-slate-800 font-mono"">
              {text}
            </pre>
          </div>
        </div>
      </div>
    </dialog>
  );
};",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR({ VAR }) { VAR VAR = VAR(VAR); VAR VAR = VAR () => { VAR ( !VAR.VAR( `VAR VAR VAR VAR VAR VAR VAR VAR VAR?\VAR\VAR VAR VAR VAR.` ) ) VAR VAR; VAR?.VAR?.VAR(); VAR VAR.VAR(VAR.VAR); }; VAR ( <> <VAR VAR={VAR} VAR=""VAR-VAR""> <VAR VAR=""VAR-6 VAR-4 VAR-VAR VAR-VAR-900 VAR-VAR VAR:VAR-VAR""> {VAR.VAR} </VAR> <VAR VAR=""VAR-6 VAR-4 VAR-VAR VAR-VAR-900 VAR-VAR VAR:VAR-VAR""> {VAR.VAR?.VAR} </VAR> <VAR VAR=""VAR-6 VAR-4 VAR-VAR"">{VAR.VAR?.VAR}</VAR> <VAR VAR={() => { VAR.VAR(`VAR-${VAR.VAR}-VAR`)?.VAR(); }} VAR=""VAR-6 VAR-4 VAR:VAR:VAR-VAR-700 VAR:VAR-VAR-100 VAR-VAR"" > {VAR(VAR.VAR, 40)} </VAR> <VAR VAR={() => { VAR.VAR(`VAR-${VAR.VAR}-VAR`)?.VAR(); }} VAR=""VAR-6 VAR-4 VAR:VAR:VAR-VAR-600 VAR:VAR-VAR-100 VAR-VAR"" > {VAR(VAR.VAR(VAR.VAR)?.VAR, 40)} </VAR> <VAR VAR=""VAR-6 VAR-4"">{VAR.VAR}</VAR> <VAR VAR=""VAR-6 VAR-4 VAR VAR-VAR VAR-VAR-6""> <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300 VAR-2 VAR-1 VAR-VAR VAR:VAR-VAR-50 VAR:VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-20"" > VAR </VAR> </VAR> </VAR> <VAR VAR={VAR.VAR} VAR={`VAR-${VAR.VAR}-VAR`} /> <VAR VAR={VAR.VAR(VAR.VAR)?.VAR} VAR={`VAR-${VAR.VAR}-VAR`} /> </> ); } VAR VAR(VAR) { VAR.VAR(VAR)?.VAR(); } VAR VAR = ({ VAR, VAR }) => { VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR VAR-VAR-1/2""> <VAR VAR=""VAR-VAR-1/2 VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR={() => VAR(VAR)} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-4 VAR-VAR VAR""> <VAR VAR=""VAR-VAR VAR VAR-[200px] VAR-2 VAR-4 VAR-VAR VAR-VAR VAR-VAR-400 VAR-VAR-200 VAR-VAR-800 VAR:VAR-VAR-800 VAR-VAR""> {VAR} </VAR> </VAR> </VAR> </VAR> </VAR> ); }; ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/Chats/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import useQuery from ""../../../hooks/useQuery"";
import ChatRow from ""./ChatRow"";

export default function AdminChats() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                Workspace Chats
              </p>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              These are all the recorded chats and messages that have been sent
              by users ordered by their creation date.
            </p>
          </div>
          <ChatsContainer />
        </div>
      </div>
    </div>
  );
}

function ChatsContainer() {
  const query = useQuery();
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [chats, setChats] = useState([]);
  const [offset, setOffset] = useState(Number(query.get(""offset"") || 0));
  const [canNext, setCanNext] = useState(false);

  const handlePrevious = () => {
    if (chats.length === 0) {
      setOffset(0);
      return;
    }

    const chat = chats.at(-1);
    if (chat.id - 20 <= 0) {
      setOffset(0);
      return;
    }

    setOffset(chat.id - 1);
  };
  const handleNext = () => {
    setOffset(chats[0].id + 1);
  };

  useEffect(() => {
    async function fetchChats() {
      const { chats: _chats, hasPages = false } = await Admin.chats(offset);
      setChats(_chats);
      setCanNext(hasPages);
      setLoading(false);
    }
    fetchChats();
  }, [offset]);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <>
      <table className=""md:w-full w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
        <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
          <tr>
            <th scope=""col"" className=""px-6 py-3 rounded-tl-lg"">
              Id
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Sent By
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Workspace
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Prompt
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Response
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Sent At
            </th>
            <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
              Actions
            </th>
          </tr>
        </thead>
        <tbody>
          {chats.map((chat) => (
            <ChatRow key={chat.id} chat={chat} />
          ))}
        </tbody>
      </table>
      <div className=""flex w-full justify-between items-center"">
        <button
          onClick={handlePrevious}
          className=""px-4 py-2 rounded-lg border border-gray-800 dark:border-slate-200 text-gray-800 text-slate-200 disabled:invisible""
          disabled={offset === 0}
        >
          {"" ""}
          Previous Page
        </button>
        <button
          onClick={handleNext}
          className=""px-4 py-2 rounded-lg border border-gray-800 dark:border-slate-200 text-gray-800 text-slate-200 disabled:invisible""
          disabled={!canNext}
        >
          Next Page
        </button>
      </div>
    </>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR /> </VAR> </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(); VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR(VAR(VAR.VAR(""VAR"") || 0)); VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR (VAR.VAR === 0) { VAR(0); VAR; } VAR VAR = VAR.VAR(-1); VAR (VAR.VAR - 20 <= 0) { VAR(0); VAR; } VAR(VAR.VAR - 1); }; VAR VAR = () => { VAR(VAR[0].VAR + 1); }; VAR(() => { VAR VAR VAR() { VAR { VAR: VAR, VAR = VAR } = VAR VAR.VAR(VAR); VAR(VAR); VAR(VAR); VAR(VAR); } VAR(); }, [VAR]); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <> <VAR VAR=""VAR:VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} /> ))} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR-4 VAR-2 VAR-VAR VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR-800 VAR-VAR-200 VAR:VAR"" VAR={VAR === 0} > {"" ""} VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR-4 VAR-2 VAR-VAR VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR-800 VAR-VAR-200 VAR:VAR"" VAR={!VAR} > VAR VAR </VAR> </VAR> </> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/Invitations/NewInviteModal/index.jsx,"import React, { useEffect, useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../models/admin"";
const DIALOG_ID = `new-invite-modal`;

function hideModal() {
  document.getElementById(DIALOG_ID)?.close();
}

export const NewInviteModalId = DIALOG_ID;
export default function NewInviteModal() {
  const [invite, setInvite] = useState(null);
  const [error, setError] = useState(null);
  const [copied, setCopied] = useState(false);

  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const { invite: newInvite, error } = await Admin.newInvite();
    if (!!newInvite) setInvite(newInvite);
    setError(error);
  };
  const copyInviteLink = () => {
    if (!invite) return false;
    window.navigator.clipboard.writeText(
      `${window.location.origin}/accept-invite/${invite.code}`
    );
    setCopied(true);
  };
  useEffect(() => {
    function resetStatus() {
      if (!copied) return false;
      setTimeout(() => {
        setCopied(false);
      }, 3000);
    }
    resetStatus();
  }, [copied]);

  return (
    <dialog id={DIALOG_ID} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Create new invite
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                {invite && (
                  <input
                    type=""url""
                    defaultValue={`${window.location.origin}/accept-invite/${invite.code}`}
                    disabled={true}
                    className=""rounded-lg px-4 py-2 text-gray-800 bg-gray-100 dark:text-slate-200 dark:bg-stone-800""
                  />
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creation you will be able to copy the invite and send it
                  to a new user where they can create an account as a default
                  user.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              {!invite ? (
                <>
                  <button
                    onClick={hideModal}
                    type=""button""
                    className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
                  >
                    Cancel
                  </button>
                  <button
                    type=""submit""
                    className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
                  >
                    Create Invite
                  </button>
                </>
              ) : (
                <button
                  onClick={copyInviteLink}
                  type=""button""
                  disabled={copied}
                  className=""w-full disabled:bg-green-200 disabled:text-green-600 text-gray-800 bg-gray-100 px-4 py-2 rounded-lg dark:text-slate-200 dark:bg-stone-900""
                >
                  {copied ? ""Copied Link"" : ""Copy Invite Link""}
                </button>
              )}
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = `VAR-VAR-VAR`; VAR VAR() { VAR.VAR(VAR)?.VAR(); } VAR VAR VAR = VAR; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR { VAR: VAR, VAR } = VAR VAR.VAR(); VAR (!!VAR) VAR(VAR); VAR(VAR); }; VAR VAR = () => { VAR (!VAR) VAR VAR; VAR.VAR.VAR.VAR( `${VAR.VAR.VAR}/VAR-VAR/${VAR.VAR}` ); VAR(VAR); }; VAR(() => { VAR VAR() { VAR (!VAR) VAR VAR; VAR(() => { VAR(VAR); }, 3000); } VAR(); }, [VAR]); VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} {VAR && ( <VAR VAR=""VAR"" VAR={`${VAR.VAR.VAR}/VAR-VAR/${VAR.VAR}`} VAR={VAR} VAR=""VAR-VAR VAR-4 VAR-2 VAR-VAR-800 VAR-VAR-100 VAR:VAR-VAR-200 VAR:VAR-VAR-800"" /> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> {!VAR ? ( <> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </> ) : ( <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR-800 VAR-VAR-100 VAR-4 VAR-2 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900"" > {VAR ? ""VAR VAR"" : ""VAR VAR VAR""} </VAR> )} </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/Invitations/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import { Mail } from ""react-feather"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import InviteRow from ""./InviteRow"";
import NewInviteModal, { NewInviteModalId } from ""./NewInviteModal"";

export default function AdminInvites() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                Invitations
              </p>
              <button
                onClick={() =>
                  document?.getElementById(NewInviteModalId)?.showModal()
                }
                className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
              >
                <Mail className=""h-4 w-4"" /> Create Invite Link
              </button>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              Create invitation links for people in your organization to accept
              and sign up with. Invitations can only be used by a single user.
            </p>
          </div>
          <InvitationsContainer />
        </div>
        <NewInviteModal />
      </div>
    </div>
  );
}

function InvitationsContainer() {
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [invites, setInvites] = useState([]);
  useEffect(() => {
    async function fetchInvites() {
      const _invites = await Admin.invites();
      setInvites(_invites);
      setLoading(false);
    }
    fetchInvites();
  }, []);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <table className=""md:w-3/4 w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
      <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
        <tr>
          <th scope=""col"" className=""px-6 py-3"">
            Status
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tl-lg"">
            Accepted By
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created By
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {invites.map((invite) => (
          <InviteRow key={invite.id} invite={invite} />
        ))}
      </tbody>
    </table>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR </VAR> <VAR VAR={() => VAR?.VAR(VAR)?.VAR() } VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > <VAR VAR=""VAR-4 VAR-4"" /> VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR /> </VAR> <VAR /> </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <VAR VAR=""VAR:VAR-3/4 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} /> ))} </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/System/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import Admin from ""../../../models/admin"";
import showToast from ""../../../utils/toast"";

export default function AdminSystem() {
  const [saving, setSaving] = useState(false);
  const [hasChanges, setHasChanges] = useState(false);
  const [canDelete, setCanDelete] = useState(false);
  const [messageLimit, setMessageLimit] = useState({
    enabled: false,
    limit: 10,
  });
  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    await Admin.updateSystemPreferences({
      users_can_delete_workspaces: canDelete,
      limit_user_messages: messageLimit.enabled,
      message_limit: messageLimit.limit,
    });
    setSaving(false);
    setHasChanges(false);
    showToast(""System preferences updated successfully."", ""success"");
  };

  useEffect(() => {
    async function fetchSettings() {
      const { settings } = await Admin.systemPreferences();
      if (!settings) return;
      setCanDelete(settings?.users_can_delete_workspaces);
      setMessageLimit({
        enabled: settings.limit_user_messages,
        limit: settings.message_limit,
      });
    }
    fetchSettings();
  }, []);

  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <form
          onSubmit={handleSubmit}
          onChange={() => setHasChanges(true)}
          className=""flex w-full""
        >
          <div className=""flex flex-col w-full px-1 md:px-8"">
            <div className=""w-full flex flex-col gap-y-1"">
              <div className=""items-center flex gap-x-4"">
                <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                  System Preferences
                </p>
                {hasChanges && (
                  <button
                    type=""submit""
                    disabled={saving}
                    className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
                  >
                    {saving ? ""Saving..."" : ""Save changes""}
                  </button>
                )}
              </div>
              <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
                These are the overall settings and configurations of your
                instance.
              </p>
            </div>

            <div className=""my-4"">
              <div className=""flex flex-col gap-y-2 mb-2.5"">
                <label className=""leading-tight font-medium text-black dark:text-white"">
                  Users can delete workspaces
                </label>
                <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                  allow non-admin users to delete workspaces that they are a
                  part of. This would delete the workspace for everyone.
                </p>
              </div>
              <label className=""relative inline-flex cursor-pointer items-center"">
                <input
                  type=""checkbox""
                  name=""users_can_delete_workspaces""
                  checked={canDelete}
                  onChange={(e) => setCanDelete(e.target.checked)}
                  className=""peer sr-only""
                />
                <div className=""peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800""></div>
                <span className=""ml-3 text-sm font-medium text-gray-900 dark:text-gray-300""></span>
              </label>
            </div>

            <div className=""my-4"">
              <div className=""flex flex-col gap-y-2 mb-2.5"">
                <label className=""leading-tight font-medium text-black dark:text-white"">
                  Limit messages per user per day
                </label>
                <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                  Restrict non-admin users to a number of successful queries or
                  chats within a 24 hour window. Enable this to prevent users
                  from running up OpenAI costs.
                </p>
              </div>
              <label className=""relative inline-flex cursor-pointer items-center"">
                <input
                  type=""checkbox""
                  name=""limit_user_messages""
                  value=""yes""
                  checked={messageLimit.enabled}
                  onChange={(e) => {
                    setMessageLimit({
                      ...messageLimit,
                      enabled: e.target.checked,
                    });
                  }}
                  className=""peer sr-only""
                />
                <div className=""peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800""></div>
                <span className=""ml-3 text-sm font-medium text-gray-900 dark:text-gray-300""></span>
              </label>
            </div>
            {messageLimit.enabled && (
              <div className=""mb-4"">
                <label className="" block flex items-center gap-x-1 font-medium text-black dark:text-white"">
                  Message limit per day
                </label>
                <div className=""relative"">
                  <input
                    type=""number""
                    name=""message_limit""
                    onScroll={(e) => e.target.blur()}
                    onChange={(e) => {
                      setMessageLimit({
                        enabled: true,
                        limit: Number(e?.target?.value || 0),
                      });
                    }}
                    value={messageLimit.limit}
                    min={1}
                    max={300}
                    className=""w-1/3 my-2 rounded-lg border border-stroke bg-transparent py-4 pl-6 pr-10 text-gray-800 dark:text-slate-200 outline-none focus:border-primary focus-visible:shadow-none dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary""
                  />
                </div>
              </div>
            )}
          </div>
        </form>
      </div>
    </div>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR({ VAR: VAR, VAR: 10, }); VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR VAR.VAR({ VAR: VAR, VAR: VAR.VAR, VAR: VAR.VAR, }); VAR(VAR); VAR(VAR); VAR(""VAR VAR VAR VAR."", ""VAR""); }; VAR(() => { VAR VAR VAR() { VAR { VAR } = VAR VAR.VAR(); VAR (!VAR) VAR; VAR(VAR?.VAR); VAR({ VAR: VAR.VAR, VAR: VAR.VAR, }); } VAR(); }, []); VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR={VAR} VAR={() => VAR(VAR)} VAR=""VAR VAR-VAR"" > <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> {VAR && ( <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> )} </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-4""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2 VAR-2.5""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR"" VAR=""VAR"" VAR={VAR} VAR={(VAR) => VAR(VAR.VAR.VAR)} VAR=""VAR VAR-VAR"" /> <VAR VAR=""VAR VAR-6 VAR-11 VAR-VAR VAR-VAR-200 VAR:VAR VAR:VAR-[2px] VAR:VAR-[2px] VAR:VAR-5 VAR:VAR-5 VAR:VAR-VAR VAR:VAR VAR:VAR-VAR-300 VAR:VAR-VAR VAR:VAR-VAR VAR:VAR-[''] VAR-VAR:VAR-VAR-600 VAR-VAR:VAR:VAR-VAR-VAR VAR-VAR:VAR:VAR-VAR VAR-VAR:VAR-VAR VAR-VAR:VAR-4 VAR-VAR:VAR-VAR-300 VAR:VAR-VAR-600 VAR:VAR-VAR-700 VAR:VAR-VAR:VAR-VAR-800""></VAR> <VAR VAR=""VAR-3 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR-300""></VAR> </VAR> </VAR> <VAR VAR=""VAR-4""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2 VAR-2.5""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR 24 VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR"" VAR={VAR.VAR} VAR={(VAR) => { VAR({ ...VAR, VAR: VAR.VAR.VAR, }); }} VAR=""VAR VAR-VAR"" /> <VAR VAR=""VAR VAR-6 VAR-11 VAR-VAR VAR-VAR-200 VAR:VAR VAR:VAR-[2px] VAR:VAR-[2px] VAR:VAR-5 VAR:VAR-5 VAR:VAR-VAR VAR:VAR VAR:VAR-VAR-300 VAR:VAR-VAR VAR:VAR-VAR VAR:VAR-[''] VAR-VAR:VAR-VAR-600 VAR-VAR:VAR:VAR-VAR-VAR VAR-VAR:VAR:VAR-VAR VAR-VAR:VAR-VAR VAR-VAR:VAR-4 VAR-VAR:VAR-VAR-300 VAR:VAR-VAR-600 VAR:VAR-VAR-700 VAR:VAR-VAR:VAR-VAR-800""></VAR> <VAR VAR=""VAR-3 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR-300""></VAR> </VAR> </VAR> {VAR.VAR && ( <VAR VAR=""VAR-4""> <VAR VAR="" VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR""> <VAR VAR=""VAR"" VAR=""VAR"" VAR={(VAR) => VAR.VAR.VAR()} VAR={(VAR) => { VAR({ VAR: VAR, VAR: VAR(VAR?.VAR?.VAR || 0), }); }} VAR={VAR.VAR} VAR={1} VAR={300} VAR=""VAR-1/3 VAR-2 VAR-VAR VAR VAR-VAR VAR-VAR VAR-4 VAR-6 VAR-10 VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR:VAR-VAR VAR:VAR-VAR-VAR VAR:VAR-VAR-VAR VAR:VAR:VAR-VAR"" /> </VAR> </VAR> )} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/Users/NewUserModal/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../models/admin"";
const DIALOG_ID = `new-user-modal`;

function hideModal() {
  document.getElementById(DIALOG_ID)?.close();
}

export const NewUserModalId = DIALOG_ID;
export default function NewUserModal() {
  const [error, setError] = useState(null);
  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { user, error } = await Admin.newUser(data);
    if (!!user) window.location.reload();
    setError(error);
  };

  return (
    <dialog id={DIALOG_ID} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Add user to instance
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""username""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Username
                  </label>
                  <input
                    name=""username""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""User's username""
                    minLength={2}
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""password""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Password
                  </label>
                  <input
                    name=""password""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""User's initial password""
                    required={true}
                    minLength={8}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""role""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Role
                  </label>
                  <select
                    name=""role""
                    required={true}
                    defaultValue={""default""}
                    className=""rounded-lg bg-gray-50 px-4 py-2 text-sm text-gray-800 outline-none dark:text-slate-200 dark:bg-stone-600""
                  >
                    <option value=""default"">Member</option>
                    <option value=""admin"">Administrator</option>
                  </select>
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creating a user they will need to login with their
                  initial login to get access.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Add user
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = `VAR-VAR-VAR`; VAR VAR() { VAR.VAR(VAR)?.VAR(); } VAR VAR VAR = VAR; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!!VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR'VAR VAR"" VAR={2} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR'VAR VAR VAR"" VAR={VAR} VAR={8} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR={VAR} VAR={""VAR""} VAR=""VAR-VAR VAR-VAR-50 VAR-4 VAR-2 VAR-VAR VAR-VAR-800 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-600"" > <VAR VAR=""VAR"">VAR</VAR> <VAR VAR=""VAR"">VAR</VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/Users/UserRow/EditUserModal/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../../models/admin"";

export const EditUserModalId = (user) => `edit-user-${user.id}-modal`;
export default function EditUserModal({ user }) {
  const [error, setError] = useState(null);
  const hideModal = () => {
    document.getElementById(EditUserModalId(user)).close();
  };
  const handleUpdate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) {
      if (!value || value === null) continue;
      data[key] = value;
    }
    const { success, error } = await Admin.updateUser(user.id, data);
    if (success) window.location.reload();
    setError(error);
  };

  return (
    <dialog id={EditUserModalId(user)} className=""bg-transparent outline-none"">
      <div className=""relative w-[75vw] max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Edit {user.username}
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleUpdate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""username""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Username
                  </label>
                  <input
                    name=""username""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""User's username""
                    minLength={2}
                    defaultValue={user.username}
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""password""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    New Password
                  </label>
                  <input
                    name=""password""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder={`${user.username}'s new password`}
                    minLength={8}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""role""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Role
                  </label>
                  <select
                    name=""role""
                    required={true}
                    defaultValue={user.role}
                    className=""rounded-lg bg-gray-50 px-4 py-2 text-sm text-gray-800 outline-none dark:text-slate-200 dark:bg-stone-600""
                  >
                    <option value=""default"">Member</option>
                    <option value=""admin"">Administrator</option>
                  </select>
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Update user
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../../VAR/VAR""; VAR VAR VAR = (VAR) => `VAR-VAR-${VAR.VAR}-VAR`; VAR VAR VAR VAR({ VAR }) { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR.VAR(VAR(VAR)).VAR(); }; VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) { VAR (!VAR || VAR === VAR) VAR; VAR[VAR] = VAR; } VAR { VAR, VAR } = VAR VAR.VAR(VAR.VAR, VAR); VAR (VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR={VAR(VAR)} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-[75vw] VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR {VAR.VAR} </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR'VAR VAR"" VAR={2} VAR={VAR.VAR} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={`${VAR.VAR}'VAR VAR VAR`} VAR={8} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR={VAR} VAR={VAR.VAR} VAR=""VAR-VAR VAR-VAR-50 VAR-4 VAR-2 VAR-VAR VAR-VAR-800 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-600"" > <VAR VAR=""VAR"">VAR</VAR> <VAR VAR=""VAR"">VAR</VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/Users/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import { UserPlus } from ""react-feather"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import UserRow from ""./UserRow"";
import useUser from ""../../../hooks/useUser"";
import NewUserModal, { NewUserModalId } from ""./NewUserModal"";

export default function AdminUsers() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                Instance users
              </p>
              <button
                onClick={() =>
                  document?.getElementById(NewUserModalId)?.showModal()
                }
                className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
              >
                <UserPlus className=""h-4 w-4"" /> Add user
              </button>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              These are all the accounts which have an account on this instance.
              Removing an account will instantly remove their access to this
              instance.
            </p>
          </div>
          <UsersContainer />
        </div>
        <NewUserModal />
      </div>
    </div>
  );
}

function UsersContainer() {
  const { user: currUser } = useUser();
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [users, setUsers] = useState([]);
  useEffect(() => {
    async function fetchUsers() {
      const _users = await Admin.users();
      setUsers(_users);
      setLoading(false);
    }
    fetchUsers();
  }, []);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <table className=""md:w-3/4 w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
      <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
        <tr>
          <th scope=""col"" className=""px-6 py-3 rounded-tl-lg"">
            Username
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Role
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created On
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {users.map((user) => (
          <UserRow key={user.id} currUser={currUser} user={user} />
        ))}
      </tbody>
    </table>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR={() => VAR?.VAR(VAR)?.VAR() } VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > <VAR VAR=""VAR-4 VAR-4"" /> VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR /> </VAR> <VAR /> </VAR> </VAR> ); } VAR VAR() { VAR { VAR: VAR } = VAR(); VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <VAR VAR=""VAR:VAR-3/4 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} VAR={VAR} /> ))} </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/Workspaces/NewWorkspaceModal/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../models/admin"";
const DIALOG_ID = `new-workspace-modal`;

function hideModal() {
  document.getElementById(DIALOG_ID)?.close();
}

export const NewWorkspaceModalId = DIALOG_ID;
export default function NewWorkspaceModal() {
  const [error, setError] = useState(null);
  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const form = new FormData(e.target);
    const { workspace, error } = await Admin.newWorkspace(form.get(""name""));
    if (!!workspace) window.location.reload();
    setError(error);
  };

  return (
    <dialog id={DIALOG_ID} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Add workspace to Instance
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""name""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Workspace name
                  </label>
                  <input
                    name=""name""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""My workspace""
                    minLength={4}
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creating this workspace only admins will be able to see
                  it. You can add users after it has been created.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Create workspace
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = `VAR-VAR-VAR`; VAR VAR() { VAR.VAR(VAR)?.VAR(); } VAR VAR VAR = VAR; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = VAR VAR(VAR.VAR); VAR { VAR, VAR } = VAR VAR.VAR(VAR.VAR(""VAR"")); VAR (!!VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={4} VAR={VAR} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/Workspaces/WorkspaceRow/EditWorkspaceUsersModal/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../../models/admin"";
import { titleCase } from ""text-case"";

export const EditWorkspaceUsersModalId = (workspace) =>
  `edit-workspace-${workspace.id}-modal`;
export default function EditWorkspaceUsersModal({ workspace, users }) {
  const [error, setError] = useState(null);
  const hideModal = () => {
    document.getElementById(EditWorkspaceUsersModalId(workspace)).close();
  };
  const handleUpdate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {
      userIds: [],
    };
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) {
      if (key.includes(""user-"") && value === ""yes"") {
        const [_, id] = key.split(`-`);
        data.userIds.push(+id);
      }
    }
    const { success, error } = await Admin.updateUsersInWorkspace(
      workspace.id,
      data.userIds
    );
    if (success) window.location.reload();
    setError(error);
  };

  return (
    <dialog
      id={EditWorkspaceUsersModalId(workspace)}
      className=""bg-transparent outline-none""
    >
      <div className=""relative w-[75vw] max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Edit {workspace.name}
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleUpdate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                {users
                  .filter((user) => user.role !== ""admin"")
                  .map((user) => {
                    return (
                      <div
                        key={`workspace-${workspace.id}-user-${user.id}`}
                        data-workspace={workspace.id}
                        className=""flex items-center pl-4 border border-gray-200 rounded dark:border-gray-400 group hover:bg-stone-600 cursor-pointer""
                        onClick={() => {
                          document
                            .getElementById(
                              `workspace-${workspace.id}-user-${user.id}`
                            )
                            ?.click();
                        }}
                      >
                        <input
                          id={`workspace-${workspace.id}-user-${user.id}`}
                          defaultChecked={workspace.userIds.includes(user.id)}
                          type=""checkbox""
                          value=""yes""
                          name={`user-${user.id}`}
                          className=""w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 pointer-events-none""
                        />
                        <label
                          htmlFor={`user-${user.id}`}
                          className=""pointer-events-none w-full py-4 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300""
                        >
                          {titleCase(user.username)}
                        </label>
                      </div>
                    );
                  })}
                <div className=""flex items-center gap-x-4"">
                  <button
                    type=""button""
                    className=""w-full p-4 flex dark:text-slate-200 text-gray-800 items-center pl-4 border border-gray-200 rounded dark:border-gray-400 group hover:bg-stone-600 cursor-pointer""
                    onClick={() => {
                      document
                        .getElementById(`workspace-${workspace.id}-select-all`)
                        ?.click();
                      Array.from(
                        document.querySelectorAll(
                          `[data-workspace='${workspace.id}']`
                        )
                      ).forEach((el) => {
                        if (!el.firstChild.checked) el.firstChild.click();
                      });
                    }}
                  >
                    Select All
                  </button>
                  <button
                    type=""button""
                    className=""w-full p-4 flex dark:text-slate-200 text-gray-800 items-center pl-4 border border-gray-200 rounded dark:border-gray-400 group hover:bg-stone-600 cursor-pointer""
                    onClick={() => {
                      document
                        .getElementById(`workspace-${workspace.id}-select-all`)
                        ?.click();
                      Array.from(
                        document.querySelectorAll(
                          `[data-workspace='${workspace.id}']`
                        )
                      ).forEach((el) => {
                        if (el.firstChild.checked) el.firstChild.click();
                      });
                    }}
                  >
                    Deselect All
                  </button>
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Update workspace
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR = (VAR) => `VAR-VAR-${VAR.VAR}-VAR`; VAR VAR VAR VAR({ VAR, VAR }) { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR.VAR(VAR(VAR)).VAR(); }; VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = { VAR: [], }; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) { VAR (VAR.VAR(""VAR-"") && VAR === ""VAR"") { VAR [VAR, VAR] = VAR.VAR(`-`); VAR.VAR.VAR(+VAR); } } VAR { VAR, VAR } = VAR VAR.VAR( VAR.VAR, VAR.VAR ); VAR (VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR={VAR(VAR)} VAR=""VAR-VAR VAR-VAR"" > <VAR VAR=""VAR VAR-[75vw] VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR {VAR.VAR} </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> {VAR .VAR((VAR) => VAR.VAR !== ""VAR"") .VAR((VAR) => { VAR ( <VAR VAR={`VAR-${VAR.VAR}-VAR-${VAR.VAR}`} VAR-VAR={VAR.VAR} VAR=""VAR VAR-VAR VAR-4 VAR VAR-VAR-200 VAR VAR:VAR-VAR-400 VAR VAR:VAR-VAR-600 VAR-VAR"" VAR={() => { VAR .VAR( `VAR-${VAR.VAR}-VAR-${VAR.VAR}` ) ?.VAR(); }} > <VAR VAR={`VAR-${VAR.VAR}-VAR-${VAR.VAR}`} VAR={VAR.VAR.VAR(VAR.VAR)} VAR=""VAR"" VAR=""VAR"" VAR={`VAR-${VAR.VAR}`} VAR=""VAR-4 VAR-4 VAR-VAR-600 VAR-VAR-100 VAR-VAR-300 VAR VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-600 VAR:VAR-VAR-VAR-800 VAR:VAR-2 VAR:VAR-VAR-700 VAR:VAR-VAR-600 VAR-VAR-VAR"" /> <VAR VAR={`VAR-${VAR.VAR}`} VAR=""VAR-VAR-VAR VAR-VAR VAR-4 VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR-300"" > {VAR(VAR.VAR)} </VAR> </VAR> ); })} <VAR VAR=""VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR"" VAR=""VAR-VAR VAR-4 VAR VAR:VAR-VAR-200 VAR-VAR-800 VAR-VAR VAR-4 VAR VAR-VAR-200 VAR VAR:VAR-VAR-400 VAR VAR:VAR-VAR-600 VAR-VAR"" VAR={() => { VAR .VAR(`VAR-${VAR.VAR}-VAR-VAR`) ?.VAR(); VAR.VAR( VAR.VAR( `[VAR-VAR='${VAR.VAR}']` ) ).VAR((VAR) => { VAR (!VAR.VAR.VAR) VAR.VAR.VAR(); }); }} > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR VAR-4 VAR VAR:VAR-VAR-200 VAR-VAR-800 VAR-VAR VAR-4 VAR VAR-VAR-200 VAR VAR:VAR-VAR-400 VAR VAR:VAR-VAR-600 VAR-VAR"" VAR={() => { VAR .VAR(`VAR-${VAR.VAR}-VAR-VAR`) ?.VAR(); VAR.VAR( VAR.VAR( `[VAR-VAR='${VAR.VAR}']` ) ).VAR((VAR) => { VAR (VAR.VAR.VAR) VAR.VAR.VAR(); }); }} > VAR VAR </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Admin/Workspaces/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import { BookOpen } from ""react-feather"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import WorkspaceRow from ""./WorkspaceRow"";
import NewWorkspaceModal, { NewWorkspaceModalId } from ""./NewWorkspaceModal"";

export default function AdminWorkspaces() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                Instance workspaces
              </p>
              <button
                onClick={() =>
                  document?.getElementById(NewWorkspaceModalId)?.showModal()
                }
                className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
              >
                <BookOpen className=""h-4 w-4"" /> New Workspace
              </button>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              These are all the workspaces that exist on this instance. Removing
              a workspace will delete all of it's associated chats and settings.
            </p>
          </div>
          <WorkspacesContainer />
        </div>
        <NewWorkspaceModal />
      </div>
    </div>
  );
}

function WorkspacesContainer() {
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [users, setUsers] = useState([]);
  const [workspaces, setWorkspaces] = useState([]);

  useEffect(() => {
    async function fetchData() {
      const _users = await Admin.users();
      const _workspaces = await Admin.workspaces();
      setUsers(_users);
      setWorkspaces(_workspaces);
      setLoading(false);
    }
    fetchData();
  }, []);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <table className=""md:w-3/4 w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
      <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
        <tr>
          <th scope=""col"" className=""px-6 py-3 rounded-tl-lg"">
            Name
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Link
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Users
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created On
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {workspaces.map((workspace) => (
          <WorkspaceRow
            key={workspace.id}
            workspace={workspace}
            users={users}
          />
        ))}
      </tbody>
    </table>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR={() => VAR?.VAR(VAR)?.VAR() } VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > <VAR VAR=""VAR-4 VAR-4"" /> VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR'VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR /> </VAR> <VAR /> </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <VAR VAR=""VAR:VAR-3/4 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} VAR={VAR} /> ))} </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/pages/Invite/NewUserModal/index.jsx,"import React, { useState } from ""react"";
import Invite from ""../../../models/invite"";
import paths from ""../../../utils/paths"";
import { useParams } from ""react-router-dom"";

export default function NewUserModal() {
  const { code } = useParams();
  const [error, setError] = useState(null);
  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { success, error } = await Invite.acceptInvite(code, data);
    if (!!success) window.location.replace(paths.home());
    setError(error);
  };

  return (
    <dialog open={true} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Create a new account
            </h3>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""username""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Username
                  </label>
                  <input
                    name=""username""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""My username""
                    minLength={2}
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""password""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Password
                  </label>
                  <input
                    name=""password""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""Your password""
                    required={true}
                    minLength={8}
                    autoComplete=""off""
                  />
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creating your account you will be able to login with
                  these credentials and start using workspaces.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                type=""submit""
                className=""w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Accept Invitation
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR } = VAR VAR.VAR(VAR, VAR); VAR (!!VAR) VAR.VAR.VAR(VAR.VAR()); VAR(VAR); }; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={2} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={VAR} VAR={8} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR"" VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,frontend/src/utils/chat/markdown.js,"import { encode as HTMLEncode } from ""he"";
import markdownIt from ""markdown-it"";
const markdown = markdownIt({
  html: true,
  typographer: true,
  highlight: function (str) {
    return `<div class=""whitespace-pre-line w-fit rounded-lg bg-black-900 px-4 pt-10 pb-4 relative font-mono font-normal text-sm text-slate-200""><div class=""w-full flex items-center absolute top-0 left-0 text-slate-200 bg-stone-800 px-4 py-2 text-xs font-sans justify-between rounded-t-md""><button onclick='window.copySnippet();' class=""flex ml-auto gap-2""><svg stroke=""currentColor"" fill=""none"" stroke-width=""2"" viewBox=""0 0 24 24"" stroke-linecap=""round"" stroke-linejoin=""round"" class=""h-4 w-4"" height=""1em"" width=""1em"" xmlns=""http://www.w3.org/2000/svg""><path d=""M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2""></path><rect x=""8"" y=""2"" width=""8"" height=""4"" rx=""1"" ry=""1""></rect></svg>Copy code</button></div><pre class='markdown'>${HTMLEncode(
      str
    )}<pre></div>`;
  },
});

window.copySnippet = function () {
  if (!event?.target) return false;

  const target = event?.target;
  const markdown =
    target.parentElement?.parentElement?.querySelector("".markdown"")?.innerText;
  if (!markdown) return false;

  window.navigator.clipboard.writeText(markdown);
  target.classList.add(""text-green-500"");
  const originalText = target.innerHTML;
  target.innerText = ""Copied!"";
  target.setAttribute(""disabled"", true);

  setTimeout(() => {
    target.classList.remove(""text-green-500"");
    target.innerHTML = originalText;
    target.removeAttribute(""disabled"");
  }, 5000);
};

export default function renderMarkdown(text = """") {
  return markdown.render(text);
}",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR VAR VAR } VAR ""VAR""; VAR VAR VAR ""VAR-VAR""; VAR VAR = VAR({ VAR: VAR, VAR: VAR, VAR: VAR (VAR) { VAR `<VAR VAR=""VAR-VAR-VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR-4 VAR-10 VAR-4 VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-200""><VAR VAR=""VAR-VAR VAR VAR-VAR VAR VAR-0 VAR-0 VAR-VAR-200 VAR-VAR-800 VAR-4 VAR-2 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-VAR""><VAR VAR='VAR.VAR();' VAR=""VAR VAR-VAR VAR-2""><VAR VAR=""VAR"" VAR=""VAR"" VAR-VAR=""2"" VAR=""0 0 24 24"" VAR-VAR=""VAR"" VAR-VAR=""VAR"" VAR=""VAR-4 VAR-4"" VAR=""1em"" VAR=""1em"" VAR=""VAR: VAR )}<VAR></VAR>`; }, }); VAR.VAR = VAR () { VAR (!VAR?.VAR) VAR VAR; VAR VAR = VAR?.VAR; VAR VAR = VAR.VAR?.VAR?.VAR("".VAR"")?.VAR; VAR (!VAR) VAR VAR; VAR.VAR.VAR.VAR(VAR); VAR.VAR.VAR(""VAR-VAR-500""); VAR VAR = VAR.VAR; VAR.VAR = ""VAR!""; VAR.VAR(""VAR"", VAR); VAR(() => { VAR.VAR.VAR(""VAR-VAR-500""); VAR.VAR = VAR; VAR.VAR(""VAR""); }, 5000); }; VAR VAR VAR VAR(VAR = """") { VAR VAR.VAR(VAR); } ",16
anything-llm_3c88aec034934bcbad30c5ef1cab62cbbdb98e64,server/endpoints/chat.js,"const { v4: uuidv4 } = require(""uuid"");
const { reqBody, userFromSession, multiUserMode } = require(""../utils/http"");
const { Workspace } = require(""../models/workspace"");
const { chatWithWorkspace } = require(""../utils/chats"");
const { validatedRequest } = require(""../utils/middleware/validatedRequest"");
const { WorkspaceChats } = require(""../models/workspaceChats"");
const { SystemSettings } = require(""../models/systemSettings"");
const { Telemetry } = require(""../models/telemetry"");

function chatEndpoints(app) {
  if (!app) return;

  app.post(
    ""/workspace/:slug/chat"",
    [validatedRequest],
    async (request, response) => {
      try {
        const user = await userFromSession(request, response);
        const { slug } = request.params;
        const { message, mode = ""query"" } = reqBody(request);
        const workspace = multiUserMode(response)
          ? await Workspace.getWithUser(user, `slug = '${slug}'`)
          : await Workspace.get(`slug = '${slug}'`);

        if (!workspace) {
          response.sendStatus(400).end();
          return;
        }

        if (multiUserMode(response) && user.role !== ""admin"") {
          const limitMessages =
            (await SystemSettings.get(`label = 'limit_user_messages'`))
              ?.value === ""true"";

          if (limitMessages) {
            const systemLimit = Number(
              (await SystemSettings.get(`label = 'message_limit'`))?.value
            );
            if (!!systemLimit) {
              const currentChatCount = await WorkspaceChats.count(
                `user_id = ${user.id} AND createdAt > datetime(CURRENT_TIMESTAMP, '-1 days')`
              );
              if (currentChatCount >= systemLimit) {
                response.status(500).json({
                  id: uuidv4(),
                  type: ""abort"",
                  textResponse: null,
                  sources: [],
                  close: true,
                  error: `You have met your maximum 24 hour chat quota of ${systemLimit} chats set by the instance administrators. Try again later.`,
                });
                return;
              }
            }
          }
        }

        const result = await chatWithWorkspace(workspace, message, mode, user);
        await Telemetry.sendTelemetry(""sent_chat"", {
          multiUserMode: multiUserMode(response),
          LLMSelection: process.env.LLM_PROVIDER || ""openai"",
          VectorDbSelection: process.env.VECTOR_DB || ""pinecone"",
        });
        response.status(200).json({ ...result });
      } catch (e) {
        response.status(500).json({
          id: uuidv4(),
          type: ""abort"",
          textResponse: null,
          sources: [],
          close: true,
          error: e.message,
        });
      }
    }
  );
}

module.exports = { chatEndpoints };",,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,CVE-2023-4897,3c88aec034934bcbad30c5ef1cab62cbbdb98e64,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR: VAR } = VAR(""VAR""); VAR { VAR, VAR, VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR VAR(VAR) { VAR (!VAR) VAR; VAR.VAR( ""/VAR/:VAR/VAR"", [VAR], VAR (VAR, VAR) => { VAR { VAR VAR = VAR VAR(VAR, VAR); VAR { VAR } = VAR.VAR; VAR { VAR, VAR = ""VAR"" } = VAR(VAR); VAR VAR = VAR(VAR) ? VAR VAR.VAR(VAR, `VAR = '${VAR}'`) : VAR VAR.VAR(`VAR = '${VAR}'`); VAR (!VAR) { VAR.VAR(400).VAR(); VAR; } VAR (VAR(VAR) && VAR.VAR !== ""VAR"") { VAR VAR = (VAR VAR.VAR(`VAR = 'VAR'`)) ?.VAR === ""VAR""; VAR (VAR) { VAR VAR = VAR( (VAR VAR.VAR(`VAR = 'VAR'`))?.VAR ); VAR (!!VAR) { VAR VAR = VAR VAR.VAR( `VAR = ${VAR.VAR} VAR VAR > VAR(VAR, '-1 VAR')` ); VAR (VAR >= VAR) { VAR.VAR(500).VAR({ VAR: VAR(), VAR: ""VAR"", VAR: VAR, VAR: [], VAR: VAR, VAR: `VAR VAR VAR VAR VAR 24 VAR VAR VAR VAR ${VAR} VAR VAR VAR VAR VAR VAR. VAR VAR VAR.`, }); VAR; } } } } VAR VAR = VAR VAR(VAR, VAR, VAR, VAR); VAR VAR.VAR(""VAR"", { VAR: VAR(VAR), VAR: VAR.VAR.VAR || ""VAR"", VAR: VAR.VAR.VAR || ""VAR"", }); VAR.VAR(200).VAR({ ...VAR }); } VAR (VAR) { VAR.VAR(500).VAR({ VAR: VAR(), VAR: ""VAR"", VAR: VAR, VAR: [], VAR: VAR, VAR: VAR.VAR, }); } } ); } VAR.VAR = { VAR }; ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/AdminSidebar/index.jsx,"import React, { useEffect, useRef, useState } from ""react"";
import {
  BookOpen,
  Eye,
  GitHub,
  Key,
  Mail,
  Menu,
  MessageSquare,
  Settings,
  Users,
  X,
} from ""react-feather"";
import IndexCount from ""../Sidebar/IndexCount"";
import LLMStatus from ""../Sidebar/LLMStatus"";
import paths from ""../../utils/paths"";
import Discord from ""../Icons/Discord"";
import useLogo from ""../../hooks/useLogo"";

export default function AdminSidebar() {
  const { logo } = useLogo();
  const sidebarRef = useRef(null);

  return (
    <>
      <div
        ref={sidebarRef}
        style={{ height: ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative m-[16px] rounded-[26px] bg-white dark:bg-black-900 min-w-[15.5%] p-[18px] ""
      >
        <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
          {/* Header Information */}
          <div className=""flex w-full items-center justify-between"">
            <div className=""flex shrink-0 max-w-[50%] items-center justify-start"">
              <img
                src={logo}
                alt=""Logo""
                className=""rounded max-h-[40px]""
                style={{ objectFit: ""contain"" }}
              />
            </div>
            <div className=""flex gap-x-2 items-center text-slate-500"">
              <a
                href={paths.home()}
                className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
              >
                <X className=""h-4 w-4"" />
              </a>
            </div>
          </div>

          {/* Primary Body */}
          <div className=""h-[100%] flex flex-col w-full justify-between pt-4 overflow-y-hidden"">
            <div className=""h-auto sidebar-items dark:sidebar-items"">
              <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
                <Option
                  href={paths.admin.system()}
                  btnText=""System Preferences""
                  icon={<Settings className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.invites()}
                  btnText=""Invitation Management""
                  icon={<Mail className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.users()}
                  btnText=""User Management""
                  icon={<Users className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.workspaces()}
                  btnText=""Workspace Management""
                  icon={<BookOpen className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.chats()}
                  btnText=""Workspace Chat Management""
                  icon={<MessageSquare className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.appearance()}
                  btnText=""Appearance""
                  icon={<Eye className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.apiKeys()}
                  btnText=""API Keys""
                  icon={<Key className=""h-4 w-4 flex-shrink-0"" />}
                />
              </div>
            </div>
            <div>
              <div className=""flex flex-col gap-y-2"">
                <div className=""w-full flex items-center justify-between"">
                  <LLMStatus />
                  <IndexCount />
                </div>
              </div>

              {/* Footer */}
              <div className=""flex items-end justify-between mt-2"">
                <div className=""flex gap-x-1 items-center"">
                  <a
                    href={paths.github()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <GitHub className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.docs()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <BookOpen className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.discord()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 dark:bg-slate-800 hover:bg-slate-800 group""
                  >
                    <Discord className=""h-4 w-4 stroke-slate-400 group-hover:stroke-slate-200 dark:group-hover:stroke-slate-200"" />
                  </a>
                </div>
                <a
                  href={paths.mailToMintplex()}
                  className=""transition-all duration-300 text-xs text-slate-200 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                >
                  @MintplexLabs
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
}

export function SidebarMobileHeader() {
  const { logo } = useLogo();
  const sidebarRef = useRef(null);
  const [showSidebar, setShowSidebar] = useState(false);
  const [showBgOverlay, setShowBgOverlay] = useState(false);

  useEffect(() => {
    function handleBg() {
      if (showSidebar) {
        setTimeout(() => {
          setShowBgOverlay(true);
        }, 300);
      } else {
        setShowBgOverlay(false);
      }
    }
    handleBg();
  }, [showSidebar]);

  return (
    <>
      <div className=""flex justify-between relative top-0 left-0 w-full rounded-b-lg px-2 pb-4 bg-white dark:bg-black-900 text-slate-800 dark:text-slate-200"">
        <button
          onClick={() => setShowSidebar(true)}
          className=""rounded-md bg-stone-200 p-2 flex items-center justify-center text-slate-800 hover:bg-stone-300 group dark:bg-stone-800 dark:text-slate-200 dark:hover:bg-stone-900 dark:border dark:border-stone-800""
        >
          <Menu className=""h-6 w-6"" />
        </button>
        <div className=""flex shrink-0 w-fit items-center justify-start"">
          <img
            src={logo}
            alt=""Logo""
            className=""rounded w-full max-h-[40px]""
            style={{ objectFit: ""contain"" }}
          />
        </div>
      </div>
      <div
        style={{
          transform: showSidebar ? `translateX(0vw)` : `translateX(-100vw)`,
        }}
        className={`z-99 fixed top-0 left-0 transition-all duration-500 w-[100vw] h-[100vh]`}
      >
        <div
          className={`${
            showBgOverlay
              ? ""transition-all opacity-1""
              : ""transition-none opacity-0""
          }  duration-500 fixed top-0 left-0 bg-black-900 bg-opacity-75 w-screen h-screen`}
          onClick={() => setShowSidebar(false)}
        />
        <div
          ref={sidebarRef}
          className=""h-[100vh] fixed top-0 left-0  rounded-r-[26px] bg-white dark:bg-black-900 w-[80%] p-[18px] ""
        >
          <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
            {/* Header Information */}
            <div className=""flex w-full items-center justify-between gap-x-4"">
              <div className=""flex shrink-1 w-fit items-center justify-start"">
                <img
                  src={logo}
                  alt=""Logo""
                  className=""rounded w-full max-h-[40px]""
                  style={{ objectFit: ""contain"" }}
                />
              </div>
              <div className=""flex gap-x-2 items-center text-slate-500 shrink-0"">
                <a
                  href={paths.home()}
                  className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                >
                  <X className=""h-4 w-4"" />
                </a>
              </div>
            </div>

            {/* Primary Body */}
            <div className=""h-full flex flex-col w-full justify-between pt-4 overflow-y-hidden "">
              <div className=""h-auto md:sidebar-items md:dark:sidebar-items"">
                <div
                  style={{ height: ""calc(100vw - -3rem)"" }}
                  className="" flex flex-col gap-y-4 pb-8 overflow-y-scroll no-scroll""
                >
                  <Option
                    href={paths.admin.system()}
                    btnText=""System Preferences""
                    icon={<Settings className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.invites()}
                    btnText=""Invitation Management""
                    icon={<Mail className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.users()}
                    btnText=""User Management""
                    icon={<Users className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.workspaces()}
                    btnText=""Workspace Management""
                    icon={<BookOpen className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.chats()}
                    btnText=""Workspace Chat Management""
                    icon={<MessageSquare className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.appearance()}
                    btnText=""Appearance""
                    icon={<Eye className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.apiKeys()}
                    btnText=""API Keys""
                    icon={<Key className=""h-4 w-4 flex-shrink-0"" />}
                  />
                </div>
              </div>
              <div>
                <div className=""flex flex-col gap-y-2"">
                  <div className=""w-full flex items-center justify-between"">
                    <LLMStatus />
                    <IndexCount />
                  </div>
                </div>

                {/* Footer */}
                <div className=""flex items-end justify-between mt-2"">
                  <div className=""flex gap-x-1 items-center"">
                    <a
                      href={paths.github()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                    >
                      <GitHub className=""h-4 w-4 "" />
                    </a>
                    <a
                      href={paths.docs()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                    >
                      <BookOpen className=""h-4 w-4 "" />
                    </a>
                    <a
                      href={paths.discord()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 dark:bg-slate-800 hover:bg-slate-800 group""
                    >
                      <Discord className=""h-4 w-4 stroke-slate-400 group-hover:stroke-slate-200 dark:group-hover:stroke-slate-200"" />
                    </a>
                  </div>
                  <a
                    href={paths.mailToMintplex()}
                    className=""transition-all duration-300 text-xs text-slate-200 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                  >
                    @MintplexLabs
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
}

const Option = ({ btnText, icon, href }) => {
  const isActive = window.location.pathname === href;
  return (
    <div className=""flex gap-x-2 items-center justify-between"">
      <a
        href={href}
        className={`flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center ${
          isActive
            ? ""bg-gray-100 dark:bg-stone-600""
            : ""hover:bg-slate-100 dark:hover:bg-stone-900 ""
        }`}
      >
        {icon}
        <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold whitespace-nowrap overflow-hidden "">
          {btnText}
        </p>
      </a>
    </div>
  );
};",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR VAR VAR ""../VAR/VAR""; VAR VAR VAR ""../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR ""../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR VAR = VAR(VAR); VAR ( <> <VAR VAR={VAR} VAR={{ VAR: ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR-[16px] VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-VAR-[15.5%] VAR-[18px] "" > <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-0 VAR-VAR-[50%] VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4"" /> </VAR> </VAR> </VAR> {} <VAR VAR=""VAR-[100%] VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR:VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR /> <VAR /> </VAR> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-400 VAR-VAR:VAR-VAR-200 VAR:VAR-VAR:VAR-VAR-200"" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </> ); } VAR VAR VAR() { VAR { VAR } = VAR(); VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR() { VAR (VAR) { VAR(() => { VAR(VAR); }, 300); } VAR { VAR(VAR); } } VAR(); }, [VAR]); VAR ( <> <VAR VAR=""VAR VAR-VAR VAR VAR-0 VAR-0 VAR-VAR VAR-VAR-VAR VAR-2 VAR-4 VAR-VAR VAR:VAR-VAR-900 VAR-VAR-800 VAR:VAR-VAR-200""> <VAR VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR-VAR-200 VAR-2 VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-300 VAR VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR VAR:VAR-VAR-800"" > <VAR VAR=""VAR-6 VAR-6"" /> </VAR> <VAR VAR=""VAR VAR-0 VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> </VAR> <VAR VAR={{ VAR: VAR ? `VAR(0vw)` : `VAR(-100vw)`, }} VAR={`VAR-99 VAR VAR-0 VAR-0 VAR-VAR VAR-500 VAR-[100vw] VAR-[100vh]`} > <VAR VAR={`${ VAR ? ""VAR-VAR VAR-1"" : ""VAR-VAR VAR-0"" } VAR-500 VAR VAR-0 VAR-0 VAR-VAR-900 VAR-VAR-75 VAR-VAR VAR-VAR`} VAR={() => VAR(VAR)} /> <VAR VAR={VAR} VAR=""VAR-[100vh] VAR VAR-0 VAR-0 VAR-VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-[80%] VAR-[18px] "" > <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR VAR-1 VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500 VAR-0""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4"" /> </VAR> </VAR> </VAR> {} <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR ""> <VAR VAR=""VAR-VAR VAR:VAR-VAR VAR:VAR:VAR-VAR""> <VAR VAR={{ VAR: ""VAR(100vw - -3rem)"" }} VAR="" VAR VAR-VAR VAR-VAR-4 VAR-8 VAR-VAR-VAR VAR-VAR"" > <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR /> <VAR /> </VAR> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-400 VAR-VAR:VAR-VAR-200 VAR:VAR-VAR:VAR-VAR-200"" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </> ); } VAR VAR = ({ VAR, VAR, VAR }) => { VAR VAR = VAR.VAR.VAR === VAR; VAR ( <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR={`VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR ${ VAR ? ""VAR-VAR-100 VAR:VAR-VAR-600"" : ""VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 "" }`} > {VAR} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR ""> {VAR} </VAR> </VAR> </VAR> ); }; ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/AdminSidebar/index.jsx,"import React, { useEffect, useRef, useState } from ""react"";
import {
  BookOpen,
  Eye,
  GitHub,
  Key,
  Mail,
  Menu,
  MessageSquare,
  Settings,
  Users,
  X,
} from ""react-feather"";
import IndexCount from ""../Sidebar/IndexCount"";
import LLMStatus from ""../Sidebar/LLMStatus"";
import paths from ""../../utils/paths"";
import Discord from ""../Icons/Discord"";
import useLogo from ""../../hooks/useLogo"";

export default function AdminSidebar() {
  const { logo } = useLogo();
  const sidebarRef = useRef(null);

  return (
    <>
      <div
        ref={sidebarRef}
        style={{ height: ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative m-[16px] rounded-[26px] bg-white dark:bg-black-900 min-w-[15.5%] p-[18px] ""
      >
        <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
          {/* Header Information */}
          <div className=""flex w-full items-center justify-between"">
            <div className=""flex shrink-0 max-w-[50%] items-center justify-start"">
              <img
                src={logo}
                alt=""Logo""
                className=""rounded max-h-[40px]""
                style={{ objectFit: ""contain"" }}
              />
            </div>
            <div className=""flex gap-x-2 items-center text-slate-500"">
              <a
                href={paths.home()}
                className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
              >
                <X className=""h-4 w-4"" />
              </a>
            </div>
          </div>

          {/* Primary Body */}
          <div className=""h-[100%] flex flex-col w-full justify-between pt-4 overflow-y-hidden"">
            <div className=""h-auto sidebar-items dark:sidebar-items"">
              <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
                <Option
                  href={paths.admin.system()}
                  btnText=""System Preferences""
                  icon={<Settings className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.invites()}
                  btnText=""Invitation Management""
                  icon={<Mail className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.users()}
                  btnText=""User Management""
                  icon={<Users className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.workspaces()}
                  btnText=""Workspace Management""
                  icon={<BookOpen className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.chats()}
                  btnText=""Workspace Chat Management""
                  icon={<MessageSquare className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.appearance()}
                  btnText=""Appearance""
                  icon={<Eye className=""h-4 w-4 flex-shrink-0"" />}
                />
                <Option
                  href={paths.admin.apiKeys()}
                  btnText=""API Keys""
                  icon={<Key className=""h-4 w-4 flex-shrink-0"" />}
                />
              </div>
            </div>
            <div>
              <div className=""flex flex-col gap-y-2"">
                <div className=""w-full flex items-center justify-between"">
                  <LLMStatus />
                  <IndexCount />
                </div>
              </div>

              {/* Footer */}
              <div className=""flex items-end justify-between mt-2"">
                <div className=""flex gap-x-1 items-center"">
                  <a
                    href={paths.github()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <GitHub className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.docs()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <BookOpen className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.discord()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 dark:bg-slate-800 hover:bg-slate-800 group""
                  >
                    <Discord className=""h-4 w-4 stroke-slate-400 group-hover:stroke-slate-200 dark:group-hover:stroke-slate-200"" />
                  </a>
                </div>
                <a
                  href={paths.mailToMintplex()}
                  className=""transition-all duration-300 text-xs text-slate-200 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                >
                  @MintplexLabs
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
}

export function SidebarMobileHeader() {
  const { logo } = useLogo();
  const sidebarRef = useRef(null);
  const [showSidebar, setShowSidebar] = useState(false);
  const [showBgOverlay, setShowBgOverlay] = useState(false);

  useEffect(() => {
    function handleBg() {
      if (showSidebar) {
        setTimeout(() => {
          setShowBgOverlay(true);
        }, 300);
      } else {
        setShowBgOverlay(false);
      }
    }
    handleBg();
  }, [showSidebar]);

  return (
    <>
      <div className=""flex justify-between relative top-0 left-0 w-full rounded-b-lg px-2 pb-4 bg-white dark:bg-black-900 text-slate-800 dark:text-slate-200"">
        <button
          onClick={() => setShowSidebar(true)}
          className=""rounded-md bg-stone-200 p-2 flex items-center justify-center text-slate-800 hover:bg-stone-300 group dark:bg-stone-800 dark:text-slate-200 dark:hover:bg-stone-900 dark:border dark:border-stone-800""
        >
          <Menu className=""h-6 w-6"" />
        </button>
        <div className=""flex shrink-0 w-fit items-center justify-start"">
          <img
            src={logo}
            alt=""Logo""
            className=""rounded w-full max-h-[40px]""
            style={{ objectFit: ""contain"" }}
          />
        </div>
      </div>
      <div
        style={{
          transform: showSidebar ? `translateX(0vw)` : `translateX(-100vw)`,
        }}
        className={`z-99 fixed top-0 left-0 transition-all duration-500 w-[100vw] h-[100vh]`}
      >
        <div
          className={`${
            showBgOverlay
              ? ""transition-all opacity-1""
              : ""transition-none opacity-0""
          }  duration-500 fixed top-0 left-0 bg-black-900 bg-opacity-75 w-screen h-screen`}
          onClick={() => setShowSidebar(false)}
        />
        <div
          ref={sidebarRef}
          className=""h-[100vh] fixed top-0 left-0  rounded-r-[26px] bg-white dark:bg-black-900 w-[80%] p-[18px] ""
        >
          <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
            {/* Header Information */}
            <div className=""flex w-full items-center justify-between gap-x-4"">
              <div className=""flex shrink-1 w-fit items-center justify-start"">
                <img
                  src={logo}
                  alt=""Logo""
                  className=""rounded w-full max-h-[40px]""
                  style={{ objectFit: ""contain"" }}
                />
              </div>
              <div className=""flex gap-x-2 items-center text-slate-500 shrink-0"">
                <a
                  href={paths.home()}
                  className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                >
                  <X className=""h-4 w-4"" />
                </a>
              </div>
            </div>

            {/* Primary Body */}
            <div className=""h-full flex flex-col w-full justify-between pt-4 overflow-y-hidden "">
              <div className=""h-auto md:sidebar-items md:dark:sidebar-items"">
                <div
                  style={{ height: ""calc(100vw - -3rem)"" }}
                  className="" flex flex-col gap-y-4 pb-8 overflow-y-scroll no-scroll""
                >
                  <Option
                    href={paths.admin.system()}
                    btnText=""System Preferences""
                    icon={<Settings className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.invites()}
                    btnText=""Invitation Management""
                    icon={<Mail className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.users()}
                    btnText=""User Management""
                    icon={<Users className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.workspaces()}
                    btnText=""Workspace Management""
                    icon={<BookOpen className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.chats()}
                    btnText=""Workspace Chat Management""
                    icon={<MessageSquare className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.appearance()}
                    btnText=""Appearance""
                    icon={<Eye className=""h-4 w-4 flex-shrink-0"" />}
                  />
                  <Option
                    href={paths.admin.apiKeys()}
                    btnText=""API Keys""
                    icon={<Key className=""h-4 w-4 flex-shrink-0"" />}
                  />
                </div>
              </div>
              <div>
                <div className=""flex flex-col gap-y-2"">
                  <div className=""w-full flex items-center justify-between"">
                    <LLMStatus />
                    <IndexCount />
                  </div>
                </div>

                {/* Footer */}
                <div className=""flex items-end justify-between mt-2"">
                  <div className=""flex gap-x-1 items-center"">
                    <a
                      href={paths.github()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                    >
                      <GitHub className=""h-4 w-4 "" />
                    </a>
                    <a
                      href={paths.docs()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                    >
                      <BookOpen className=""h-4 w-4 "" />
                    </a>
                    <a
                      href={paths.discord()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 dark:bg-slate-800 hover:bg-slate-800 group""
                    >
                      <Discord className=""h-4 w-4 stroke-slate-400 group-hover:stroke-slate-200 dark:group-hover:stroke-slate-200"" />
                    </a>
                  </div>
                  <a
                    href={paths.mailToMintplex()}
                    className=""transition-all duration-300 text-xs text-slate-200 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                  >
                    @MintplexLabs
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
}

const Option = ({ btnText, icon, href }) => {
  const isActive = window.location.pathname === href;
  return (
    <div className=""flex gap-x-2 items-center justify-between"">
      <a
        href={href}
        className={`flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center ${
          isActive
            ? ""bg-gray-100 dark:bg-stone-600""
            : ""hover:bg-slate-100 dark:hover:bg-stone-900 ""
        }`}
      >
        {icon}
        <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold whitespace-nowrap overflow-hidden "">
          {btnText}
        </p>
      </a>
    </div>
  );
};",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR VAR VAR ""../VAR/VAR""; VAR VAR VAR ""../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR ""../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR VAR = VAR(VAR); VAR ( <> <VAR VAR={VAR} VAR={{ VAR: ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR-[16px] VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-VAR-[15.5%] VAR-[18px] "" > <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-0 VAR-VAR-[50%] VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4"" /> </VAR> </VAR> </VAR> {} <VAR VAR=""VAR-[100%] VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR:VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR /> <VAR /> </VAR> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-400 VAR-VAR:VAR-VAR-200 VAR:VAR-VAR:VAR-VAR-200"" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </> ); } VAR VAR VAR() { VAR { VAR } = VAR(); VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR() { VAR (VAR) { VAR(() => { VAR(VAR); }, 300); } VAR { VAR(VAR); } } VAR(); }, [VAR]); VAR ( <> <VAR VAR=""VAR VAR-VAR VAR VAR-0 VAR-0 VAR-VAR VAR-VAR-VAR VAR-2 VAR-4 VAR-VAR VAR:VAR-VAR-900 VAR-VAR-800 VAR:VAR-VAR-200""> <VAR VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR-VAR-200 VAR-2 VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-300 VAR VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR VAR:VAR-VAR-800"" > <VAR VAR=""VAR-6 VAR-6"" /> </VAR> <VAR VAR=""VAR VAR-0 VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> </VAR> <VAR VAR={{ VAR: VAR ? `VAR(0vw)` : `VAR(-100vw)`, }} VAR={`VAR-99 VAR VAR-0 VAR-0 VAR-VAR VAR-500 VAR-[100vw] VAR-[100vh]`} > <VAR VAR={`${ VAR ? ""VAR-VAR VAR-1"" : ""VAR-VAR VAR-0"" } VAR-500 VAR VAR-0 VAR-0 VAR-VAR-900 VAR-VAR-75 VAR-VAR VAR-VAR`} VAR={() => VAR(VAR)} /> <VAR VAR={VAR} VAR=""VAR-[100vh] VAR VAR-0 VAR-0 VAR-VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-[80%] VAR-[18px] "" > <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR VAR-1 VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500 VAR-0""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4"" /> </VAR> </VAR> </VAR> {} <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR ""> <VAR VAR=""VAR-VAR VAR:VAR-VAR VAR:VAR:VAR-VAR""> <VAR VAR={{ VAR: ""VAR(100vw - -3rem)"" }} VAR="" VAR VAR-VAR VAR-VAR-4 VAR-8 VAR-VAR-VAR VAR-VAR"" > <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> <VAR VAR={VAR.VAR.VAR()} VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR /> <VAR /> </VAR> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-400 VAR-VAR:VAR-VAR-200 VAR:VAR-VAR:VAR-VAR-200"" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </> ); } VAR VAR = ({ VAR, VAR, VAR }) => { VAR VAR = VAR.VAR.VAR === VAR; VAR ( <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR={`VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR ${ VAR ? ""VAR-VAR-100 VAR:VAR-VAR-600"" : ""VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 "" }`} > {VAR} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR ""> {VAR} </VAR> </VAR> </VAR> ); }; ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/ChatBubble/index.jsx,"import React from ""react"";

export default function ChatBubble({ message, type, popMsg }) {
  const isUser = type === ""user"";

  return (
    <div
      className={`flex w-full mt-2 items-center ${
        popMsg ? ""chat__message"" : """"
      } ${isUser ? ""justify-end"" : ""justify-start""}`}
    >
      <div
        className={`p-4 max-w-full md:max-w-[75%] ${
          isUser
            ? ""bg-slate-200 dark:bg-amber-800""
            : ""bg-orange-100 dark:bg-stone-700""
        } rounded-b-2xl ${isUser ? ""rounded-tl-2xl"" : ""rounded-tr-2xl""} ${
          isUser ? ""rounded-tr-sm"" : ""rounded-tl-sm""
        }`}
      >
        {message && (
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            {message}
          </p>
        )}
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR VAR ""VAR""; VAR VAR VAR VAR({ VAR, VAR, VAR }) { VAR VAR = VAR === ""VAR""; VAR ( <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" } ${VAR ? ""VAR-VAR"" : ""VAR-VAR""}`} > <VAR VAR={`VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] ${ VAR ? ""VAR-VAR-200 VAR:VAR-VAR-800"" : ""VAR-VAR-100 VAR:VAR-VAR-700"" } VAR-VAR-2xl ${VAR ? ""VAR-VAR-2xl"" : ""VAR-VAR-2xl""} ${ VAR ? ""VAR-VAR-VAR"" : ""VAR-VAR-VAR"" }`} > {VAR && ( <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> {VAR} </VAR> )} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/ChatBubble/index.jsx,"import React from ""react"";

export default function ChatBubble({ message, type, popMsg }) {
  const isUser = type === ""user"";

  return (
    <div
      className={`flex w-full mt-2 items-center ${
        popMsg ? ""chat__message"" : """"
      } ${isUser ? ""justify-end"" : ""justify-start""}`}
    >
      <div
        className={`p-4 max-w-full md:max-w-[75%] ${
          isUser
            ? ""bg-slate-200 dark:bg-amber-800""
            : ""bg-orange-100 dark:bg-stone-700""
        } rounded-b-2xl ${isUser ? ""rounded-tl-2xl"" : ""rounded-tr-2xl""} ${
          isUser ? ""rounded-tr-sm"" : ""rounded-tl-sm""
        }`}
      >
        {message && (
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            {message}
          </p>
        )}
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR VAR ""VAR""; VAR VAR VAR VAR({ VAR, VAR, VAR }) { VAR VAR = VAR === ""VAR""; VAR ( <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" } ${VAR ? ""VAR-VAR"" : ""VAR-VAR""}`} > <VAR VAR={`VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] ${ VAR ? ""VAR-VAR-200 VAR:VAR-VAR-800"" : ""VAR-VAR-100 VAR:VAR-VAR-700"" } VAR-VAR-2xl ${VAR ? ""VAR-VAR-2xl"" : ""VAR-VAR-2xl""} ${ VAR ? ""VAR-VAR-VAR"" : ""VAR-VAR-VAR"" }`} > {VAR && ( <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> {VAR} </VAR> )} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/DefaultChat/index.jsx,"import React, { useEffect, useState } from ""react"";
import { GitHub, GitMerge, Mail, Plus } from ""react-feather"";
import NewWorkspaceModal, {
  useNewWorkspaceModal,
} from ""../Modals/NewWorkspace"";
import paths from ""../../utils/paths"";
import { isMobile } from ""react-device-detect"";
import { SidebarMobileHeader } from ""../Sidebar"";
import ChatBubble from ""../ChatBubble"";
import System from ""../../models/system"";

export default function DefaultChatContainer() {
  const [mockMsgs, setMockMessages] = useState([]);
  const [fetchedMessages, setFetchedMessages] = useState([]);
  const {
    showing: showingNewWsModal,
    showModal: showNewWsModal,
    hideModal: hideNewWsModal,
  } = useNewWorkspaceModal();
  const popMsg = !window.localStorage.getItem(""anythingllm_intro"");

  useEffect(() => {
    const fetchData = async () => {
      const fetchedMessages = await System.getWelcomeMessages();
      setFetchedMessages(fetchedMessages);
    };
    fetchData();
  }, []);

  const MESSAGES = [
    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            Welcome to AnythingLLM, AnythingLLM is an open-source AI tool by
            Mintplex Labs that turns <i>anything</i> into a trained chatbot you
            can query and chat with. AnythingLLM is a BYOK (bring-your-own-keys)
            software so there is no subscription, fee, or charges for this
            software outside of the services you want to use with it.
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            AnythingLLM is the easiest way to put powerful AI products like
            OpenAi, GPT-4, LangChain, PineconeDB, ChromaDB, and other services
            together in a neat package with no fuss to increase your
            productivity by 100x.
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            AnythingLLM can run totally locally on your machine with little
            overhead you wont even notice it's there! No GPU needed. Cloud and
            on-premises installation is available as well.
            <br />
            The AI tooling ecosystem gets more powerful everyday. AnythingLLM
            makes it easy to use.
          </p>
          <a
            href={paths.github()}
            target=""_blank""
            className=""mt-4 w-fit flex flex-grow gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900 dark:bg-stone-900""
          >
            <GitMerge className=""h-4 w-4"" />
            <p className=""text-slate-800 dark:text-slate-200 text-sm md:text-lg leading-loose"">
              Create an issue on Github
            </p>
          </a>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-end ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-slate-200 dark:bg-amber-800 rounded-b-2xl rounded-tl-2xl rounded-tr-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            How do I get started?!
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            It's simple. All collections are organized into buckets we call{"" ""}
            <b>""Workspaces""</b>. Workspaces are buckets of files, documents,
            images, PDFs, and other files which will be transformed into
            something LLM's can understand and use in conversation.
            <br />
            <br />
            You can add and remove files at anytime.
          </p>
          <button
            onClick={showNewWsModal}
            className=""mt-4 w-fit flex flex-grow gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900 dark:bg-stone-900""
          >
            <Plus className=""h-4 w-4"" />
            <p className=""text-slate-800 dark:text-slate-200 text-sm md:text-lg leading-loose"">
              Create your first workspace
            </p>
          </button>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-end ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-slate-200 dark:bg-amber-800 rounded-b-2xl rounded-tl-2xl rounded-tr-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            Is this like an AI dropbox or something? What about chatting? It is
            a chatbot isn't it?
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            AnythingLLM is more than a smarter Dropbox.
            <br />
            <br />
            AnythingLLM offers two ways of talking with your data:
            <br />
            <br />
            <i>Query:</i> Your chats will return data or inferences found with
            the documents in your workspace it has access to. Adding more
            documents to the Workspace make it smarter!
            <br />
            <br />
            <i>Conversational:</i> Your documents + your on-going chat history
            both contribute to the LLM knowledge at the same time. Great for
            appending real-time text-based info or corrections and
            misunderstandings the LLM might have.
            <br />
            <br />
            You can toggle between either mode <i>in the middle of chatting!</i>
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-end ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-slate-200 dark:bg-amber-800 rounded-b-2xl rounded-tl-2xl rounded-tr-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            Wow, this sounds amazing, let me try it out already!
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            Have Fun!
          </p>
          <div className=""flex flex-col md:flex-row items-start md:items-center gap-1 md:gap-4"">
            <a
              href={paths.github()}
              target=""_blank""
              className=""mt-4 w-fit flex flex-grow gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900 dark:bg-stone-900""
            >
              <GitHub className=""h-4 w-4"" />
              <p className=""text-slate-800 dark:text-slate-200 text-sm md:text-lg leading-loose"">
                Star on GitHub
              </p>
            </a>
            <a
              href={paths.mailToMintplex()}
              className=""mt-4 w-fit flex flex-grow gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900 dark:bg-stone-900""
            >
              <Mail className=""h-4 w-4"" />
              <p className=""text-slate-800 dark:text-slate-200 text-sm md:text-lg leading-loose"">
                Contact Mintplex Labs
              </p>
            </a>
          </div>
        </div>
      </div>
    </React.Fragment>,
  ];

  useEffect(() => {
    function processMsgs() {
      if (!!window.localStorage.getItem(""anythingllm_intro"")) {
        setMockMessages([...MESSAGES]);
        return false;
      } else {
        setMockMessages([MESSAGES[0]]);
      }

      var timer = 500;
      var messages = [];

      MESSAGES.map((child) => {
        setTimeout(() => {
          setMockMessages([...messages, child]);
          messages.push(child);
        }, timer);
        timer += 2_500;
      });
      window.localStorage.setItem(""anythingllm_intro"", 1);
    }

    processMsgs();
  }, []);

  return (
    <div
      style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
      className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
    >
      {isMobile && <SidebarMobileHeader />}
      {fetchedMessages.length === 0
        ? mockMsgs.map((content, i) => {
            return <React.Fragment key={i}>{content}</React.Fragment>;
          })
        : fetchedMessages.map((fetchedMessage, i) => {
            return (
              <React.Fragment key={i}>
                <ChatBubble
                  message={
                    fetchedMessage.user === """"
                      ? fetchedMessage.response
                      : fetchedMessage.user
                  }
                  type={fetchedMessage.user === """" ? ""response"" : ""user""}
                  popMsg={popMsg}
                />
              </React.Fragment>
            );
          })}
      {showingNewWsModal && <NewWorkspaceModal hideModal={hideNewWsModal} />}
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR, { VAR, } VAR ""../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR { VAR } VAR ""../VAR""; VAR VAR VAR ""../VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR([]); VAR { VAR: VAR, VAR: VAR, VAR: VAR, } = VAR(); VAR VAR = !VAR.VAR.VAR(""VAR""); VAR(() => { VAR VAR = VAR () => { VAR VAR = VAR VAR.VAR(); VAR(VAR); }; VAR(); }, []); VAR VAR = [ <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR, VAR VAR VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR <VAR>VAR</VAR> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR (VAR-VAR-VAR-VAR) VAR VAR VAR VAR VAR VAR, VAR, VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR, VAR-4, VAR, VAR, VAR, VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR 100x. </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR'VAR VAR! VAR VAR VAR. VAR VAR VAR-VAR VAR VAR VAR VAR VAR. <VAR /> VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR-4 VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR?! </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR'VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR{"" ""} <VAR>""VAR""</VAR>. VAR VAR VAR VAR VAR, VAR, VAR, VAR, VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR'VAR VAR VAR VAR VAR VAR VAR. <VAR /> <VAR /> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR} VAR=""VAR-4 VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR? VAR VAR VAR? VAR VAR VAR VAR VAR'VAR VAR? </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR. <VAR /> <VAR /> VAR VAR VAR VAR VAR VAR VAR VAR VAR: <VAR /> <VAR /> <VAR>VAR:</VAR> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR! <VAR /> <VAR /> <VAR>VAR:</VAR> VAR VAR + VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR-VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. <VAR /> <VAR /> VAR VAR VAR VAR VAR VAR <VAR>VAR VAR VAR VAR VAR!</VAR> </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR, VAR VAR VAR, VAR VAR VAR VAR VAR VAR! </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR! </VAR> <VAR VAR=""VAR VAR-VAR VAR:VAR-VAR VAR-VAR VAR:VAR-VAR VAR-1 VAR:VAR-4""> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR-4 VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-4 VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR.VAR>, ]; VAR(() => { VAR VAR() { VAR (!!VAR.VAR.VAR(""VAR"")) { VAR([...VAR]); VAR VAR; } VAR { VAR([VAR[0]]); } VAR VAR = 500; VAR VAR = []; VAR.VAR((VAR) => { VAR(() => { VAR([...VAR, VAR]); VAR.VAR(VAR); }, VAR); VAR += 2_500; }); VAR.VAR.VAR(""VAR"", 1); } VAR(); }, []); VAR ( <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} {VAR.VAR === 0 ? VAR.VAR((VAR, VAR) => { VAR <VAR.VAR VAR={VAR}>{VAR}</VAR.VAR>; }) : VAR.VAR((VAR, VAR) => { VAR ( <VAR.VAR VAR={VAR}> <VAR VAR={ VAR.VAR === """" ? VAR.VAR : VAR.VAR } VAR={VAR.VAR === """" ? ""VAR"" : ""VAR""} VAR={VAR} /> </VAR.VAR> ); })} {VAR && <VAR VAR={VAR} />} </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/DefaultChat/index.jsx,"import React, { useEffect, useState } from ""react"";
import { GitHub, GitMerge, Mail, Plus } from ""react-feather"";
import NewWorkspaceModal, {
  useNewWorkspaceModal,
} from ""../Modals/NewWorkspace"";
import paths from ""../../utils/paths"";
import { isMobile } from ""react-device-detect"";
import { SidebarMobileHeader } from ""../Sidebar"";
import ChatBubble from ""../ChatBubble"";
import System from ""../../models/system"";

export default function DefaultChatContainer() {
  const [mockMsgs, setMockMessages] = useState([]);
  const [fetchedMessages, setFetchedMessages] = useState([]);
  const {
    showing: showingNewWsModal,
    showModal: showNewWsModal,
    hideModal: hideNewWsModal,
  } = useNewWorkspaceModal();
  const popMsg = !window.localStorage.getItem(""anythingllm_intro"");

  useEffect(() => {
    const fetchData = async () => {
      const fetchedMessages = await System.getWelcomeMessages();
      setFetchedMessages(fetchedMessages);
    };
    fetchData();
  }, []);

  const MESSAGES = [
    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            Welcome to AnythingLLM, AnythingLLM is an open-source AI tool by
            Mintplex Labs that turns <i>anything</i> into a trained chatbot you
            can query and chat with. AnythingLLM is a BYOK (bring-your-own-keys)
            software so there is no subscription, fee, or charges for this
            software outside of the services you want to use with it.
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            AnythingLLM is the easiest way to put powerful AI products like
            OpenAi, GPT-4, LangChain, PineconeDB, ChromaDB, and other services
            together in a neat package with no fuss to increase your
            productivity by 100x.
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            AnythingLLM can run totally locally on your machine with little
            overhead you wont even notice it's there! No GPU needed. Cloud and
            on-premises installation is available as well.
            <br />
            The AI tooling ecosystem gets more powerful everyday. AnythingLLM
            makes it easy to use.
          </p>
          <a
            href={paths.github()}
            target=""_blank""
            className=""mt-4 w-fit flex flex-grow gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900 dark:bg-stone-900""
          >
            <GitMerge className=""h-4 w-4"" />
            <p className=""text-slate-800 dark:text-slate-200 text-sm md:text-lg leading-loose"">
              Create an issue on Github
            </p>
          </a>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-end ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-slate-200 dark:bg-amber-800 rounded-b-2xl rounded-tl-2xl rounded-tr-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            How do I get started?!
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            It's simple. All collections are organized into buckets we call{"" ""}
            <b>""Workspaces""</b>. Workspaces are buckets of files, documents,
            images, PDFs, and other files which will be transformed into
            something LLM's can understand and use in conversation.
            <br />
            <br />
            You can add and remove files at anytime.
          </p>
          <button
            onClick={showNewWsModal}
            className=""mt-4 w-fit flex flex-grow gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900 dark:bg-stone-900""
          >
            <Plus className=""h-4 w-4"" />
            <p className=""text-slate-800 dark:text-slate-200 text-sm md:text-lg leading-loose"">
              Create your first workspace
            </p>
          </button>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-end ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-slate-200 dark:bg-amber-800 rounded-b-2xl rounded-tl-2xl rounded-tr-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            Is this like an AI dropbox or something? What about chatting? It is
            a chatbot isn't it?
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            AnythingLLM is more than a smarter Dropbox.
            <br />
            <br />
            AnythingLLM offers two ways of talking with your data:
            <br />
            <br />
            <i>Query:</i> Your chats will return data or inferences found with
            the documents in your workspace it has access to. Adding more
            documents to the Workspace make it smarter!
            <br />
            <br />
            <i>Conversational:</i> Your documents + your on-going chat history
            both contribute to the LLM knowledge at the same time. Great for
            appending real-time text-based info or corrections and
            misunderstandings the LLM might have.
            <br />
            <br />
            You can toggle between either mode <i>in the middle of chatting!</i>
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-end ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-slate-200 dark:bg-amber-800 rounded-b-2xl rounded-tl-2xl rounded-tr-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            Wow, this sounds amazing, let me try it out already!
          </p>
        </div>
      </div>
    </React.Fragment>,

    <React.Fragment>
      <div
        className={`flex w-full mt-2 justify-start ${
          popMsg ? ""chat__message"" : """"
        }`}
      >
        <div className=""p-4 max-w-full md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-b-2xl rounded-tr-2xl rounded-tl-sm"">
          <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
            Have Fun!
          </p>
          <div className=""flex flex-col md:flex-row items-start md:items-center gap-1 md:gap-4"">
            <a
              href={paths.github()}
              target=""_blank""
              className=""mt-4 w-fit flex flex-grow gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900 dark:bg-stone-900""
            >
              <GitHub className=""h-4 w-4"" />
              <p className=""text-slate-800 dark:text-slate-200 text-sm md:text-lg leading-loose"">
                Star on GitHub
              </p>
            </a>
            <a
              href={paths.mailToMintplex()}
              className=""mt-4 w-fit flex flex-grow gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900 dark:bg-stone-900""
            >
              <Mail className=""h-4 w-4"" />
              <p className=""text-slate-800 dark:text-slate-200 text-sm md:text-lg leading-loose"">
                Contact Mintplex Labs
              </p>
            </a>
          </div>
        </div>
      </div>
    </React.Fragment>,
  ];

  useEffect(() => {
    function processMsgs() {
      if (!!window.localStorage.getItem(""anythingllm_intro"")) {
        setMockMessages([...MESSAGES]);
        return false;
      } else {
        setMockMessages([MESSAGES[0]]);
      }

      var timer = 500;
      var messages = [];

      MESSAGES.map((child) => {
        setTimeout(() => {
          setMockMessages([...messages, child]);
          messages.push(child);
        }, timer);
        timer += 2_500;
      });
      window.localStorage.setItem(""anythingllm_intro"", 1);
    }

    processMsgs();
  }, []);

  return (
    <div
      style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
      className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
    >
      {isMobile && <SidebarMobileHeader />}
      {fetchedMessages.length === 0
        ? mockMsgs.map((content, i) => {
            return <React.Fragment key={i}>{content}</React.Fragment>;
          })
        : fetchedMessages.map((fetchedMessage, i) => {
            return (
              <React.Fragment key={i}>
                <ChatBubble
                  message={
                    fetchedMessage.user === """"
                      ? fetchedMessage.response
                      : fetchedMessage.user
                  }
                  type={fetchedMessage.user === """" ? ""response"" : ""user""}
                  popMsg={popMsg}
                />
              </React.Fragment>
            );
          })}
      {showingNewWsModal && <NewWorkspaceModal hideModal={hideNewWsModal} />}
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR, { VAR, } VAR ""../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR { VAR } VAR ""../VAR""; VAR VAR VAR ""../VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR([]); VAR { VAR: VAR, VAR: VAR, VAR: VAR, } = VAR(); VAR VAR = !VAR.VAR.VAR(""VAR""); VAR(() => { VAR VAR = VAR () => { VAR VAR = VAR VAR.VAR(); VAR(VAR); }; VAR(); }, []); VAR VAR = [ <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR, VAR VAR VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR <VAR>VAR</VAR> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR (VAR-VAR-VAR-VAR) VAR VAR VAR VAR VAR VAR, VAR, VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR, VAR-4, VAR, VAR, VAR, VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR 100x. </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR'VAR VAR! VAR VAR VAR. VAR VAR VAR-VAR VAR VAR VAR VAR VAR. <VAR /> VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR-4 VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR?! </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR'VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR{"" ""} <VAR>""VAR""</VAR>. VAR VAR VAR VAR VAR, VAR, VAR, VAR, VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR'VAR VAR VAR VAR VAR VAR VAR. <VAR /> <VAR /> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR} VAR=""VAR-4 VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR? VAR VAR VAR? VAR VAR VAR VAR VAR'VAR VAR? </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR. <VAR /> <VAR /> VAR VAR VAR VAR VAR VAR VAR VAR VAR: <VAR /> <VAR /> <VAR>VAR:</VAR> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR! <VAR /> <VAR /> <VAR>VAR:</VAR> VAR VAR + VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR-VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. <VAR /> <VAR /> VAR VAR VAR VAR VAR VAR <VAR>VAR VAR VAR VAR VAR!</VAR> </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR, VAR VAR VAR, VAR VAR VAR VAR VAR VAR! </VAR> </VAR> </VAR> </VAR.VAR>, <VAR.VAR> <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR"" : """" }`} > <VAR VAR=""VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR! </VAR> <VAR VAR=""VAR VAR-VAR VAR:VAR-VAR VAR-VAR VAR:VAR-VAR VAR-1 VAR:VAR-4""> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR-4 VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-4 VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR.VAR>, ]; VAR(() => { VAR VAR() { VAR (!!VAR.VAR.VAR(""VAR"")) { VAR([...VAR]); VAR VAR; } VAR { VAR([VAR[0]]); } VAR VAR = 500; VAR VAR = []; VAR.VAR((VAR) => { VAR(() => { VAR([...VAR, VAR]); VAR.VAR(VAR); }, VAR); VAR += 2_500; }); VAR.VAR.VAR(""VAR"", 1); } VAR(); }, []); VAR ( <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} {VAR.VAR === 0 ? VAR.VAR((VAR, VAR) => { VAR <VAR.VAR VAR={VAR}>{VAR}</VAR.VAR>; }) : VAR.VAR((VAR, VAR) => { VAR ( <VAR.VAR VAR={VAR}> <VAR VAR={ VAR.VAR === """" ? VAR.VAR : VAR.VAR } VAR={VAR.VAR === """" ? ""VAR"" : ""VAR""} VAR={VAR} /> </VAR.VAR> ); })} {VAR && <VAR VAR={VAR} />} </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/EditingChatBubble/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";

export default function EditingChatBubble({
  message,
  index,
  type,
  handleMessageChange,
  removeMessage,
}) {
  const [isEditing, setIsEditing] = useState(false);
  const [tempMessage, setTempMessage] = useState(message[type]);
  const isUser = type === ""user"";

  return (
    <div
      className={`flex w-full mt-2 items-center ${
        isUser ? ""justify-end"" : ""justify-start""
      }`}
    >
      {isUser && (
        <button
          className=""flex items-center text-red-500 hover:text-red-700 transition mr-2""
          onClick={() => removeMessage(index)}
        >
          <X className=""mr-2"" size={20} />
        </button>
      )}
      <div
        className={`p-4 max-w-full md:max-w-[75%] ${
          isUser
            ? ""bg-slate-200 dark:bg-amber-800""
            : ""bg-orange-100 dark:bg-stone-700""
        } rounded-b-2xl ${isUser ? ""rounded-tl-2xl"" : ""rounded-tr-2xl""} ${
          isUser ? ""rounded-tr-sm"" : ""rounded-tl-sm""
        }`}
        onDoubleClick={() => setIsEditing(true)}
      >
        {isEditing ? (
          <input
            value={tempMessage}
            onChange={(e) => setTempMessage(e.target.value)}
            onBlur={() => {
              handleMessageChange(index, type, tempMessage);
              setIsEditing(false);
            }}
            autoFocus
          />
        ) : (
          tempMessage && (
            <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
              {tempMessage}
            </p>
          )
        )}
      </div>
      {!isUser && (
        <button
          className=""flex items-center text-red-500 hover:text-red-700 transition ml-2""
          onClick={() => removeMessage(index)}
        >
          <X className=""mr-2"" size={20} />
        </button>
      )}
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR({ VAR, VAR, VAR, VAR, VAR, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR[VAR]); VAR VAR = VAR === ""VAR""; VAR ( <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR-VAR"" : ""VAR-VAR"" }`} > {VAR && ( <VAR VAR=""VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR VAR-2"" VAR={() => VAR(VAR)} > <VAR VAR=""VAR-2"" VAR={20} /> </VAR> )} <VAR VAR={`VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] ${ VAR ? ""VAR-VAR-200 VAR:VAR-VAR-800"" : ""VAR-VAR-100 VAR:VAR-VAR-700"" } VAR-VAR-2xl ${VAR ? ""VAR-VAR-2xl"" : ""VAR-VAR-2xl""} ${ VAR ? ""VAR-VAR-VAR"" : ""VAR-VAR-VAR"" }`} VAR={() => VAR(VAR)} > {VAR ? ( <VAR VAR={VAR} VAR={(VAR) => VAR(VAR.VAR.VAR)} VAR={() => { VAR(VAR, VAR, VAR); VAR(VAR); }} VAR /> ) : ( VAR && ( <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> {VAR} </VAR> ) )} </VAR> {!VAR && ( <VAR VAR=""VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR VAR-2"" VAR={() => VAR(VAR)} > <VAR VAR=""VAR-2"" VAR={20} /> </VAR> )} </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/EditingChatBubble/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";

export default function EditingChatBubble({
  message,
  index,
  type,
  handleMessageChange,
  removeMessage,
}) {
  const [isEditing, setIsEditing] = useState(false);
  const [tempMessage, setTempMessage] = useState(message[type]);
  const isUser = type === ""user"";

  return (
    <div
      className={`flex w-full mt-2 items-center ${
        isUser ? ""justify-end"" : ""justify-start""
      }`}
    >
      {isUser && (
        <button
          className=""flex items-center text-red-500 hover:text-red-700 transition mr-2""
          onClick={() => removeMessage(index)}
        >
          <X className=""mr-2"" size={20} />
        </button>
      )}
      <div
        className={`p-4 max-w-full md:max-w-[75%] ${
          isUser
            ? ""bg-slate-200 dark:bg-amber-800""
            : ""bg-orange-100 dark:bg-stone-700""
        } rounded-b-2xl ${isUser ? ""rounded-tl-2xl"" : ""rounded-tr-2xl""} ${
          isUser ? ""rounded-tr-sm"" : ""rounded-tl-sm""
        }`}
        onDoubleClick={() => setIsEditing(true)}
      >
        {isEditing ? (
          <input
            value={tempMessage}
            onChange={(e) => setTempMessage(e.target.value)}
            onBlur={() => {
              handleMessageChange(index, type, tempMessage);
              setIsEditing(false);
            }}
            autoFocus
          />
        ) : (
          tempMessage && (
            <p className=""text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base"">
              {tempMessage}
            </p>
          )
        )}
      </div>
      {!isUser && (
        <button
          className=""flex items-center text-red-500 hover:text-red-700 transition ml-2""
          onClick={() => removeMessage(index)}
        >
          <X className=""mr-2"" size={20} />
        </button>
      )}
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR({ VAR, VAR, VAR, VAR, VAR, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR[VAR]); VAR VAR = VAR === ""VAR""; VAR ( <VAR VAR={`VAR VAR-VAR VAR-2 VAR-VAR ${ VAR ? ""VAR-VAR"" : ""VAR-VAR"" }`} > {VAR && ( <VAR VAR=""VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR VAR-2"" VAR={() => VAR(VAR)} > <VAR VAR=""VAR-2"" VAR={20} /> </VAR> )} <VAR VAR={`VAR-4 VAR-VAR-VAR VAR:VAR-VAR-[75%] ${ VAR ? ""VAR-VAR-200 VAR:VAR-VAR-800"" : ""VAR-VAR-100 VAR:VAR-VAR-700"" } VAR-VAR-2xl ${VAR ? ""VAR-VAR-2xl"" : ""VAR-VAR-2xl""} ${ VAR ? ""VAR-VAR-VAR"" : ""VAR-VAR-VAR"" }`} VAR={() => VAR(VAR)} > {VAR ? ( <VAR VAR={VAR} VAR={(VAR) => VAR(VAR.VAR.VAR)} VAR={() => { VAR(VAR, VAR, VAR); VAR(VAR); }} VAR /> ) : ( VAR && ( <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR""> {VAR} </VAR> ) )} </VAR> {!VAR && ( <VAR VAR=""VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR VAR-2"" VAR={() => VAR(VAR)} > <VAR VAR=""VAR-2"" VAR={20} /> </VAR> )} </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/Documents/ConfirmationModal/index.jsx,"import React from ""react"";
import { dollarFormat } from ""../../../../../utils/numbers"";

export default function ConfirmationModal({
  directories,
  hideConfirm,
  additions,
  updateWorkspace,
}) {
  function estimateCosts() {
    const cachedTokens = additions.map((filepath) => {
      const [parent, filename] = filepath.split(""/"");
      const details = directories.items
        .find((folder) => folder.name === parent)
        .items.find((file) => file.name === filename);

      const { token_count_estimate = 0, cached = false } = details;
      return cached ? token_count_estimate : 0;
    });
    const tokenEstimates = additions.map((filepath) => {
      const [parent, filename] = filepath.split(""/"");
      const details = directories.items
        .find((folder) => folder.name === parent)
        .items.find((file) => file.name === filename);

      const { token_count_estimate = 0 } = details;
      return token_count_estimate;
    });

    const totalTokens = tokenEstimates.reduce((a, b) => a + b, 0);
    const cachedTotal = cachedTokens.reduce((a, b) => a + b, 0);
    const dollarValue = 0.0004 * ((totalTokens - cachedTotal) / 1_000);

    return {
      dollarValue,
      dollarText:
        dollarValue < 0.01 ? ""< $0.01"" : `about ${dollarFormat(dollarValue)}`,
    };
  }

  const { dollarValue, dollarText } = estimateCosts();
  return (
    <dialog
      open={true}
      style={{ zIndex: 100 }}
      className=""fixed top-0 flex bg-black bg-opacity-50 w-[100vw] h-full items-center justify-center ""
    >
      <div className=""w-fit px-10 p-4 min-w-1/2 rounded-lg bg-white shadow dark:bg-stone-700 text-black dark:text-slate-200"">
        <div className=""flex flex-col w-full"">
          <p className=""font-semibold"">
            Are you sure you want to embed these documents?
          </p>

          <div className=""flex flex-col gap-y-1"">
            {dollarValue <= 0 ? (
              <p className=""text-base mt-4"">
                You will be embedding {additions.length} new documents into this
                workspace.
                <br />
                This will not incur any costs for OpenAI credits.
              </p>
            ) : (
              <p className=""text-base mt-4"">
                You will be embedding {additions.length} new documents into this
                workspace. <br />
                This will cost {dollarText} in OpenAI credits.
              </p>
            )}
          </div>

          <div className=""flex w-full justify-between items-center mt-4"">
            <button
              onClick={hideConfirm}
              className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
            >
              Cancel
            </button>
            <button
              onClick={updateWorkspace}
              className=""border border-gray-800 text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:border-slate-200 dark:hover:bg-stone-900""
            >
              Continue
            </button>
          </div>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR VAR ""VAR""; VAR { VAR } VAR ""../../../../../VAR/VAR""; VAR VAR VAR VAR({ VAR, VAR, VAR, VAR, }) { VAR VAR() { VAR VAR = VAR.VAR((VAR) => { VAR [VAR, VAR] = VAR.VAR(""/""); VAR VAR = VAR.VAR .VAR((VAR) => VAR.VAR === VAR) .VAR.VAR((VAR) => VAR.VAR === VAR); VAR { VAR = 0, VAR = VAR } = VAR; VAR VAR ? VAR : 0; }); VAR VAR = VAR.VAR((VAR) => { VAR [VAR, VAR] = VAR.VAR(""/""); VAR VAR = VAR.VAR .VAR((VAR) => VAR.VAR === VAR) .VAR.VAR((VAR) => VAR.VAR === VAR); VAR { VAR = 0 } = VAR; VAR VAR; }); VAR VAR = VAR.VAR((VAR, VAR) => VAR + VAR, 0); VAR VAR = VAR.VAR((VAR, VAR) => VAR + VAR, 0); VAR VAR = 0.0004 * ((VAR - VAR) / 1_000); VAR { VAR, VAR: VAR < 0.01 ? ""< $0.01"" : `VAR ${VAR(VAR)}`, }; } VAR { VAR, VAR } = VAR(); VAR ( <VAR VAR={VAR} VAR={{ VAR: 100 }} VAR=""VAR VAR-0 VAR VAR-VAR VAR-VAR-50 VAR-[100vw] VAR-VAR VAR-VAR VAR-VAR "" > <VAR VAR=""VAR-VAR VAR-10 VAR-4 VAR-VAR-1/2 VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700 VAR-VAR VAR:VAR-VAR-200""> <VAR VAR=""VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR? </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1""> {VAR <= 0 ? ( <VAR VAR=""VAR-VAR VAR-4""> VAR VAR VAR VAR {VAR.VAR} VAR VAR VAR VAR VAR. <VAR /> VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> ) : ( <VAR VAR=""VAR-VAR VAR-4""> VAR VAR VAR VAR {VAR.VAR} VAR VAR VAR VAR VAR. <VAR /> VAR VAR VAR {VAR} VAR VAR VAR. </VAR> )} </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-4""> <VAR VAR={VAR} VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR={VAR} VAR=""VAR VAR-VAR-800 VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/Documents/ConfirmationModal/index.jsx,"import React from ""react"";
import { dollarFormat } from ""../../../../../utils/numbers"";

export default function ConfirmationModal({
  directories,
  hideConfirm,
  additions,
  updateWorkspace,
}) {
  function estimateCosts() {
    const cachedTokens = additions.map((filepath) => {
      const [parent, filename] = filepath.split(""/"");
      const details = directories.items
        .find((folder) => folder.name === parent)
        .items.find((file) => file.name === filename);

      const { token_count_estimate = 0, cached = false } = details;
      return cached ? token_count_estimate : 0;
    });
    const tokenEstimates = additions.map((filepath) => {
      const [parent, filename] = filepath.split(""/"");
      const details = directories.items
        .find((folder) => folder.name === parent)
        .items.find((file) => file.name === filename);

      const { token_count_estimate = 0 } = details;
      return token_count_estimate;
    });

    const totalTokens = tokenEstimates.reduce((a, b) => a + b, 0);
    const cachedTotal = cachedTokens.reduce((a, b) => a + b, 0);
    const dollarValue = 0.0004 * ((totalTokens - cachedTotal) / 1_000);

    return {
      dollarValue,
      dollarText:
        dollarValue < 0.01 ? ""< $0.01"" : `about ${dollarFormat(dollarValue)}`,
    };
  }

  const { dollarValue, dollarText } = estimateCosts();
  return (
    <dialog
      open={true}
      style={{ zIndex: 100 }}
      className=""fixed top-0 flex bg-black bg-opacity-50 w-[100vw] h-full items-center justify-center ""
    >
      <div className=""w-fit px-10 p-4 min-w-1/2 rounded-lg bg-white shadow dark:bg-stone-700 text-black dark:text-slate-200"">
        <div className=""flex flex-col w-full"">
          <p className=""font-semibold"">
            Are you sure you want to embed these documents?
          </p>

          <div className=""flex flex-col gap-y-1"">
            {dollarValue <= 0 ? (
              <p className=""text-base mt-4"">
                You will be embedding {additions.length} new documents into this
                workspace.
                <br />
                This will not incur any costs for OpenAI credits.
              </p>
            ) : (
              <p className=""text-base mt-4"">
                You will be embedding {additions.length} new documents into this
                workspace. <br />
                This will cost {dollarText} in OpenAI credits.
              </p>
            )}
          </div>

          <div className=""flex w-full justify-between items-center mt-4"">
            <button
              onClick={hideConfirm}
              className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
            >
              Cancel
            </button>
            <button
              onClick={updateWorkspace}
              className=""border border-gray-800 text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:border-slate-200 dark:hover:bg-stone-900""
            >
              Continue
            </button>
          </div>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR VAR ""VAR""; VAR { VAR } VAR ""../../../../../VAR/VAR""; VAR VAR VAR VAR({ VAR, VAR, VAR, VAR, }) { VAR VAR() { VAR VAR = VAR.VAR((VAR) => { VAR [VAR, VAR] = VAR.VAR(""/""); VAR VAR = VAR.VAR .VAR((VAR) => VAR.VAR === VAR) .VAR.VAR((VAR) => VAR.VAR === VAR); VAR { VAR = 0, VAR = VAR } = VAR; VAR VAR ? VAR : 0; }); VAR VAR = VAR.VAR((VAR) => { VAR [VAR, VAR] = VAR.VAR(""/""); VAR VAR = VAR.VAR .VAR((VAR) => VAR.VAR === VAR) .VAR.VAR((VAR) => VAR.VAR === VAR); VAR { VAR = 0 } = VAR; VAR VAR; }); VAR VAR = VAR.VAR((VAR, VAR) => VAR + VAR, 0); VAR VAR = VAR.VAR((VAR, VAR) => VAR + VAR, 0); VAR VAR = 0.0004 * ((VAR - VAR) / 1_000); VAR { VAR, VAR: VAR < 0.01 ? ""< $0.01"" : `VAR ${VAR(VAR)}`, }; } VAR { VAR, VAR } = VAR(); VAR ( <VAR VAR={VAR} VAR={{ VAR: 100 }} VAR=""VAR VAR-0 VAR VAR-VAR VAR-VAR-50 VAR-[100vw] VAR-VAR VAR-VAR VAR-VAR "" > <VAR VAR=""VAR-VAR VAR-10 VAR-4 VAR-VAR-1/2 VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700 VAR-VAR VAR:VAR-VAR-200""> <VAR VAR=""VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR? </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1""> {VAR <= 0 ? ( <VAR VAR=""VAR-VAR VAR-4""> VAR VAR VAR VAR {VAR.VAR} VAR VAR VAR VAR VAR. <VAR /> VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> ) : ( <VAR VAR=""VAR-VAR VAR-4""> VAR VAR VAR VAR {VAR.VAR} VAR VAR VAR VAR VAR. <VAR /> VAR VAR VAR {VAR} VAR VAR VAR. </VAR> )} </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-4""> <VAR VAR={VAR} VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR={VAR} VAR=""VAR VAR-VAR-800 VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/Documents/Directory/index.jsx,"import React, { useState } from ""react"";
import {
  FileMinus,
  FilePlus,
  Folder,
  FolderMinus,
  FolderPlus,
  Zap,
} from ""react-feather"";
import { nFormatter } from ""../../../../../utils/numbers"";
import System from ""../../../../../models/system"";

export default function Directory({
  files,
  parent = null,
  nested = 0,
  toggleSelection,
  isSelected,
}) {
  const [isExpanded, toggleExpanded] = useState(false);
  const [showDetails, toggleDetails] = useState(false);
  const [showZap, setShowZap] = useState(false);
  const handleDelete = async (name, meta) => {
    if (
      !window.confirm(
        ""Are you sure you want to delete this document?\nThis will require you to re-upload and re-embed it.\nThis document will be removed from any workspace that is currently referencing it.\nThis action is not reversible.""
      )
    )
      return false;
    document?.getElementById(meta?.id)?.remove();
    await System.deleteDocument(name, meta);
  };

  if (files.type === ""folder"") {
    return (
      <div style={{ marginLeft: nested }} className=""mb-2"">
        <div
          className={`flex items-center hover:bg-gray-100 gap-x-2 text-gray-800 dark:text-stone-200 dark:hover:bg-stone-800 px-2 rounded-lg`}
        >
          {files.items.some((files) => files.type === ""folder"") ? (
            <Folder className=""w-6 h-6"" />
          ) : (
            <button onClick={() => toggleSelection(files.name)}>
              {isSelected(files.name) ? (
                <FolderMinus className=""w-6 h-6 stroke-red-800 hover:fill-red-500"" />
              ) : (
                <FolderPlus className=""w-6 h-6 hover:stroke-green-800 hover:fill-green-500"" />
              )}
            </button>
          )}

          <div
            className=""flex gap-x-2 items-center  cursor-pointer w-full""
            onClick={() => toggleExpanded(!isExpanded)}
          >
            <h2 className=""text-base md:text-2xl"">{files.name}</h2>
            {files.items.some((files) => files.type === ""folder"") ? (
              <p className=""text-xs italic"">{files.items.length} folders</p>
            ) : (
              <p className=""text-xs italic"">
                {files.items.length} documents |{"" ""}
                {nFormatter(
                  files.items.reduce((a, b) => a + b.token_count_estimate, 0)
                )}{"" ""}
                tokens
              </p>
            )}
          </div>
        </div>
        {isExpanded &&
          files.items.map((item) => (
            <Directory
              key={item.name}
              parent={files.name}
              files={item}
              nested={nested + 20}
              toggleSelection={toggleSelection}
              isSelected={isSelected}
            />
          ))}
      </div>
    );
  }

  const { name, type: _type, ...meta } = files;
  return (
    <div className=""ml-[20px] my-2"" id={meta.id}>
      <div className=""flex items-center"">
        {meta?.cached && (
          <button
            type=""button""
            onClick={() => setShowZap(true)}
            className=""rounded-full p-1 hover:bg-stone-500 hover:bg-opacity-75""
          >
            <Zap className=""h-4 w-4 stroke-yellow-500 fill-yellow-400"" />
          </button>
        )}
        {showZap && (
          <dialog
            open={true}
            style={{ zIndex: 100 }}
            className=""fixed top-0 flex bg-black bg-opacity-50 w-[100vw] h-full items-center justify-center ""
          >
            <div className=""w-fit px-10 py-4 w-[25%] rounded-lg bg-white shadow dark:bg-stone-700 text-black dark:text-slate-200"">
              <div className=""flex flex-col w-full"">
                <p className=""font-semibold text-xl flex items-center gap-x-1 justify-left"">
                  What does{"" ""}
                  <Zap className=""h-4 w-4 stroke-yellow-500 fill-yellow-400"" />{"" ""}
                  mean?
                </p>
                <p className=""text-base mt-4"">
                  This symbol indicates that you have embed this document before
                  and will not have to pay to re-embed this document.
                </p>
                <div className=""flex w-full justify-center items-center mt-4"">
                  <button
                    onClick={() => setShowZap(false)}
                    className=""border border-gray-800 text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:border-slate-200 dark:hover:bg-stone-900""
                  >
                    Close
                  </button>
                </div>
              </div>
            </div>
          </dialog>
        )}

        <div
          className={`flex items-center gap-x-2 text-gray-800 dark:text-stone-200 hover:bg-gray-100 dark:hover:bg-stone-800 px-2 rounded-lg`}
        >
          <button onClick={() => toggleSelection(`${parent}/${name}`)}>
            {isSelected(`${parent}/${name}`) ? (
              <FileMinus className=""w-6 h-6 stroke-red-800 hover:fill-red-500"" />
            ) : (
              <FilePlus className=""w-6 h-6 hover:stroke-green-800 hover:fill-green-500"" />
            )}
          </button>
          <div
            className=""w-full items-center flex cursor-pointer""
            onClick={() => toggleDetails(!showDetails)}
          >
            <h3 className=""text-sm"">{name}</h3>
            <br />
          </div>
        </div>
      </div>
      {showDetails && (
        <div className=""w-full flex flex-col"">
          <div className=""ml-[20px] flex flex-col gap-y-1 my-1 p-2 rounded-md bg-slate-200 font-mono text-sm overflow-x-scroll"">
            {Object.entries(meta).map(([key, value], i) => {
              if (key === ""cached"") return null;
              return (
                <p key={i} className=""whitespace-pre"">
                  {key}: {value}
                </p>
              );
            })}
          </div>
          <div
            onClick={() => handleDelete(`${parent}/${name}`, meta)}
            className=""flex items-center justify-end w-full""
          >
            <button className=""text-sm text-slate-400 dark:text-stone-500 hover:text-red-500"">
              Purge Document
            </button>
          </div>
        </div>
      )}
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR { VAR } VAR ""../../../../../VAR/VAR""; VAR VAR VAR ""../../../../../VAR/VAR""; VAR VAR VAR VAR({ VAR, VAR = VAR, VAR = 0, VAR, VAR, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR, VAR) => { VAR ( !VAR.VAR( ""VAR VAR VAR VAR VAR VAR VAR VAR VAR?\VAR VAR VAR VAR VAR VAR-VAR VAR VAR-VAR VAR.\VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.\VAR VAR VAR VAR VAR."" ) ) VAR VAR; VAR?.VAR(VAR?.VAR)?.VAR(); VAR VAR.VAR(VAR, VAR); }; VAR (VAR.VAR === ""VAR"") { VAR ( <VAR VAR={{ VAR: VAR }} VAR=""VAR-2""> <VAR VAR={`VAR VAR-VAR VAR:VAR-VAR-100 VAR-VAR-2 VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800 VAR-2 VAR-VAR`} > {VAR.VAR.VAR((VAR) => VAR.VAR === ""VAR"") ? ( <VAR VAR=""VAR-6 VAR-6"" /> ) : ( <VAR VAR={() => VAR(VAR.VAR)}> {VAR(VAR.VAR) ? ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR-800 VAR:VAR-VAR-500"" /> ) : ( <VAR VAR=""VAR-6 VAR-6 VAR:VAR-VAR-800 VAR:VAR-VAR-500"" /> )} </VAR> )} <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR VAR-VAR"" VAR={() => VAR(!VAR)} > <VAR VAR=""VAR-VAR VAR:VAR-2xl"">{VAR.VAR}</VAR> {VAR.VAR.VAR((VAR) => VAR.VAR === ""VAR"") ? ( <VAR VAR=""VAR-VAR VAR"">{VAR.VAR.VAR} VAR</VAR> ) : ( <VAR VAR=""VAR-VAR VAR""> {VAR.VAR.VAR} VAR |{"" ""} {VAR( VAR.VAR.VAR((VAR, VAR) => VAR + VAR.VAR, 0) )}{"" ""} VAR </VAR> )} </VAR> </VAR> {VAR && VAR.VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR.VAR} VAR={VAR} VAR={VAR + 20} VAR={VAR} VAR={VAR} /> ))} </VAR> ); } VAR { VAR, VAR: VAR, ...VAR } = VAR; VAR ( <VAR VAR=""VAR-[20px] VAR-2"" VAR={VAR.VAR}> <VAR VAR=""VAR VAR-VAR""> {VAR?.VAR && ( <VAR VAR=""VAR"" VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR-1 VAR:VAR-VAR-500 VAR:VAR-VAR-75"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-500 VAR-VAR-400"" /> </VAR> )} {VAR && ( <VAR VAR={VAR} VAR={{ VAR: 100 }} VAR=""VAR VAR-0 VAR VAR-VAR VAR-VAR-50 VAR-[100vw] VAR-VAR VAR-VAR VAR-VAR "" > <VAR VAR=""VAR-VAR VAR-10 VAR-4 VAR-[25%] VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700 VAR-VAR VAR:VAR-VAR-200""> <VAR VAR=""VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR""> VAR VAR{"" ""} <VAR VAR=""VAR-4 VAR-4 VAR-VAR-500 VAR-VAR-400"" />{"" ""} VAR? </VAR> <VAR VAR=""VAR-VAR VAR-4""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR-VAR VAR VAR. </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-4""> <VAR VAR={() => VAR(VAR)} VAR=""VAR VAR-VAR-800 VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> </VAR> </VAR> </VAR> </VAR> )} <VAR VAR={`VAR VAR-VAR VAR-VAR-2 VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-800 VAR-2 VAR-VAR`} > <VAR VAR={() => VAR(`${VAR}/${VAR}`)}> {VAR(`${VAR}/${VAR}`) ? ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR-800 VAR:VAR-VAR-500"" /> ) : ( <VAR VAR=""VAR-6 VAR-6 VAR:VAR-VAR-800 VAR:VAR-VAR-500"" /> )} </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR"" VAR={() => VAR(!VAR)} > <VAR VAR=""VAR-VAR"">{VAR}</VAR> <VAR /> </VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR VAR VAR-VAR""> <VAR VAR=""VAR-[20px] VAR VAR-VAR VAR-VAR-1 VAR-1 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR-VAR""> {VAR.VAR(VAR).VAR(([VAR, VAR], VAR) => { VAR (VAR === ""VAR"") VAR VAR; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR""> {VAR}: {VAR} </VAR> ); })} </VAR> <VAR VAR={() => VAR(`${VAR}/${VAR}`, VAR)} VAR=""VAR VAR-VAR VAR-VAR VAR-VAR"" > <VAR VAR=""VAR-VAR VAR-VAR-400 VAR:VAR-VAR-500 VAR:VAR-VAR-500""> VAR VAR </VAR> </VAR> </VAR> )} </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/Documents/Directory/index.jsx,"import React, { useState } from ""react"";
import {
  FileMinus,
  FilePlus,
  Folder,
  FolderMinus,
  FolderPlus,
  Zap,
} from ""react-feather"";
import { nFormatter } from ""../../../../../utils/numbers"";
import System from ""../../../../../models/system"";

export default function Directory({
  files,
  parent = null,
  nested = 0,
  toggleSelection,
  isSelected,
}) {
  const [isExpanded, toggleExpanded] = useState(false);
  const [showDetails, toggleDetails] = useState(false);
  const [showZap, setShowZap] = useState(false);
  const handleDelete = async (name, meta) => {
    if (
      !window.confirm(
        ""Are you sure you want to delete this document?\nThis will require you to re-upload and re-embed it.\nThis document will be removed from any workspace that is currently referencing it.\nThis action is not reversible.""
      )
    )
      return false;
    document?.getElementById(meta?.id)?.remove();
    await System.deleteDocument(name, meta);
  };

  if (files.type === ""folder"") {
    return (
      <div style={{ marginLeft: nested }} className=""mb-2"">
        <div
          className={`flex items-center hover:bg-gray-100 gap-x-2 text-gray-800 dark:text-stone-200 dark:hover:bg-stone-800 px-2 rounded-lg`}
        >
          {files.items.some((files) => files.type === ""folder"") ? (
            <Folder className=""w-6 h-6"" />
          ) : (
            <button onClick={() => toggleSelection(files.name)}>
              {isSelected(files.name) ? (
                <FolderMinus className=""w-6 h-6 stroke-red-800 hover:fill-red-500"" />
              ) : (
                <FolderPlus className=""w-6 h-6 hover:stroke-green-800 hover:fill-green-500"" />
              )}
            </button>
          )}

          <div
            className=""flex gap-x-2 items-center  cursor-pointer w-full""
            onClick={() => toggleExpanded(!isExpanded)}
          >
            <h2 className=""text-base md:text-2xl"">{files.name}</h2>
            {files.items.some((files) => files.type === ""folder"") ? (
              <p className=""text-xs italic"">{files.items.length} folders</p>
            ) : (
              <p className=""text-xs italic"">
                {files.items.length} documents |{"" ""}
                {nFormatter(
                  files.items.reduce((a, b) => a + b.token_count_estimate, 0)
                )}{"" ""}
                tokens
              </p>
            )}
          </div>
        </div>
        {isExpanded &&
          files.items.map((item) => (
            <Directory
              key={item.name}
              parent={files.name}
              files={item}
              nested={nested + 20}
              toggleSelection={toggleSelection}
              isSelected={isSelected}
            />
          ))}
      </div>
    );
  }

  const { name, type: _type, ...meta } = files;
  return (
    <div className=""ml-[20px] my-2"" id={meta.id}>
      <div className=""flex items-center"">
        {meta?.cached && (
          <button
            type=""button""
            onClick={() => setShowZap(true)}
            className=""rounded-full p-1 hover:bg-stone-500 hover:bg-opacity-75""
          >
            <Zap className=""h-4 w-4 stroke-yellow-500 fill-yellow-400"" />
          </button>
        )}
        {showZap && (
          <dialog
            open={true}
            style={{ zIndex: 100 }}
            className=""fixed top-0 flex bg-black bg-opacity-50 w-[100vw] h-full items-center justify-center ""
          >
            <div className=""w-fit px-10 py-4 w-[25%] rounded-lg bg-white shadow dark:bg-stone-700 text-black dark:text-slate-200"">
              <div className=""flex flex-col w-full"">
                <p className=""font-semibold text-xl flex items-center gap-x-1 justify-left"">
                  What does{"" ""}
                  <Zap className=""h-4 w-4 stroke-yellow-500 fill-yellow-400"" />{"" ""}
                  mean?
                </p>
                <p className=""text-base mt-4"">
                  This symbol indicates that you have embed this document before
                  and will not have to pay to re-embed this document.
                </p>
                <div className=""flex w-full justify-center items-center mt-4"">
                  <button
                    onClick={() => setShowZap(false)}
                    className=""border border-gray-800 text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:border-slate-200 dark:hover:bg-stone-900""
                  >
                    Close
                  </button>
                </div>
              </div>
            </div>
          </dialog>
        )}

        <div
          className={`flex items-center gap-x-2 text-gray-800 dark:text-stone-200 hover:bg-gray-100 dark:hover:bg-stone-800 px-2 rounded-lg`}
        >
          <button onClick={() => toggleSelection(`${parent}/${name}`)}>
            {isSelected(`${parent}/${name}`) ? (
              <FileMinus className=""w-6 h-6 stroke-red-800 hover:fill-red-500"" />
            ) : (
              <FilePlus className=""w-6 h-6 hover:stroke-green-800 hover:fill-green-500"" />
            )}
          </button>
          <div
            className=""w-full items-center flex cursor-pointer""
            onClick={() => toggleDetails(!showDetails)}
          >
            <h3 className=""text-sm"">{name}</h3>
            <br />
          </div>
        </div>
      </div>
      {showDetails && (
        <div className=""w-full flex flex-col"">
          <div className=""ml-[20px] flex flex-col gap-y-1 my-1 p-2 rounded-md bg-slate-200 font-mono text-sm overflow-x-scroll"">
            {Object.entries(meta).map(([key, value], i) => {
              if (key === ""cached"") return null;
              return (
                <p key={i} className=""whitespace-pre"">
                  {key}: {value}
                </p>
              );
            })}
          </div>
          <div
            onClick={() => handleDelete(`${parent}/${name}`, meta)}
            className=""flex items-center justify-end w-full""
          >
            <button className=""text-sm text-slate-400 dark:text-stone-500 hover:text-red-500"">
              Purge Document
            </button>
          </div>
        </div>
      )}
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR { VAR } VAR ""../../../../../VAR/VAR""; VAR VAR VAR ""../../../../../VAR/VAR""; VAR VAR VAR VAR({ VAR, VAR = VAR, VAR = 0, VAR, VAR, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR, VAR) => { VAR ( !VAR.VAR( ""VAR VAR VAR VAR VAR VAR VAR VAR VAR?\VAR VAR VAR VAR VAR VAR-VAR VAR VAR-VAR VAR.\VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.\VAR VAR VAR VAR VAR."" ) ) VAR VAR; VAR?.VAR(VAR?.VAR)?.VAR(); VAR VAR.VAR(VAR, VAR); }; VAR (VAR.VAR === ""VAR"") { VAR ( <VAR VAR={{ VAR: VAR }} VAR=""VAR-2""> <VAR VAR={`VAR VAR-VAR VAR:VAR-VAR-100 VAR-VAR-2 VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800 VAR-2 VAR-VAR`} > {VAR.VAR.VAR((VAR) => VAR.VAR === ""VAR"") ? ( <VAR VAR=""VAR-6 VAR-6"" /> ) : ( <VAR VAR={() => VAR(VAR.VAR)}> {VAR(VAR.VAR) ? ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR-800 VAR:VAR-VAR-500"" /> ) : ( <VAR VAR=""VAR-6 VAR-6 VAR:VAR-VAR-800 VAR:VAR-VAR-500"" /> )} </VAR> )} <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR VAR-VAR"" VAR={() => VAR(!VAR)} > <VAR VAR=""VAR-VAR VAR:VAR-2xl"">{VAR.VAR}</VAR> {VAR.VAR.VAR((VAR) => VAR.VAR === ""VAR"") ? ( <VAR VAR=""VAR-VAR VAR"">{VAR.VAR.VAR} VAR</VAR> ) : ( <VAR VAR=""VAR-VAR VAR""> {VAR.VAR.VAR} VAR |{"" ""} {VAR( VAR.VAR.VAR((VAR, VAR) => VAR + VAR.VAR, 0) )}{"" ""} VAR </VAR> )} </VAR> </VAR> {VAR && VAR.VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR.VAR} VAR={VAR} VAR={VAR + 20} VAR={VAR} VAR={VAR} /> ))} </VAR> ); } VAR { VAR, VAR: VAR, ...VAR } = VAR; VAR ( <VAR VAR=""VAR-[20px] VAR-2"" VAR={VAR.VAR}> <VAR VAR=""VAR VAR-VAR""> {VAR?.VAR && ( <VAR VAR=""VAR"" VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR-1 VAR:VAR-VAR-500 VAR:VAR-VAR-75"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-500 VAR-VAR-400"" /> </VAR> )} {VAR && ( <VAR VAR={VAR} VAR={{ VAR: 100 }} VAR=""VAR VAR-0 VAR VAR-VAR VAR-VAR-50 VAR-[100vw] VAR-VAR VAR-VAR VAR-VAR "" > <VAR VAR=""VAR-VAR VAR-10 VAR-4 VAR-[25%] VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700 VAR-VAR VAR:VAR-VAR-200""> <VAR VAR=""VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR""> VAR VAR{"" ""} <VAR VAR=""VAR-4 VAR-4 VAR-VAR-500 VAR-VAR-400"" />{"" ""} VAR? </VAR> <VAR VAR=""VAR-VAR VAR-4""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR-VAR VAR VAR. </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-4""> <VAR VAR={() => VAR(VAR)} VAR=""VAR VAR-VAR-800 VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> </VAR> </VAR> </VAR> </VAR> )} <VAR VAR={`VAR VAR-VAR VAR-VAR-2 VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-800 VAR-2 VAR-VAR`} > <VAR VAR={() => VAR(`${VAR}/${VAR}`)}> {VAR(`${VAR}/${VAR}`) ? ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR-800 VAR:VAR-VAR-500"" /> ) : ( <VAR VAR=""VAR-6 VAR-6 VAR:VAR-VAR-800 VAR:VAR-VAR-500"" /> )} </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR"" VAR={() => VAR(!VAR)} > <VAR VAR=""VAR-VAR"">{VAR}</VAR> <VAR /> </VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR VAR VAR-VAR""> <VAR VAR=""VAR-[20px] VAR VAR-VAR VAR-VAR-1 VAR-1 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR-VAR""> {VAR.VAR(VAR).VAR(([VAR, VAR], VAR) => { VAR (VAR === ""VAR"") VAR VAR; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR""> {VAR}: {VAR} </VAR> ); })} </VAR> <VAR VAR={() => VAR(`${VAR}/${VAR}`, VAR)} VAR=""VAR VAR-VAR VAR-VAR VAR-VAR"" > <VAR VAR=""VAR-VAR VAR-VAR-400 VAR:VAR-VAR-500 VAR:VAR-VAR-500""> VAR VAR </VAR> </VAR> </VAR> )} </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/Documents/index.jsx,"import React, { useState, useEffect } from ""react"";
import System from ""../../../../models/system"";
import Workspace from ""../../../../models/workspace"";
import paths from ""../../../../utils/paths"";
import { useParams } from ""react-router-dom"";
import Directory from ""./Directory"";
import ConfirmationModal from ""./ConfirmationModal"";
import { AlertTriangle } from ""react-feather"";

export default function DocumentSettings({ workspace }) {
  const { slug } = useParams();
  const [loading, setLoading] = useState(true);
  const [saving, setSaving] = useState(false);
  const [showConfirmation, setShowConfirmation] = useState(false);
  const [directories, setDirectories] = useState(null);
  const [originalDocuments, setOriginalDocuments] = useState([]);
  const [selectedFiles, setSelectFiles] = useState([]);
  const [hasFiles, setHasFiles] = useState(true);
  const [canDelete, setCanDelete] = useState(false);

  useEffect(() => {
    async function fetchKeys() {
      const localFiles = await System.localFiles();
      const originalDocs = workspace.documents.map((doc) => doc.docpath) || [];
      const hasAnyFiles = localFiles.items.some(
        (folder) => folder?.items?.length > 0
      );

      const canDelete = await System.getCanDeleteWorkspaces();
      setCanDelete(canDelete);
      setDirectories(localFiles);
      setOriginalDocuments([...originalDocs]);
      setSelectFiles([...originalDocs]);
      setHasFiles(hasAnyFiles);
      setLoading(false);
    }
    fetchKeys();
  }, []);

  const deleteWorkspace = async () => {
    if (
      !window.confirm(
        `You are about to delete your entire ${workspace.name} workspace. This will remove all vector embeddings on your vector database.\n\nThe original source files will remain untouched. This action is irreversible.`
      )
    )
      return false;
    await Workspace.delete(workspace.slug);
    workspace.slug === slug
      ? (window.location = paths.home())
      : window.location.reload();
  };

  const docChanges = () => {
    const changes = {
      adds: [],
      deletes: [],
    };

    selectedFiles.map((doc) => {
      const inOriginal = !!originalDocuments.find((oDoc) => oDoc === doc);
      if (!inOriginal) {
        changes.adds.push(doc);
      }
    });

    originalDocuments.map((doc) => {
      const selected = !!selectedFiles.find((oDoc) => oDoc === doc);
      if (!selected) {
        changes.deletes.push(doc);
      }
    });

    return changes;
  };

  const confirmChanges = (e) => {
    e.preventDefault();
    const changes = docChanges();
    changes.adds.length > 0 ? setShowConfirmation(true) : updateWorkspace(e);
  };

  const updateWorkspace = async (e) => {
    e.preventDefault();
    setSaving(true);
    setShowConfirmation(false);
    const changes = docChanges();
    await Workspace.modifyEmbeddings(workspace.slug, changes);
    setSaving(false);
    window.location.reload();
  };

  const isSelected = (filepath) => {
    const isFolder = !filepath.includes(""/"");
    return isFolder
      ? selectedFiles.some((doc) => doc.includes(filepath.split(""/"")[0]))
      : selectedFiles.some((doc) => doc.includes(filepath));
  };

  const toggleSelection = (filepath) => {
    const isFolder = !filepath.includes(""/"");
    const parent = isFolder ? filepath : filepath.split(""/"")[0];

    if (isSelected(filepath)) {
      const updatedDocs = isFolder
        ? selectedFiles.filter((doc) => !doc.includes(parent))
        : selectedFiles.filter((doc) => !doc.includes(filepath));
      setSelectFiles([...new Set(updatedDocs)]);
    } else {
      var newDocs = [];
      var parentDirs = directories.items.find((item) => item.name === parent);
      if (isFolder && parentDirs) {
        const folderItems = parentDirs.items;
        newDocs = folderItems.map((item) => parent + ""/"" + item.name);
      } else {
        newDocs = [filepath];
      }

      const combined = [...selectedFiles, ...newDocs];
      setSelectFiles([...new Set(combined)]);
    }
  };

  if (loading) {
    return (
      <>
        <div className=""p-6 flex h-full w-full max-h-[80vh] overflow-y-scroll"">
          <div className=""flex flex-col gap-y-1 w-full"">
            <p className=""text-slate-200 dark:text-stone-300 text-center"">
              loading workspace files
            </p>
          </div>
        </div>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600""></div>
      </>
    );
  }

  return (
    <>
      {showConfirmation && (
        <ConfirmationModal
          directories={directories}
          hideConfirm={() => setShowConfirmation(false)}
          additions={docChanges().adds}
          updateWorkspace={updateWorkspace}
        />
      )}
      <div className=""p-6 flex h-full w-full max-h-[80vh] overflow-y-scroll"">
        <div className=""flex flex-col gap-y-1 w-full"">
          {!hasFiles && (
            <div className=""mb-4 w-full gap-x-2 rounded-lg h-10 border bg-orange-200 border-orange-800 dark:bg-orange-300 text-orange-800 flex  items-center justify-center"">
              <AlertTriangle className=""h-6 w-6"" />
              <p className=""text-sm"">
                You don't have any files uploaded. Upload a file via the ""Upload
                Docs"" tab.
              </p>
            </div>
          )}

          <div className=""flex flex-col mb-2"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Select folders to add or remove from workspace.
            </p>
            <p className=""text-gray-800 dark:text-stone-400 text-xs italic"">
              {selectedFiles.length} documents in workspace selected.
            </p>
          </div>
          <div className=""w-full h-auto border border-slate-200 dark:border-stone-600 rounded-lg px-4 py-2"">
            {!!directories && (
              <Directory
                files={directories}
                toggleSelection={toggleSelection}
                isSelected={isSelected}
              />
            )}
          </div>
        </div>
      </div>
      <div
        className={`flex items-center ${
          canDelete ? ""justify-between"" : ""justify-end""
        } p-4 md:p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600`}
      >
        <button
          hidden={!canDelete}
          onClick={deleteWorkspace}
          type=""button""
          className=""border border-transparent text-gray-500 bg-white hover:bg-red-100 rounded-lg whitespace-nowrap text-sm font-medium px-5 py-2.5 hover:text-red-900 focus:z-10 dark:bg-transparent dark:text-gray-300 dark:hover:text-white dark:hover:bg-red-600""
        >
          Delete Workspace
        </button>

        <div className=""flex items-center"">
          <button
            disabled={saving}
            onClick={confirmChanges}
            type=""submit""
            className=""text-slate-200 bg-black-900 px-4 py-2 rounded-lg hover:bg-gray-900 whitespace-nowrap text-sm""
          >
            {saving ? ""Saving..."" : ""Confirm Changes""}
          </button>
        </div>
      </div>
    </>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR({ VAR }) { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR VAR = VAR.VAR.VAR((VAR) => VAR.VAR) || []; VAR VAR = VAR.VAR.VAR( (VAR) => VAR?.VAR?.VAR > 0 ); VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); VAR([...VAR]); VAR([...VAR]); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR VAR = VAR () => { VAR ( !VAR.VAR( `VAR VAR VAR VAR VAR VAR VAR ${VAR.VAR} VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.\VAR\VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR.` ) ) VAR VAR; VAR VAR.VAR(VAR.VAR); VAR.VAR === VAR ? (VAR.VAR = VAR.VAR()) : VAR.VAR.VAR(); }; VAR VAR = () => { VAR VAR = { VAR: [], VAR: [], }; VAR.VAR((VAR) => { VAR VAR = !!VAR.VAR((VAR) => VAR === VAR); VAR (!VAR) { VAR.VAR.VAR(VAR); } }); VAR.VAR((VAR) => { VAR VAR = !!VAR.VAR((VAR) => VAR === VAR); VAR (!VAR) { VAR.VAR.VAR(VAR); } }); VAR VAR; }; VAR VAR = (VAR) => { VAR.VAR(); VAR VAR = VAR(); VAR.VAR.VAR > 0 ? VAR(VAR) : VAR(VAR); }; VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR(VAR); VAR VAR = VAR(); VAR VAR.VAR(VAR.VAR, VAR); VAR(VAR); VAR.VAR.VAR(); }; VAR VAR = (VAR) => { VAR VAR = !VAR.VAR(""/""); VAR VAR ? VAR.VAR((VAR) => VAR.VAR(VAR.VAR(""/"")[0])) : VAR.VAR((VAR) => VAR.VAR(VAR)); }; VAR VAR = (VAR) => { VAR VAR = !VAR.VAR(""/""); VAR VAR = VAR ? VAR : VAR.VAR(""/"")[0]; VAR (VAR(VAR)) { VAR VAR = VAR ? VAR.VAR((VAR) => !VAR.VAR(VAR)) : VAR.VAR((VAR) => !VAR.VAR(VAR)); VAR([...VAR VAR(VAR)]); } VAR { VAR VAR = []; VAR VAR = VAR.VAR.VAR((VAR) => VAR.VAR === VAR); VAR (VAR && VAR) { VAR VAR = VAR.VAR; VAR = VAR.VAR((VAR) => VAR + ""/"" + VAR.VAR); } VAR { VAR = [VAR]; } VAR VAR = [...VAR, ...VAR]; VAR([...VAR VAR(VAR)]); } }; VAR (VAR) { VAR ( <> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR VAR-VAR-[80vh] VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR-VAR-200 VAR:VAR-VAR-300 VAR-VAR""> VAR VAR VAR </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""></VAR> </> ); } VAR ( <> {VAR && ( <VAR VAR={VAR} VAR={() => VAR(VAR)} VAR={VAR().VAR} VAR={VAR} /> )} <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR VAR-VAR-[80vh] VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR""> {!VAR && ( <VAR VAR=""VAR-4 VAR-VAR VAR-VAR-2 VAR-VAR VAR-10 VAR VAR-VAR-200 VAR-VAR-800 VAR:VAR-VAR-300 VAR-VAR-800 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-6 VAR-6"" /> <VAR VAR=""VAR-VAR""> VAR VAR'VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR ""VAR VAR"" VAR. </VAR> </VAR> )} <VAR VAR=""VAR VAR-VAR VAR-2""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-400 VAR-VAR VAR""> {VAR.VAR} VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR VAR-4 VAR-2""> {!!VAR && ( <VAR VAR={VAR} VAR={VAR} VAR={VAR} /> )} </VAR> </VAR> </VAR> <VAR VAR={`VAR VAR-VAR ${ VAR ? ""VAR-VAR"" : ""VAR-VAR"" } VAR-4 VAR:VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600`} > <VAR VAR={!VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600"" > VAR VAR </VAR> <VAR VAR=""VAR VAR-VAR""> <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-200 VAR-VAR-900 VAR-4 VAR-2 VAR-VAR VAR:VAR-VAR-900 VAR-VAR VAR-VAR"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> </VAR> </VAR> </> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/Documents/index.jsx,"import React, { useState, useEffect } from ""react"";
import System from ""../../../../models/system"";
import Workspace from ""../../../../models/workspace"";
import paths from ""../../../../utils/paths"";
import { useParams } from ""react-router-dom"";
import Directory from ""./Directory"";
import ConfirmationModal from ""./ConfirmationModal"";
import { AlertTriangle } from ""react-feather"";

export default function DocumentSettings({ workspace }) {
  const { slug } = useParams();
  const [loading, setLoading] = useState(true);
  const [saving, setSaving] = useState(false);
  const [showConfirmation, setShowConfirmation] = useState(false);
  const [directories, setDirectories] = useState(null);
  const [originalDocuments, setOriginalDocuments] = useState([]);
  const [selectedFiles, setSelectFiles] = useState([]);
  const [hasFiles, setHasFiles] = useState(true);
  const [canDelete, setCanDelete] = useState(false);

  useEffect(() => {
    async function fetchKeys() {
      const localFiles = await System.localFiles();
      const originalDocs = workspace.documents.map((doc) => doc.docpath) || [];
      const hasAnyFiles = localFiles.items.some(
        (folder) => folder?.items?.length > 0
      );

      const canDelete = await System.getCanDeleteWorkspaces();
      setCanDelete(canDelete);
      setDirectories(localFiles);
      setOriginalDocuments([...originalDocs]);
      setSelectFiles([...originalDocs]);
      setHasFiles(hasAnyFiles);
      setLoading(false);
    }
    fetchKeys();
  }, []);

  const deleteWorkspace = async () => {
    if (
      !window.confirm(
        `You are about to delete your entire ${workspace.name} workspace. This will remove all vector embeddings on your vector database.\n\nThe original source files will remain untouched. This action is irreversible.`
      )
    )
      return false;
    await Workspace.delete(workspace.slug);
    workspace.slug === slug
      ? (window.location = paths.home())
      : window.location.reload();
  };

  const docChanges = () => {
    const changes = {
      adds: [],
      deletes: [],
    };

    selectedFiles.map((doc) => {
      const inOriginal = !!originalDocuments.find((oDoc) => oDoc === doc);
      if (!inOriginal) {
        changes.adds.push(doc);
      }
    });

    originalDocuments.map((doc) => {
      const selected = !!selectedFiles.find((oDoc) => oDoc === doc);
      if (!selected) {
        changes.deletes.push(doc);
      }
    });

    return changes;
  };

  const confirmChanges = (e) => {
    e.preventDefault();
    const changes = docChanges();
    changes.adds.length > 0 ? setShowConfirmation(true) : updateWorkspace(e);
  };

  const updateWorkspace = async (e) => {
    e.preventDefault();
    setSaving(true);
    setShowConfirmation(false);
    const changes = docChanges();
    await Workspace.modifyEmbeddings(workspace.slug, changes);
    setSaving(false);
    window.location.reload();
  };

  const isSelected = (filepath) => {
    const isFolder = !filepath.includes(""/"");
    return isFolder
      ? selectedFiles.some((doc) => doc.includes(filepath.split(""/"")[0]))
      : selectedFiles.some((doc) => doc.includes(filepath));
  };

  const toggleSelection = (filepath) => {
    const isFolder = !filepath.includes(""/"");
    const parent = isFolder ? filepath : filepath.split(""/"")[0];

    if (isSelected(filepath)) {
      const updatedDocs = isFolder
        ? selectedFiles.filter((doc) => !doc.includes(parent))
        : selectedFiles.filter((doc) => !doc.includes(filepath));
      setSelectFiles([...new Set(updatedDocs)]);
    } else {
      var newDocs = [];
      var parentDirs = directories.items.find((item) => item.name === parent);
      if (isFolder && parentDirs) {
        const folderItems = parentDirs.items;
        newDocs = folderItems.map((item) => parent + ""/"" + item.name);
      } else {
        newDocs = [filepath];
      }

      const combined = [...selectedFiles, ...newDocs];
      setSelectFiles([...new Set(combined)]);
    }
  };

  if (loading) {
    return (
      <>
        <div className=""p-6 flex h-full w-full max-h-[80vh] overflow-y-scroll"">
          <div className=""flex flex-col gap-y-1 w-full"">
            <p className=""text-slate-200 dark:text-stone-300 text-center"">
              loading workspace files
            </p>
          </div>
        </div>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600""></div>
      </>
    );
  }

  return (
    <>
      {showConfirmation && (
        <ConfirmationModal
          directories={directories}
          hideConfirm={() => setShowConfirmation(false)}
          additions={docChanges().adds}
          updateWorkspace={updateWorkspace}
        />
      )}
      <div className=""p-6 flex h-full w-full max-h-[80vh] overflow-y-scroll"">
        <div className=""flex flex-col gap-y-1 w-full"">
          {!hasFiles && (
            <div className=""mb-4 w-full gap-x-2 rounded-lg h-10 border bg-orange-200 border-orange-800 dark:bg-orange-300 text-orange-800 flex  items-center justify-center"">
              <AlertTriangle className=""h-6 w-6"" />
              <p className=""text-sm"">
                You don't have any files uploaded. Upload a file via the ""Upload
                Docs"" tab.
              </p>
            </div>
          )}

          <div className=""flex flex-col mb-2"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Select folders to add or remove from workspace.
            </p>
            <p className=""text-gray-800 dark:text-stone-400 text-xs italic"">
              {selectedFiles.length} documents in workspace selected.
            </p>
          </div>
          <div className=""w-full h-auto border border-slate-200 dark:border-stone-600 rounded-lg px-4 py-2"">
            {!!directories && (
              <Directory
                files={directories}
                toggleSelection={toggleSelection}
                isSelected={isSelected}
              />
            )}
          </div>
        </div>
      </div>
      <div
        className={`flex items-center ${
          canDelete ? ""justify-between"" : ""justify-end""
        } p-4 md:p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600`}
      >
        <button
          hidden={!canDelete}
          onClick={deleteWorkspace}
          type=""button""
          className=""border border-transparent text-gray-500 bg-white hover:bg-red-100 rounded-lg whitespace-nowrap text-sm font-medium px-5 py-2.5 hover:text-red-900 focus:z-10 dark:bg-transparent dark:text-gray-300 dark:hover:text-white dark:hover:bg-red-600""
        >
          Delete Workspace
        </button>

        <div className=""flex items-center"">
          <button
            disabled={saving}
            onClick={confirmChanges}
            type=""submit""
            className=""text-slate-200 bg-black-900 px-4 py-2 rounded-lg hover:bg-gray-900 whitespace-nowrap text-sm""
          >
            {saving ? ""Saving..."" : ""Confirm Changes""}
          </button>
        </div>
      </div>
    </>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR({ VAR }) { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR VAR = VAR.VAR.VAR((VAR) => VAR.VAR) || []; VAR VAR = VAR.VAR.VAR( (VAR) => VAR?.VAR?.VAR > 0 ); VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); VAR([...VAR]); VAR([...VAR]); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR VAR = VAR () => { VAR ( !VAR.VAR( `VAR VAR VAR VAR VAR VAR VAR ${VAR.VAR} VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.\VAR\VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR.` ) ) VAR VAR; VAR VAR.VAR(VAR.VAR); VAR.VAR === VAR ? (VAR.VAR = VAR.VAR()) : VAR.VAR.VAR(); }; VAR VAR = () => { VAR VAR = { VAR: [], VAR: [], }; VAR.VAR((VAR) => { VAR VAR = !!VAR.VAR((VAR) => VAR === VAR); VAR (!VAR) { VAR.VAR.VAR(VAR); } }); VAR.VAR((VAR) => { VAR VAR = !!VAR.VAR((VAR) => VAR === VAR); VAR (!VAR) { VAR.VAR.VAR(VAR); } }); VAR VAR; }; VAR VAR = (VAR) => { VAR.VAR(); VAR VAR = VAR(); VAR.VAR.VAR > 0 ? VAR(VAR) : VAR(VAR); }; VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR(VAR); VAR VAR = VAR(); VAR VAR.VAR(VAR.VAR, VAR); VAR(VAR); VAR.VAR.VAR(); }; VAR VAR = (VAR) => { VAR VAR = !VAR.VAR(""/""); VAR VAR ? VAR.VAR((VAR) => VAR.VAR(VAR.VAR(""/"")[0])) : VAR.VAR((VAR) => VAR.VAR(VAR)); }; VAR VAR = (VAR) => { VAR VAR = !VAR.VAR(""/""); VAR VAR = VAR ? VAR : VAR.VAR(""/"")[0]; VAR (VAR(VAR)) { VAR VAR = VAR ? VAR.VAR((VAR) => !VAR.VAR(VAR)) : VAR.VAR((VAR) => !VAR.VAR(VAR)); VAR([...VAR VAR(VAR)]); } VAR { VAR VAR = []; VAR VAR = VAR.VAR.VAR((VAR) => VAR.VAR === VAR); VAR (VAR && VAR) { VAR VAR = VAR.VAR; VAR = VAR.VAR((VAR) => VAR + ""/"" + VAR.VAR); } VAR { VAR = [VAR]; } VAR VAR = [...VAR, ...VAR]; VAR([...VAR VAR(VAR)]); } }; VAR (VAR) { VAR ( <> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR VAR-VAR-[80vh] VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR-VAR-200 VAR:VAR-VAR-300 VAR-VAR""> VAR VAR VAR </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""></VAR> </> ); } VAR ( <> {VAR && ( <VAR VAR={VAR} VAR={() => VAR(VAR)} VAR={VAR().VAR} VAR={VAR} /> )} <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR VAR-VAR-[80vh] VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR""> {!VAR && ( <VAR VAR=""VAR-4 VAR-VAR VAR-VAR-2 VAR-VAR VAR-10 VAR VAR-VAR-200 VAR-VAR-800 VAR:VAR-VAR-300 VAR-VAR-800 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-6 VAR-6"" /> <VAR VAR=""VAR-VAR""> VAR VAR'VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR ""VAR VAR"" VAR. </VAR> </VAR> )} <VAR VAR=""VAR VAR-VAR VAR-2""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-400 VAR-VAR VAR""> {VAR.VAR} VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR VAR-4 VAR-2""> {!!VAR && ( <VAR VAR={VAR} VAR={VAR} VAR={VAR} /> )} </VAR> </VAR> </VAR> <VAR VAR={`VAR VAR-VAR ${ VAR ? ""VAR-VAR"" : ""VAR-VAR"" } VAR-4 VAR:VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600`} > <VAR VAR={!VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600"" > VAR VAR </VAR> <VAR VAR=""VAR VAR-VAR""> <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-200 VAR-VAR-900 VAR-4 VAR-2 VAR-VAR VAR:VAR-VAR-900 VAR-VAR VAR-VAR"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> </VAR> </VAR> </> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/Settings/index.jsx,"import React, { useState, useRef, useEffect } from ""react"";
import Workspace from ""../../../../models/workspace"";
import paths from ""../../../../utils/paths"";
import { chatPrompt } from ""../../../../utils/chat"";

export default function WorkspaceSettings({ workspace }) {
  const formEl = useRef(null);
  const [saving, setSaving] = useState(false);
  const [hasChanges, setHasChanges] = useState(false);
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(null);

  useEffect(() => {
    function setTimer() {
      if (success !== null) {
        setTimeout(() => {
          setSuccess(null);
        }, 3_000);
      }

      if (error !== null) {
        setTimeout(() => {
          setError(null);
        }, 3_000);
      }
    }
    setTimer();
  }, [success, error]);

  const handleUpdate = async (e) => {
    setError(null);
    setSuccess(null);
    setSaving(true);
    e.preventDefault();
    const data = {};
    const form = new FormData(formEl.current);
    for (var [key, value] of form.entries()) data[key] = value;
    const { workspace: updatedWorkspace, message } = await Workspace.update(
      workspace.slug,
      data
    );
    if (!!updatedWorkspace) {
      setSuccess(""Workspace updated!"");
    } else {
      setError(message);
    }
    setSaving(false);
  };

  const deleteWorkspace = async () => {
    if (
      !window.confirm(
        `You are about to delete your entire ${workspace.name} workspace. This will remove all vector embeddings on your vector database.\n\nThe original source files will remain untouched. This action is irreversible.`
      )
    )
      return false;
    await Workspace.delete(workspace.slug);
    workspace.slug === slug
      ? (window.location = paths.home())
      : window.location.reload();
  };

  return (
    <form ref={formEl} onSubmit={handleUpdate}>
      <div className=""p-6 flex h-full w-full max-h-[80vh] overflow-y-scroll"">
        <div className=""flex flex-col gap-y-1 w-full"">
          <div className=""flex flex-col mb-2"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Edit your workspace's settings
            </p>
          </div>

          <div className=""w-full flex flex-col gap-y-4"">
            <div>
              <input
                type=""text""
                disabled={true}
                defaultValue={workspace?.slug}
                className=""bg-gray-50 border disabled:bg-gray-400 disabled:text-gray-700 disabled:border-gray-400 disabled:dark:bg-stone-800 disabled:dark:border-stone-900 disabled:dark:text-stone-600 disabled:cursor-not-allowed border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                required={true}
                autoComplete=""off""
              />
            </div>

            <div>
              <div className=""flex flex-col gap-y-1 mb-4"">
                <label
                  htmlFor=""name""
                  className=""block text-sm font-medium text-gray-900 dark:text-white""
                >
                  Workspace Name
                </label>
                <p className=""text-xs text-gray-600 dark:text-stone-400"">
                  This will only change the display name of your workspace.
                </p>
              </div>
              <input
                name=""name""
                type=""text""
                minLength={2}
                maxLength={80}
                defaultValue={workspace?.name}
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                placeholder=""My Workspace""
                required={true}
                autoComplete=""off""
                onChange={() => setHasChanges(true)}
              />
            </div>

            <div>
              <div className=""flex flex-col gap-y-1 mb-4"">
                <label
                  htmlFor=""name""
                  className=""block text-sm font-medium text-gray-900 dark:text-white""
                >
                  LLM Temperature
                </label>
                <p className=""text-xs text-gray-600 dark:text-stone-400"">
                  This setting controls how ""random"" or dynamic your chat
                  responses will be.
                  <br />
                  The higher the number (2.0 maximum) the more random and
                  incoherent.
                  <br />
                  Recommended: 0.7
                </p>
              </div>
              <input
                name=""openAiTemp""
                type=""number""
                min={0.0}
                max={2.0}
                step={0.1}
                onWheel={(e) => e.target.blur()}
                defaultValue={workspace?.openAiTemp ?? 0.7}
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                placeholder=""0.7""
                required={true}
                autoComplete=""off""
                onChange={() => setHasChanges(true)}
              />
            </div>

            <div>
              <div className=""flex flex-col gap-y-1 mb-4"">
                <label
                  htmlFor=""name""
                  className=""block text-sm font-medium text-gray-900 dark:text-white""
                >
                  Prompt
                </label>
                <p className=""text-xs text-gray-600 dark:text-stone-400"">
                  The prompt that will be used on this workspace. Define the
                  context and instructions for the AI to generate a response.
                  You should to provide a carefully crafted prompt so the AI can
                  generate a relevant and accurate response.
                </p>
              </div>
              <textarea
                name=""openAiPrompt""
                maxLength={500}
                rows={5}
                defaultValue={chatPrompt(workspace)}
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                placeholder=""Given the following conversation, relevant context, and a follow up question, reply with an answer to the current question the user is asking. Return only your response to the question given the above information following the users instructions as needed.""
                required={true}
                wrap=""soft""
                autoComplete=""off""
                onChange={() => setHasChanges(true)}
              />
            </div>

            <div>
              <div className=""flex flex-col gap-y-1 mb-4"">
                <label
                  htmlFor=""name""
                  className=""block text-sm font-medium text-gray-900 dark:text-white""
                >
                  Chat History
                </label>
                <p className=""text-xs text-gray-600 dark:text-stone-400"">
                  The number of previous chats that will be included in the
                  response's short-term memory.
                  <br />
                  Recommend 20. Anything more than 45 is likely to lead to
                  continuous chat failures depending on message size.
                </p>
              </div>
              <input
                name=""openAiHistory""
                type=""number""
                min={1}
                max={45}
                step={1}
                onWheel={(e) => e.target.blur()}
                defaultValue={workspace?.openAiHistory ?? 20}
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                placeholder=""20""
                required={true}
                autoComplete=""off""
                onChange={() => setHasChanges(true)}
              />
            </div>
          </div>

          {error && (
            <p className=""text-red-600 dark:text-red-400 text-sm"">
              Error: {error}
            </p>
          )}
          {success && (
            <p className=""text-green-600 dark:text-green-400 text-sm"">
              Success: {success}
            </p>
          )}
        </div>
      </div>
      <div className=""flex items-center justify-between p-2 md:p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
        <button
          onClick={deleteWorkspace}
          type=""button""
          className=""border border-transparent text-gray-500 bg-white hover:bg-red-100 rounded-lg whitespace-nowrap text-sm font-medium px-5 py-2.5 hover:text-red-900 focus:z-10 dark:bg-transparent dark:text-gray-300 dark:hover:text-white dark:hover:bg-red-600""
        >
          Delete Workspace
        </button>
        {hasChanges && (
          <button
            type=""submit""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 whitespace-nowrap text-sm font-medium px-2 md:px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
          >
            {saving ? ""Updating..."" : ""Update workspace""}
          </button>
        )}
      </div>
    </form>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR } VAR ""../../../../VAR/VAR""; VAR VAR VAR VAR({ VAR }) { VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR() { VAR (VAR !== VAR) { VAR(() => { VAR(VAR); }, 3_000); } VAR (VAR !== VAR) { VAR(() => { VAR(VAR); }, 3_000); } } VAR(); }, [VAR, VAR]); VAR VAR = VAR (VAR) => { VAR(VAR); VAR(VAR); VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR: VAR, VAR } = VAR VAR.VAR( VAR.VAR, VAR ); VAR (!!VAR) { VAR(""VAR VAR!""); } VAR { VAR(VAR); } VAR(VAR); }; VAR VAR = VAR () => { VAR ( !VAR.VAR( `VAR VAR VAR VAR VAR VAR VAR ${VAR.VAR} VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.\VAR\VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR.` ) ) VAR VAR; VAR VAR.VAR(VAR.VAR); VAR.VAR === VAR ? (VAR.VAR = VAR.VAR()) : VAR.VAR.VAR(); }; VAR ( <VAR VAR={VAR} VAR={VAR}> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR VAR-VAR-[80vh] VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-2""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR'VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR={VAR} VAR={VAR?.VAR} VAR=""VAR-VAR-50 VAR VAR:VAR-VAR-400 VAR:VAR-VAR-700 VAR:VAR-VAR-400 VAR:VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-600 VAR:VAR-VAR-VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-4""> <VAR VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={2} VAR={80} VAR={VAR?.VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={VAR} VAR=""VAR"" VAR={() => VAR(VAR)} /> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-4""> <VAR VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-400""> VAR VAR VAR VAR ""VAR"" VAR VAR VAR VAR VAR VAR VAR. <VAR /> VAR VAR VAR VAR (2.0 VAR) VAR VAR VAR VAR VAR. <VAR /> VAR: 0.7 </VAR> </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={0.0} VAR={2.0} VAR={0.1} VAR={(VAR) => VAR.VAR.VAR()} VAR={VAR?.VAR ?? 0.7} VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""0.7"" VAR={VAR} VAR=""VAR"" VAR={() => VAR(VAR)} /> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-4""> <VAR VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR"" VAR={500} VAR={5} VAR={VAR(VAR)} VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR VAR VAR, VAR VAR, VAR VAR VAR VAR VAR, VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR} VAR=""VAR"" VAR=""VAR"" VAR={() => VAR(VAR)} /> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-4""> <VAR VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR'VAR VAR-VAR VAR. <VAR /> VAR 20. VAR VAR VAR 45 VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={1} VAR={45} VAR={1} VAR={(VAR) => VAR.VAR.VAR()} VAR={VAR?.VAR ?? 20} VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""20"" VAR={VAR} VAR=""VAR"" VAR={() => VAR(VAR)} /> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2 VAR:VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600"" > VAR VAR </VAR> {VAR && ( <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR VAR-2 VAR:VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> )} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/Settings/index.jsx,"import React, { useState, useRef, useEffect } from ""react"";
import Workspace from ""../../../../models/workspace"";
import paths from ""../../../../utils/paths"";
import { chatPrompt } from ""../../../../utils/chat"";

export default function WorkspaceSettings({ workspace }) {
  const formEl = useRef(null);
  const [saving, setSaving] = useState(false);
  const [hasChanges, setHasChanges] = useState(false);
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(null);

  useEffect(() => {
    function setTimer() {
      if (success !== null) {
        setTimeout(() => {
          setSuccess(null);
        }, 3_000);
      }

      if (error !== null) {
        setTimeout(() => {
          setError(null);
        }, 3_000);
      }
    }
    setTimer();
  }, [success, error]);

  const handleUpdate = async (e) => {
    setError(null);
    setSuccess(null);
    setSaving(true);
    e.preventDefault();
    const data = {};
    const form = new FormData(formEl.current);
    for (var [key, value] of form.entries()) data[key] = value;
    const { workspace: updatedWorkspace, message } = await Workspace.update(
      workspace.slug,
      data
    );
    if (!!updatedWorkspace) {
      setSuccess(""Workspace updated!"");
    } else {
      setError(message);
    }
    setSaving(false);
  };

  const deleteWorkspace = async () => {
    if (
      !window.confirm(
        `You are about to delete your entire ${workspace.name} workspace. This will remove all vector embeddings on your vector database.\n\nThe original source files will remain untouched. This action is irreversible.`
      )
    )
      return false;
    await Workspace.delete(workspace.slug);
    workspace.slug === slug
      ? (window.location = paths.home())
      : window.location.reload();
  };

  return (
    <form ref={formEl} onSubmit={handleUpdate}>
      <div className=""p-6 flex h-full w-full max-h-[80vh] overflow-y-scroll"">
        <div className=""flex flex-col gap-y-1 w-full"">
          <div className=""flex flex-col mb-2"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Edit your workspace's settings
            </p>
          </div>

          <div className=""w-full flex flex-col gap-y-4"">
            <div>
              <input
                type=""text""
                disabled={true}
                defaultValue={workspace?.slug}
                className=""bg-gray-50 border disabled:bg-gray-400 disabled:text-gray-700 disabled:border-gray-400 disabled:dark:bg-stone-800 disabled:dark:border-stone-900 disabled:dark:text-stone-600 disabled:cursor-not-allowed border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                required={true}
                autoComplete=""off""
              />
            </div>

            <div>
              <div className=""flex flex-col gap-y-1 mb-4"">
                <label
                  htmlFor=""name""
                  className=""block text-sm font-medium text-gray-900 dark:text-white""
                >
                  Workspace Name
                </label>
                <p className=""text-xs text-gray-600 dark:text-stone-400"">
                  This will only change the display name of your workspace.
                </p>
              </div>
              <input
                name=""name""
                type=""text""
                minLength={2}
                maxLength={80}
                defaultValue={workspace?.name}
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                placeholder=""My Workspace""
                required={true}
                autoComplete=""off""
                onChange={() => setHasChanges(true)}
              />
            </div>

            <div>
              <div className=""flex flex-col gap-y-1 mb-4"">
                <label
                  htmlFor=""name""
                  className=""block text-sm font-medium text-gray-900 dark:text-white""
                >
                  LLM Temperature
                </label>
                <p className=""text-xs text-gray-600 dark:text-stone-400"">
                  This setting controls how ""random"" or dynamic your chat
                  responses will be.
                  <br />
                  The higher the number (2.0 maximum) the more random and
                  incoherent.
                  <br />
                  Recommended: 0.7
                </p>
              </div>
              <input
                name=""openAiTemp""
                type=""number""
                min={0.0}
                max={2.0}
                step={0.1}
                onWheel={(e) => e.target.blur()}
                defaultValue={workspace?.openAiTemp ?? 0.7}
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                placeholder=""0.7""
                required={true}
                autoComplete=""off""
                onChange={() => setHasChanges(true)}
              />
            </div>

            <div>
              <div className=""flex flex-col gap-y-1 mb-4"">
                <label
                  htmlFor=""name""
                  className=""block text-sm font-medium text-gray-900 dark:text-white""
                >
                  Prompt
                </label>
                <p className=""text-xs text-gray-600 dark:text-stone-400"">
                  The prompt that will be used on this workspace. Define the
                  context and instructions for the AI to generate a response.
                  You should to provide a carefully crafted prompt so the AI can
                  generate a relevant and accurate response.
                </p>
              </div>
              <textarea
                name=""openAiPrompt""
                maxLength={500}
                rows={5}
                defaultValue={chatPrompt(workspace)}
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                placeholder=""Given the following conversation, relevant context, and a follow up question, reply with an answer to the current question the user is asking. Return only your response to the question given the above information following the users instructions as needed.""
                required={true}
                wrap=""soft""
                autoComplete=""off""
                onChange={() => setHasChanges(true)}
              />
            </div>

            <div>
              <div className=""flex flex-col gap-y-1 mb-4"">
                <label
                  htmlFor=""name""
                  className=""block text-sm font-medium text-gray-900 dark:text-white""
                >
                  Chat History
                </label>
                <p className=""text-xs text-gray-600 dark:text-stone-400"">
                  The number of previous chats that will be included in the
                  response's short-term memory.
                  <br />
                  Recommend 20. Anything more than 45 is likely to lead to
                  continuous chat failures depending on message size.
                </p>
              </div>
              <input
                name=""openAiHistory""
                type=""number""
                min={1}
                max={45}
                step={1}
                onWheel={(e) => e.target.blur()}
                defaultValue={workspace?.openAiHistory ?? 20}
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                placeholder=""20""
                required={true}
                autoComplete=""off""
                onChange={() => setHasChanges(true)}
              />
            </div>
          </div>

          {error && (
            <p className=""text-red-600 dark:text-red-400 text-sm"">
              Error: {error}
            </p>
          )}
          {success && (
            <p className=""text-green-600 dark:text-green-400 text-sm"">
              Success: {success}
            </p>
          )}
        </div>
      </div>
      <div className=""flex items-center justify-between p-2 md:p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
        <button
          onClick={deleteWorkspace}
          type=""button""
          className=""border border-transparent text-gray-500 bg-white hover:bg-red-100 rounded-lg whitespace-nowrap text-sm font-medium px-5 py-2.5 hover:text-red-900 focus:z-10 dark:bg-transparent dark:text-gray-300 dark:hover:text-white dark:hover:bg-red-600""
        >
          Delete Workspace
        </button>
        {hasChanges && (
          <button
            type=""submit""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 whitespace-nowrap text-sm font-medium px-2 md:px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
          >
            {saving ? ""Updating..."" : ""Update workspace""}
          </button>
        )}
      </div>
    </form>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR } VAR ""../../../../VAR/VAR""; VAR VAR VAR VAR({ VAR }) { VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR() { VAR (VAR !== VAR) { VAR(() => { VAR(VAR); }, 3_000); } VAR (VAR !== VAR) { VAR(() => { VAR(VAR); }, 3_000); } } VAR(); }, [VAR, VAR]); VAR VAR = VAR (VAR) => { VAR(VAR); VAR(VAR); VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR: VAR, VAR } = VAR VAR.VAR( VAR.VAR, VAR ); VAR (!!VAR) { VAR(""VAR VAR!""); } VAR { VAR(VAR); } VAR(VAR); }; VAR VAR = VAR () => { VAR ( !VAR.VAR( `VAR VAR VAR VAR VAR VAR VAR ${VAR.VAR} VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.\VAR\VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR.` ) ) VAR VAR; VAR VAR.VAR(VAR.VAR); VAR.VAR === VAR ? (VAR.VAR = VAR.VAR()) : VAR.VAR.VAR(); }; VAR ( <VAR VAR={VAR} VAR={VAR}> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR VAR-VAR-[80vh] VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-2""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR'VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR={VAR} VAR={VAR?.VAR} VAR=""VAR-VAR-50 VAR VAR:VAR-VAR-400 VAR:VAR-VAR-700 VAR:VAR-VAR-400 VAR:VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-600 VAR:VAR-VAR-VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-4""> <VAR VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={2} VAR={80} VAR={VAR?.VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={VAR} VAR=""VAR"" VAR={() => VAR(VAR)} /> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-4""> <VAR VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-400""> VAR VAR VAR VAR ""VAR"" VAR VAR VAR VAR VAR VAR VAR. <VAR /> VAR VAR VAR VAR (2.0 VAR) VAR VAR VAR VAR VAR. <VAR /> VAR: 0.7 </VAR> </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={0.0} VAR={2.0} VAR={0.1} VAR={(VAR) => VAR.VAR.VAR()} VAR={VAR?.VAR ?? 0.7} VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""0.7"" VAR={VAR} VAR=""VAR"" VAR={() => VAR(VAR)} /> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-4""> <VAR VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR"" VAR={500} VAR={5} VAR={VAR(VAR)} VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR VAR VAR, VAR VAR, VAR VAR VAR VAR VAR, VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR} VAR=""VAR"" VAR=""VAR"" VAR={() => VAR(VAR)} /> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-4""> <VAR VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR'VAR VAR-VAR VAR. <VAR /> VAR 20. VAR VAR VAR 45 VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={1} VAR={45} VAR={1} VAR={(VAR) => VAR.VAR.VAR()} VAR={VAR?.VAR ?? 20} VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""20"" VAR={VAR} VAR=""VAR"" VAR={() => VAR(VAR)} /> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2 VAR:VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600"" > VAR VAR </VAR> {VAR && ( <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR VAR-2 VAR:VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> )} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/Upload/FileUploadProgress/index.jsx,"import React, { useState, useEffect, memo } from ""react"";
import Workspace from ""../../../../../models/workspace"";
import truncate from ""truncate"";
import { humanFileSize, milliToHms } from ""../../../../../utils/numbers"";
import { CheckCircle, XCircle } from ""react-feather"";
import { Grid } from ""react-loading-icons"";

function FileUploadProgressComponent({
  slug,
  file,
  rejected = false,
  reason = null,
  onUploadSuccess,
  onUploadError,
}) {
  const [timerMs, setTimerMs] = useState(10);
  const [status, setStatus] = useState(file?.rejected ? ""uploading"" : ""failed"");

  useEffect(() => {
    async function uploadFile() {
      const start = Number(new Date());
      const formData = new FormData();
      formData.append(""file"", file, file.name);
      const timer = setInterval(() => {
        setTimerMs(Number(new Date()) - start);
      }, 100);

      // Chunk streaming not working in production so we just sit and wait
      const { response, data } = await Workspace.uploadFile(slug, formData);
      if (!response.ok) {
        setStatus(""failed"");
        clearInterval(timer);
        onUploadError(data.error);
      } else {
        setStatus(""complete"");
        clearInterval(timer);
        onUploadSuccess();
      }
    }
    !!file && !rejected && uploadFile();
  }, []);

  if (rejected) {
    return (
      <div className=""w-fit px-2 py-2 flex items-center gap-x-4 rounded-lg bg-blue-100 border-blue-600 dark:bg-stone-800 bg-opacity-50 border dark:border-stone-600"">
        <div className=""w-6 h-6"">
          <XCircle className=""w-6 h-6 stroke-white bg-red-500 rounded-full p-1 w-full h-full"" />
        </div>
        <div className=""flex flex-col"">
          <p className=""text-black dark:text-stone-200 text-sm font-mono overflow-x-scroll"">
            {truncate(file.name, 30)}
          </p>
          <p className=""text-red-700 dark:text-red-400 text-xs font-mono"">
            {reason}
          </p>
        </div>
      </div>
    );
  }

  return (
    <div className=""w-fit px-2 py-2 flex items-center gap-x-4 rounded-lg bg-blue-100 border-blue-600 dark:bg-stone-800 bg-opacity-50 border dark:border-stone-600"">
      <div className=""w-6 h-6"">
        {status !== ""complete"" ? (
          <Grid className=""w-6 h-6 grid-loader"" />
        ) : (
          <CheckCircle className=""w-6 h-6 stroke-white bg-green-500 rounded-full p-1 w-full h-full"" />
        )}
      </div>
      <div className=""flex flex-col"">
        <p className=""text-black dark:text-stone-200 text-sm font-mono overflow-x-scroll"">
          {truncate(file.name, 30)}
        </p>
        <p className=""text-gray-700 dark:text-stone-400 text-xs font-mono"">
          {humanFileSize(file.size)} | {milliToHms(timerMs)}
        </p>
      </div>
    </div>
  );
}

export default memo(FileUploadProgressComponent);",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../../VAR/VAR""; VAR VAR VAR ""VAR""; VAR { VAR, VAR } VAR ""../../../../../VAR/VAR""; VAR { VAR, VAR } VAR ""VAR-VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR({ VAR, VAR, VAR = VAR, VAR = VAR, VAR, VAR, }) { VAR [VAR, VAR] = VAR(10); VAR [VAR, VAR] = VAR(VAR?.VAR ? ""VAR"" : ""VAR""); VAR(() => { VAR VAR VAR() { VAR VAR = VAR(VAR VAR()); VAR VAR = VAR VAR(); VAR.VAR(""VAR"", VAR, VAR.VAR); VAR VAR = VAR(() => { VAR(VAR(VAR VAR()) - VAR); }, 100);  VAR { VAR, VAR } = VAR VAR.VAR(VAR, VAR); VAR (!VAR.VAR) { VAR(""VAR""); VAR(VAR); VAR(VAR.VAR); } VAR { VAR(""VAR""); VAR(VAR); VAR(); } } !!VAR && !VAR && VAR(); }, []); VAR (VAR) { VAR ( <VAR VAR=""VAR-VAR VAR-2 VAR-2 VAR VAR-VAR VAR-VAR-4 VAR-VAR VAR-VAR-100 VAR-VAR-600 VAR:VAR-VAR-800 VAR-VAR-50 VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-6 VAR-6""> <VAR VAR=""VAR-6 VAR-6 VAR-VAR VAR-VAR-500 VAR-VAR VAR-1 VAR-VAR VAR-VAR"" /> </VAR> <VAR VAR=""VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR-VAR""> {VAR(VAR.VAR, 30)} </VAR> <VAR VAR=""VAR-VAR-700 VAR:VAR-VAR-400 VAR-VAR VAR-VAR""> {VAR} </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR=""VAR-VAR VAR-2 VAR-2 VAR VAR-VAR VAR-VAR-4 VAR-VAR VAR-VAR-100 VAR-VAR-600 VAR:VAR-VAR-800 VAR-VAR-50 VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-6 VAR-6""> {VAR !== ""VAR"" ? ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR"" /> ) : ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR VAR-VAR-500 VAR-VAR VAR-1 VAR-VAR VAR-VAR"" /> )} </VAR> <VAR VAR=""VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR-VAR""> {VAR(VAR.VAR, 30)} </VAR> <VAR VAR=""VAR-VAR-700 VAR:VAR-VAR-400 VAR-VAR VAR-VAR""> {VAR(VAR.VAR)} | {VAR(VAR)} </VAR> </VAR> </VAR> ); } VAR VAR VAR(VAR); ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/Upload/FileUploadProgress/index.jsx,"import React, { useState, useEffect, memo } from ""react"";
import Workspace from ""../../../../../models/workspace"";
import truncate from ""truncate"";
import { humanFileSize, milliToHms } from ""../../../../../utils/numbers"";
import { CheckCircle, XCircle } from ""react-feather"";
import { Grid } from ""react-loading-icons"";

function FileUploadProgressComponent({
  slug,
  file,
  rejected = false,
  reason = null,
  onUploadSuccess,
  onUploadError,
}) {
  const [timerMs, setTimerMs] = useState(10);
  const [status, setStatus] = useState(file?.rejected ? ""uploading"" : ""failed"");

  useEffect(() => {
    async function uploadFile() {
      const start = Number(new Date());
      const formData = new FormData();
      formData.append(""file"", file, file.name);
      const timer = setInterval(() => {
        setTimerMs(Number(new Date()) - start);
      }, 100);

      // Chunk streaming not working in production so we just sit and wait
      const { response, data } = await Workspace.uploadFile(slug, formData);
      if (!response.ok) {
        setStatus(""failed"");
        clearInterval(timer);
        onUploadError(data.error);
      } else {
        setStatus(""complete"");
        clearInterval(timer);
        onUploadSuccess();
      }
    }
    !!file && !rejected && uploadFile();
  }, []);

  if (rejected) {
    return (
      <div className=""w-fit px-2 py-2 flex items-center gap-x-4 rounded-lg bg-blue-100 border-blue-600 dark:bg-stone-800 bg-opacity-50 border dark:border-stone-600"">
        <div className=""w-6 h-6"">
          <XCircle className=""w-6 h-6 stroke-white bg-red-500 rounded-full p-1 w-full h-full"" />
        </div>
        <div className=""flex flex-col"">
          <p className=""text-black dark:text-stone-200 text-sm font-mono overflow-x-scroll"">
            {truncate(file.name, 30)}
          </p>
          <p className=""text-red-700 dark:text-red-400 text-xs font-mono"">
            {reason}
          </p>
        </div>
      </div>
    );
  }

  return (
    <div className=""w-fit px-2 py-2 flex items-center gap-x-4 rounded-lg bg-blue-100 border-blue-600 dark:bg-stone-800 bg-opacity-50 border dark:border-stone-600"">
      <div className=""w-6 h-6"">
        {status !== ""complete"" ? (
          <Grid className=""w-6 h-6 grid-loader"" />
        ) : (
          <CheckCircle className=""w-6 h-6 stroke-white bg-green-500 rounded-full p-1 w-full h-full"" />
        )}
      </div>
      <div className=""flex flex-col"">
        <p className=""text-black dark:text-stone-200 text-sm font-mono overflow-x-scroll"">
          {truncate(file.name, 30)}
        </p>
        <p className=""text-gray-700 dark:text-stone-400 text-xs font-mono"">
          {humanFileSize(file.size)} | {milliToHms(timerMs)}
        </p>
      </div>
    </div>
  );
}

export default memo(FileUploadProgressComponent);",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../../VAR/VAR""; VAR VAR VAR ""VAR""; VAR { VAR, VAR } VAR ""../../../../../VAR/VAR""; VAR { VAR, VAR } VAR ""VAR-VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR({ VAR, VAR, VAR = VAR, VAR = VAR, VAR, VAR, }) { VAR [VAR, VAR] = VAR(10); VAR [VAR, VAR] = VAR(VAR?.VAR ? ""VAR"" : ""VAR""); VAR(() => { VAR VAR VAR() { VAR VAR = VAR(VAR VAR()); VAR VAR = VAR VAR(); VAR.VAR(""VAR"", VAR, VAR.VAR); VAR VAR = VAR(() => { VAR(VAR(VAR VAR()) - VAR); }, 100);  VAR { VAR, VAR } = VAR VAR.VAR(VAR, VAR); VAR (!VAR.VAR) { VAR(""VAR""); VAR(VAR); VAR(VAR.VAR); } VAR { VAR(""VAR""); VAR(VAR); VAR(); } } !!VAR && !VAR && VAR(); }, []); VAR (VAR) { VAR ( <VAR VAR=""VAR-VAR VAR-2 VAR-2 VAR VAR-VAR VAR-VAR-4 VAR-VAR VAR-VAR-100 VAR-VAR-600 VAR:VAR-VAR-800 VAR-VAR-50 VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-6 VAR-6""> <VAR VAR=""VAR-6 VAR-6 VAR-VAR VAR-VAR-500 VAR-VAR VAR-1 VAR-VAR VAR-VAR"" /> </VAR> <VAR VAR=""VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR-VAR""> {VAR(VAR.VAR, 30)} </VAR> <VAR VAR=""VAR-VAR-700 VAR:VAR-VAR-400 VAR-VAR VAR-VAR""> {VAR} </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR=""VAR-VAR VAR-2 VAR-2 VAR VAR-VAR VAR-VAR-4 VAR-VAR VAR-VAR-100 VAR-VAR-600 VAR:VAR-VAR-800 VAR-VAR-50 VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-6 VAR-6""> {VAR !== ""VAR"" ? ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR"" /> ) : ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR VAR-VAR-500 VAR-VAR VAR-1 VAR-VAR VAR-VAR"" /> )} </VAR> <VAR VAR=""VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR-VAR""> {VAR(VAR.VAR, 30)} </VAR> <VAR VAR=""VAR-VAR-700 VAR:VAR-VAR-400 VAR-VAR VAR-VAR""> {VAR(VAR.VAR)} | {VAR(VAR)} </VAR> </VAR> </VAR> ); } VAR VAR VAR(VAR); ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/Upload/index.jsx,"import React, { useState, useCallback, useEffect } from ""react"";
import Workspace from ""../../../../models/workspace"";
import paths from ""../../../../utils/paths"";
import FileUploadProgress from ""./FileUploadProgress"";
import { useDropzone } from ""react-dropzone"";
import { v4 } from ""uuid"";
import System from ""../../../../models/system"";
import { Frown } from ""react-feather"";
import showToast from ""../../../../utils/toast"";

export default function UploadToWorkspace({ workspace, fileTypes }) {
  const [ready, setReady] = useState(null);
  const [files, setFiles] = useState([]);

  const handleUploadSuccess = () => {
    showToast(""File uploaded successfully"", ""success"");
  };

  const handleUploadError = (message) => {
    showToast(`Error uploading file: ${message}`, ""error"");
  };

  const onDrop = useCallback(async (acceptedFiles, rejections) => {
    const newAccepted = acceptedFiles.map((file) => {
      return {
        uid: v4(),
        file,
      };
    });
    const newRejected = rejections.map((file) => {
      return {
        uid: v4(),
        file: file.file,
        rejected: true,
        reason: file.errors[0].code,
      };
    });

    setFiles([...files, ...newAccepted, ...newRejected]);
  }, []);

  useEffect(() => {
    async function checkProcessorOnline() {
      const online = await System.checkDocumentProcessorOnline();
      setReady(online);
    }
    checkProcessorOnline();
  }, []);

  const { getRootProps, getInputProps } = useDropzone({
    onDrop,
    accept: {
      ...fileTypes,
    },
  });

  const deleteWorkspace = async () => {
    if (
      !window.confirm(
        `You are about to delete your entire ${workspace.name} workspace. This will remove all vector embeddings on your vector database.\n\nThe original source files will remain untouched. This action is irreversible.`
      )
    )
      return false;
    await Workspace.delete(workspace.slug);
    workspace.slug === slug
      ? (window.location = paths.home())
      : window.location.reload();
  };

  if (ready === null) {
    return (
      <ModalWrapper deleteWorkspace={deleteWorkspace}>
        <div className=""outline-none transition-all cursor-wait duration-300 bg-stone-400 bg-opacity-20 flex h-[20rem] overflow-y-scroll overflow-x-hidden rounded-lg"">
          <div className=""flex flex-col gap-y-1 w-full h-full items-center justify-center"">
            <p className=""text-slate-400 text-xs"">
              Checking document processor is online - please wait.
            </p>
            <p className=""text-slate-400 text-xs"">
              this should only take a few moments.
            </p>
          </div>
        </div>
      </ModalWrapper>
    );
  }

  if (ready === false) {
    return (
      <ModalWrapper deleteWorkspace={deleteWorkspace}>
        <div className=""outline-none transition-all duration-300 bg-red-200 flex h-[20rem] overflow-y-scroll overflow-x-hidden rounded-lg"">
          <div className=""flex flex-col gap-y-1 w-full h-full items-center justify-center md:px-0 px-2"">
            <Frown className=""w-8 h-8 text-red-800"" />
            <p className=""text-red-800 text-xs text-center"">
              Document processor is offline.
            </p>
            <p className=""text-red-800 text-[10px] md:text-xs text-center"">
              you cannot upload documents from the UI right now
            </p>
          </div>
        </div>
      </ModalWrapper>
    );
  }

  return (
    <ModalWrapper deleteWorkspace={deleteWorkspace}>
      <div
        {...getRootProps()}
        className=""outline-none transition-all cursor-pointer duration-300 hover:bg-opacity-40 bg-stone-400 bg-opacity-20 flex h-[20rem] overflow-y-scroll overflow-x-hidden rounded-lg""
      >
        <input {...getInputProps()} />
        {files.length === 0 ? (
          <div className=""flex flex-col items-center justify-center w-full h-full"">
            <div className=""flex flex-col items-center justify-center pt-5 pb-6"">
              <svg
                aria-hidden=""true""
                className=""w-10 h-10 mb-3 text-gray-600 dark:text-slate-300""
                fill=""none""
                stroke=""currentColor""
                viewBox=""0 0 24 24""
                xmlns=""http://www.w3.org/2000/svg""
              >
                <path
                  strokeLinecap=""round""
                  strokeLinejoin=""round""
                  strokeWidth=""2""
                  d=""M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12""
                ></path>
              </svg>
              <p className=""mb-2 text-sm text-gray-600 dark:text-slate-300"">
                <span className=""font-semibold"">Click to upload</span> or drag
                and drop
              </p>
              <p className=""text-xs text-gray-600 dark:text-slate-300""></p>
            </div>
          </div>
        ) : (
          <div className=""flex flex-col w-full p-4 gap-y-2"">
            {files.map((file) => (
              <FileUploadProgress
                key={file.uid}
                file={file.file}
                slug={workspace.slug}
                rejected={file?.rejected}
                reason={file?.reason}
                onUploadSuccess={handleUploadSuccess}
                onUploadError={handleUploadError}
              />
            ))}
          </div>
        )}
      </div>
      <p className=""text-gray-600 dark:text-stone-400 text-xs "">
        supported file extensions are{"" ""}
        <code className=""text-xs bg-gray-200 text-gray-800 dark:bg-stone-800 dark:text-slate-400 font-mono rounded-sm px-1"">
          {Object.values(fileTypes).flat().join("" "")}
        </code>
      </p>
    </ModalWrapper>
  );
}

function ModalWrapper({ deleteWorkspace, children }) {
  return (
    <>
      <div className=""p-6 flex h-full w-full max-h-[80vh] overflow-y-scroll"">
        <div className=""flex flex-col gap-y-1 w-full"">
          <div className=""flex flex-col mb-2"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Add documents to your workspace.
            </p>
            <p className=""text-gray-600 dark:text-stone-400 text-xs "">
              These files will be uploaded to the document processor running on
              this AnythingLLM instance. These files are not sent or shared with
              a third party.
            </p>
            {process.env.NODE_ENV !== ""production"" && (
              <div className=""mt-2 text-gray-600 dark:text-stone-400 text-xs"">
                <div className=""w-[1px] bg-stone-400 w-full"" />
                Local Environment Notice: You must have the{"" ""}
                <code className=""text-xs bg-gray-200 text-gray-800 dark:bg-stone-800 dark:text-slate-400 font-mono rounded-sm px-1"">
                  python document processor app
                </code>{"" ""}
                running for these documents to process.
              </div>
            )}
          </div>
          {children}
        </div>
      </div>
      <div className=""flex items-center justify-between p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
        <button
          onClick={deleteWorkspace}
          type=""button""
          className=""border border-transparent text-gray-500 bg-white hover:bg-red-100 rounded-lg text-sm font-medium px-5 py-2.5 hover:text-red-900 focus:z-10 dark:bg-transparent dark:text-gray-300 dark:hover:text-white dark:hover:bg-red-600""
        >
          Delete Workspace
        </button>
      </div>
    </>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR VAR({ VAR, VAR }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR VAR = () => { VAR(""VAR VAR VAR"", ""VAR""); }; VAR VAR = (VAR) => { VAR(`VAR VAR VAR: ${VAR}`, ""VAR""); }; VAR VAR = VAR(VAR (VAR, VAR) => { VAR VAR = VAR.VAR((VAR) => { VAR { VAR: VAR(), VAR, }; }); VAR VAR = VAR.VAR((VAR) => { VAR { VAR: VAR(), VAR: VAR.VAR, VAR: VAR, VAR: VAR.VAR[0].VAR, }; }); VAR([...VAR, ...VAR, ...VAR]); }, []); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); } VAR(); }, []); VAR { VAR, VAR } = VAR({ VAR, VAR: { ...VAR, }, }); VAR VAR = VAR () => { VAR ( !VAR.VAR( `VAR VAR VAR VAR VAR VAR VAR ${VAR.VAR} VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.\VAR\VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR.` ) ) VAR VAR; VAR VAR.VAR(VAR.VAR); VAR.VAR === VAR ? (VAR.VAR = VAR.VAR()) : VAR.VAR.VAR(); }; VAR (VAR === VAR) { VAR ( <VAR VAR={VAR}> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-300 VAR-VAR-400 VAR-VAR-20 VAR VAR-[20rem] VAR-VAR-VAR VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR-400 VAR-VAR""> VAR VAR VAR VAR VAR - VAR VAR. </VAR> <VAR VAR=""VAR-VAR-400 VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> </VAR> ); } VAR (VAR === VAR) { VAR ( <VAR VAR={VAR}> <VAR VAR=""VAR-VAR VAR-VAR VAR-300 VAR-VAR-200 VAR VAR-[20rem] VAR-VAR-VAR VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR:VAR-0 VAR-2""> <VAR VAR=""VAR-8 VAR-8 VAR-VAR-800"" /> <VAR VAR=""VAR-VAR-800 VAR-VAR VAR-VAR""> VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR-VAR-800 VAR-[10px] VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR </VAR> </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR={VAR}> <VAR {...VAR()} VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-300 VAR:VAR-VAR-40 VAR-VAR-400 VAR-VAR-20 VAR VAR-[20rem] VAR-VAR-VAR VAR-VAR-VAR VAR-VAR"" > <VAR {...VAR()} /> {VAR.VAR === 0 ? ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-5 VAR-6""> <VAR VAR-VAR=""VAR"" VAR=""VAR-10 VAR-10 VAR-3 VAR-VAR-600 VAR:VAR-VAR-300"" VAR=""VAR"" VAR=""VAR"" VAR=""0 0 24 24"" VAR=""VAR: > <VAR VAR=""VAR"" VAR=""VAR"" VAR=""2"" VAR=""VAR 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"" ></VAR> </VAR> <VAR VAR=""VAR-2 VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300""> <VAR VAR=""VAR-VAR"">VAR VAR VAR</VAR> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300""></VAR> </VAR> </VAR> ) : ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-2""> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR.VAR} VAR={VAR.VAR} VAR={VAR?.VAR} VAR={VAR?.VAR} VAR={VAR} VAR={VAR} /> ))} </VAR> )} </VAR> <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR ""> VAR VAR VAR VAR{"" ""} <VAR VAR=""VAR-VAR VAR-VAR-200 VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-400 VAR-VAR VAR-VAR VAR-1""> {VAR.VAR(VAR).VAR().VAR("" "")} </VAR> </VAR> </VAR> ); } VAR VAR({ VAR, VAR }) { VAR ( <> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR VAR-VAR-[80vh] VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-2""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> {VAR.VAR.VAR !== ""VAR"" && ( <VAR VAR=""VAR-2 VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> <VAR VAR=""VAR-[1px] VAR-VAR-400 VAR-VAR"" /> VAR VAR VAR: VAR VAR VAR VAR{"" ""} <VAR VAR=""VAR-VAR VAR-VAR-200 VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-400 VAR-VAR VAR-VAR VAR-1""> VAR VAR VAR VAR </VAR>{"" ""} VAR VAR VAR VAR VAR VAR. </VAR> )} </VAR> {VAR} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR-VAR VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600"" > VAR VAR </VAR> </VAR> </> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/Upload/index.jsx,"import React, { useState, useCallback, useEffect } from ""react"";
import Workspace from ""../../../../models/workspace"";
import paths from ""../../../../utils/paths"";
import FileUploadProgress from ""./FileUploadProgress"";
import { useDropzone } from ""react-dropzone"";
import { v4 } from ""uuid"";
import System from ""../../../../models/system"";
import { Frown } from ""react-feather"";
import showToast from ""../../../../utils/toast"";

export default function UploadToWorkspace({ workspace, fileTypes }) {
  const [ready, setReady] = useState(null);
  const [files, setFiles] = useState([]);

  const handleUploadSuccess = () => {
    showToast(""File uploaded successfully"", ""success"");
  };

  const handleUploadError = (message) => {
    showToast(`Error uploading file: ${message}`, ""error"");
  };

  const onDrop = useCallback(async (acceptedFiles, rejections) => {
    const newAccepted = acceptedFiles.map((file) => {
      return {
        uid: v4(),
        file,
      };
    });
    const newRejected = rejections.map((file) => {
      return {
        uid: v4(),
        file: file.file,
        rejected: true,
        reason: file.errors[0].code,
      };
    });

    setFiles([...files, ...newAccepted, ...newRejected]);
  }, []);

  useEffect(() => {
    async function checkProcessorOnline() {
      const online = await System.checkDocumentProcessorOnline();
      setReady(online);
    }
    checkProcessorOnline();
  }, []);

  const { getRootProps, getInputProps } = useDropzone({
    onDrop,
    accept: {
      ...fileTypes,
    },
  });

  const deleteWorkspace = async () => {
    if (
      !window.confirm(
        `You are about to delete your entire ${workspace.name} workspace. This will remove all vector embeddings on your vector database.\n\nThe original source files will remain untouched. This action is irreversible.`
      )
    )
      return false;
    await Workspace.delete(workspace.slug);
    workspace.slug === slug
      ? (window.location = paths.home())
      : window.location.reload();
  };

  if (ready === null) {
    return (
      <ModalWrapper deleteWorkspace={deleteWorkspace}>
        <div className=""outline-none transition-all cursor-wait duration-300 bg-stone-400 bg-opacity-20 flex h-[20rem] overflow-y-scroll overflow-x-hidden rounded-lg"">
          <div className=""flex flex-col gap-y-1 w-full h-full items-center justify-center"">
            <p className=""text-slate-400 text-xs"">
              Checking document processor is online - please wait.
            </p>
            <p className=""text-slate-400 text-xs"">
              this should only take a few moments.
            </p>
          </div>
        </div>
      </ModalWrapper>
    );
  }

  if (ready === false) {
    return (
      <ModalWrapper deleteWorkspace={deleteWorkspace}>
        <div className=""outline-none transition-all duration-300 bg-red-200 flex h-[20rem] overflow-y-scroll overflow-x-hidden rounded-lg"">
          <div className=""flex flex-col gap-y-1 w-full h-full items-center justify-center md:px-0 px-2"">
            <Frown className=""w-8 h-8 text-red-800"" />
            <p className=""text-red-800 text-xs text-center"">
              Document processor is offline.
            </p>
            <p className=""text-red-800 text-[10px] md:text-xs text-center"">
              you cannot upload documents from the UI right now
            </p>
          </div>
        </div>
      </ModalWrapper>
    );
  }

  return (
    <ModalWrapper deleteWorkspace={deleteWorkspace}>
      <div
        {...getRootProps()}
        className=""outline-none transition-all cursor-pointer duration-300 hover:bg-opacity-40 bg-stone-400 bg-opacity-20 flex h-[20rem] overflow-y-scroll overflow-x-hidden rounded-lg""
      >
        <input {...getInputProps()} />
        {files.length === 0 ? (
          <div className=""flex flex-col items-center justify-center w-full h-full"">
            <div className=""flex flex-col items-center justify-center pt-5 pb-6"">
              <svg
                aria-hidden=""true""
                className=""w-10 h-10 mb-3 text-gray-600 dark:text-slate-300""
                fill=""none""
                stroke=""currentColor""
                viewBox=""0 0 24 24""
                xmlns=""http://www.w3.org/2000/svg""
              >
                <path
                  strokeLinecap=""round""
                  strokeLinejoin=""round""
                  strokeWidth=""2""
                  d=""M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12""
                ></path>
              </svg>
              <p className=""mb-2 text-sm text-gray-600 dark:text-slate-300"">
                <span className=""font-semibold"">Click to upload</span> or drag
                and drop
              </p>
              <p className=""text-xs text-gray-600 dark:text-slate-300""></p>
            </div>
          </div>
        ) : (
          <div className=""flex flex-col w-full p-4 gap-y-2"">
            {files.map((file) => (
              <FileUploadProgress
                key={file.uid}
                file={file.file}
                slug={workspace.slug}
                rejected={file?.rejected}
                reason={file?.reason}
                onUploadSuccess={handleUploadSuccess}
                onUploadError={handleUploadError}
              />
            ))}
          </div>
        )}
      </div>
      <p className=""text-gray-600 dark:text-stone-400 text-xs "">
        supported file extensions are{"" ""}
        <code className=""text-xs bg-gray-200 text-gray-800 dark:bg-stone-800 dark:text-slate-400 font-mono rounded-sm px-1"">
          {Object.values(fileTypes).flat().join("" "")}
        </code>
      </p>
    </ModalWrapper>
  );
}

function ModalWrapper({ deleteWorkspace, children }) {
  return (
    <>
      <div className=""p-6 flex h-full w-full max-h-[80vh] overflow-y-scroll"">
        <div className=""flex flex-col gap-y-1 w-full"">
          <div className=""flex flex-col mb-2"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Add documents to your workspace.
            </p>
            <p className=""text-gray-600 dark:text-stone-400 text-xs "">
              These files will be uploaded to the document processor running on
              this AnythingLLM instance. These files are not sent or shared with
              a third party.
            </p>
            {process.env.NODE_ENV !== ""production"" && (
              <div className=""mt-2 text-gray-600 dark:text-stone-400 text-xs"">
                <div className=""w-[1px] bg-stone-400 w-full"" />
                Local Environment Notice: You must have the{"" ""}
                <code className=""text-xs bg-gray-200 text-gray-800 dark:bg-stone-800 dark:text-slate-400 font-mono rounded-sm px-1"">
                  python document processor app
                </code>{"" ""}
                running for these documents to process.
              </div>
            )}
          </div>
          {children}
        </div>
      </div>
      <div className=""flex items-center justify-between p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
        <button
          onClick={deleteWorkspace}
          type=""button""
          className=""border border-transparent text-gray-500 bg-white hover:bg-red-100 rounded-lg text-sm font-medium px-5 py-2.5 hover:text-red-900 focus:z-10 dark:bg-transparent dark:text-gray-300 dark:hover:text-white dark:hover:bg-red-600""
        >
          Delete Workspace
        </button>
      </div>
    </>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR VAR({ VAR, VAR }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR VAR = () => { VAR(""VAR VAR VAR"", ""VAR""); }; VAR VAR = (VAR) => { VAR(`VAR VAR VAR: ${VAR}`, ""VAR""); }; VAR VAR = VAR(VAR (VAR, VAR) => { VAR VAR = VAR.VAR((VAR) => { VAR { VAR: VAR(), VAR, }; }); VAR VAR = VAR.VAR((VAR) => { VAR { VAR: VAR(), VAR: VAR.VAR, VAR: VAR, VAR: VAR.VAR[0].VAR, }; }); VAR([...VAR, ...VAR, ...VAR]); }, []); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); } VAR(); }, []); VAR { VAR, VAR } = VAR({ VAR, VAR: { ...VAR, }, }); VAR VAR = VAR () => { VAR ( !VAR.VAR( `VAR VAR VAR VAR VAR VAR VAR ${VAR.VAR} VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.\VAR\VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR.` ) ) VAR VAR; VAR VAR.VAR(VAR.VAR); VAR.VAR === VAR ? (VAR.VAR = VAR.VAR()) : VAR.VAR.VAR(); }; VAR (VAR === VAR) { VAR ( <VAR VAR={VAR}> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-300 VAR-VAR-400 VAR-VAR-20 VAR VAR-[20rem] VAR-VAR-VAR VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR-400 VAR-VAR""> VAR VAR VAR VAR VAR - VAR VAR. </VAR> <VAR VAR=""VAR-VAR-400 VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> </VAR> ); } VAR (VAR === VAR) { VAR ( <VAR VAR={VAR}> <VAR VAR=""VAR-VAR VAR-VAR VAR-300 VAR-VAR-200 VAR VAR-[20rem] VAR-VAR-VAR VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR:VAR-0 VAR-2""> <VAR VAR=""VAR-8 VAR-8 VAR-VAR-800"" /> <VAR VAR=""VAR-VAR-800 VAR-VAR VAR-VAR""> VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR-VAR-800 VAR-[10px] VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR </VAR> </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR={VAR}> <VAR {...VAR()} VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-300 VAR:VAR-VAR-40 VAR-VAR-400 VAR-VAR-20 VAR VAR-[20rem] VAR-VAR-VAR VAR-VAR-VAR VAR-VAR"" > <VAR {...VAR()} /> {VAR.VAR === 0 ? ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-5 VAR-6""> <VAR VAR-VAR=""VAR"" VAR=""VAR-10 VAR-10 VAR-3 VAR-VAR-600 VAR:VAR-VAR-300"" VAR=""VAR"" VAR=""VAR"" VAR=""0 0 24 24"" VAR=""VAR: > <VAR VAR=""VAR"" VAR=""VAR"" VAR=""2"" VAR=""VAR 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"" ></VAR> </VAR> <VAR VAR=""VAR-2 VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300""> <VAR VAR=""VAR-VAR"">VAR VAR VAR</VAR> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300""></VAR> </VAR> </VAR> ) : ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-2""> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR.VAR} VAR={VAR.VAR} VAR={VAR?.VAR} VAR={VAR?.VAR} VAR={VAR} VAR={VAR} /> ))} </VAR> )} </VAR> <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR ""> VAR VAR VAR VAR{"" ""} <VAR VAR=""VAR-VAR VAR-VAR-200 VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-400 VAR-VAR VAR-VAR VAR-1""> {VAR.VAR(VAR).VAR().VAR("" "")} </VAR> </VAR> </VAR> ); } VAR VAR({ VAR, VAR }) { VAR ( <> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR VAR-VAR-[80vh] VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-2""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> {VAR.VAR.VAR !== ""VAR"" && ( <VAR VAR=""VAR-2 VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> <VAR VAR=""VAR-[1px] VAR-VAR-400 VAR-VAR"" /> VAR VAR VAR: VAR VAR VAR VAR{"" ""} <VAR VAR=""VAR-VAR VAR-VAR-200 VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-400 VAR-VAR VAR-VAR VAR-1""> VAR VAR VAR VAR </VAR>{"" ""} VAR VAR VAR VAR VAR VAR. </VAR> )} </VAR> {VAR} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR-VAR VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600"" > VAR VAR </VAR> </VAR> </> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/index.jsx,"import React, { useState, useEffect } from ""react"";
import { Archive, Sliders, UploadCloud, X } from ""react-feather"";
import DocumentSettings from ""./Documents"";
import WorkspaceSettings from ""./Settings"";
import { useParams } from ""react-router-dom"";
import Workspace from ""../../../models/workspace"";
import System from ""../../../models/system"";
import UploadToWorkspace from ""./Upload"";

const TABS = {
  documents: DocumentSettings,
  settings: WorkspaceSettings,
  upload: UploadToWorkspace,
};

const noop = () => false;
export default function ManageWorkspace({
  hideModal = noop,
  providedSlug = null,
}) {
  const { slug } = useParams();
  const [selectedTab, setSelectedTab] = useState(""documents"");
  const [workspace, setWorkspace] = useState(null);
  const [fileTypes, setFileTypes] = useState(null);

  useEffect(() => {
    async function checkSupportedFiletypes() {
      const acceptedTypes = await System.acceptedDocumentTypes();
      setFileTypes(acceptedTypes ?? {});
    }
    checkSupportedFiletypes();
  }, []);

  useEffect(() => {
    async function fetchWorkspace() {
      const workspace = await Workspace.bySlug(providedSlug ?? slug);
      setWorkspace(workspace);
    }
    fetchWorkspace();
  }, [selectedTab, slug]);

  if (!workspace) return null;

  const Component = TABS[selectedTab || ""documents""];
  return (
    <div className=""fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] h-full bg-black bg-opacity-50 flex items-center justify-center"">
      <div
        className=""flex fixed top-0 left-0 right-0 w-full h-full""
        onClick={hideModal}
      />
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex flex-col gap-y-1 border-b dark:border-gray-600 px-4 pt-4 "">
            <div className=""flex items-start justify-between rounded-t "">
              <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
                Update ""{workspace.name}""
              </h3>
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
                data-modal-hide=""staticModal""
              >
                <X className=""text-gray-300 text-lg"" />
              </button>
            </div>
            <WorkspaceSettingTabs
              selectedTab={selectedTab}
              changeTab={setSelectedTab}
            />
          </div>
          <Component
            hideModal={hideModal}
            workspace={workspace}
            fileTypes={fileTypes}
          />
        </div>
      </div>
    </div>
  );
}

function WorkspaceSettingTabs({ selectedTab, changeTab }) {
  return (
    <div>
      <ul className=""flex md:flex-wrap overflow-x-scroll no-scroll -mb-px text-sm gap-x-2 font-medium text-center text-gray-500 dark:text-gray-400"">
        <WorkspaceTab
          active={selectedTab === ""documents""}
          displayName=""Documents""
          tabName=""documents""
          icon={<Archive className=""h-4 w-4 flex-shrink-0"" />}
          onClick={changeTab}
        />
        <WorkspaceTab
          active={selectedTab === ""upload""}
          displayName=""Upload Docs""
          tabName=""upload""
          icon={<UploadCloud className=""h-4 w-4 flex-shrink-0"" />}
          onClick={changeTab}
        />
        <WorkspaceTab
          active={selectedTab === ""settings""}
          displayName=""Settings""
          tabName=""settings""
          icon={<Sliders className=""h-4 w-4 flex-shrink-0"" />}
          onClick={changeTab}
        />
      </ul>
    </div>
  );
}

function WorkspaceTab({
  active = false,
  displayName,
  tabName,
  icon = """",
  onClick,
}) {
  const classes = active
    ? ""text-blue-600 border-blue-600 active dark:text-blue-400 dark:border-blue-400 bg-blue-500 bg-opacity-5""
    : ""border-transparent hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300"";
  return (
    <li className=""mr-2"">
      <button
        disabled={active}
        onClick={() => onClick(tabName)}
        className={
          ""flex items-center gap-x-1 p-4 border-b-2 rounded-t-lg group whitespace-nowrap "" +
          classes
        }
      >
        {icon} {displayName}
      </button>
    </li>
  );
}

export function useManageWorkspaceModal() {
  const [showing, setShowing] = useState(false);
  const showModal = () => {
    setShowing(true);
  };
  const hideModal = () => {
    setShowing(false);
  };

  return { showing, showModal, hideModal };
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR = { VAR: VAR, VAR: VAR, VAR: VAR, }; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR = VAR, }) { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(""VAR""); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR ?? {}); } VAR(); }, []); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(VAR ?? VAR); VAR(VAR); } VAR(); }, [VAR, VAR]); VAR (!VAR) VAR VAR; VAR VAR = VAR[VAR || ""VAR""]; VAR ( <VAR VAR=""VAR VAR-0 VAR-0 VAR-0 VAR-50 VAR-VAR VAR-4 VAR-VAR-VAR VAR-VAR-VAR VAR:VAR-0 VAR-[VAR(100%-1rem)] VAR-VAR VAR-VAR VAR-VAR-50 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR VAR-0 VAR-0 VAR-0 VAR-VAR VAR-VAR"" VAR={VAR} /> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR:VAR-VAR-600 VAR-4 VAR-4 ""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR ""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR ""{VAR.VAR}"" </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR} VAR={VAR} /> </VAR> <VAR VAR={VAR} VAR={VAR} VAR={VAR} /> </VAR> </VAR> </VAR> ); } VAR VAR({ VAR, VAR }) { VAR ( <VAR> <VAR VAR=""VAR VAR:VAR-VAR VAR-VAR-VAR VAR-VAR -VAR-VAR VAR-VAR VAR-VAR-2 VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> <VAR VAR={VAR === ""VAR""} VAR=""VAR"" VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR} /> <VAR VAR={VAR === ""VAR""} VAR=""VAR VAR"" VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR} /> <VAR VAR={VAR === ""VAR""} VAR=""VAR"" VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR} /> </VAR> </VAR> ); } VAR VAR({ VAR = VAR, VAR, VAR, VAR = """", VAR, }) { VAR VAR = VAR ? ""VAR-VAR-600 VAR-VAR-600 VAR VAR:VAR-VAR-400 VAR:VAR-VAR-400 VAR-VAR-500 VAR-VAR-5"" : ""VAR-VAR VAR:VAR-VAR-600 VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-300""; VAR ( <VAR VAR=""VAR-2""> <VAR VAR={VAR} VAR={() => VAR(VAR)} VAR={ ""VAR VAR-VAR VAR-VAR-1 VAR-4 VAR-VAR-2 VAR-VAR-VAR VAR VAR-VAR "" + VAR } > {VAR} {VAR} </VAR> </VAR> ); } VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR(VAR); }; VAR VAR = () => { VAR(VAR); }; VAR { VAR, VAR, VAR }; } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/MangeWorkspace/index.jsx,"import React, { useState, useEffect } from ""react"";
import { Archive, Sliders, UploadCloud, X } from ""react-feather"";
import DocumentSettings from ""./Documents"";
import WorkspaceSettings from ""./Settings"";
import { useParams } from ""react-router-dom"";
import Workspace from ""../../../models/workspace"";
import System from ""../../../models/system"";
import UploadToWorkspace from ""./Upload"";

const TABS = {
  documents: DocumentSettings,
  settings: WorkspaceSettings,
  upload: UploadToWorkspace,
};

const noop = () => false;
export default function ManageWorkspace({
  hideModal = noop,
  providedSlug = null,
}) {
  const { slug } = useParams();
  const [selectedTab, setSelectedTab] = useState(""documents"");
  const [workspace, setWorkspace] = useState(null);
  const [fileTypes, setFileTypes] = useState(null);

  useEffect(() => {
    async function checkSupportedFiletypes() {
      const acceptedTypes = await System.acceptedDocumentTypes();
      setFileTypes(acceptedTypes ?? {});
    }
    checkSupportedFiletypes();
  }, []);

  useEffect(() => {
    async function fetchWorkspace() {
      const workspace = await Workspace.bySlug(providedSlug ?? slug);
      setWorkspace(workspace);
    }
    fetchWorkspace();
  }, [selectedTab, slug]);

  if (!workspace) return null;

  const Component = TABS[selectedTab || ""documents""];
  return (
    <div className=""fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] h-full bg-black bg-opacity-50 flex items-center justify-center"">
      <div
        className=""flex fixed top-0 left-0 right-0 w-full h-full""
        onClick={hideModal}
      />
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex flex-col gap-y-1 border-b dark:border-gray-600 px-4 pt-4 "">
            <div className=""flex items-start justify-between rounded-t "">
              <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
                Update ""{workspace.name}""
              </h3>
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
                data-modal-hide=""staticModal""
              >
                <X className=""text-gray-300 text-lg"" />
              </button>
            </div>
            <WorkspaceSettingTabs
              selectedTab={selectedTab}
              changeTab={setSelectedTab}
            />
          </div>
          <Component
            hideModal={hideModal}
            workspace={workspace}
            fileTypes={fileTypes}
          />
        </div>
      </div>
    </div>
  );
}

function WorkspaceSettingTabs({ selectedTab, changeTab }) {
  return (
    <div>
      <ul className=""flex md:flex-wrap overflow-x-scroll no-scroll -mb-px text-sm gap-x-2 font-medium text-center text-gray-500 dark:text-gray-400"">
        <WorkspaceTab
          active={selectedTab === ""documents""}
          displayName=""Documents""
          tabName=""documents""
          icon={<Archive className=""h-4 w-4 flex-shrink-0"" />}
          onClick={changeTab}
        />
        <WorkspaceTab
          active={selectedTab === ""upload""}
          displayName=""Upload Docs""
          tabName=""upload""
          icon={<UploadCloud className=""h-4 w-4 flex-shrink-0"" />}
          onClick={changeTab}
        />
        <WorkspaceTab
          active={selectedTab === ""settings""}
          displayName=""Settings""
          tabName=""settings""
          icon={<Sliders className=""h-4 w-4 flex-shrink-0"" />}
          onClick={changeTab}
        />
      </ul>
    </div>
  );
}

function WorkspaceTab({
  active = false,
  displayName,
  tabName,
  icon = """",
  onClick,
}) {
  const classes = active
    ? ""text-blue-600 border-blue-600 active dark:text-blue-400 dark:border-blue-400 bg-blue-500 bg-opacity-5""
    : ""border-transparent hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300"";
  return (
    <li className=""mr-2"">
      <button
        disabled={active}
        onClick={() => onClick(tabName)}
        className={
          ""flex items-center gap-x-1 p-4 border-b-2 rounded-t-lg group whitespace-nowrap "" +
          classes
        }
      >
        {icon} {displayName}
      </button>
    </li>
  );
}

export function useManageWorkspaceModal() {
  const [showing, setShowing] = useState(false);
  const showModal = () => {
    setShowing(true);
  };
  const hideModal = () => {
    setShowing(false);
  };

  return { showing, showModal, hideModal };
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR = { VAR: VAR, VAR: VAR, VAR: VAR, }; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR = VAR, }) { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(""VAR""); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR ?? {}); } VAR(); }, []); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(VAR ?? VAR); VAR(VAR); } VAR(); }, [VAR, VAR]); VAR (!VAR) VAR VAR; VAR VAR = VAR[VAR || ""VAR""]; VAR ( <VAR VAR=""VAR VAR-0 VAR-0 VAR-0 VAR-50 VAR-VAR VAR-4 VAR-VAR-VAR VAR-VAR-VAR VAR:VAR-0 VAR-[VAR(100%-1rem)] VAR-VAR VAR-VAR VAR-VAR-50 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR VAR-0 VAR-0 VAR-0 VAR-VAR VAR-VAR"" VAR={VAR} /> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR:VAR-VAR-600 VAR-4 VAR-4 ""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR ""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR ""{VAR.VAR}"" </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR} VAR={VAR} /> </VAR> <VAR VAR={VAR} VAR={VAR} VAR={VAR} /> </VAR> </VAR> </VAR> ); } VAR VAR({ VAR, VAR }) { VAR ( <VAR> <VAR VAR=""VAR VAR:VAR-VAR VAR-VAR-VAR VAR-VAR -VAR-VAR VAR-VAR VAR-VAR-2 VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> <VAR VAR={VAR === ""VAR""} VAR=""VAR"" VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR} /> <VAR VAR={VAR === ""VAR""} VAR=""VAR VAR"" VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR} /> <VAR VAR={VAR === ""VAR""} VAR=""VAR"" VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR} /> </VAR> </VAR> ); } VAR VAR({ VAR = VAR, VAR, VAR, VAR = """", VAR, }) { VAR VAR = VAR ? ""VAR-VAR-600 VAR-VAR-600 VAR VAR:VAR-VAR-400 VAR:VAR-VAR-400 VAR-VAR-500 VAR-VAR-5"" : ""VAR-VAR VAR:VAR-VAR-600 VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-300""; VAR ( <VAR VAR=""VAR-2""> <VAR VAR={VAR} VAR={() => VAR(VAR)} VAR={ ""VAR VAR-VAR VAR-VAR-1 VAR-4 VAR-VAR-2 VAR-VAR-VAR VAR VAR-VAR "" + VAR } > {VAR} {VAR} </VAR> </VAR> ); } VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR(VAR); }; VAR VAR = () => { VAR(VAR); }; VAR { VAR, VAR, VAR }; } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/NewWorkspace.jsx,"import React, { useRef, useState } from ""react"";
import { X } from ""react-feather"";
import Workspace from ""../../models/workspace"";

const noop = () => false;
export default function NewWorkspaceModal({ hideModal = noop }) {
  const formEl = useRef(null);
  const [error, setError] = useState(null);
  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {};
    const form = new FormData(formEl.current);
    for (var [key, value] of form.entries()) data[key] = value;
    const { workspace, message } = await Workspace.new(data);
    if (!!workspace) window.location.reload();
    setError(message);
  };

  return (
    <div className=""fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] h-full bg-black bg-opacity-50 flex items-center justify-center"">
      <div
        className=""flex fixed top-0 left-0 right-0 w-full h-full""
        onClick={hideModal}
      />
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Create a New Workspace
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form ref={formEl} onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""name""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Workspace Name
                  </label>
                  <input
                    name=""name""
                    type=""text""
                    id=""name""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""My Workspace""
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creating a workspace you will be able to add and remove
                  documents from it.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Create Workspace
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  );
}

export function useNewWorkspaceModal() {
  const [showing, setShowing] = useState(false);
  const showModal = () => {
    setShowing(true);
  };
  const hideModal = () => {
    setShowing(false);
  };

  return { showing, showModal, hideModal };
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR }) { VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!!VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR=""VAR VAR-0 VAR-0 VAR-0 VAR-50 VAR-VAR VAR-4 VAR-VAR-VAR VAR-VAR-VAR VAR:VAR-0 VAR-[VAR(100%-1rem)] VAR-VAR VAR-VAR VAR-VAR-50 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR VAR-0 VAR-0 VAR-0 VAR-VAR VAR-VAR"" VAR={VAR} /> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR} VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={VAR} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR(VAR); }; VAR VAR = () => { VAR(VAR); }; VAR { VAR, VAR, VAR }; } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/NewWorkspace.jsx,"import React, { useRef, useState } from ""react"";
import { X } from ""react-feather"";
import Workspace from ""../../models/workspace"";

const noop = () => false;
export default function NewWorkspaceModal({ hideModal = noop }) {
  const formEl = useRef(null);
  const [error, setError] = useState(null);
  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {};
    const form = new FormData(formEl.current);
    for (var [key, value] of form.entries()) data[key] = value;
    const { workspace, message } = await Workspace.new(data);
    if (!!workspace) window.location.reload();
    setError(message);
  };

  return (
    <div className=""fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] h-full bg-black bg-opacity-50 flex items-center justify-center"">
      <div
        className=""flex fixed top-0 left-0 right-0 w-full h-full""
        onClick={hideModal}
      />
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Create a New Workspace
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form ref={formEl} onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""name""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Workspace Name
                  </label>
                  <input
                    name=""name""
                    type=""text""
                    id=""name""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""My Workspace""
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creating a workspace you will be able to add and remove
                  documents from it.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Create Workspace
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  );
}

export function useNewWorkspaceModal() {
  const [showing, setShowing] = useState(false);
  const showModal = () => {
    setShowing(true);
  };
  const hideModal = () => {
    setShowing(false);
  };

  return { showing, showModal, hideModal };
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR }) { VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!!VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR=""VAR VAR-0 VAR-0 VAR-0 VAR-50 VAR-VAR VAR-4 VAR-VAR-VAR VAR-VAR-VAR VAR:VAR-0 VAR-[VAR(100%-1rem)] VAR-VAR VAR-VAR VAR-VAR-50 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR VAR-0 VAR-0 VAR-0 VAR-VAR VAR-VAR"" VAR={VAR} /> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR} VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={VAR} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR(VAR); }; VAR VAR = () => { VAR(VAR); }; VAR { VAR, VAR, VAR }; } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Password/MultiUserAuth.jsx,"import React, { useState } from ""react"";
import System from ""../../../models/system"";
import { AUTH_TOKEN, AUTH_USER } from ""../../../utils/constants"";

export default function MultiUserAuth() {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const handleLogin = async (e) => {
    setError(null);
    setLoading(true);
    e.preventDefault();
    const data = {};

    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { valid, user, token, message } = await System.requestToken(data);
    if (valid && !!token && !!user) {
      window.localStorage.setItem(AUTH_USER, JSON.stringify(user));
      window.localStorage.setItem(AUTH_TOKEN, token);
      window.location.reload();
    } else {
      setError(message);
      setLoading(false);
    }
    setLoading(false);
  };

  return (
    <form onSubmit={handleLogin}>
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
          <h3 className=""text-md md:text-xl font-semibold text-gray-900 dark:text-white"">
            This instance is password protected.
          </h3>
        </div>
        <div className=""p-6 space-y-6 flex h-full w-full"">
          <div className=""w-full flex flex-col gap-y-4"">
            <div>
              <label
                htmlFor=""username""
                className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
              >
                Instance Username
              </label>
              <input
                name=""username""
                type=""text""
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                required={true}
                autoComplete=""off""
              />
            </div>

            <div>
              <label
                htmlFor=""password""
                className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
              >
                Instance Password
              </label>
              <input
                name=""password""
                type=""password""
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                required={true}
                autoComplete=""off""
              />
            </div>
            {error && (
              <p className=""text-red-600 dark:text-red-400 text-sm"">
                Error: {error}
              </p>
            )}
            <p className=""text-gray-800 dark:text-slate-200 md:text-sm text-xs"">
              You will only have to enter this password once. After successful
              login it will be stored in your browser.
            </p>
          </div>
        </div>
        <div className=""flex items-center justify-end p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            disabled={loading}
            type=""submit""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            {loading ? ""Validating..."" : ""Submit""}
          </button>
        </div>
      </div>
    </form>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR { VAR, VAR } VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR, VAR, VAR } = VAR VAR.VAR(VAR); VAR (VAR && !!VAR && !!VAR) { VAR.VAR.VAR(VAR, VAR.VAR(VAR)); VAR.VAR.VAR(VAR, VAR); VAR.VAR.VAR(); } VAR { VAR(VAR); VAR(VAR); } VAR(VAR); }; VAR ( <VAR VAR={VAR}> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR:VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={VAR} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR""} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Password/MultiUserAuth.jsx,"import React, { useState } from ""react"";
import System from ""../../../models/system"";
import { AUTH_TOKEN, AUTH_USER } from ""../../../utils/constants"";

export default function MultiUserAuth() {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const handleLogin = async (e) => {
    setError(null);
    setLoading(true);
    e.preventDefault();
    const data = {};

    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { valid, user, token, message } = await System.requestToken(data);
    if (valid && !!token && !!user) {
      window.localStorage.setItem(AUTH_USER, JSON.stringify(user));
      window.localStorage.setItem(AUTH_TOKEN, token);
      window.location.reload();
    } else {
      setError(message);
      setLoading(false);
    }
    setLoading(false);
  };

  return (
    <form onSubmit={handleLogin}>
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
          <h3 className=""text-md md:text-xl font-semibold text-gray-900 dark:text-white"">
            This instance is password protected.
          </h3>
        </div>
        <div className=""p-6 space-y-6 flex h-full w-full"">
          <div className=""w-full flex flex-col gap-y-4"">
            <div>
              <label
                htmlFor=""username""
                className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
              >
                Instance Username
              </label>
              <input
                name=""username""
                type=""text""
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                required={true}
                autoComplete=""off""
              />
            </div>

            <div>
              <label
                htmlFor=""password""
                className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
              >
                Instance Password
              </label>
              <input
                name=""password""
                type=""password""
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                required={true}
                autoComplete=""off""
              />
            </div>
            {error && (
              <p className=""text-red-600 dark:text-red-400 text-sm"">
                Error: {error}
              </p>
            )}
            <p className=""text-gray-800 dark:text-slate-200 md:text-sm text-xs"">
              You will only have to enter this password once. After successful
              login it will be stored in your browser.
            </p>
          </div>
        </div>
        <div className=""flex items-center justify-end p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            disabled={loading}
            type=""submit""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            {loading ? ""Validating..."" : ""Submit""}
          </button>
        </div>
      </div>
    </form>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR { VAR, VAR } VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR, VAR, VAR } = VAR VAR.VAR(VAR); VAR (VAR && !!VAR && !!VAR) { VAR.VAR.VAR(VAR, VAR.VAR(VAR)); VAR.VAR.VAR(VAR, VAR); VAR.VAR.VAR(); } VAR { VAR(VAR); VAR(VAR); } VAR(VAR); }; VAR ( <VAR VAR={VAR}> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR:VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={VAR} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR""} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Password/SingleUserAuth.jsx,"import React, { useState } from ""react"";
import System from ""../../../models/system"";
import { AUTH_TOKEN } from ""../../../utils/constants"";

export default function SingleUserAuth() {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const handleLogin = async (e) => {
    setError(null);
    setLoading(true);
    e.preventDefault();
    const data = {};

    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { valid, token, message } = await System.requestToken(data);
    if (valid && !!token) {
      window.localStorage.setItem(AUTH_TOKEN, token);
      window.location.reload();
    } else {
      setError(message);
      setLoading(false);
    }
    setLoading(false);
  };

  return (
    <form onSubmit={handleLogin}>
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
          <h3 className=""text-md md:text-xl font-semibold text-gray-900 dark:text-white"">
            This workspace is password protected.
          </h3>
        </div>
        <div className=""p-6 space-y-6 flex h-full w-full"">
          <div className=""w-full flex flex-col gap-y-4"">
            <div>
              <label
                htmlFor=""password""
                className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
              >
                Workspace Password
              </label>
              <input
                name=""password""
                type=""password""
                id=""password""
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                required={true}
                autoComplete=""off""
              />
            </div>
            {error && (
              <p className=""text-red-600 dark:text-red-400 text-sm"">
                Error: {error}
              </p>
            )}
            <p className=""text-gray-800 dark:text-slate-200 md:text-sm text-xs"">
              You will only have to enter this password once. After successful
              login it will be stored in your browser.
            </p>
          </div>
        </div>
        <div className=""flex items-center justify-end p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            disabled={loading}
            type=""submit""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            {loading ? ""Validating..."" : ""Submit""}
          </button>
        </div>
      </div>
    </form>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR, VAR } = VAR VAR.VAR(VAR); VAR (VAR && !!VAR) { VAR.VAR.VAR(VAR, VAR); VAR.VAR.VAR(); } VAR { VAR(VAR); VAR(VAR); } VAR(VAR); }; VAR ( <VAR VAR={VAR}> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR:VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={VAR} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR""} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Password/SingleUserAuth.jsx,"import React, { useState } from ""react"";
import System from ""../../../models/system"";
import { AUTH_TOKEN } from ""../../../utils/constants"";

export default function SingleUserAuth() {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const handleLogin = async (e) => {
    setError(null);
    setLoading(true);
    e.preventDefault();
    const data = {};

    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { valid, token, message } = await System.requestToken(data);
    if (valid && !!token) {
      window.localStorage.setItem(AUTH_TOKEN, token);
      window.location.reload();
    } else {
      setError(message);
      setLoading(false);
    }
    setLoading(false);
  };

  return (
    <form onSubmit={handleLogin}>
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
          <h3 className=""text-md md:text-xl font-semibold text-gray-900 dark:text-white"">
            This workspace is password protected.
          </h3>
        </div>
        <div className=""p-6 space-y-6 flex h-full w-full"">
          <div className=""w-full flex flex-col gap-y-4"">
            <div>
              <label
                htmlFor=""password""
                className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
              >
                Workspace Password
              </label>
              <input
                name=""password""
                type=""password""
                id=""password""
                className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                required={true}
                autoComplete=""off""
              />
            </div>
            {error && (
              <p className=""text-red-600 dark:text-red-400 text-sm"">
                Error: {error}
              </p>
            )}
            <p className=""text-gray-800 dark:text-slate-200 md:text-sm text-xs"">
              You will only have to enter this password once. After successful
              login it will be stored in your browser.
            </p>
          </div>
        </div>
        <div className=""flex items-center justify-end p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            disabled={loading}
            type=""submit""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            {loading ? ""Validating..."" : ""Submit""}
          </button>
        </div>
      </div>
    </form>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR, VAR } = VAR VAR.VAR(VAR); VAR (VAR && !!VAR) { VAR.VAR.VAR(VAR, VAR); VAR.VAR.VAR(); } VAR { VAR(VAR); VAR(VAR); } VAR(VAR); }; VAR ( <VAR VAR={VAR}> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR:VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={VAR} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR""} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/ApiKey/index.jsx,"import { useEffect, useState } from ""react"";
import System from ""../../../../models/system"";
import PreLoader from ""../../../Preloader"";
import paths from ""../../../../utils/paths"";
import showToast from ""../../../../utils/toast"";
import { CheckCircle, Copy, RefreshCcw, Trash } from ""react-feather"";

export default function ApiKey() {
  const [loading, setLoading] = useState(true);
  const [generating, setGenerating] = useState(false);
  const [copied, setCopied] = useState(false);
  const [deleting, setDeleting] = useState(false);
  const [apiKey, setApiKey] = useState(null);

  useEffect(() => {
    async function fetchExistingApiKey() {
      const { apiKey: _apiKey } = await System.getApiKey();
      setApiKey(_apiKey);
      setLoading(false);
    }
    fetchExistingApiKey();
  }, []);

  const generateApiKey = async () => {
    setGenerating(true);
    const isRefresh = !!apiKey;
    const { apiKey: newApiKey, error } = await System.generateApiKey();
    if (!!error) {
      showToast(error, ""error"");
    } else {
      showToast(
        isRefresh ? ""API key regenerated!"" : ""API key generated!"",
        ""info""
      );
      setApiKey(newApiKey);
    }
    setGenerating(false);
  };

  const removeApiKey = async () => {
    setDeleting(true);
    const ok = await System.deleteApiKey();
    if (ok) {
      showToast(""API key deleted from instance."", ""info"");
      setApiKey(null);
    } else {
      showToast(""API key could not be deleted."", ""error"");
    }
    setDeleting(false);
  };

  const copyToClipboard = async () => {
    window.navigator.clipboard.writeText(apiKey.secret);
    showToast(""API key copied to clipboard!"", ""info"");
    setCopied(true);
    setTimeout(() => {
      setCopied(false);
    }, 1200);
  };

  if (loading) {
    return (
      <div className=""relative w-full w-full max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between px-6 py-4"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Generate an API Key for your AnythingLLM instance.
            </p>
          </div>
          <div className=""px-1 md:px-8 pb-10 "">
            <PreLoader />
          </div>
        </div>
      </div>
    );
  }

  if (!apiKey) {
    return (
      <div className=""relative w-full w-full max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between px-6 py-4"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Generate an API Key for your AnythingLLM instance.
            </p>
          </div>
          <div className=""md:px-8 pb-10 "">
            <div className=""flex flex-col gap-y-1 text-gray-800 dark:text-stone-200 mb-2"">
              <p>
                No api key for this instance exists. Create one by clicking the
                button below.
              </p>
              <a
                href={paths.apiDocs()}
                target=""_blank""
                className=""dark:text-blue-300 text-blue-600 hover:underline""
              >
                View endpoint documentation &rarr;
              </a>
            </div>
            <button
              disabled={generating}
              type=""button""
              onClick={generateApiKey}
              className=""w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
            >
              {generating ? ""Generating..."" : ""Generate new API key""}
            </button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex flex-col items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Use this API key for interacting with your AnythingLLM instance
            programmatically.
          </p>
          <a
            href={paths.apiDocs()}
            target=""_blank""
            className=""dark:text-blue-300 text-blue-600 hover:underline""
          >
            View endpoint documentation &rarr;
          </a>
        </div>

        <div className=""md:px-8 pb-10"">
          <div className=""mb-6"">
            <div className=""flex flex-col md:flex-row items-center"">
              <div className=""flex md:flex-row flex-col gap-y-2 w-full gap-x-2 items-center px-4 md:px-0"">
                <input
                  key={apiKey.secret}
                  type=""text""
                  disabled={true}
                  className=""w-full md:w-1/2 bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                  defaultValue={apiKey.secret}
                  autoComplete=""off""
                  spellCheck={false}
                />
                <button
                  onClick={copyToClipboard}
                  disabled={copied}
                  className=""w-full flex justify-center items-center gap-x-2 md:w-fit disabled:bg-green-300 dark:disabled:bg-green-600 bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200 group hover:bg-gray-100 dark:hover:bg-stone-600""
                >
                  {copied ? (
                    <CheckCircle className=""stroke-green-800 dark:stroke-green-300"" />
                  ) : (
                    <Copy />
                  )}
                  <p className=""block md:hidden text-base"">Copy API Key</p>
                </button>
                <button
                  onClick={() => {
                    if (
                      !confirm(
                        ""Are you sure you want to refresh the API key? The old key will no longer work!""
                      )
                    )
                      return false;
                    generateApiKey();
                  }}
                  disabled={generating}
                  className=""w-full flex justify-center items-center gap-x-2 md:w-fit disabled:bg-green-300 dark:disabled:bg-green-600 bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200 group hover:bg-gray-100 dark:hover:bg-stone-600""
                >
                  <RefreshCcw />
                  <p className=""block md:hidden text-base"">
                    Regenerate API Key
                  </p>
                </button>
                <button
                  onClick={() => {
                    if (
                      !confirm(
                        ""Are you sure you want to delete the API key? All API keys will be deleted.""
                      )
                    )
                      return false;
                    removeApiKey();
                  }}
                  disabled={deleting}
                  className=""w-full flex justify-center items-center gap-x-2 md:w-fit disabled:bg-red-300 dark:disabled:bg-red-600 border border-red-500 text-red-900 placeholder-red-500 text-sm rounded-lg dark:bg-transparent focus:border-red-500 block p-2.5 dark:text-red-200 dark:placeholder-red-500 dark:border-red-200 group hover:bg-red-100 dark:hover:bg-red-600""
                >
                  <Trash />
                  <p className=""block md:hidden text-base"">Delete API Key</p>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR, VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR VAR() { VAR { VAR: VAR } = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR VAR = VAR () => { VAR(VAR); VAR VAR = !!VAR; VAR { VAR: VAR, VAR } = VAR VAR.VAR(); VAR (!!VAR) { VAR(VAR, ""VAR""); } VAR { VAR( VAR ? ""VAR VAR VAR!"" : ""VAR VAR VAR!"", ""VAR"" ); VAR(VAR); } VAR(VAR); }; VAR VAR = VAR () => { VAR(VAR); VAR VAR = VAR VAR.VAR(); VAR (VAR) { VAR(""VAR VAR VAR VAR VAR."", ""VAR""); VAR(VAR); } VAR { VAR(""VAR VAR VAR VAR VAR VAR."", ""VAR""); } VAR(VAR); }; VAR VAR = VAR () => { VAR.VAR.VAR.VAR(VAR.VAR); VAR(""VAR VAR VAR VAR VAR!"", ""VAR""); VAR(VAR); VAR(() => { VAR(VAR); }, 1200); }; VAR (VAR) { VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-1 VAR:VAR-8 VAR-10 ""> <VAR /> </VAR> </VAR> </VAR> ); } VAR (!VAR) { VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR:VAR-8 VAR-10 ""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR-800 VAR:VAR-VAR-200 VAR-2""> <VAR> VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR:VAR-VAR-300 VAR-VAR-600 VAR:VAR"" > VAR VAR VAR &VAR; </VAR> </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR VAR VAR""} </VAR> </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR:VAR-VAR-300 VAR-VAR-600 VAR:VAR"" > VAR VAR VAR &VAR; </VAR> </VAR> <VAR VAR=""VAR:VAR-8 VAR-10""> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR:VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR:VAR-VAR VAR-VAR VAR-VAR-2 VAR-VAR VAR-VAR-2 VAR-VAR VAR-4 VAR:VAR-0""> <VAR VAR={VAR.VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR:VAR-1/2 VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR={VAR.VAR} VAR=""VAR"" VAR={VAR} /> <VAR VAR={VAR} VAR={VAR} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR-2 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-600 VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200 VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-600"" > {VAR ? ( <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-300"" /> ) : ( <VAR /> )} <VAR VAR=""VAR VAR:VAR VAR-VAR"">VAR VAR VAR</VAR> </VAR> <VAR VAR={() => { VAR ( !VAR( ""VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR? VAR VAR VAR VAR VAR VAR VAR!"" ) ) VAR VAR; VAR(); }} VAR={VAR} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR-2 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-600 VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200 VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-600"" > <VAR /> <VAR VAR=""VAR VAR:VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> <VAR VAR={() => { VAR ( !VAR( ""VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR? VAR VAR VAR VAR VAR VAR."" ) ) VAR VAR; VAR(); }} VAR={VAR} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR-2 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-600 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR VAR:VAR-VAR-500 VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200 VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-600"" > <VAR /> <VAR VAR=""VAR VAR:VAR VAR-VAR"">VAR VAR VAR</VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/ApiKey/index.jsx,"import { useEffect, useState } from ""react"";
import System from ""../../../../models/system"";
import PreLoader from ""../../../Preloader"";
import paths from ""../../../../utils/paths"";
import showToast from ""../../../../utils/toast"";
import { CheckCircle, Copy, RefreshCcw, Trash } from ""react-feather"";

export default function ApiKey() {
  const [loading, setLoading] = useState(true);
  const [generating, setGenerating] = useState(false);
  const [copied, setCopied] = useState(false);
  const [deleting, setDeleting] = useState(false);
  const [apiKey, setApiKey] = useState(null);

  useEffect(() => {
    async function fetchExistingApiKey() {
      const { apiKey: _apiKey } = await System.getApiKey();
      setApiKey(_apiKey);
      setLoading(false);
    }
    fetchExistingApiKey();
  }, []);

  const generateApiKey = async () => {
    setGenerating(true);
    const isRefresh = !!apiKey;
    const { apiKey: newApiKey, error } = await System.generateApiKey();
    if (!!error) {
      showToast(error, ""error"");
    } else {
      showToast(
        isRefresh ? ""API key regenerated!"" : ""API key generated!"",
        ""info""
      );
      setApiKey(newApiKey);
    }
    setGenerating(false);
  };

  const removeApiKey = async () => {
    setDeleting(true);
    const ok = await System.deleteApiKey();
    if (ok) {
      showToast(""API key deleted from instance."", ""info"");
      setApiKey(null);
    } else {
      showToast(""API key could not be deleted."", ""error"");
    }
    setDeleting(false);
  };

  const copyToClipboard = async () => {
    window.navigator.clipboard.writeText(apiKey.secret);
    showToast(""API key copied to clipboard!"", ""info"");
    setCopied(true);
    setTimeout(() => {
      setCopied(false);
    }, 1200);
  };

  if (loading) {
    return (
      <div className=""relative w-full w-full max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between px-6 py-4"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Generate an API Key for your AnythingLLM instance.
            </p>
          </div>
          <div className=""px-1 md:px-8 pb-10 "">
            <PreLoader />
          </div>
        </div>
      </div>
    );
  }

  if (!apiKey) {
    return (
      <div className=""relative w-full w-full max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between px-6 py-4"">
            <p className=""text-gray-800 dark:text-stone-200 text-base "">
              Generate an API Key for your AnythingLLM instance.
            </p>
          </div>
          <div className=""md:px-8 pb-10 "">
            <div className=""flex flex-col gap-y-1 text-gray-800 dark:text-stone-200 mb-2"">
              <p>
                No api key for this instance exists. Create one by clicking the
                button below.
              </p>
              <a
                href={paths.apiDocs()}
                target=""_blank""
                className=""dark:text-blue-300 text-blue-600 hover:underline""
              >
                View endpoint documentation &rarr;
              </a>
            </div>
            <button
              disabled={generating}
              type=""button""
              onClick={generateApiKey}
              className=""w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
            >
              {generating ? ""Generating..."" : ""Generate new API key""}
            </button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex flex-col items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Use this API key for interacting with your AnythingLLM instance
            programmatically.
          </p>
          <a
            href={paths.apiDocs()}
            target=""_blank""
            className=""dark:text-blue-300 text-blue-600 hover:underline""
          >
            View endpoint documentation &rarr;
          </a>
        </div>

        <div className=""md:px-8 pb-10"">
          <div className=""mb-6"">
            <div className=""flex flex-col md:flex-row items-center"">
              <div className=""flex md:flex-row flex-col gap-y-2 w-full gap-x-2 items-center px-4 md:px-0"">
                <input
                  key={apiKey.secret}
                  type=""text""
                  disabled={true}
                  className=""w-full md:w-1/2 bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                  defaultValue={apiKey.secret}
                  autoComplete=""off""
                  spellCheck={false}
                />
                <button
                  onClick={copyToClipboard}
                  disabled={copied}
                  className=""w-full flex justify-center items-center gap-x-2 md:w-fit disabled:bg-green-300 dark:disabled:bg-green-600 bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200 group hover:bg-gray-100 dark:hover:bg-stone-600""
                >
                  {copied ? (
                    <CheckCircle className=""stroke-green-800 dark:stroke-green-300"" />
                  ) : (
                    <Copy />
                  )}
                  <p className=""block md:hidden text-base"">Copy API Key</p>
                </button>
                <button
                  onClick={() => {
                    if (
                      !confirm(
                        ""Are you sure you want to refresh the API key? The old key will no longer work!""
                      )
                    )
                      return false;
                    generateApiKey();
                  }}
                  disabled={generating}
                  className=""w-full flex justify-center items-center gap-x-2 md:w-fit disabled:bg-green-300 dark:disabled:bg-green-600 bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200 group hover:bg-gray-100 dark:hover:bg-stone-600""
                >
                  <RefreshCcw />
                  <p className=""block md:hidden text-base"">
                    Regenerate API Key
                  </p>
                </button>
                <button
                  onClick={() => {
                    if (
                      !confirm(
                        ""Are you sure you want to delete the API key? All API keys will be deleted.""
                      )
                    )
                      return false;
                    removeApiKey();
                  }}
                  disabled={deleting}
                  className=""w-full flex justify-center items-center gap-x-2 md:w-fit disabled:bg-red-300 dark:disabled:bg-red-600 border border-red-500 text-red-900 placeholder-red-500 text-sm rounded-lg dark:bg-transparent focus:border-red-500 block p-2.5 dark:text-red-200 dark:placeholder-red-500 dark:border-red-200 group hover:bg-red-100 dark:hover:bg-red-600""
                >
                  <Trash />
                  <p className=""block md:hidden text-base"">Delete API Key</p>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR, VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR VAR() { VAR { VAR: VAR } = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR VAR = VAR () => { VAR(VAR); VAR VAR = !!VAR; VAR { VAR: VAR, VAR } = VAR VAR.VAR(); VAR (!!VAR) { VAR(VAR, ""VAR""); } VAR { VAR( VAR ? ""VAR VAR VAR!"" : ""VAR VAR VAR!"", ""VAR"" ); VAR(VAR); } VAR(VAR); }; VAR VAR = VAR () => { VAR(VAR); VAR VAR = VAR VAR.VAR(); VAR (VAR) { VAR(""VAR VAR VAR VAR VAR."", ""VAR""); VAR(VAR); } VAR { VAR(""VAR VAR VAR VAR VAR VAR."", ""VAR""); } VAR(VAR); }; VAR VAR = VAR () => { VAR.VAR.VAR.VAR(VAR.VAR); VAR(""VAR VAR VAR VAR VAR!"", ""VAR""); VAR(VAR); VAR(() => { VAR(VAR); }, 1200); }; VAR (VAR) { VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-1 VAR:VAR-8 VAR-10 ""> <VAR /> </VAR> </VAR> </VAR> ); } VAR (!VAR) { VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR:VAR-8 VAR-10 ""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR-800 VAR:VAR-VAR-200 VAR-2""> <VAR> VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR:VAR-VAR-300 VAR-VAR-600 VAR:VAR"" > VAR VAR VAR &VAR; </VAR> </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR VAR VAR""} </VAR> </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR:VAR-VAR-300 VAR-VAR-600 VAR:VAR"" > VAR VAR VAR &VAR; </VAR> </VAR> <VAR VAR=""VAR:VAR-8 VAR-10""> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR:VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR:VAR-VAR VAR-VAR VAR-VAR-2 VAR-VAR VAR-VAR-2 VAR-VAR VAR-4 VAR:VAR-0""> <VAR VAR={VAR.VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR:VAR-1/2 VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR={VAR.VAR} VAR=""VAR"" VAR={VAR} /> <VAR VAR={VAR} VAR={VAR} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR-2 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-600 VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200 VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-600"" > {VAR ? ( <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-300"" /> ) : ( <VAR /> )} <VAR VAR=""VAR VAR:VAR VAR-VAR"">VAR VAR VAR</VAR> </VAR> <VAR VAR={() => { VAR ( !VAR( ""VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR? VAR VAR VAR VAR VAR VAR VAR!"" ) ) VAR VAR; VAR(); }} VAR={VAR} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR-2 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-600 VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200 VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-600"" > <VAR /> <VAR VAR=""VAR VAR:VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> <VAR VAR={() => { VAR ( !VAR( ""VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR? VAR VAR VAR VAR VAR VAR."" ) ) VAR VAR; VAR(); }} VAR={VAR} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR-2 VAR:VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-600 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR VAR:VAR-VAR-500 VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200 VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-600"" > <VAR /> <VAR VAR=""VAR VAR:VAR VAR-VAR"">VAR VAR VAR</VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/Appearance/index.jsx,"import { useEffect, useState } from ""react"";
import useLogo from ""../../../../hooks/useLogo"";
import usePrefersDarkMode from ""../../../../hooks/usePrefersDarkMode"";
import System from ""../../../../models/system"";
import EditingChatBubble from ""../../../EditingChatBubble"";
import AnythingLLMLight from ""../../../../media/logo/anything-llm-light.png"";
import AnythingLLMDark from ""../../../../media/logo/anything-llm-dark.png"";
import showToast from ""../../../../utils/toast"";

export default function Appearance() {
  const { logo: _initLogo } = useLogo();
  const prefersDarkMode = usePrefersDarkMode();
  const [logo, setLogo] = useState("""");
  const [hasChanges, setHasChanges] = useState(false);
  const [messages, setMessages] = useState([]);

  useEffect(() => {
    async function fetchMessages() {
      const messages = await System.getWelcomeMessages();
      setMessages(messages);
    }
    fetchMessages();
  }, []);

  useEffect(() => {
    async function setInitLogo() {
      setLogo(_initLogo || """");
    }
    setInitLogo();
  }, [_initLogo]);

  const handleFileUpload = async (event) => {
    const file = event.target.files[0];
    if (!file) return false;

    const formData = new FormData();
    formData.append(""logo"", file);
    const { success, error } = await System.uploadLogo(formData);
    if (!success) {
      console.error(""Failed to upload logo:"", error);
      showToast(`Failed to upload logo: ${error}`, ""error"");
      return;
    }

    const logoURL = await System.fetchLogo();
    setLogo(logoURL);
    showToast(""Image uploaded successfully."", ""success"");
  };

  const handleRemoveLogo = async () => {
    const { success, error } = await System.removeCustomLogo();
    if (!success) {
      console.error(""Failed to remove logo:"", error);
      showToast(`Failed to remove logo: ${error}`, ""error"");
      return;
    }

    const logoURL = await System.fetchLogo();
    setLogo(logoURL);
    showToast(""Image successfully removed."", ""success"");
  };

  const addMessage = (type) => {
    if (type === ""user"") {
      setMessages([
        ...messages,
        { user: ""Double click to edit..."", response: """" },
      ]);
    } else {
      setMessages([
        ...messages,
        { user: """", response: ""Double click to edit..."" },
      ]);
    }
  };

  const removeMessage = (index) => {
    setHasChanges(true);
    setMessages(messages.filter((_, i) => i !== index));
  };

  const handleMessageChange = (index, type, value) => {
    setHasChanges(true);
    const newMessages = [...messages];
    newMessages[index][type] = value;
    setMessages(newMessages);
  };

  const handleMessageSave = async () => {
    const { success, error } = await System.setWelcomeMessages(messages);
    if (!success) {
      showToast(`Failed to update welcome messages: ${error}`, ""error"");
      return;
    }
    showToast(""Successfully updated welcome messages."", ""success"");
    setHasChanges(false);
  };

  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Customize the appearance settings of AnythingLLM instance.
          </p>
        </div>

        <div className=""px-1 md:px-8 pb-10"">
          <div className=""mb-6"">
            <div className=""flex flex-col gap-y-2"">
              <h2 className=""leading-tight font-medium text-black dark:text-white"">
                Custom Logo
              </h2>
              <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                Change the logo that appears in the sidebar.
              </p>
            </div>
            <div className=""flex flex-col md:flex-row items-center"">
              <img
                src={logo}
                alt=""Uploaded Logo""
                className=""w-48 h-48 object-contain mr-6""
                onError={(e) =>
                  (e.target.src = prefersDarkMode
                    ? AnythingLLMLight
                    : AnythingLLMDark)
                }
              />
              <div className=""flex flex-col"">
                <div className=""mb-4"">
                  <label className=""cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"">
                    Upload Image
                    <input
                      type=""file""
                      accept=""image/*""
                      className=""hidden""
                      onChange={handleFileUpload}
                    />
                  </label>
                  <button
                    onClick={handleRemoveLogo}
                    className=""ml-4 cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                  >
                    Remove Custom Logo
                  </button>
                </div>
                <div className=""text-sm text-gray-600 dark:text-gray-300"">
                  Upload your logo. Recommended size: 800x200.
                </div>
              </div>
            </div>
          </div>
          <div className=""mb-6"">
            <div className=""flex flex-col gap-y-2"">
              <h2 className=""leading-tight font-medium text-black dark:text-white"">
                Custom Messages
              </h2>
              <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                Change the default messages that are displayed to the users.
              </p>
            </div>
            <div className=""mt-6 flex flex-col gap-y-6 bg-white dark:bg-black-900 p-4 rounded-lg"">
              {messages.map((message, index) => (
                <div key={index} className=""flex flex-col gap-y-2"">
                  {message.user && (
                    <EditingChatBubble
                      message={message}
                      index={index}
                      type=""user""
                      handleMessageChange={handleMessageChange}
                      removeMessage={removeMessage}
                    />
                  )}
                  {message.response && (
                    <EditingChatBubble
                      message={message}
                      index={index}
                      type=""response""
                      handleMessageChange={handleMessageChange}
                      removeMessage={removeMessage}
                    />
                  )}
                </div>
              ))}
              <div className=""flex gap-4 mt-4 justify-between"">
                <button
                  className=""self-end text-orange-500 hover:text-orange-700 transition""
                  onClick={() => addMessage(""response"")}
                >
                  + System Message
                </button>
                <button
                  className=""self-end text-orange-500 hover:text-orange-700 transition""
                  onClick={() => addMessage(""user"")}
                >
                  + User Message
                </button>
              </div>
            </div>
            {hasChanges && (
              <div className=""flex justify-center py-6"">
                <button
                  className=""ml-4 cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                  onClick={handleMessageSave}
                >
                  Save Messages
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR-VAR-VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR-VAR-VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR VAR() { VAR { VAR: VAR } = VAR(); VAR VAR = VAR(); VAR [VAR, VAR] = VAR(""""); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); } VAR(); }, []); VAR(() => { VAR VAR VAR() { VAR(VAR || """"); } VAR(); }, [VAR]); VAR VAR = VAR (VAR) => { VAR VAR = VAR.VAR.VAR[0]; VAR (!VAR) VAR VAR; VAR VAR = VAR VAR(); VAR.VAR(""VAR"", VAR); VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR.VAR(""VAR VAR VAR VAR:"", VAR); VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(""VAR VAR VAR."", ""VAR""); }; VAR VAR = VAR () => { VAR { VAR, VAR } = VAR VAR.VAR(); VAR (!VAR) { VAR.VAR(""VAR VAR VAR VAR:"", VAR); VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(""VAR VAR VAR."", ""VAR""); }; VAR VAR = (VAR) => { VAR (VAR === ""VAR"") { VAR([ ...VAR, { VAR: ""VAR VAR VAR VAR..."", VAR: """" }, ]); } VAR { VAR([ ...VAR, { VAR: """", VAR: ""VAR VAR VAR VAR..."" }, ]); } }; VAR VAR = (VAR) => { VAR(VAR); VAR(VAR.VAR((VAR, VAR) => VAR !== VAR)); }; VAR VAR = (VAR, VAR, VAR) => { VAR(VAR); VAR VAR = [...VAR]; VAR[VAR][VAR] = VAR; VAR(VAR); }; VAR VAR = VAR () => { VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR(`VAR VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR(""VAR VAR VAR VAR."", ""VAR""); VAR(VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-1 VAR:VAR-8 VAR-10""> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR:VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR VAR"" VAR=""VAR-48 VAR-48 VAR-VAR VAR-6"" VAR={(VAR) => (VAR.VAR.VAR = VAR ? VAR : VAR) } /> <VAR VAR=""VAR VAR-VAR""> <VAR VAR=""VAR-4""> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600""> VAR VAR <VAR VAR=""VAR"" VAR=""VAR/*"" VAR=""VAR"" VAR={VAR} /> </VAR> <VAR VAR={VAR} VAR=""VAR-4 VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300""> VAR VAR VAR. VAR VAR: 800x200. </VAR> </VAR> </VAR> </VAR> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR-6 VAR-VAR VAR:VAR-VAR-900 VAR-4 VAR-VAR""> {VAR.VAR((VAR, VAR) => ( <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-2""> {VAR.VAR && ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} VAR={VAR} /> )} {VAR.VAR && ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} VAR={VAR} /> )} </VAR> ))} <VAR VAR=""VAR VAR-4 VAR-4 VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR"" VAR={() => VAR(""VAR"")} > + VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR"" VAR={() => VAR(""VAR"")} > + VAR VAR </VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR VAR-VAR VAR-6""> <VAR VAR=""VAR-4 VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" VAR={VAR} > VAR VAR </VAR> </VAR> )} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/Appearance/index.jsx,"import { useEffect, useState } from ""react"";
import useLogo from ""../../../../hooks/useLogo"";
import usePrefersDarkMode from ""../../../../hooks/usePrefersDarkMode"";
import System from ""../../../../models/system"";
import EditingChatBubble from ""../../../EditingChatBubble"";
import AnythingLLMLight from ""../../../../media/logo/anything-llm-light.png"";
import AnythingLLMDark from ""../../../../media/logo/anything-llm-dark.png"";
import showToast from ""../../../../utils/toast"";

export default function Appearance() {
  const { logo: _initLogo } = useLogo();
  const prefersDarkMode = usePrefersDarkMode();
  const [logo, setLogo] = useState("""");
  const [hasChanges, setHasChanges] = useState(false);
  const [messages, setMessages] = useState([]);

  useEffect(() => {
    async function fetchMessages() {
      const messages = await System.getWelcomeMessages();
      setMessages(messages);
    }
    fetchMessages();
  }, []);

  useEffect(() => {
    async function setInitLogo() {
      setLogo(_initLogo || """");
    }
    setInitLogo();
  }, [_initLogo]);

  const handleFileUpload = async (event) => {
    const file = event.target.files[0];
    if (!file) return false;

    const formData = new FormData();
    formData.append(""logo"", file);
    const { success, error } = await System.uploadLogo(formData);
    if (!success) {
      console.error(""Failed to upload logo:"", error);
      showToast(`Failed to upload logo: ${error}`, ""error"");
      return;
    }

    const logoURL = await System.fetchLogo();
    setLogo(logoURL);
    showToast(""Image uploaded successfully."", ""success"");
  };

  const handleRemoveLogo = async () => {
    const { success, error } = await System.removeCustomLogo();
    if (!success) {
      console.error(""Failed to remove logo:"", error);
      showToast(`Failed to remove logo: ${error}`, ""error"");
      return;
    }

    const logoURL = await System.fetchLogo();
    setLogo(logoURL);
    showToast(""Image successfully removed."", ""success"");
  };

  const addMessage = (type) => {
    if (type === ""user"") {
      setMessages([
        ...messages,
        { user: ""Double click to edit..."", response: """" },
      ]);
    } else {
      setMessages([
        ...messages,
        { user: """", response: ""Double click to edit..."" },
      ]);
    }
  };

  const removeMessage = (index) => {
    setHasChanges(true);
    setMessages(messages.filter((_, i) => i !== index));
  };

  const handleMessageChange = (index, type, value) => {
    setHasChanges(true);
    const newMessages = [...messages];
    newMessages[index][type] = value;
    setMessages(newMessages);
  };

  const handleMessageSave = async () => {
    const { success, error } = await System.setWelcomeMessages(messages);
    if (!success) {
      showToast(`Failed to update welcome messages: ${error}`, ""error"");
      return;
    }
    showToast(""Successfully updated welcome messages."", ""success"");
    setHasChanges(false);
  };

  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Customize the appearance settings of AnythingLLM instance.
          </p>
        </div>

        <div className=""px-1 md:px-8 pb-10"">
          <div className=""mb-6"">
            <div className=""flex flex-col gap-y-2"">
              <h2 className=""leading-tight font-medium text-black dark:text-white"">
                Custom Logo
              </h2>
              <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                Change the logo that appears in the sidebar.
              </p>
            </div>
            <div className=""flex flex-col md:flex-row items-center"">
              <img
                src={logo}
                alt=""Uploaded Logo""
                className=""w-48 h-48 object-contain mr-6""
                onError={(e) =>
                  (e.target.src = prefersDarkMode
                    ? AnythingLLMLight
                    : AnythingLLMDark)
                }
              />
              <div className=""flex flex-col"">
                <div className=""mb-4"">
                  <label className=""cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"">
                    Upload Image
                    <input
                      type=""file""
                      accept=""image/*""
                      className=""hidden""
                      onChange={handleFileUpload}
                    />
                  </label>
                  <button
                    onClick={handleRemoveLogo}
                    className=""ml-4 cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                  >
                    Remove Custom Logo
                  </button>
                </div>
                <div className=""text-sm text-gray-600 dark:text-gray-300"">
                  Upload your logo. Recommended size: 800x200.
                </div>
              </div>
            </div>
          </div>
          <div className=""mb-6"">
            <div className=""flex flex-col gap-y-2"">
              <h2 className=""leading-tight font-medium text-black dark:text-white"">
                Custom Messages
              </h2>
              <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                Change the default messages that are displayed to the users.
              </p>
            </div>
            <div className=""mt-6 flex flex-col gap-y-6 bg-white dark:bg-black-900 p-4 rounded-lg"">
              {messages.map((message, index) => (
                <div key={index} className=""flex flex-col gap-y-2"">
                  {message.user && (
                    <EditingChatBubble
                      message={message}
                      index={index}
                      type=""user""
                      handleMessageChange={handleMessageChange}
                      removeMessage={removeMessage}
                    />
                  )}
                  {message.response && (
                    <EditingChatBubble
                      message={message}
                      index={index}
                      type=""response""
                      handleMessageChange={handleMessageChange}
                      removeMessage={removeMessage}
                    />
                  )}
                </div>
              ))}
              <div className=""flex gap-4 mt-4 justify-between"">
                <button
                  className=""self-end text-orange-500 hover:text-orange-700 transition""
                  onClick={() => addMessage(""response"")}
                >
                  + System Message
                </button>
                <button
                  className=""self-end text-orange-500 hover:text-orange-700 transition""
                  onClick={() => addMessage(""user"")}
                >
                  + User Message
                </button>
              </div>
            </div>
            {hasChanges && (
              <div className=""flex justify-center py-6"">
                <button
                  className=""ml-4 cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                  onClick={handleMessageSave}
                >
                  Save Messages
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR-VAR-VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR-VAR-VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR VAR() { VAR { VAR: VAR } = VAR(); VAR VAR = VAR(); VAR [VAR, VAR] = VAR(""""); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); } VAR(); }, []); VAR(() => { VAR VAR VAR() { VAR(VAR || """"); } VAR(); }, [VAR]); VAR VAR = VAR (VAR) => { VAR VAR = VAR.VAR.VAR[0]; VAR (!VAR) VAR VAR; VAR VAR = VAR VAR(); VAR.VAR(""VAR"", VAR); VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR.VAR(""VAR VAR VAR VAR:"", VAR); VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(""VAR VAR VAR."", ""VAR""); }; VAR VAR = VAR () => { VAR { VAR, VAR } = VAR VAR.VAR(); VAR (!VAR) { VAR.VAR(""VAR VAR VAR VAR:"", VAR); VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(""VAR VAR VAR."", ""VAR""); }; VAR VAR = (VAR) => { VAR (VAR === ""VAR"") { VAR([ ...VAR, { VAR: ""VAR VAR VAR VAR..."", VAR: """" }, ]); } VAR { VAR([ ...VAR, { VAR: """", VAR: ""VAR VAR VAR VAR..."" }, ]); } }; VAR VAR = (VAR) => { VAR(VAR); VAR(VAR.VAR((VAR, VAR) => VAR !== VAR)); }; VAR VAR = (VAR, VAR, VAR) => { VAR(VAR); VAR VAR = [...VAR]; VAR[VAR][VAR] = VAR; VAR(VAR); }; VAR VAR = VAR () => { VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR(`VAR VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR(""VAR VAR VAR VAR."", ""VAR""); VAR(VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-1 VAR:VAR-8 VAR-10""> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR:VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR VAR"" VAR=""VAR-48 VAR-48 VAR-VAR VAR-6"" VAR={(VAR) => (VAR.VAR.VAR = VAR ? VAR : VAR) } /> <VAR VAR=""VAR VAR-VAR""> <VAR VAR=""VAR-4""> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600""> VAR VAR <VAR VAR=""VAR"" VAR=""VAR/*"" VAR=""VAR"" VAR={VAR} /> </VAR> <VAR VAR={VAR} VAR=""VAR-4 VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300""> VAR VAR VAR. VAR VAR: 800x200. </VAR> </VAR> </VAR> </VAR> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR-6 VAR-VAR VAR:VAR-VAR-900 VAR-4 VAR-VAR""> {VAR.VAR((VAR, VAR) => ( <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-2""> {VAR.VAR && ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} VAR={VAR} /> )} {VAR.VAR && ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} VAR={VAR} /> )} </VAR> ))} <VAR VAR=""VAR VAR-4 VAR-4 VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR"" VAR={() => VAR(""VAR"")} > + VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR"" VAR={() => VAR(""VAR"")} > + VAR VAR </VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR VAR-VAR VAR-6""> <VAR VAR=""VAR-4 VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" VAR={VAR} > VAR VAR </VAR> </VAR> )} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/ExportImport/index.jsx,"import React, { useState, useEffect, useRef } from ""react"";
import { AlertCircle, CheckCircle, Download, Loader, X } from ""react-feather"";
import System from ""../../../../models/system"";
import { API_BASE } from ""../../../../utils/constants"";
import paths from ""../../../../utils/paths"";

const noop = () => false;
export default function ExportOrImportData({ hideModal = noop }) {
  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex flex-col items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Have multiple AnythingLLM instances or simply want to backup or
            re-import data from another instance? You can do so here.
            <br />
            <i>
              This will not automatically sync your vector database embeddings!
            </i>
          </p>
          <a
            className=""text-gray-400 dark:text-stone-500 my-2 text-xs""
            href={paths.exports()}
            target=""_blank""
          >
            View previous exports &rarr;
          </a>
        </div>
        <div className=""px-6 pb-6 space-y-6 flex h-full w-full"">
          <div className=""flex flex-col w-full gap-y-2"">
            <ExportData />
            <div className=""h-[1px] bg-slate-400 dark:bg-stone-600 w-full my-2"" />
            <ImportData />
          </div>
        </div>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}

function ExportData() {
  const [loading, setLoading] = useState(false);
  const [result, setResult] = useState(null);
  const [error, setError] = useState(null);
  const exportData = async function () {
    setLoading(true);
    const { filename, error } = await System.dataExport();
    setLoading(false);

    if (!filename) {
      setError(error);
    } else {
      setResult(filename);
      const link = document.createElement(""a"");
      link.href = `${API_BASE}/system/data-exports/${filename}`;
      link.target = ""_blank"";
      document.body.appendChild(link);
      link.click();
    }
  };

  if (loading) {
    return (
      <div className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-gray-200 rounded-lg dark:border-gray-600 bg-slate-200 group animate-pulse"">
        <p className=""text-gray-800 text-lg"">Exporting....</p>
        <p className=""text-gray-800 text-sm italic"">
          A download will start automatically.
        </p>
      </div>
    );
  }

  if (error) {
    return (
      <button
        type=""button""
        onClick={() => setError(null)}
        className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-red-200 rounded-lg dark:border-red-600 bg-red-200 group""
      >
        <p className=""text-red-800 text-sm"">{error}</p>
      </button>
    );
  }

  if (!!result) {
    return (
      <a
        target=""_blank""
        href={`${API_BASE}/system/data-exports/${result}`}
        className=""w-full flex gap-1 justify-center items-center px-6 py-4 border border-green-200 rounded-lg dark:border-green-600 bg-green-200 group""
      >
        <Download className=""h-4 w-4 text-green-800 "" />
        <p className=""text-green-800 text-sm"">Download Data Export</p>
      </a>
    );
  }

  return (
    <button
      onClick={exportData}
      type=""button""
      className=""w-full flex  justify-center px-6 py-4 border border-gray-200 rounded-lg dark:border-gray-600 hover:bg-slate-200 group""
    >
      <p className=""text-gray-800 dark:text-stone-200 group-hover:text-gray-800 text-lg"">
        Export AnythingLLM data
      </p>
    </button>
  );
}

function ImportData() {
  const inputRef = useRef(null);
  const [loading, setLoading] = useState(false);
  const [file, setFile] = useState(null);
  const [result, setResult] = useState(null);
  const [error, setError] = useState(null);
  const startInput = () => inputRef?.current?.click();
  const handleUpload = async (e) => {
    e.preventDefault();
    setError(null);
    setFile(null);
    setResult(null);

    const file = e.target.files?.[0];
    if (!file) {
      setError(""Invalid file upload"");
      return false;
    }

    setFile(file);
    setLoading(true);
    const formData = new FormData();
    formData.append(""file"", file, file.name);
    const { success, error } = await System.importData(formData);
    if (!success) {
      setError(error);
    } else {
      setResult(true);
    }

    setLoading(false);
    setFile(null);
  };

  if (loading) {
    return (
      <div className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-gray-200 rounded-lg dark:border-gray-600 bg-slate-200 group animate-pulse"">
        <p className=""text-gray-800 text-lg"">Importing....</p>
        <p className=""text-gray-800 text-sm italic"">{file.name}</p>
      </div>
    );
  }

  if (error) {
    return (
      <button
        type=""button""
        onClick={() => setError(null)}
        className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-red-200 rounded-lg dark:border-red-600 bg-red-200 group""
      >
        <p className=""text-red-800 text-sm"">{error}</p>
      </button>
    );
  }

  if (!!result) {
    return (
      <div className=""w-full flex flex-col gap-y-1 gap-1 justify-center items-center px-6 py-4 border border-green-200 rounded-lg dark:border-green-600 bg-green-200 group"">
        <div className=""flex items-center gap-x-1"">
          <CheckCircle className=""h-4 w-4 text-green-800 "" />
          <p className=""text-green-800 text-sm"">
            Import was completed successfully
          </p>
        </div>
        <p className=""text-green-800 text-xs italic"">
          please reload the page to see the results of the import.
        </p>
      </div>
    );
  }

  return (
    <>
      <input
        ref={inputRef}
        onChange={handleUpload}
        name=""import""
        type=""file""
        multiple=""false""
        accept="".zip""
        hidden={true}
      />
      <button
        type=""button""
        onClick={startInput}
        className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-gray-200 rounded-lg dark:border-gray-600 hover:bg-slate-200 group""
      >
        <p className=""text-gray-800 dark:text-stone-200 group-hover:text-gray-800 text-lg"">
          Import AnythingLLM data
        </p>
        <p className=""text-gray-800 dark:text-stone-200 group-hover:text-gray-800 text-xs italic"">
          this must be an export from an AnythingLLM instance.
        </p>
      </button>
    </>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR } VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR }) { VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR-VAR VAR VAR VAR VAR? VAR VAR VAR VAR VAR. <VAR /> <VAR> VAR VAR VAR VAR VAR VAR VAR VAR VAR! </VAR> </VAR> <VAR VAR=""VAR-VAR-400 VAR:VAR-VAR-500 VAR-2 VAR-VAR"" VAR={VAR.VAR()} VAR=""VAR"" > VAR VAR VAR &VAR; </VAR> </VAR> <VAR VAR=""VAR-6 VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-2""> <VAR /> <VAR VAR=""VAR-[1px] VAR-VAR-400 VAR:VAR-VAR-600 VAR-VAR VAR-2"" /> <VAR /> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR VAR () { VAR(VAR); VAR { VAR, VAR } = VAR VAR.VAR(); VAR(VAR); VAR (!VAR) { VAR(VAR); } VAR { VAR(VAR); VAR VAR = VAR.VAR(""VAR""); VAR.VAR = `${VAR}/VAR/VAR-VAR/${VAR}`; VAR.VAR = ""VAR""; VAR.VAR.VAR(VAR); VAR.VAR(); } }; VAR (VAR) { VAR ( <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR-VAR"">VAR....</VAR> <VAR VAR=""VAR-VAR-800 VAR-VAR VAR""> VAR VAR VAR VAR VAR. </VAR> </VAR> ); } VAR (VAR) { VAR ( <VAR VAR=""VAR"" VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR"" > <VAR VAR=""VAR-VAR-800 VAR-VAR"">{VAR}</VAR> </VAR> ); } VAR (!!VAR) { VAR ( <VAR VAR=""VAR"" VAR={`${VAR}/VAR/VAR-VAR/${VAR}`} VAR=""VAR-VAR VAR VAR-1 VAR-VAR VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-800 "" /> <VAR VAR=""VAR-VAR-800 VAR-VAR"">VAR VAR VAR</VAR> </VAR> ); } VAR ( <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR VAR VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR:VAR-VAR-200 VAR"" > <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR:VAR-VAR-800 VAR-VAR""> VAR VAR VAR </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => VAR?.VAR?.VAR(); VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR(VAR); VAR(VAR); VAR VAR = VAR.VAR.VAR?.[0]; VAR (!VAR) { VAR(""VAR VAR VAR""); VAR VAR; } VAR(VAR); VAR(VAR); VAR VAR = VAR VAR(); VAR.VAR(""VAR"", VAR, VAR.VAR); VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR(VAR); } VAR { VAR(VAR); } VAR(VAR); VAR(VAR); }; VAR (VAR) { VAR ( <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR-VAR"">VAR....</VAR> <VAR VAR=""VAR-VAR-800 VAR-VAR VAR"">{VAR.VAR}</VAR> </VAR> ); } VAR (VAR) { VAR ( <VAR VAR=""VAR"" VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR"" > <VAR VAR=""VAR-VAR-800 VAR-VAR"">{VAR}</VAR> </VAR> ); } VAR (!!VAR) { VAR ( <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-1 VAR-VAR VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-4 VAR-4 VAR-VAR-800 "" /> <VAR VAR=""VAR-VAR-800 VAR-VAR""> VAR VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR-800 VAR-VAR VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> ); } VAR ( <> <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR"" VAR=""VAR"" VAR="".VAR"" VAR={VAR} /> <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR:VAR-VAR-200 VAR"" > <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR:VAR-VAR-800 VAR-VAR""> VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR:VAR-VAR-800 VAR-VAR VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/ExportImport/index.jsx,"import React, { useState, useEffect, useRef } from ""react"";
import { AlertCircle, CheckCircle, Download, Loader, X } from ""react-feather"";
import System from ""../../../../models/system"";
import { API_BASE } from ""../../../../utils/constants"";
import paths from ""../../../../utils/paths"";

const noop = () => false;
export default function ExportOrImportData({ hideModal = noop }) {
  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex flex-col items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Have multiple AnythingLLM instances or simply want to backup or
            re-import data from another instance? You can do so here.
            <br />
            <i>
              This will not automatically sync your vector database embeddings!
            </i>
          </p>
          <a
            className=""text-gray-400 dark:text-stone-500 my-2 text-xs""
            href={paths.exports()}
            target=""_blank""
          >
            View previous exports &rarr;
          </a>
        </div>
        <div className=""px-6 pb-6 space-y-6 flex h-full w-full"">
          <div className=""flex flex-col w-full gap-y-2"">
            <ExportData />
            <div className=""h-[1px] bg-slate-400 dark:bg-stone-600 w-full my-2"" />
            <ImportData />
          </div>
        </div>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}

function ExportData() {
  const [loading, setLoading] = useState(false);
  const [result, setResult] = useState(null);
  const [error, setError] = useState(null);
  const exportData = async function () {
    setLoading(true);
    const { filename, error } = await System.dataExport();
    setLoading(false);

    if (!filename) {
      setError(error);
    } else {
      setResult(filename);
      const link = document.createElement(""a"");
      link.href = `${API_BASE}/system/data-exports/${filename}`;
      link.target = ""_blank"";
      document.body.appendChild(link);
      link.click();
    }
  };

  if (loading) {
    return (
      <div className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-gray-200 rounded-lg dark:border-gray-600 bg-slate-200 group animate-pulse"">
        <p className=""text-gray-800 text-lg"">Exporting....</p>
        <p className=""text-gray-800 text-sm italic"">
          A download will start automatically.
        </p>
      </div>
    );
  }

  if (error) {
    return (
      <button
        type=""button""
        onClick={() => setError(null)}
        className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-red-200 rounded-lg dark:border-red-600 bg-red-200 group""
      >
        <p className=""text-red-800 text-sm"">{error}</p>
      </button>
    );
  }

  if (!!result) {
    return (
      <a
        target=""_blank""
        href={`${API_BASE}/system/data-exports/${result}`}
        className=""w-full flex gap-1 justify-center items-center px-6 py-4 border border-green-200 rounded-lg dark:border-green-600 bg-green-200 group""
      >
        <Download className=""h-4 w-4 text-green-800 "" />
        <p className=""text-green-800 text-sm"">Download Data Export</p>
      </a>
    );
  }

  return (
    <button
      onClick={exportData}
      type=""button""
      className=""w-full flex  justify-center px-6 py-4 border border-gray-200 rounded-lg dark:border-gray-600 hover:bg-slate-200 group""
    >
      <p className=""text-gray-800 dark:text-stone-200 group-hover:text-gray-800 text-lg"">
        Export AnythingLLM data
      </p>
    </button>
  );
}

function ImportData() {
  const inputRef = useRef(null);
  const [loading, setLoading] = useState(false);
  const [file, setFile] = useState(null);
  const [result, setResult] = useState(null);
  const [error, setError] = useState(null);
  const startInput = () => inputRef?.current?.click();
  const handleUpload = async (e) => {
    e.preventDefault();
    setError(null);
    setFile(null);
    setResult(null);

    const file = e.target.files?.[0];
    if (!file) {
      setError(""Invalid file upload"");
      return false;
    }

    setFile(file);
    setLoading(true);
    const formData = new FormData();
    formData.append(""file"", file, file.name);
    const { success, error } = await System.importData(formData);
    if (!success) {
      setError(error);
    } else {
      setResult(true);
    }

    setLoading(false);
    setFile(null);
  };

  if (loading) {
    return (
      <div className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-gray-200 rounded-lg dark:border-gray-600 bg-slate-200 group animate-pulse"">
        <p className=""text-gray-800 text-lg"">Importing....</p>
        <p className=""text-gray-800 text-sm italic"">{file.name}</p>
      </div>
    );
  }

  if (error) {
    return (
      <button
        type=""button""
        onClick={() => setError(null)}
        className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-red-200 rounded-lg dark:border-red-600 bg-red-200 group""
      >
        <p className=""text-red-800 text-sm"">{error}</p>
      </button>
    );
  }

  if (!!result) {
    return (
      <div className=""w-full flex flex-col gap-y-1 gap-1 justify-center items-center px-6 py-4 border border-green-200 rounded-lg dark:border-green-600 bg-green-200 group"">
        <div className=""flex items-center gap-x-1"">
          <CheckCircle className=""h-4 w-4 text-green-800 "" />
          <p className=""text-green-800 text-sm"">
            Import was completed successfully
          </p>
        </div>
        <p className=""text-green-800 text-xs italic"">
          please reload the page to see the results of the import.
        </p>
      </div>
    );
  }

  return (
    <>
      <input
        ref={inputRef}
        onChange={handleUpload}
        name=""import""
        type=""file""
        multiple=""false""
        accept="".zip""
        hidden={true}
      />
      <button
        type=""button""
        onClick={startInput}
        className=""w-full flex flex-col gap-y-1 items-center px-6 py-4 border border-gray-200 rounded-lg dark:border-gray-600 hover:bg-slate-200 group""
      >
        <p className=""text-gray-800 dark:text-stone-200 group-hover:text-gray-800 text-lg"">
          Import AnythingLLM data
        </p>
        <p className=""text-gray-800 dark:text-stone-200 group-hover:text-gray-800 text-xs italic"">
          this must be an export from an AnythingLLM instance.
        </p>
      </button>
    </>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR } VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR }) { VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR-VAR VAR VAR VAR VAR? VAR VAR VAR VAR VAR. <VAR /> <VAR> VAR VAR VAR VAR VAR VAR VAR VAR VAR! </VAR> </VAR> <VAR VAR=""VAR-VAR-400 VAR:VAR-VAR-500 VAR-2 VAR-VAR"" VAR={VAR.VAR()} VAR=""VAR"" > VAR VAR VAR &VAR; </VAR> </VAR> <VAR VAR=""VAR-6 VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-2""> <VAR /> <VAR VAR=""VAR-[1px] VAR-VAR-400 VAR:VAR-VAR-600 VAR-VAR VAR-2"" /> <VAR /> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR VAR () { VAR(VAR); VAR { VAR, VAR } = VAR VAR.VAR(); VAR(VAR); VAR (!VAR) { VAR(VAR); } VAR { VAR(VAR); VAR VAR = VAR.VAR(""VAR""); VAR.VAR = `${VAR}/VAR/VAR-VAR/${VAR}`; VAR.VAR = ""VAR""; VAR.VAR.VAR(VAR); VAR.VAR(); } }; VAR (VAR) { VAR ( <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR-VAR"">VAR....</VAR> <VAR VAR=""VAR-VAR-800 VAR-VAR VAR""> VAR VAR VAR VAR VAR. </VAR> </VAR> ); } VAR (VAR) { VAR ( <VAR VAR=""VAR"" VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR"" > <VAR VAR=""VAR-VAR-800 VAR-VAR"">{VAR}</VAR> </VAR> ); } VAR (!!VAR) { VAR ( <VAR VAR=""VAR"" VAR={`${VAR}/VAR/VAR-VAR/${VAR}`} VAR=""VAR-VAR VAR VAR-1 VAR-VAR VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-800 "" /> <VAR VAR=""VAR-VAR-800 VAR-VAR"">VAR VAR VAR</VAR> </VAR> ); } VAR ( <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR VAR VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR:VAR-VAR-200 VAR"" > <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR:VAR-VAR-800 VAR-VAR""> VAR VAR VAR </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => VAR?.VAR?.VAR(); VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR(VAR); VAR(VAR); VAR VAR = VAR.VAR.VAR?.[0]; VAR (!VAR) { VAR(""VAR VAR VAR""); VAR VAR; } VAR(VAR); VAR(VAR); VAR VAR = VAR VAR(); VAR.VAR(""VAR"", VAR, VAR.VAR); VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR(VAR); } VAR { VAR(VAR); } VAR(VAR); VAR(VAR); }; VAR (VAR) { VAR ( <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR-VAR"">VAR....</VAR> <VAR VAR=""VAR-VAR-800 VAR-VAR VAR"">{VAR.VAR}</VAR> </VAR> ); } VAR (VAR) { VAR ( <VAR VAR=""VAR"" VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR"" > <VAR VAR=""VAR-VAR-800 VAR-VAR"">{VAR}</VAR> </VAR> ); } VAR (!!VAR) { VAR ( <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-1 VAR-VAR VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR-VAR-200 VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-4 VAR-4 VAR-VAR-800 "" /> <VAR VAR=""VAR-VAR-800 VAR-VAR""> VAR VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR-800 VAR-VAR VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> ); } VAR ( <> <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR"" VAR=""VAR"" VAR="".VAR"" VAR={VAR} /> <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-6 VAR-4 VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600 VAR:VAR-VAR-200 VAR"" > <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR:VAR-VAR-800 VAR-VAR""> VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR:VAR-VAR-800 VAR-VAR VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/LLMSelection/index.jsx,"import React, { useState } from ""react"";
import System from ""../../../../models/system"";
import OpenAiLogo from ""../../../../media/llmprovider/openai.png"";
import AzureOpenAiLogo from ""../../../../media/llmprovider/azure.png"";
import AnthropicLogo from ""../../../../media/llmprovider/anthropic.png"";
import showToast from ""../../../../utils/toast"";

const noop = () => false;
export default function LLMSelection({
  hideModal = noop,
  user,
  settings = {},
}) {
  const [hasChanges, setHasChanges] = useState(false);
  const [llmChoice, setLLMChoice] = useState(settings?.LLMProvider || ""openai"");
  const [saving, setSaving] = useState(false);
  const canDebug = settings.MultiUserMode
    ? settings?.CanDebug && user?.role === ""admin""
    : settings?.CanDebug;

  function updateLLMChoice(selection) {
    if (!canDebug || selection === llmChoice) return false;
    setHasChanges(true);
    setLLMChoice(selection);
  }

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { error } = await System.updateSystem(data);
    if (error) {
      showToast(`Failed to save LLM settings: ${error}`, ""error"");
    } else {
      showToast(""LLM settings saved successfully."", ""success"");
    }
    setSaving(false);
    setHasChanges(!!error ? true : false);
  };
  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            These are the credentials and settings for your preferred LLM chat &
            embedding provider. Its important these keys are current and correct
            or else AnythingLLM will not function properly.
          </p>
        </div>

        <form onSubmit={handleSubmit} onChange={() => setHasChanges(true)}>
          <div className=""px-6 space-y-6 flex h-full w-full"">
            <div className=""w-full flex flex-col gap-y-4"">
              <p className=""block text-sm font-medium text-gray-800 dark:text-slate-200"">
                LLM providers
              </p>
              <div className=""w-full flex overflow-x-scroll gap-x-4"">
                <input hidden={true} name=""LLMProvider"" value={llmChoice} />
                <LLMProviderOption
                  name=""OpenAI""
                  value=""openai""
                  link=""openai.com""
                  description=""The standard option for most non-commercial use. Provides both chat and embedding.""
                  checked={llmChoice === ""openai""}
                  image={OpenAiLogo}
                  onClick={updateLLMChoice}
                />
                <LLMProviderOption
                  name=""Azure OpenAi""
                  value=""azure""
                  link=""azure.microsoft.com""
                  description=""The enterprise option of OpenAI hosted on Azure services. Provides both chat and embedding.""
                  checked={llmChoice === ""azure""}
                  image={AzureOpenAiLogo}
                  onClick={updateLLMChoice}
                />
                <LLMProviderOption
                  name=""Anthropic Claude 2""
                  value=""anthropic-claude-2""
                  link=""anthropic.com""
                  description=""[COMING SOON] A friendly AI Assistant hosted by Anthropic. Provides chat services only!""
                  checked={llmChoice === ""anthropic-claude-2""}
                  image={AnthropicLogo}
                />
              </div>
              {llmChoice === ""openai"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      API Key
                    </label>
                    <input
                      type=""text""
                      name=""OpenAiKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""OpenAI API Key""
                      defaultValue={settings?.OpenAiKey ? ""*"".repeat(20) : """"}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Chat Model Selection
                    </label>
                    <select
                      disabled={!canDebug}
                      name=""OpenAiModelPref""
                      defaultValue={settings?.OpenAiModelPref}
                      required={true}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-stone-700 dark:border-slate-200 dark:placeholder-stone-500 dark:text-slate-200""
                    >
                      {[
                        ""gpt-3.5-turbo"",
                        ""gpt-3.5-turbo-0613"",
                        ""gpt-3.5-turbo-16k"",
                        ""gpt-4"",
                        ""gpt-4-0613"",
                        ""gpt-4-32k"",
                        ""gpt-4-32k-0613"",
                      ].map((model) => {
                        return (
                          <option key={model} value={model}>
                            {model}
                          </option>
                        );
                      })}
                    </select>
                  </div>
                </>
              )}

              {llmChoice === ""azure"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Azure Service Endpoint
                    </label>
                    <input
                      type=""url""
                      name=""AzureOpenAiEndpoint""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""https://my-azure.openai.azure.com""
                      defaultValue={settings?.AzureOpenAiEndpoint}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      API Key
                    </label>
                    <input
                      type=""password""
                      name=""AzureOpenAiKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""Azure OpenAI API Key""
                      defaultValue={
                        settings?.AzureOpenAiKey ? ""*"".repeat(20) : """"
                      }
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Chat Model Deployment Name
                    </label>
                    <input
                      type=""text""
                      name=""AzureOpenAiModelPref""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""Azure OpenAI chat model deployment name""
                      defaultValue={settings?.AzureOpenAiModelPref}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Embedding Model Deployment Name
                    </label>
                    <input
                      type=""text""
                      name=""AzureOpenAiEmbeddingModelPref""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""Azure OpenAI embedding model deployment name""
                      defaultValue={settings?.AzureOpenAiEmbeddingModelPref}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}

              {llmChoice === ""anthropic-claude-2"" && (
                <div className=""w-full h-40 items-center justify-center flex"">
                  <p className=""text-gray-800 dark:text-slate-400"">
                    This provider is unavailable and cannot be used in
                    AnythingLLM currently.
                  </p>
                </div>
              )}
            </div>
          </div>
          <div className=""w-full p-4"">
            <button
              hidden={!hasChanges}
              disabled={saving}
              type=""submit""
              className=""w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
            >
              {saving ? ""Saving..."" : ""Save changes""}
            </button>
          </div>
        </form>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}

const LLMProviderOption = ({
  name,
  link,
  description,
  value,
  image,
  checked = false,
  onClick,
}) => {
  return (
    <div onClick={() => onClick(value)}>
      <input
        type=""checkbox""
        value={value}
        className=""peer hidden""
        checked={checked}
        readOnly={true}
        formNoValidate={true}
      />
      <label className=""transition-all duration-300 inline-flex h-full w-60 cursor-pointer items-center justify-between rounded-lg border border-gray-200 bg-white p-5 text-gray-500 hover:bg-gray-50 hover:text-gray-600 peer-checked:border-blue-600 peer-checked:bg-blue-50 peer-checked:dark:bg-stone-800 peer-checked:text-gray-600 dark:border-slate-200 dark:bg-stone-800 dark:text-slate-400 dark:hover:bg-stone-700 dark:hover:text-slate-300 dark:peer-checked:text-slate-300"">
        <div className=""block"">
          <img src={image} alt={name} className=""mb-2 h-10 w-10 rounded-full"" />
          <div className=""w-full text-lg font-semibold"">{name}</div>
          <div className=""flex w-full flex-col gap-y-1 text-sm"">
            <p className=""text-xs text-slate-400"">{link}</p>
            {description}
          </div>
        </div>
      </label>
    </div>
  );
};",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR, VAR = {}, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR?.VAR || ""VAR""); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR.VAR ? VAR?.VAR && VAR?.VAR === ""VAR"" : VAR?.VAR; VAR VAR(VAR) { VAR (!VAR || VAR === VAR) VAR VAR; VAR(VAR); VAR(VAR); } VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR } = VAR VAR.VAR(VAR); VAR (VAR) { VAR(`VAR VAR VAR VAR VAR: ${VAR}`, ""VAR""); } VAR { VAR(""VAR VAR VAR VAR."", ""VAR""); } VAR(VAR); VAR(!!VAR ? VAR : VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR & VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR={VAR} VAR={() => VAR(VAR)}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR VAR-VAR-VAR VAR-VAR-4""> <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR-VAR VAR. VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR VAR"" VAR=""VAR"" VAR=""VAR.VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR VAR 2"" VAR=""VAR-VAR-2"" VAR=""VAR.VAR"" VAR=""[VAR VAR] VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR!"" VAR={VAR === ""VAR-VAR-2""} VAR={VAR} /> </VAR> {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR"" VAR={VAR?.VAR ? ""*"".VAR(20) : """"} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR={!VAR} VAR=""VAR"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR VAR-VAR VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-700 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" > {[ ""VAR-3.5-VAR"", ""VAR-3.5-VAR-0613"", ""VAR-3.5-VAR-16k"", ""VAR-4"", ""VAR-4-0613"", ""VAR-4-32k"", ""VAR-4-32k-0613"", ].VAR((VAR) => { VAR ( <VAR VAR={VAR} VAR={VAR}> {VAR} </VAR> ); })} </VAR> </VAR> </> )} {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR: VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR VAR"" VAR={ VAR?.VAR ? ""*"".VAR(20) : """" } VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR VAR VAR VAR"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR VAR VAR VAR"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} {VAR === ""VAR-VAR-2"" && ( <VAR VAR=""VAR-VAR VAR-40 VAR-VAR VAR-VAR VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> )} </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-4""> <VAR VAR={!VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } VAR VAR = ({ VAR, VAR, VAR, VAR, VAR, VAR = VAR, VAR, }) => { VAR ( <VAR VAR={() => VAR(VAR)}> <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR VAR"" VAR={VAR} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR VAR-60 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-5 VAR-VAR-500 VAR:VAR-VAR-50 VAR:VAR-VAR-600 VAR-VAR:VAR-VAR-600 VAR-VAR:VAR-VAR-50 VAR-VAR:VAR:VAR-VAR-800 VAR-VAR:VAR-VAR-600 VAR:VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-400 VAR:VAR:VAR-VAR-700 VAR:VAR:VAR-VAR-300 VAR:VAR-VAR:VAR-VAR-300""> <VAR VAR=""VAR""> <VAR VAR={VAR} VAR={VAR} VAR=""VAR-2 VAR-10 VAR-10 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR"">{VAR}</VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-400"">{VAR}</VAR> {VAR} </VAR> </VAR> </VAR> </VAR> ); }; ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/LLMSelection/index.jsx,"import React, { useState } from ""react"";
import System from ""../../../../models/system"";
import OpenAiLogo from ""../../../../media/llmprovider/openai.png"";
import AzureOpenAiLogo from ""../../../../media/llmprovider/azure.png"";
import AnthropicLogo from ""../../../../media/llmprovider/anthropic.png"";
import showToast from ""../../../../utils/toast"";

const noop = () => false;
export default function LLMSelection({
  hideModal = noop,
  user,
  settings = {},
}) {
  const [hasChanges, setHasChanges] = useState(false);
  const [llmChoice, setLLMChoice] = useState(settings?.LLMProvider || ""openai"");
  const [saving, setSaving] = useState(false);
  const canDebug = settings.MultiUserMode
    ? settings?.CanDebug && user?.role === ""admin""
    : settings?.CanDebug;

  function updateLLMChoice(selection) {
    if (!canDebug || selection === llmChoice) return false;
    setHasChanges(true);
    setLLMChoice(selection);
  }

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { error } = await System.updateSystem(data);
    if (error) {
      showToast(`Failed to save LLM settings: ${error}`, ""error"");
    } else {
      showToast(""LLM settings saved successfully."", ""success"");
    }
    setSaving(false);
    setHasChanges(!!error ? true : false);
  };
  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            These are the credentials and settings for your preferred LLM chat &
            embedding provider. Its important these keys are current and correct
            or else AnythingLLM will not function properly.
          </p>
        </div>

        <form onSubmit={handleSubmit} onChange={() => setHasChanges(true)}>
          <div className=""px-6 space-y-6 flex h-full w-full"">
            <div className=""w-full flex flex-col gap-y-4"">
              <p className=""block text-sm font-medium text-gray-800 dark:text-slate-200"">
                LLM providers
              </p>
              <div className=""w-full flex overflow-x-scroll gap-x-4"">
                <input hidden={true} name=""LLMProvider"" value={llmChoice} />
                <LLMProviderOption
                  name=""OpenAI""
                  value=""openai""
                  link=""openai.com""
                  description=""The standard option for most non-commercial use. Provides both chat and embedding.""
                  checked={llmChoice === ""openai""}
                  image={OpenAiLogo}
                  onClick={updateLLMChoice}
                />
                <LLMProviderOption
                  name=""Azure OpenAi""
                  value=""azure""
                  link=""azure.microsoft.com""
                  description=""The enterprise option of OpenAI hosted on Azure services. Provides both chat and embedding.""
                  checked={llmChoice === ""azure""}
                  image={AzureOpenAiLogo}
                  onClick={updateLLMChoice}
                />
                <LLMProviderOption
                  name=""Anthropic Claude 2""
                  value=""anthropic-claude-2""
                  link=""anthropic.com""
                  description=""[COMING SOON] A friendly AI Assistant hosted by Anthropic. Provides chat services only!""
                  checked={llmChoice === ""anthropic-claude-2""}
                  image={AnthropicLogo}
                />
              </div>
              {llmChoice === ""openai"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      API Key
                    </label>
                    <input
                      type=""text""
                      name=""OpenAiKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""OpenAI API Key""
                      defaultValue={settings?.OpenAiKey ? ""*"".repeat(20) : """"}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Chat Model Selection
                    </label>
                    <select
                      disabled={!canDebug}
                      name=""OpenAiModelPref""
                      defaultValue={settings?.OpenAiModelPref}
                      required={true}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-stone-700 dark:border-slate-200 dark:placeholder-stone-500 dark:text-slate-200""
                    >
                      {[
                        ""gpt-3.5-turbo"",
                        ""gpt-3.5-turbo-0613"",
                        ""gpt-3.5-turbo-16k"",
                        ""gpt-4"",
                        ""gpt-4-0613"",
                        ""gpt-4-32k"",
                        ""gpt-4-32k-0613"",
                      ].map((model) => {
                        return (
                          <option key={model} value={model}>
                            {model}
                          </option>
                        );
                      })}
                    </select>
                  </div>
                </>
              )}

              {llmChoice === ""azure"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Azure Service Endpoint
                    </label>
                    <input
                      type=""url""
                      name=""AzureOpenAiEndpoint""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""https://my-azure.openai.azure.com""
                      defaultValue={settings?.AzureOpenAiEndpoint}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      API Key
                    </label>
                    <input
                      type=""password""
                      name=""AzureOpenAiKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""Azure OpenAI API Key""
                      defaultValue={
                        settings?.AzureOpenAiKey ? ""*"".repeat(20) : """"
                      }
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Chat Model Deployment Name
                    </label>
                    <input
                      type=""text""
                      name=""AzureOpenAiModelPref""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""Azure OpenAI chat model deployment name""
                      defaultValue={settings?.AzureOpenAiModelPref}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Embedding Model Deployment Name
                    </label>
                    <input
                      type=""text""
                      name=""AzureOpenAiEmbeddingModelPref""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""Azure OpenAI embedding model deployment name""
                      defaultValue={settings?.AzureOpenAiEmbeddingModelPref}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}

              {llmChoice === ""anthropic-claude-2"" && (
                <div className=""w-full h-40 items-center justify-center flex"">
                  <p className=""text-gray-800 dark:text-slate-400"">
                    This provider is unavailable and cannot be used in
                    AnythingLLM currently.
                  </p>
                </div>
              )}
            </div>
          </div>
          <div className=""w-full p-4"">
            <button
              hidden={!hasChanges}
              disabled={saving}
              type=""submit""
              className=""w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
            >
              {saving ? ""Saving..."" : ""Save changes""}
            </button>
          </div>
        </form>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}

const LLMProviderOption = ({
  name,
  link,
  description,
  value,
  image,
  checked = false,
  onClick,
}) => {
  return (
    <div onClick={() => onClick(value)}>
      <input
        type=""checkbox""
        value={value}
        className=""peer hidden""
        checked={checked}
        readOnly={true}
        formNoValidate={true}
      />
      <label className=""transition-all duration-300 inline-flex h-full w-60 cursor-pointer items-center justify-between rounded-lg border border-gray-200 bg-white p-5 text-gray-500 hover:bg-gray-50 hover:text-gray-600 peer-checked:border-blue-600 peer-checked:bg-blue-50 peer-checked:dark:bg-stone-800 peer-checked:text-gray-600 dark:border-slate-200 dark:bg-stone-800 dark:text-slate-400 dark:hover:bg-stone-700 dark:hover:text-slate-300 dark:peer-checked:text-slate-300"">
        <div className=""block"">
          <img src={image} alt={name} className=""mb-2 h-10 w-10 rounded-full"" />
          <div className=""w-full text-lg font-semibold"">{name}</div>
          <div className=""flex w-full flex-col gap-y-1 text-sm"">
            <p className=""text-xs text-slate-400"">{link}</p>
            {description}
          </div>
        </div>
      </label>
    </div>
  );
};",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR, VAR = {}, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR?.VAR || ""VAR""); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR.VAR ? VAR?.VAR && VAR?.VAR === ""VAR"" : VAR?.VAR; VAR VAR(VAR) { VAR (!VAR || VAR === VAR) VAR VAR; VAR(VAR); VAR(VAR); } VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR } = VAR VAR.VAR(VAR); VAR (VAR) { VAR(`VAR VAR VAR VAR VAR: ${VAR}`, ""VAR""); } VAR { VAR(""VAR VAR VAR VAR."", ""VAR""); } VAR(VAR); VAR(!!VAR ? VAR : VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR & VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR={VAR} VAR={() => VAR(VAR)}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR VAR-VAR-VAR VAR-VAR-4""> <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR-VAR VAR. VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR VAR"" VAR=""VAR"" VAR=""VAR.VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR VAR 2"" VAR=""VAR-VAR-2"" VAR=""VAR.VAR"" VAR=""[VAR VAR] VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR!"" VAR={VAR === ""VAR-VAR-2""} VAR={VAR} /> </VAR> {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR"" VAR={VAR?.VAR ? ""*"".VAR(20) : """"} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR={!VAR} VAR=""VAR"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR VAR-VAR VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-700 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" > {[ ""VAR-3.5-VAR"", ""VAR-3.5-VAR-0613"", ""VAR-3.5-VAR-16k"", ""VAR-4"", ""VAR-4-0613"", ""VAR-4-32k"", ""VAR-4-32k-0613"", ].VAR((VAR) => { VAR ( <VAR VAR={VAR} VAR={VAR}> {VAR} </VAR> ); })} </VAR> </VAR> </> )} {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR: VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR VAR"" VAR={ VAR?.VAR ? ""*"".VAR(20) : """" } VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR VAR VAR VAR"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR VAR VAR VAR"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} {VAR === ""VAR-VAR-2"" && ( <VAR VAR=""VAR-VAR VAR-40 VAR-VAR VAR-VAR VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> )} </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-4""> <VAR VAR={!VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } VAR VAR = ({ VAR, VAR, VAR, VAR, VAR, VAR = VAR, VAR, }) => { VAR ( <VAR VAR={() => VAR(VAR)}> <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR VAR"" VAR={VAR} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR VAR-60 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-5 VAR-VAR-500 VAR:VAR-VAR-50 VAR:VAR-VAR-600 VAR-VAR:VAR-VAR-600 VAR-VAR:VAR-VAR-50 VAR-VAR:VAR:VAR-VAR-800 VAR-VAR:VAR-VAR-600 VAR:VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-400 VAR:VAR:VAR-VAR-700 VAR:VAR:VAR-VAR-300 VAR:VAR-VAR:VAR-VAR-300""> <VAR VAR=""VAR""> <VAR VAR={VAR} VAR={VAR} VAR=""VAR-2 VAR-10 VAR-10 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR"">{VAR}</VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-400"">{VAR}</VAR> {VAR} </VAR> </VAR> </VAR> </VAR> ); }; ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/MultiUserMode/index.jsx,"import React, { useState } from ""react"";
import System from ""../../../../models/system"";
import { AUTH_TOKEN, AUTH_USER } from ""../../../../utils/constants"";
import paths from ""../../../../utils/paths"";

const noop = () => false;
export default function MultiUserMode({ hideModal = noop }) {
  const [saving, setSaving] = useState(false);
  const [success, setSuccess] = useState(false);
  const [error, setError] = useState(null);
  const [useMultiUserMode, setUseMultiUserMode] = useState(false);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    setSuccess(false);
    setError(null);

    const form = new FormData(e.target);
    const data = {
      username: form.get(""username""),
      password: form.get(""password""),
    };

    const { success, error } = await System.setupMultiUser(data);
    if (success) {
      setSuccess(true);
      setSaving(false);
      setTimeout(() => {
        window.localStorage.removeItem(AUTH_USER);
        window.localStorage.removeItem(AUTH_TOKEN);
        window.location = paths.admin.users();
      }, 2_000);
      return;
    }

    setError(error);
    setSaving(false);
  };

  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Update your AnythingLLM instance to support multiple concurrent
            users with their own workspaces. As the admin you can view all
            workspaces and add people into workspaces as well. This change is
            not reversible and will permanently alter your AnythingLLM
            installation.
          </p>
        </div>
        {(error || success) && (
          <div className=""w-full flex px-6"">
            {error && (
              <div className=""w-full bg-red-300 text-red-800 font-semibold px-4 py-2 rounded-lg"">
                {error}
              </div>
            )}
            {success && (
              <div className=""w-full bg-green-300 text-green-800 font-semibold px-4 py-2 rounded-lg"">
                Your page will refresh in a few seconds.
              </div>
            )}
          </div>
        )}
        <div className=""p-6 space-y-6 flex h-full w-full"">
          <div className=""w-full flex flex-col gap-y-4"">
            <form onSubmit={handleSubmit}>
              <div className="""">
                <label className=""mb-2.5 block font-medium text-black dark:text-white"">
                  Enable Multi-User Mode
                </label>

                <label className=""relative inline-flex cursor-pointer items-center"">
                  <input
                    type=""checkbox""
                    onClick={() => setUseMultiUserMode(!useMultiUserMode)}
                    checked={useMultiUserMode}
                    className=""peer sr-only pointer-events-none""
                  />
                  <div className=""pointer-events-none peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-stone-400 dark:peer-focus:ring-blue-800""></div>
                </label>
              </div>
              <div className=""w-full flex flex-col gap-y-2 my-2"">
                {useMultiUserMode && (
                  <>
                    <p className=""text-gray-800 dark:text-stone-200 text-sm bg-gray-200 dark:bg-stone-800 rounded-lg p-4"">
                      By default, you will be the only admin. As an admin you
                      will need to create accounts for all new users or admins.
                      Do not lose your password as only an Admin user can reset
                      passwords.
                    </p>
                    <div>
                      <label
                        htmlFor=""username""
                        className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                      >
                        Admin account username
                      </label>
                      <input
                        name=""username""
                        type=""text""
                        className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                        placeholder=""Your admin username""
                        minLength={2}
                        required={true}
                        autoComplete=""off""
                      />
                    </div>
                    <div>
                      <label
                        htmlFor=""password""
                        className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                      >
                        Admin account password
                      </label>
                      <input
                        name=""password""
                        type=""text""
                        className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                        placeholder=""Your admin password""
                        minLength={8}
                        required={true}
                        autoComplete=""off""
                      />
                    </div>
                    <button
                      disabled={saving}
                      type=""submit""
                      className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                    >
                      {saving ? ""Enabling..."" : ""Enable Multi-User mode""}
                    </button>
                  </>
                )}
              </div>
            </form>
          </div>
        </div>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR, VAR } VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR(VAR); VAR(VAR); VAR VAR = VAR VAR(VAR.VAR); VAR VAR = { VAR: VAR.VAR(""VAR""), VAR: VAR.VAR(""VAR""), }; VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (VAR) { VAR(VAR); VAR(VAR); VAR(() => { VAR.VAR.VAR(VAR); VAR.VAR.VAR(VAR); VAR.VAR = VAR.VAR.VAR(); }, 2_000); VAR; } VAR(VAR); VAR(VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> {(VAR || VAR) && ( <VAR VAR=""VAR-VAR VAR VAR-6""> {VAR && ( <VAR VAR=""VAR-VAR VAR-VAR-300 VAR-VAR-800 VAR-VAR VAR-4 VAR-2 VAR-VAR""> {VAR} </VAR> )} {VAR && ( <VAR VAR=""VAR-VAR VAR-VAR-300 VAR-VAR-800 VAR-VAR VAR-4 VAR-2 VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> )} </VAR> )} <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR VAR={VAR}> <VAR VAR=""""> <VAR VAR=""VAR-2.5 VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR-VAR VAR </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR"" VAR={() => VAR(!VAR)} VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-VAR"" /> <VAR VAR=""VAR-VAR-VAR VAR VAR-6 VAR-11 VAR-VAR VAR-VAR-200 VAR:VAR VAR:VAR-[2px] VAR:VAR-[2px] VAR:VAR-5 VAR:VAR-5 VAR:VAR-VAR VAR:VAR VAR:VAR-VAR-300 VAR:VAR-VAR VAR:VAR-VAR VAR:VAR-[''] VAR-VAR:VAR-VAR-600 VAR-VAR:VAR:VAR-VAR-VAR VAR-VAR:VAR:VAR-VAR VAR-VAR:VAR-VAR VAR-VAR:VAR-4 VAR-VAR:VAR-VAR-300 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR:VAR-VAR-800""></VAR> </VAR> </VAR> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-2""> {VAR && ( <> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR VAR-4""> VAR VAR, VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR VAR"" VAR={2} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR VAR"" VAR={8} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR-VAR VAR""} </VAR> </> )} </VAR> </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/MultiUserMode/index.jsx,"import React, { useState } from ""react"";
import System from ""../../../../models/system"";
import { AUTH_TOKEN, AUTH_USER } from ""../../../../utils/constants"";
import paths from ""../../../../utils/paths"";

const noop = () => false;
export default function MultiUserMode({ hideModal = noop }) {
  const [saving, setSaving] = useState(false);
  const [success, setSuccess] = useState(false);
  const [error, setError] = useState(null);
  const [useMultiUserMode, setUseMultiUserMode] = useState(false);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    setSuccess(false);
    setError(null);

    const form = new FormData(e.target);
    const data = {
      username: form.get(""username""),
      password: form.get(""password""),
    };

    const { success, error } = await System.setupMultiUser(data);
    if (success) {
      setSuccess(true);
      setSaving(false);
      setTimeout(() => {
        window.localStorage.removeItem(AUTH_USER);
        window.localStorage.removeItem(AUTH_TOKEN);
        window.location = paths.admin.users();
      }, 2_000);
      return;
    }

    setError(error);
    setSaving(false);
  };

  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Update your AnythingLLM instance to support multiple concurrent
            users with their own workspaces. As the admin you can view all
            workspaces and add people into workspaces as well. This change is
            not reversible and will permanently alter your AnythingLLM
            installation.
          </p>
        </div>
        {(error || success) && (
          <div className=""w-full flex px-6"">
            {error && (
              <div className=""w-full bg-red-300 text-red-800 font-semibold px-4 py-2 rounded-lg"">
                {error}
              </div>
            )}
            {success && (
              <div className=""w-full bg-green-300 text-green-800 font-semibold px-4 py-2 rounded-lg"">
                Your page will refresh in a few seconds.
              </div>
            )}
          </div>
        )}
        <div className=""p-6 space-y-6 flex h-full w-full"">
          <div className=""w-full flex flex-col gap-y-4"">
            <form onSubmit={handleSubmit}>
              <div className="""">
                <label className=""mb-2.5 block font-medium text-black dark:text-white"">
                  Enable Multi-User Mode
                </label>

                <label className=""relative inline-flex cursor-pointer items-center"">
                  <input
                    type=""checkbox""
                    onClick={() => setUseMultiUserMode(!useMultiUserMode)}
                    checked={useMultiUserMode}
                    className=""peer sr-only pointer-events-none""
                  />
                  <div className=""pointer-events-none peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-stone-400 dark:peer-focus:ring-blue-800""></div>
                </label>
              </div>
              <div className=""w-full flex flex-col gap-y-2 my-2"">
                {useMultiUserMode && (
                  <>
                    <p className=""text-gray-800 dark:text-stone-200 text-sm bg-gray-200 dark:bg-stone-800 rounded-lg p-4"">
                      By default, you will be the only admin. As an admin you
                      will need to create accounts for all new users or admins.
                      Do not lose your password as only an Admin user can reset
                      passwords.
                    </p>
                    <div>
                      <label
                        htmlFor=""username""
                        className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                      >
                        Admin account username
                      </label>
                      <input
                        name=""username""
                        type=""text""
                        className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                        placeholder=""Your admin username""
                        minLength={2}
                        required={true}
                        autoComplete=""off""
                      />
                    </div>
                    <div>
                      <label
                        htmlFor=""password""
                        className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                      >
                        Admin account password
                      </label>
                      <input
                        name=""password""
                        type=""text""
                        className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                        placeholder=""Your admin password""
                        minLength={8}
                        required={true}
                        autoComplete=""off""
                      />
                    </div>
                    <button
                      disabled={saving}
                      type=""submit""
                      className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                    >
                      {saving ? ""Enabling..."" : ""Enable Multi-User mode""}
                    </button>
                  </>
                )}
              </div>
            </form>
          </div>
        </div>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR, VAR } VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR(VAR); VAR(VAR); VAR VAR = VAR VAR(VAR.VAR); VAR VAR = { VAR: VAR.VAR(""VAR""), VAR: VAR.VAR(""VAR""), }; VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (VAR) { VAR(VAR); VAR(VAR); VAR(() => { VAR.VAR.VAR(VAR); VAR.VAR.VAR(VAR); VAR.VAR = VAR.VAR.VAR(); }, 2_000); VAR; } VAR(VAR); VAR(VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> {(VAR || VAR) && ( <VAR VAR=""VAR-VAR VAR VAR-6""> {VAR && ( <VAR VAR=""VAR-VAR VAR-VAR-300 VAR-VAR-800 VAR-VAR VAR-4 VAR-2 VAR-VAR""> {VAR} </VAR> )} {VAR && ( <VAR VAR=""VAR-VAR VAR-VAR-300 VAR-VAR-800 VAR-VAR VAR-4 VAR-2 VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> )} </VAR> )} <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR VAR={VAR}> <VAR VAR=""""> <VAR VAR=""VAR-2.5 VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR-VAR VAR </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR"" VAR={() => VAR(!VAR)} VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-VAR"" /> <VAR VAR=""VAR-VAR-VAR VAR VAR-6 VAR-11 VAR-VAR VAR-VAR-200 VAR:VAR VAR:VAR-[2px] VAR:VAR-[2px] VAR:VAR-5 VAR:VAR-5 VAR:VAR-VAR VAR:VAR VAR:VAR-VAR-300 VAR:VAR-VAR VAR:VAR-VAR VAR:VAR-[''] VAR-VAR:VAR-VAR-600 VAR-VAR:VAR:VAR-VAR-VAR VAR-VAR:VAR:VAR-VAR VAR-VAR:VAR-VAR VAR-VAR:VAR-4 VAR-VAR:VAR-VAR-300 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR:VAR-VAR-800""></VAR> </VAR> </VAR> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-2""> {VAR && ( <> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR VAR-4""> VAR VAR, VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR VAR"" VAR={2} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR VAR"" VAR={8} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR-VAR VAR""} </VAR> </> )} </VAR> </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/PasswordProtection/index.jsx,"import React, { useState } from ""react"";
import System from ""../../../../models/system"";
import { AUTH_TOKEN, AUTH_USER } from ""../../../../utils/constants"";
import showToast from ""../../../../utils/toast"";

const noop = () => false;
export default function PasswordProtection({
  hideModal = noop,
  settings = {},
}) {
  const [saving, setSaving] = useState(false);
  const [usePassword, setUsePassword] = useState(settings?.RequiresAuth);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);

    const form = new FormData(e.target);
    const data = {
      usePassword,
      newPassword: form.get(""password""),
    };

    const { success, error } = await System.updateSystemPassword(data);
    if (success) {
      showToast(""Your page will refresh in a few seconds."", ""success"");
      setSaving(false);
      setTimeout(() => {
        window.localStorage.removeItem(AUTH_USER);
        window.localStorage.removeItem(AUTH_TOKEN);
        window.location.reload();
      }, 3_000);
      return;
    } else {
      showToast(`Failed to update password: ${error}`, ""error"");
    }

    setSaving(false);
  };

  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Protect your AnythingLLM instance with a password. If you forget
            this there is no recovery method so ensure you save this password.
          </p>
        </div>
        <div className=""p-6 space-y-6 flex h-full w-full"">
          <div className=""w-full flex flex-col gap-y-4"">
            <form onSubmit={handleSubmit}>
              <div className="""">
                <label className=""mb-2.5 block font-medium text-black dark:text-white"">
                  Password Protect Instance
                </label>

                <label className=""relative inline-flex cursor-pointer items-center"">
                  <input
                    type=""checkbox""
                    name=""use_password""
                    onClick={() => setUsePassword(!usePassword)}
                    checked={usePassword}
                    className=""peer sr-only pointer-events-none""
                  />
                  <div className=""pointer-events-none peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-stone-400 dark:peer-focus:ring-blue-800""></div>
                </label>
              </div>
              <div className=""w-full flex flex-col gap-y-2 my-2"">
                {usePassword && (
                  <div>
                    <label
                      htmlFor=""password""
                      className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                    >
                      New Password
                    </label>
                    <input
                      name=""password""
                      type=""text""
                      className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                      placeholder=""Your Instance Password""
                      minLength={8}
                      required={true}
                      autoComplete=""off""
                    />
                  </div>
                )}
                <button
                  disabled={saving}
                  type=""submit""
                  className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                >
                  {saving ? ""Saving..."" : ""Save Changes""}
                </button>
              </div>
            </form>
          </div>
        </div>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR, VAR } VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR = {}, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR?.VAR); VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR VAR = VAR VAR(VAR.VAR); VAR VAR = { VAR, VAR: VAR.VAR(""VAR""), }; VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (VAR) { VAR(""VAR VAR VAR VAR VAR VAR VAR VAR."", ""VAR""); VAR(VAR); VAR(() => { VAR.VAR.VAR(VAR); VAR.VAR.VAR(VAR); VAR.VAR.VAR(); }, 3_000); VAR; } VAR { VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); } VAR(VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR VAR={VAR}> <VAR VAR=""""> <VAR VAR=""VAR-2.5 VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR"" VAR=""VAR"" VAR={() => VAR(!VAR)} VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-VAR"" /> <VAR VAR=""VAR-VAR-VAR VAR VAR-6 VAR-11 VAR-VAR VAR-VAR-200 VAR:VAR VAR:VAR-[2px] VAR:VAR-[2px] VAR:VAR-5 VAR:VAR-5 VAR:VAR-VAR VAR:VAR VAR:VAR-VAR-300 VAR:VAR-VAR VAR:VAR-VAR VAR:VAR-[''] VAR-VAR:VAR-VAR-600 VAR-VAR:VAR:VAR-VAR-VAR VAR-VAR:VAR:VAR-VAR VAR-VAR:VAR-VAR VAR-VAR:VAR-4 VAR-VAR:VAR-VAR-300 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR:VAR-VAR-800""></VAR> </VAR> </VAR> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-2""> {VAR && ( <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR VAR"" VAR={8} VAR={VAR} VAR=""VAR"" /> </VAR> )} <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> </VAR> </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/PasswordProtection/index.jsx,"import React, { useState } from ""react"";
import System from ""../../../../models/system"";
import { AUTH_TOKEN, AUTH_USER } from ""../../../../utils/constants"";
import showToast from ""../../../../utils/toast"";

const noop = () => false;
export default function PasswordProtection({
  hideModal = noop,
  settings = {},
}) {
  const [saving, setSaving] = useState(false);
  const [usePassword, setUsePassword] = useState(settings?.RequiresAuth);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);

    const form = new FormData(e.target);
    const data = {
      usePassword,
      newPassword: form.get(""password""),
    };

    const { success, error } = await System.updateSystemPassword(data);
    if (success) {
      showToast(""Your page will refresh in a few seconds."", ""success"");
      setSaving(false);
      setTimeout(() => {
        window.localStorage.removeItem(AUTH_USER);
        window.localStorage.removeItem(AUTH_TOKEN);
        window.location.reload();
      }, 3_000);
      return;
    } else {
      showToast(`Failed to update password: ${error}`, ""error"");
    }

    setSaving(false);
  };

  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            Protect your AnythingLLM instance with a password. If you forget
            this there is no recovery method so ensure you save this password.
          </p>
        </div>
        <div className=""p-6 space-y-6 flex h-full w-full"">
          <div className=""w-full flex flex-col gap-y-4"">
            <form onSubmit={handleSubmit}>
              <div className="""">
                <label className=""mb-2.5 block font-medium text-black dark:text-white"">
                  Password Protect Instance
                </label>

                <label className=""relative inline-flex cursor-pointer items-center"">
                  <input
                    type=""checkbox""
                    name=""use_password""
                    onClick={() => setUsePassword(!usePassword)}
                    checked={usePassword}
                    className=""peer sr-only pointer-events-none""
                  />
                  <div className=""pointer-events-none peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-stone-400 dark:peer-focus:ring-blue-800""></div>
                </label>
              </div>
              <div className=""w-full flex flex-col gap-y-2 my-2"">
                {usePassword && (
                  <div>
                    <label
                      htmlFor=""password""
                      className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                    >
                      New Password
                    </label>
                    <input
                      name=""password""
                      type=""text""
                      className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                      placeholder=""Your Instance Password""
                      minLength={8}
                      required={true}
                      autoComplete=""off""
                    />
                  </div>
                )}
                <button
                  disabled={saving}
                  type=""submit""
                  className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                >
                  {saving ? ""Saving..."" : ""Save Changes""}
                </button>
              </div>
            </form>
          </div>
        </div>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR { VAR, VAR } VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR = {}, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR?.VAR); VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR VAR = VAR VAR(VAR.VAR); VAR VAR = { VAR, VAR: VAR.VAR(""VAR""), }; VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (VAR) { VAR(""VAR VAR VAR VAR VAR VAR VAR VAR."", ""VAR""); VAR(VAR); VAR(() => { VAR.VAR.VAR(VAR); VAR.VAR.VAR(VAR); VAR.VAR.VAR(); }, 3_000); VAR; } VAR { VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); } VAR(VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR VAR={VAR}> <VAR VAR=""""> <VAR VAR=""VAR-2.5 VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR"" VAR=""VAR"" VAR={() => VAR(!VAR)} VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-VAR"" /> <VAR VAR=""VAR-VAR-VAR VAR VAR-6 VAR-11 VAR-VAR VAR-VAR-200 VAR:VAR VAR:VAR-[2px] VAR:VAR-[2px] VAR:VAR-5 VAR:VAR-5 VAR:VAR-VAR VAR:VAR VAR:VAR-VAR-300 VAR:VAR-VAR VAR:VAR-VAR VAR:VAR-[''] VAR-VAR:VAR-VAR-600 VAR-VAR:VAR:VAR-VAR-VAR VAR-VAR:VAR:VAR-VAR VAR-VAR:VAR-VAR VAR-VAR:VAR-4 VAR-VAR:VAR-VAR-300 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR:VAR-VAR-800""></VAR> </VAR> </VAR> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-2 VAR-2""> {VAR && ( <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR VAR"" VAR={8} VAR={VAR} VAR=""VAR"" /> </VAR> )} <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> </VAR> </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/VectorDbs/index.jsx,"import React, { useState } from ""react"";
import System from ""../../../../models/system"";
import ChromaLogo from ""../../../../media/vectordbs/chroma.png"";
import PineconeLogo from ""../../../../media/vectordbs/pinecone.png"";
import LanceDbLogo from ""../../../../media/vectordbs/lancedb.png"";
import WeaviateLogo from ""../../../../media/vectordbs/weaviate.png"";
import QDrantLogo from ""../../../../media/vectordbs/qdrant.png"";

const noop = () => false;
export default function VectorDBSelection({
  hideModal = noop,
  user,
  settings = {},
}) {
  const [hasChanges, setHasChanges] = useState(false);
  const [vectorDB, setVectorDB] = useState(settings?.VectorDB || ""lancedb"");
  const [saving, setSaving] = useState(false);
  const [error, setError] = useState(null);
  const canDebug = settings.MultiUserMode
    ? settings?.CanDebug && user?.role === ""admin""
    : settings?.CanDebug;

  function updateVectorChoice(selection) {
    if (!canDebug || selection === vectorDB) return false;
    setHasChanges(true);
    setVectorDB(selection);
  }

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    setError(null);
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { error } = await System.updateSystem(data);
    setError(error);
    setSaving(false);
    setHasChanges(!!error ? true : false);
  };
  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            These are the credentials and settings for how your AnythingLLM
            instance will function. Its important these keys are current and
            correct.
          </p>
        </div>

        {!!error && (
          <div className=""mb-8 bg-red-700 dark:bg-orange-800 bg-opacity-30 border border-red-800 dark:border-orange-600 p-4 rounded-lg w-[90%] flex mx-auto"">
            <p className=""text-red-800 dark:text-orange-300 text-sm"">{error}</p>
          </div>
        )}

        <form onSubmit={handleSubmit} onChange={() => setHasChanges(true)}>
          <div className=""px-6 space-y-6 flex h-full w-full"">
            <div className=""w-full flex flex-col gap-y-4"">
              <p className=""block text-sm font-medium text-gray-800 dark:text-slate-200"">
                Vector database providers
              </p>
              <div className=""w-full flex md:flex-wrap overflow-x-scroll gap-4"">
                <input hidden={true} name=""VectorDB"" value={vectorDB} />
                <VectorDBOption
                  name=""Chroma""
                  value=""chroma""
                  link=""trychroma.com""
                  description=""Open source vector database you can host yourself or on the cloud.""
                  checked={vectorDB === ""chroma""}
                  image={ChromaLogo}
                  onClick={updateVectorChoice}
                />
                <VectorDBOption
                  name=""Pinecone""
                  value=""pinecone""
                  link=""pinecone.io""
                  description=""100% cloud-based vector database for enterprise use cases.""
                  checked={vectorDB === ""pinecone""}
                  image={PineconeLogo}
                  onClick={updateVectorChoice}
                />
                <VectorDBOption
                  name=""QDrant""
                  value=""qdrant""
                  link=""qdrant.tech""
                  description=""Open source local and distributed cloud vector database.""
                  checked={vectorDB === ""qdrant""}
                  image={QDrantLogo}
                  onClick={updateVectorChoice}
                />
                <VectorDBOption
                  name=""Weaviate""
                  value=""weaviate""
                  link=""weaviate.io""
                  description=""Open source local and cloud hosted multi-modal vector database.""
                  checked={vectorDB === ""weaviate""}
                  image={WeaviateLogo}
                  onClick={updateVectorChoice}
                />
                <VectorDBOption
                  name=""LanceDB""
                  value=""lancedb""
                  link=""lancedb.com""
                  description=""100% local vector DB that runs on the same instance as AnythingLLM.""
                  checked={vectorDB === ""lancedb""}
                  image={LanceDbLogo}
                  onClick={updateVectorChoice}
                />
              </div>
              {vectorDB === ""pinecone"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Pinecone DB API Key
                    </label>
                    <input
                      type=""password""
                      name=""PineConeKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""Pinecone API Key""
                      defaultValue={settings?.PineConeKey ? ""*"".repeat(20) : """"}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Pinecone Index Environment
                    </label>
                    <input
                      type=""text""
                      name=""PineConeEnvironment""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""us-gcp-west-1""
                      defaultValue={settings?.PineConeEnvironment}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Pinecone Index Name
                    </label>
                    <input
                      type=""text""
                      name=""PineConeIndex""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""my-index""
                      defaultValue={settings?.PineConeIndex}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}

              {vectorDB === ""chroma"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Chroma Endpoint
                    </label>
                    <input
                      type=""url""
                      name=""ChromaEndpoint""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""http://localhost:8000""
                      defaultValue={settings?.ChromaEndpoint}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}
              {vectorDB === ""lancedb"" && (
                <div className=""w-full h-40 items-center justify-center flex"">
                  <p className=""text-gray-800 dark:text-slate-400"">
                    There is no configuration needed for LanceDB.
                  </p>
                </div>
              )}
              {vectorDB === ""qdrant"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      QDrant API Endpoint
                    </label>
                    <input
                      type=""url""
                      name=""QdrantEndpoint""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""http://localhost:6633""
                      defaultValue={settings?.QdrantEndpoint}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Api Key
                    </label>
                    <input
                      type=""password""
                      name=""QdrantApiKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""wOeqxsYP4....1244sba""
                      defaultValue={settings?.QdrantApiKey}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}
              {vectorDB === ""weaviate"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Weaviate Endpoint
                    </label>
                    <input
                      type=""url""
                      name=""WeaviateEndpoint""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""http://localhost:8080""
                      defaultValue={settings?.WeaviateEndpoint}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Api Key
                    </label>
                    <input
                      type=""password""
                      name=""WeaviateApiKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""sk-123Abcweaviate""
                      defaultValue={settings?.WeaviateApiKey}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}
            </div>
          </div>
          <div className=""w-full p-4"">
            <button
              hidden={!hasChanges}
              disabled={saving}
              type=""submit""
              className=""w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
            >
              {saving ? ""Saving..."" : ""Save changes""}
            </button>
          </div>
        </form>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}

const VectorDBOption = ({
  name,
  link,
  description,
  value,
  image,
  checked = false,
  onClick,
}) => {
  return (
    <div onClick={() => onClick(value)}>
      <input
        type=""checkbox""
        value={value}
        className=""peer hidden""
        checked={checked}
        readOnly={true}
        formNoValidate={true}
      />
      <label className=""transition-all duration-300 inline-flex h-full w-60 cursor-pointer items-center justify-between rounded-lg border border-gray-200 bg-white p-5 text-gray-500 hover:bg-gray-50 hover:text-gray-600 peer-checked:border-blue-600 peer-checked:bg-blue-50 peer-checked:dark:bg-stone-800 peer-checked:text-gray-600 dark:border-slate-200 dark:bg-stone-800 dark:text-slate-400 dark:hover:bg-stone-700 dark:hover:text-slate-300 dark:peer-checked:text-slate-300"">
        <div className=""block"">
          <img src={image} alt={name} className=""mb-2 h-10 w-10 rounded-full"" />
          <div className=""w-full text-lg font-semibold"">{name}</div>
          <div className=""flex w-full flex-col gap-y-1 text-sm"">
            <p className=""text-xs text-slate-400"">{link}</p>
            {description}
          </div>
        </div>
      </label>
    </div>
  );
};",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR, VAR = {}, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR?.VAR || ""VAR""); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR.VAR ? VAR?.VAR && VAR?.VAR === ""VAR"" : VAR?.VAR; VAR VAR(VAR) { VAR (!VAR || VAR === VAR) VAR VAR; VAR(VAR); VAR(VAR); } VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR(VAR); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR } = VAR VAR.VAR(VAR); VAR(VAR); VAR(VAR); VAR(!!VAR ? VAR : VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> {!!VAR && ( <VAR VAR=""VAR-8 VAR-VAR-700 VAR:VAR-VAR-800 VAR-VAR-30 VAR VAR-VAR-800 VAR:VAR-VAR-600 VAR-4 VAR-VAR VAR-[90%] VAR VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-300 VAR-VAR"">{VAR}</VAR> </VAR> )} <VAR VAR={VAR} VAR={() => VAR(VAR)}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR VAR:VAR-VAR VAR-VAR-VAR VAR-4""> <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""100% VAR-VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR VAR-VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""100% VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> </VAR> {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR"" VAR={VAR?.VAR ? ""*"".VAR(20) : """"} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR-VAR-VAR-1"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR-VAR"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR: VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} {VAR === ""VAR"" && ( <VAR VAR=""VAR-VAR VAR-40 VAR-VAR VAR-VAR VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> )} {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR: VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR....1244sba"" VAR={VAR?.VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR: VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR-123Abcweaviate"" VAR={VAR?.VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-4""> <VAR VAR={!VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } VAR VAR = ({ VAR, VAR, VAR, VAR, VAR, VAR = VAR, VAR, }) => { VAR ( <VAR VAR={() => VAR(VAR)}> <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR VAR"" VAR={VAR} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR VAR-60 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-5 VAR-VAR-500 VAR:VAR-VAR-50 VAR:VAR-VAR-600 VAR-VAR:VAR-VAR-600 VAR-VAR:VAR-VAR-50 VAR-VAR:VAR:VAR-VAR-800 VAR-VAR:VAR-VAR-600 VAR:VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-400 VAR:VAR:VAR-VAR-700 VAR:VAR:VAR-VAR-300 VAR:VAR-VAR:VAR-VAR-300""> <VAR VAR=""VAR""> <VAR VAR={VAR} VAR={VAR} VAR=""VAR-2 VAR-10 VAR-10 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR"">{VAR}</VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-400"">{VAR}</VAR> {VAR} </VAR> </VAR> </VAR> </VAR> ); }; ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/VectorDbs/index.jsx,"import React, { useState } from ""react"";
import System from ""../../../../models/system"";
import ChromaLogo from ""../../../../media/vectordbs/chroma.png"";
import PineconeLogo from ""../../../../media/vectordbs/pinecone.png"";
import LanceDbLogo from ""../../../../media/vectordbs/lancedb.png"";
import WeaviateLogo from ""../../../../media/vectordbs/weaviate.png"";
import QDrantLogo from ""../../../../media/vectordbs/qdrant.png"";

const noop = () => false;
export default function VectorDBSelection({
  hideModal = noop,
  user,
  settings = {},
}) {
  const [hasChanges, setHasChanges] = useState(false);
  const [vectorDB, setVectorDB] = useState(settings?.VectorDB || ""lancedb"");
  const [saving, setSaving] = useState(false);
  const [error, setError] = useState(null);
  const canDebug = settings.MultiUserMode
    ? settings?.CanDebug && user?.role === ""admin""
    : settings?.CanDebug;

  function updateVectorChoice(selection) {
    if (!canDebug || selection === vectorDB) return false;
    setHasChanges(true);
    setVectorDB(selection);
  }

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    setError(null);
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { error } = await System.updateSystem(data);
    setError(error);
    setSaving(false);
    setHasChanges(!!error ? true : false);
  };
  return (
    <div className=""relative w-full w-full max-h-full"">
      <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
        <div className=""flex items-start justify-between px-6 py-4"">
          <p className=""text-gray-800 dark:text-stone-200 text-base "">
            These are the credentials and settings for how your AnythingLLM
            instance will function. Its important these keys are current and
            correct.
          </p>
        </div>

        {!!error && (
          <div className=""mb-8 bg-red-700 dark:bg-orange-800 bg-opacity-30 border border-red-800 dark:border-orange-600 p-4 rounded-lg w-[90%] flex mx-auto"">
            <p className=""text-red-800 dark:text-orange-300 text-sm"">{error}</p>
          </div>
        )}

        <form onSubmit={handleSubmit} onChange={() => setHasChanges(true)}>
          <div className=""px-6 space-y-6 flex h-full w-full"">
            <div className=""w-full flex flex-col gap-y-4"">
              <p className=""block text-sm font-medium text-gray-800 dark:text-slate-200"">
                Vector database providers
              </p>
              <div className=""w-full flex md:flex-wrap overflow-x-scroll gap-4"">
                <input hidden={true} name=""VectorDB"" value={vectorDB} />
                <VectorDBOption
                  name=""Chroma""
                  value=""chroma""
                  link=""trychroma.com""
                  description=""Open source vector database you can host yourself or on the cloud.""
                  checked={vectorDB === ""chroma""}
                  image={ChromaLogo}
                  onClick={updateVectorChoice}
                />
                <VectorDBOption
                  name=""Pinecone""
                  value=""pinecone""
                  link=""pinecone.io""
                  description=""100% cloud-based vector database for enterprise use cases.""
                  checked={vectorDB === ""pinecone""}
                  image={PineconeLogo}
                  onClick={updateVectorChoice}
                />
                <VectorDBOption
                  name=""QDrant""
                  value=""qdrant""
                  link=""qdrant.tech""
                  description=""Open source local and distributed cloud vector database.""
                  checked={vectorDB === ""qdrant""}
                  image={QDrantLogo}
                  onClick={updateVectorChoice}
                />
                <VectorDBOption
                  name=""Weaviate""
                  value=""weaviate""
                  link=""weaviate.io""
                  description=""Open source local and cloud hosted multi-modal vector database.""
                  checked={vectorDB === ""weaviate""}
                  image={WeaviateLogo}
                  onClick={updateVectorChoice}
                />
                <VectorDBOption
                  name=""LanceDB""
                  value=""lancedb""
                  link=""lancedb.com""
                  description=""100% local vector DB that runs on the same instance as AnythingLLM.""
                  checked={vectorDB === ""lancedb""}
                  image={LanceDbLogo}
                  onClick={updateVectorChoice}
                />
              </div>
              {vectorDB === ""pinecone"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Pinecone DB API Key
                    </label>
                    <input
                      type=""password""
                      name=""PineConeKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""Pinecone API Key""
                      defaultValue={settings?.PineConeKey ? ""*"".repeat(20) : """"}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Pinecone Index Environment
                    </label>
                    <input
                      type=""text""
                      name=""PineConeEnvironment""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""us-gcp-west-1""
                      defaultValue={settings?.PineConeEnvironment}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>

                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Pinecone Index Name
                    </label>
                    <input
                      type=""text""
                      name=""PineConeIndex""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""my-index""
                      defaultValue={settings?.PineConeIndex}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}

              {vectorDB === ""chroma"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Chroma Endpoint
                    </label>
                    <input
                      type=""url""
                      name=""ChromaEndpoint""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""http://localhost:8000""
                      defaultValue={settings?.ChromaEndpoint}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}
              {vectorDB === ""lancedb"" && (
                <div className=""w-full h-40 items-center justify-center flex"">
                  <p className=""text-gray-800 dark:text-slate-400"">
                    There is no configuration needed for LanceDB.
                  </p>
                </div>
              )}
              {vectorDB === ""qdrant"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      QDrant API Endpoint
                    </label>
                    <input
                      type=""url""
                      name=""QdrantEndpoint""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""http://localhost:6633""
                      defaultValue={settings?.QdrantEndpoint}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Api Key
                    </label>
                    <input
                      type=""password""
                      name=""QdrantApiKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""wOeqxsYP4....1244sba""
                      defaultValue={settings?.QdrantApiKey}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}
              {vectorDB === ""weaviate"" && (
                <>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Weaviate Endpoint
                    </label>
                    <input
                      type=""url""
                      name=""WeaviateEndpoint""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""http://localhost:8080""
                      defaultValue={settings?.WeaviateEndpoint}
                      required={true}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                  <div>
                    <label className=""block mb-2 text-sm font-medium text-gray-800 dark:text-slate-200"">
                      Api Key
                    </label>
                    <input
                      type=""password""
                      name=""WeaviateApiKey""
                      disabled={!canDebug}
                      className=""bg-gray-50 border border-gray-500 text-gray-900 placeholder-gray-500 text-sm rounded-lg dark:bg-stone-700 focus:border-stone-500 block w-full p-2.5 dark:text-slate-200 dark:placeholder-stone-500 dark:border-slate-200""
                      placeholder=""sk-123Abcweaviate""
                      defaultValue={settings?.WeaviateApiKey}
                      autoComplete=""off""
                      spellCheck={false}
                    />
                  </div>
                </>
              )}
            </div>
          </div>
          <div className=""w-full p-4"">
            <button
              hidden={!hasChanges}
              disabled={saving}
              type=""submit""
              className=""w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
            >
              {saving ? ""Saving..."" : ""Save changes""}
            </button>
          </div>
        </form>
        <div className=""flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
          <button
            onClick={hideModal}
            type=""button""
            className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
}

const VectorDBOption = ({
  name,
  link,
  description,
  value,
  image,
  checked = false,
  onClick,
}) => {
  return (
    <div onClick={() => onClick(value)}>
      <input
        type=""checkbox""
        value={value}
        className=""peer hidden""
        checked={checked}
        readOnly={true}
        formNoValidate={true}
      />
      <label className=""transition-all duration-300 inline-flex h-full w-60 cursor-pointer items-center justify-between rounded-lg border border-gray-200 bg-white p-5 text-gray-500 hover:bg-gray-50 hover:text-gray-600 peer-checked:border-blue-600 peer-checked:bg-blue-50 peer-checked:dark:bg-stone-800 peer-checked:text-gray-600 dark:border-slate-200 dark:bg-stone-800 dark:text-slate-400 dark:hover:bg-stone-700 dark:hover:text-slate-300 dark:peer-checked:text-slate-300"">
        <div className=""block"">
          <img src={image} alt={name} className=""mb-2 h-10 w-10 rounded-full"" />
          <div className=""w-full text-lg font-semibold"">{name}</div>
          <div className=""flex w-full flex-col gap-y-1 text-sm"">
            <p className=""text-xs text-slate-400"">{link}</p>
            {description}
          </div>
        </div>
      </label>
    </div>
  );
};",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../../VAR/VAR/VAR.VAR""; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR, VAR = {}, }) { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR?.VAR || ""VAR""); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR.VAR ? VAR?.VAR && VAR?.VAR === ""VAR"" : VAR?.VAR; VAR VAR(VAR) { VAR (!VAR || VAR === VAR) VAR VAR; VAR(VAR); VAR(VAR); } VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR(VAR); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR } = VAR VAR.VAR(VAR); VAR(VAR); VAR(VAR); VAR(!!VAR ? VAR : VAR); }; VAR ( <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-6 VAR-4""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR ""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> {!!VAR && ( <VAR VAR=""VAR-8 VAR-VAR-700 VAR:VAR-VAR-800 VAR-VAR-30 VAR VAR-VAR-800 VAR:VAR-VAR-600 VAR-4 VAR-VAR VAR-[90%] VAR VAR-VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-300 VAR-VAR"">{VAR}</VAR> </VAR> )} <VAR VAR={VAR} VAR={() => VAR(VAR)}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR VAR:VAR-VAR VAR-VAR-VAR VAR-4""> <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""100% VAR-VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""VAR VAR VAR VAR VAR VAR VAR-VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR.VAR"" VAR=""100% VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR."" VAR={VAR === ""VAR""} VAR={VAR} VAR={VAR} /> </VAR> {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR VAR VAR"" VAR={VAR?.VAR ? ""*"".VAR(20) : """"} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR-VAR-VAR-1"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR-VAR"" VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR: VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} {VAR === ""VAR"" && ( <VAR VAR=""VAR-VAR VAR-40 VAR-VAR VAR-VAR VAR""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> )} {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR: VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR....1244sba"" VAR={VAR?.VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} {VAR === ""VAR"" && ( <> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR: VAR={VAR?.VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} /> </VAR> <VAR> <VAR VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR={!VAR} VAR=""VAR-VAR-50 VAR VAR-VAR-500 VAR-VAR-900 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-700 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-200 VAR:VAR-VAR-500 VAR:VAR-VAR-200"" VAR=""VAR-123Abcweaviate"" VAR={VAR?.VAR} VAR=""VAR"" VAR={VAR} /> </VAR> </> )} </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-4""> <VAR VAR={!VAR} VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR </VAR> </VAR> </VAR> </VAR> ); } VAR VAR = ({ VAR, VAR, VAR, VAR, VAR, VAR = VAR, VAR, }) => { VAR ( <VAR VAR={() => VAR(VAR)}> <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR VAR"" VAR={VAR} VAR={VAR} VAR={VAR} /> <VAR VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR VAR-60 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-5 VAR-VAR-500 VAR:VAR-VAR-50 VAR:VAR-VAR-600 VAR-VAR:VAR-VAR-600 VAR-VAR:VAR-VAR-50 VAR-VAR:VAR:VAR-VAR-800 VAR-VAR:VAR-VAR-600 VAR:VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-400 VAR:VAR:VAR-VAR-700 VAR:VAR:VAR-VAR-300 VAR:VAR-VAR:VAR-VAR-300""> <VAR VAR=""VAR""> <VAR VAR={VAR} VAR={VAR} VAR=""VAR-2 VAR-10 VAR-10 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR"">{VAR}</VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-1 VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-400"">{VAR}</VAR> {VAR} </VAR> </VAR> </VAR> </VAR> ); }; ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/index.jsx,"import React, { useEffect, useState } from ""react"";
import { X } from ""react-feather"";
import ExportOrImportData from ""./ExportImport"";
import PasswordProtection from ""./PasswordProtection"";
import System from ""../../../models/system"";
import MultiUserMode from ""./MultiUserMode"";
import useUser from ""../../../hooks/useUser"";
import VectorDBSelection from ""./VectorDbs"";
import LLMSelection from ""./LLMSelection"";
import Appearance from ""./Appearance"";
import ApiKey from ""./ApiKey"";

export const TABS = {
  llm: LLMSelection,
  exportimport: ExportOrImportData,
  password: PasswordProtection,
  multiuser: MultiUserMode,
  vectordb: VectorDBSelection,
  appearance: Appearance,
  apikey: ApiKey,
};

const noop = () => false;
export default function SystemSettingsModal({ tab = null, hideModal = noop }) {
  const { user } = useUser();
  const [loading, setLoading] = useState(true);
  const [settings, setSettings] = useState(null);
  const Component = TABS[tab || ""llm""];

  useEffect(() => {
    async function fetchKeys() {
      const _settings = await System.keys();
      setSettings(_settings);
      setLoading(false);
    }
    fetchKeys();
  }, []);

  return (
    <div className=""fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] h-full bg-black bg-opacity-50 flex items-center justify-center"">
      <div
        className=""flex fixed top-0 left-0 right-0 w-full h-full""
        onClick={hideModal}
      />
      <div className=""relative w-full w-full md:w-1/2 max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex flex-col gap-y-1 border-b dark:border-gray-600 px-4 pt-4 "">
            <div className=""flex items-start justify-between rounded-t "">
              <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
                System Settings
              </h3>
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
                data-modal-hide=""staticModal""
              >
                <X className=""text-gray-300 text-lg"" />
              </button>
            </div>
          </div>
          {loading ? (
            <div className=""w-full flex h-[400px] p-6"">
              <div className=""w-full flex h-full bg-gray-200 dark:bg-stone-600 animate-pulse rounded-lg"" />
            </div>
          ) : (
            <Component hideModal={hideModal} user={user} settings={settings} />
          )}
        </div>
      </div>
    </div>
  );
}

export function useSystemSettingsModal() {
  const [showing, setShowing] = useState(false);
  const showModal = () => {
    setShowing(true);
  };
  const hideModal = () => {
    setShowing(false);
  };

  return { showing, showModal, hideModal };
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR = { VAR: VAR, VAR: VAR, VAR: VAR, VAR: VAR, VAR: VAR, VAR: VAR, VAR: VAR, }; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR = VAR }) { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR[VAR || ""VAR""]; VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR ( <VAR VAR=""VAR VAR-0 VAR-0 VAR-0 VAR-50 VAR-VAR VAR-4 VAR-VAR-VAR VAR-VAR-VAR VAR:VAR-0 VAR-[VAR(100%-1rem)] VAR-VAR VAR-VAR VAR-VAR-50 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR VAR-0 VAR-0 VAR-0 VAR-VAR VAR-VAR"" VAR={VAR} /> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR:VAR-1/2 VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR:VAR-VAR-600 VAR-4 VAR-4 ""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR ""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> </VAR> {VAR ? ( <VAR VAR=""VAR-VAR VAR VAR-[400px] VAR-6""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR VAR-VAR"" /> </VAR> ) : ( <VAR VAR={VAR} VAR={VAR} VAR={VAR} /> )} </VAR> </VAR> </VAR> ); } VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR(VAR); }; VAR VAR = () => { VAR(VAR); }; VAR { VAR, VAR, VAR }; } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Modals/Settings/index.jsx,"import React, { useEffect, useState } from ""react"";
import { X } from ""react-feather"";
import ExportOrImportData from ""./ExportImport"";
import PasswordProtection from ""./PasswordProtection"";
import System from ""../../../models/system"";
import MultiUserMode from ""./MultiUserMode"";
import useUser from ""../../../hooks/useUser"";
import VectorDBSelection from ""./VectorDbs"";
import LLMSelection from ""./LLMSelection"";
import Appearance from ""./Appearance"";
import ApiKey from ""./ApiKey"";

export const TABS = {
  llm: LLMSelection,
  exportimport: ExportOrImportData,
  password: PasswordProtection,
  multiuser: MultiUserMode,
  vectordb: VectorDBSelection,
  appearance: Appearance,
  apikey: ApiKey,
};

const noop = () => false;
export default function SystemSettingsModal({ tab = null, hideModal = noop }) {
  const { user } = useUser();
  const [loading, setLoading] = useState(true);
  const [settings, setSettings] = useState(null);
  const Component = TABS[tab || ""llm""];

  useEffect(() => {
    async function fetchKeys() {
      const _settings = await System.keys();
      setSettings(_settings);
      setLoading(false);
    }
    fetchKeys();
  }, []);

  return (
    <div className=""fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] h-full bg-black bg-opacity-50 flex items-center justify-center"">
      <div
        className=""flex fixed top-0 left-0 right-0 w-full h-full""
        onClick={hideModal}
      />
      <div className=""relative w-full w-full md:w-1/2 max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex flex-col gap-y-1 border-b dark:border-gray-600 px-4 pt-4 "">
            <div className=""flex items-start justify-between rounded-t "">
              <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
                System Settings
              </h3>
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
                data-modal-hide=""staticModal""
              >
                <X className=""text-gray-300 text-lg"" />
              </button>
            </div>
          </div>
          {loading ? (
            <div className=""w-full flex h-[400px] p-6"">
              <div className=""w-full flex h-full bg-gray-200 dark:bg-stone-600 animate-pulse rounded-lg"" />
            </div>
          ) : (
            <Component hideModal={hideModal} user={user} settings={settings} />
          )}
        </div>
      </div>
    </div>
  );
}

export function useSystemSettingsModal() {
  const [showing, setShowing] = useState(false);
  const showModal = () => {
    setShowing(true);
  };
  const hideModal = () => {
    setShowing(false);
  };

  return { showing, showModal, hideModal };
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR = { VAR: VAR, VAR: VAR, VAR: VAR, VAR: VAR, VAR: VAR, VAR: VAR, VAR: VAR, }; VAR VAR = () => VAR; VAR VAR VAR VAR({ VAR = VAR, VAR = VAR }) { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR[VAR || ""VAR""]; VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR ( <VAR VAR=""VAR VAR-0 VAR-0 VAR-0 VAR-50 VAR-VAR VAR-4 VAR-VAR-VAR VAR-VAR-VAR VAR:VAR-0 VAR-[VAR(100%-1rem)] VAR-VAR VAR-VAR VAR-VAR-50 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR VAR-0 VAR-0 VAR-0 VAR-VAR VAR-VAR"" VAR={VAR} /> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR:VAR-1/2 VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR:VAR-VAR-600 VAR-4 VAR-4 ""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR ""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> </VAR> {VAR ? ( <VAR VAR=""VAR-VAR VAR VAR-[400px] VAR-6""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR VAR-VAR"" /> </VAR> ) : ( <VAR VAR={VAR} VAR={VAR} VAR={VAR} /> )} </VAR> </VAR> </VAR> ); } VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR(VAR); }; VAR VAR = () => { VAR(VAR); }; VAR { VAR, VAR, VAR }; } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Sidebar/ActiveWorkspaces/index.jsx,"import React, { useState, useEffect } from ""react"";
import { Book, Settings } from ""react-feather"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import Workspace from ""../../../models/workspace"";
import ManageWorkspace, {
  useManageWorkspaceModal,
} from ""../../Modals/MangeWorkspace"";
import paths from ""../../../utils/paths"";
import { useParams } from ""react-router-dom"";

export default function ActiveWorkspaces() {
  const { slug } = useParams();
  const [loading, setLoading] = useState(true);
  const [workspaces, setWorkspaces] = useState([]);
  const [selectedWs, setSelectedWs] = useState(null);
  const { showing, showModal, hideModal } = useManageWorkspaceModal();

  useEffect(() => {
    async function getWorkspaces() {
      const workspaces = await Workspace.all();
      setLoading(false);
      setWorkspaces(workspaces);
    }
    getWorkspaces();
  }, []);

  if (loading) {
    return (
      <>
        <Skeleton.default
          height={36}
          width=""100%""
          count={3}
          baseColor=""#292524""
          highlightColor=""#4c4948""
          enableAnimation={true}
        />
      </>
    );
  }

  return (
    <>
      {workspaces.map((workspace) => {
        const isActive = workspace.slug === slug;
        return (
          <div
            key={workspace.id}
            className=""flex gap-x-2 items-center justify-between""
          >
            <a
              href={isActive ? null : paths.workspace.chat(workspace.slug)}
              className={`flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center ${
                isActive
                  ? ""bg-gray-100 dark:bg-stone-600""
                  : ""hover:bg-slate-100 dark:hover:bg-stone-900 ""
              }`}
            >
              <Book className=""h-4 w-4 flex-shrink-0"" />
              <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold whitespace-nowrap overflow-hidden "">
                {workspace.name}
              </p>
            </a>
            <button
              onClick={() => {
                setSelectedWs(workspace);
                showModal();
              }}
              className=""rounded-md bg-stone-200 p-2 h-[36px] w-[15%] flex items-center justify-center text-slate-800 hover:bg-stone-300 group dark:bg-stone-800 dark:text-slate-200 dark:hover:bg-stone-900 dark:border dark:border-stone-800""
            >
              <Settings className=""h-3.5 w-3.5 transition-all duration-300 group-hover:rotate-90"" />
            </button>
          </div>
        );
      })}
      {showing && !!selectedWs && (
        <ManageWorkspace hideModal={hideModal} providedSlug={selectedWs.slug} />
      )}
    </>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR } VAR ""VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR, { VAR, } VAR ""../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR(VAR); VAR { VAR, VAR, VAR } = VAR(); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <> <VAR.VAR VAR={36} VAR=""100%"" VAR={3} VAR="" VAR="" VAR={VAR} /> </> ); } VAR ( <> {VAR.VAR((VAR) => { VAR VAR = VAR.VAR === VAR; VAR ( <VAR VAR={VAR.VAR} VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR"" > <VAR VAR={VAR ? VAR : VAR.VAR.VAR(VAR.VAR)} VAR={`VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR ${ VAR ? ""VAR-VAR-100 VAR:VAR-VAR-600"" : ""VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 "" }`} > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR ""> {VAR.VAR} </VAR> </VAR> <VAR VAR={() => { VAR(VAR); VAR(); }} VAR=""VAR-VAR VAR-VAR-200 VAR-2 VAR-[36px] VAR-[15%] VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-300 VAR VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR VAR:VAR-VAR-800"" > <VAR VAR=""VAR-3.5 VAR-3.5 VAR-VAR VAR-300 VAR-VAR:VAR-90"" /> </VAR> </VAR> ); })} {VAR && !!VAR && ( <VAR VAR={VAR} VAR={VAR.VAR} /> )} </> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Sidebar/ActiveWorkspaces/index.jsx,"import React, { useState, useEffect } from ""react"";
import { Book, Settings } from ""react-feather"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import Workspace from ""../../../models/workspace"";
import ManageWorkspace, {
  useManageWorkspaceModal,
} from ""../../Modals/MangeWorkspace"";
import paths from ""../../../utils/paths"";
import { useParams } from ""react-router-dom"";

export default function ActiveWorkspaces() {
  const { slug } = useParams();
  const [loading, setLoading] = useState(true);
  const [workspaces, setWorkspaces] = useState([]);
  const [selectedWs, setSelectedWs] = useState(null);
  const { showing, showModal, hideModal } = useManageWorkspaceModal();

  useEffect(() => {
    async function getWorkspaces() {
      const workspaces = await Workspace.all();
      setLoading(false);
      setWorkspaces(workspaces);
    }
    getWorkspaces();
  }, []);

  if (loading) {
    return (
      <>
        <Skeleton.default
          height={36}
          width=""100%""
          count={3}
          baseColor=""#292524""
          highlightColor=""#4c4948""
          enableAnimation={true}
        />
      </>
    );
  }

  return (
    <>
      {workspaces.map((workspace) => {
        const isActive = workspace.slug === slug;
        return (
          <div
            key={workspace.id}
            className=""flex gap-x-2 items-center justify-between""
          >
            <a
              href={isActive ? null : paths.workspace.chat(workspace.slug)}
              className={`flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center ${
                isActive
                  ? ""bg-gray-100 dark:bg-stone-600""
                  : ""hover:bg-slate-100 dark:hover:bg-stone-900 ""
              }`}
            >
              <Book className=""h-4 w-4 flex-shrink-0"" />
              <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold whitespace-nowrap overflow-hidden "">
                {workspace.name}
              </p>
            </a>
            <button
              onClick={() => {
                setSelectedWs(workspace);
                showModal();
              }}
              className=""rounded-md bg-stone-200 p-2 h-[36px] w-[15%] flex items-center justify-center text-slate-800 hover:bg-stone-300 group dark:bg-stone-800 dark:text-slate-200 dark:hover:bg-stone-900 dark:border dark:border-stone-800""
            >
              <Settings className=""h-3.5 w-3.5 transition-all duration-300 group-hover:rotate-90"" />
            </button>
          </div>
        );
      })}
      {showing && !!selectedWs && (
        <ManageWorkspace hideModal={hideModal} providedSlug={selectedWs.slug} />
      )}
    </>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR } VAR ""VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR, { VAR, } VAR ""../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR(VAR); VAR { VAR, VAR, VAR } = VAR(); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <> <VAR.VAR VAR={36} VAR=""100%"" VAR={3} VAR="" VAR="" VAR={VAR} /> </> ); } VAR ( <> {VAR.VAR((VAR) => { VAR VAR = VAR.VAR === VAR; VAR ( <VAR VAR={VAR.VAR} VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR"" > <VAR VAR={VAR ? VAR : VAR.VAR.VAR(VAR.VAR)} VAR={`VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR ${ VAR ? ""VAR-VAR-100 VAR:VAR-VAR-600"" : ""VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 "" }`} > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR ""> {VAR.VAR} </VAR> </VAR> <VAR VAR={() => { VAR(VAR); VAR(); }} VAR=""VAR-VAR VAR-VAR-200 VAR-2 VAR-[36px] VAR-[15%] VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-300 VAR VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR VAR:VAR-VAR-800"" > <VAR VAR=""VAR-3.5 VAR-3.5 VAR-VAR VAR-300 VAR-VAR:VAR-90"" /> </VAR> </VAR> ); })} {VAR && !!VAR && ( <VAR VAR={VAR} VAR={VAR.VAR} /> )} </> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Sidebar/Placeholder/index.jsx,"import React, { useRef } from ""react"";
import {
  BookOpen,
  Briefcase,
  Cpu,
  GitHub,
  Key,
  Plus,
  AlertCircle,
} from ""react-feather"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import paths from ""../../../utils/paths"";

export default function Sidebar() {
  const sidebarRef = useRef(null);

  // const handleWidthToggle = () => {
  //   if (!sidebarRef.current) return false;
  //   sidebarRef.current.classList.add('translate-x-[-100%]')
  // }

  return (
    <>
      <div
        ref={sidebarRef}
        style={{ height: ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative m-[16px] rounded-[26px] bg-white dark:bg-black-900 min-w-[15.5%] p-[18px] ""
      >
        {/* <button onClick={handleWidthToggle} className='absolute -right-[13px] top-[35%] bg-white w-auto h-auto bg-transparent flex items-center'>
        <svg width=""16"" height=""96"" viewBox=""0 0 16 96"" fill=""none"" xmlns=""http://www.w3.org/2000/svg"" stroke=""#141414""><path d=""M2.5 0H3C3 20 15 12 15 32V64C15 84 3 76 3 96H2.5V0Z"" fill=""black"" fill-opacity=""0.12"" stroke=""transparent"" stroke-width=""0px""></path><path d=""M0 0H2.5C2.5 20 14.5 12 14.5 32V64C14.5 84 2.5 76 2.5 96H0V0Z"" fill=""#141414""></path></svg>
        <ChevronLeft className='absolute h-4 w-4 text-white mr-1' />
      </button> */}

        <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
          {/* Header Information */}
          <div className=""flex w-full items-center justify-between"">
            <p className=""text-xl font-base text-slate-600 dark:text-slate-200"">
              AnythingLLM
            </p>
            <div className=""flex gap-x-2 items-center text-slate-500"">
              <button className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200"">
                <Key className=""h-4 w-4 "" />
              </button>
            </div>
          </div>

          {/* Primary Body */}
          <div className=""h-[100%] flex flex-col w-full justify-between pt-4 overflow-y-hidden"">
            <div className=""h-auto sidebar-items dark:sidebar-items"">
              <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
                <div className=""flex gap-x-2 items-center justify-between"">
                  <button className=""flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900"">
                    <Plus className=""h-4 w-4"" />
                    <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                      New workspace
                    </p>
                  </button>
                </div>
                <Skeleton.default
                  height={36}
                  width=""100%""
                  count={3}
                  baseColor=""#292524""
                  highlightColor=""#4c4948""
                  enableAnimation={true}
                />
              </div>
            </div>
            <div>
              <div className=""flex flex-col gap-y-2"">
                <div className=""w-full flex items-center justify-start"">
                  <div className=""flex w-fit items-center justify-end gap-x-2"">
                    <p className=""text-slate-400 leading-loose text-sm"">LLM</p>
                    <div className=""flex items-center gap-x-1 border border-red-400 px-2 bg-red-200 rounded-full"">
                      <p className=""text-red-700 leading-tight text-sm"">
                        offline
                      </p>
                      <AlertCircle className=""h-3 w-3 stroke-red-100 fill-red-400"" />
                    </div>
                  </div>
                </div>
                <a
                  href={paths.hosting()}
                  target=""_blank""
                  className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
                >
                  <Cpu className=""h-4 w-4"" />
                  <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                    Managed cloud hosting
                  </p>
                </a>
                <a
                  href={paths.hosting()}
                  target=""_blank""
                  className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100  dark:bg-stone-800 dark:hover:bg-stone-900""
                >
                  <Briefcase className=""h-4 w-4"" />
                  <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                    Enterprise Installation
                  </p>
                </a>
              </div>

              {/* Footer */}
              <div className=""flex items-end justify-between mt-2"">
                <div className=""flex gap-x-1 items-center"">
                  <a
                    href={paths.github()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <GitHub className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.docs()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <BookOpen className=""h-4 w-4 "" />
                  </a>
                </div>
                <a
                  href={paths.mailToMintplex()}
                  className=""transition-all duration-300 text-xs text-slate-200 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                >
                  @MintplexLabs
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR VAR = VAR(VAR);     VAR ( <> <VAR VAR={VAR} VAR={{ VAR: ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR-[16px] VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-VAR-[15.5%] VAR-[18px] "" > {/* <VAR VAR={VAR} VAR='VAR -VAR-[13px] VAR-[35%] VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR VAR-VAR'> <VAR VAR=""16"" VAR=""96"" VAR=""0 0 16 96"" VAR=""VAR"" VAR=""VAR: <VAR VAR='VAR VAR-4 VAR-4 VAR-VAR VAR-1' /> </VAR> */} <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500""> <VAR VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200""> <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> </VAR> </VAR> {} <VAR VAR=""VAR-[100%] VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR:VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900""> <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> </VAR> <VAR.VAR VAR={36} VAR=""100%"" VAR={3} VAR="" VAR="" VAR={VAR} /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR-400 VAR-VAR VAR-VAR"">VAR</VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR VAR-VAR-400 VAR-2 VAR-VAR-200 VAR-VAR""> <VAR VAR=""VAR-VAR-700 VAR-VAR VAR-VAR""> VAR </VAR> <VAR VAR=""VAR-3 VAR-3 VAR-VAR-100 VAR-VAR-400"" /> </VAR> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Sidebar/Placeholder/index.jsx,"import React, { useRef } from ""react"";
import {
  BookOpen,
  Briefcase,
  Cpu,
  GitHub,
  Key,
  Plus,
  AlertCircle,
} from ""react-feather"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import paths from ""../../../utils/paths"";

export default function Sidebar() {
  const sidebarRef = useRef(null);

  // const handleWidthToggle = () => {
  //   if (!sidebarRef.current) return false;
  //   sidebarRef.current.classList.add('translate-x-[-100%]')
  // }

  return (
    <>
      <div
        ref={sidebarRef}
        style={{ height: ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative m-[16px] rounded-[26px] bg-white dark:bg-black-900 min-w-[15.5%] p-[18px] ""
      >
        {/* <button onClick={handleWidthToggle} className='absolute -right-[13px] top-[35%] bg-white w-auto h-auto bg-transparent flex items-center'>
        <svg width=""16"" height=""96"" viewBox=""0 0 16 96"" fill=""none"" xmlns=""http://www.w3.org/2000/svg"" stroke=""#141414""><path d=""M2.5 0H3C3 20 15 12 15 32V64C15 84 3 76 3 96H2.5V0Z"" fill=""black"" fill-opacity=""0.12"" stroke=""transparent"" stroke-width=""0px""></path><path d=""M0 0H2.5C2.5 20 14.5 12 14.5 32V64C14.5 84 2.5 76 2.5 96H0V0Z"" fill=""#141414""></path></svg>
        <ChevronLeft className='absolute h-4 w-4 text-white mr-1' />
      </button> */}

        <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
          {/* Header Information */}
          <div className=""flex w-full items-center justify-between"">
            <p className=""text-xl font-base text-slate-600 dark:text-slate-200"">
              AnythingLLM
            </p>
            <div className=""flex gap-x-2 items-center text-slate-500"">
              <button className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200"">
                <Key className=""h-4 w-4 "" />
              </button>
            </div>
          </div>

          {/* Primary Body */}
          <div className=""h-[100%] flex flex-col w-full justify-between pt-4 overflow-y-hidden"">
            <div className=""h-auto sidebar-items dark:sidebar-items"">
              <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
                <div className=""flex gap-x-2 items-center justify-between"">
                  <button className=""flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900"">
                    <Plus className=""h-4 w-4"" />
                    <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                      New workspace
                    </p>
                  </button>
                </div>
                <Skeleton.default
                  height={36}
                  width=""100%""
                  count={3}
                  baseColor=""#292524""
                  highlightColor=""#4c4948""
                  enableAnimation={true}
                />
              </div>
            </div>
            <div>
              <div className=""flex flex-col gap-y-2"">
                <div className=""w-full flex items-center justify-start"">
                  <div className=""flex w-fit items-center justify-end gap-x-2"">
                    <p className=""text-slate-400 leading-loose text-sm"">LLM</p>
                    <div className=""flex items-center gap-x-1 border border-red-400 px-2 bg-red-200 rounded-full"">
                      <p className=""text-red-700 leading-tight text-sm"">
                        offline
                      </p>
                      <AlertCircle className=""h-3 w-3 stroke-red-100 fill-red-400"" />
                    </div>
                  </div>
                </div>
                <a
                  href={paths.hosting()}
                  target=""_blank""
                  className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
                >
                  <Cpu className=""h-4 w-4"" />
                  <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                    Managed cloud hosting
                  </p>
                </a>
                <a
                  href={paths.hosting()}
                  target=""_blank""
                  className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100  dark:bg-stone-800 dark:hover:bg-stone-900""
                >
                  <Briefcase className=""h-4 w-4"" />
                  <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                    Enterprise Installation
                  </p>
                </a>
              </div>

              {/* Footer */}
              <div className=""flex items-end justify-between mt-2"">
                <div className=""flex gap-x-1 items-center"">
                  <a
                    href={paths.github()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <GitHub className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.docs()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <BookOpen className=""h-4 w-4 "" />
                  </a>
                </div>
                <a
                  href={paths.mailToMintplex()}
                  className=""transition-all duration-300 text-xs text-slate-200 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                >
                  @MintplexLabs
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR VAR = VAR(VAR);     VAR ( <> <VAR VAR={VAR} VAR={{ VAR: ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR-[16px] VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-VAR-[15.5%] VAR-[18px] "" > {/* <VAR VAR={VAR} VAR='VAR -VAR-[13px] VAR-[35%] VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR VAR-VAR'> <VAR VAR=""16"" VAR=""96"" VAR=""0 0 16 96"" VAR=""VAR"" VAR=""VAR: <VAR VAR='VAR VAR-4 VAR-4 VAR-VAR VAR-1' /> </VAR> */} <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500""> <VAR VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200""> <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> </VAR> </VAR> {} <VAR VAR=""VAR-[100%] VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR:VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900""> <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> </VAR> <VAR.VAR VAR={36} VAR=""100%"" VAR={3} VAR="" VAR="" VAR={VAR} /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR-400 VAR-VAR VAR-VAR"">VAR</VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-1 VAR VAR-VAR-400 VAR-2 VAR-VAR-200 VAR-VAR""> <VAR VAR=""VAR-VAR-700 VAR-VAR VAR-VAR""> VAR </VAR> <VAR VAR=""VAR-3 VAR-3 VAR-VAR-100 VAR-VAR-400"" /> </VAR> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> </> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Sidebar/SettingsOverlay/index.jsx,"import React, { useEffect, useState } from ""react"";
import {
  X,
  Archive,
  Lock,
  Users,
  Database,
  MessageSquare,
  Eye,
  Key,
} from ""react-feather"";
import SystemSettingsModal, {
  useSystemSettingsModal,
} from ""../../Modals/Settings"";
import useLogo from ""../../../hooks/useLogo"";
import System from ""../../../models/system"";

const OVERLAY_ID = ""anything-llm-system-overlay"";
const OVERLAY_CLASSES = {
  enabled: [""z-10"", ""opacity-1""],
  disabled: [""-z-10"", ""opacity-0""],
};

export default function SettingsOverlay() {
  const { logo } = useLogo();
  const [tab, setTab] = useState(null);
  const [settings, setSettings] = useState(null);
  const [loading, setLoading] = useState(true);
  const { showing, hideModal, showModal } = useSystemSettingsModal();
  const selectTab = (tab = null) => {
    setTab(tab);
    showModal(true);
  };
  const handleModalClose = () => {
    hideModal();
    setTab(null);
  };

  useEffect(() => {
    async function fetchKeys() {
      const _settings = await System.keys();
      setSettings(_settings);
      setLoading(false);
    }
    fetchKeys();
  }, []);

  return (
    <div
      id={OVERLAY_ID}
      className=""absolute left-0 rounded-[26px] top-0 w-full h-full opacity-0 -z-10 p-[18px] transition-all duration-300 bg-white dark:bg-black-900 flex flex-col overflow-x-hidden items-between""
    >
      <div className=""flex w-full items-center justify-between"">
        <div className=""flex shrink-0 max-w-[50%] items-center justify-start"">
          <img
            src={logo}
            alt=""Logo""
            className=""rounded max-h-[40px]""
            style={{ objectFit: ""contain"" }}
          />
        </div>
        <div className=""flex gap-x-2 items-center text-slate-500"">
          <button
            onClick={() => {
              setTab(null);
              hideOverlay();
            }}
            className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
          >
            <X className=""h-4 w-4 "" />
          </button>
        </div>
      </div>

      <div className=""h-[100%] flex flex-col w-full justify-between pt-4 overflow-y-hidden"">
        <div className=""h-auto sidebar-items dark:sidebar-items"">
          <p className=""text-sm leading-loose my-2 text-slate-800 dark:text-slate-200 "">
            Select a setting to configure
          </p>
          {loading ? (
            <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
            </div>
          ) : (
            <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
              {!settings?.MultiUserMode && (
                <Option
                  btnText=""Appearance""
                  icon={<Eye className=""h-4 w-4 flex-shrink-0"" />}
                  isActive={tab === ""appearance""}
                  onClick={() => selectTab(""appearance"")}
                />
              )}
              <Option
                btnText=""LLM Preference""
                icon={<MessageSquare className=""h-4 w-4 flex-shrink-0"" />}
                isActive={tab === ""llm""}
                onClick={() => selectTab(""llm"")}
              />
              <Option
                btnText=""Vector Database""
                icon={<Database className=""h-4 w-4 flex-shrink-0"" />}
                isActive={tab === ""vectordb""}
                onClick={() => selectTab(""vectordb"")}
              />
              <Option
                btnText=""Export or Import""
                icon={<Archive className=""h-4 w-4 flex-shrink-0"" />}
                isActive={tab === ""exportimport""}
                onClick={() => selectTab(""exportimport"")}
              />
              {!settings?.MultiUserMode && (
                <>
                  <Option
                    btnText=""Password Protection""
                    icon={<Lock className=""h-4 w-4 flex-shrink-0"" />}
                    isActive={tab === ""password""}
                    onClick={() => selectTab(""password"")}
                  />
                  <Option
                    btnText=""Multi User Mode""
                    icon={<Users className=""h-4 w-4 flex-shrink-0"" />}
                    isActive={tab === ""multiuser""}
                    onClick={() => selectTab(""multiuser"")}
                  />
                  <Option
                    btnText=""API Key""
                    icon={<Key className=""h-4 w-4 flex-shrink-0"" />}
                    isActive={tab === ""apikey""}
                    onClick={() => selectTab(""apikey"")}
                  />
                </>
              )}
            </div>
          )}
        </div>
      </div>
      {showing && !!tab && (
        <SystemSettingsModal tab={tab} hideModal={handleModalClose} />
      )}
    </div>
  );
}

const Option = ({ btnText, icon, isActive, onClick }) => {
  return (
    <div className=""flex gap-x-2 items-center justify-between"">
      <button
        onClick={onClick}
        className={`flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center ${
          isActive
            ? ""bg-gray-100 dark:bg-stone-600""
            : ""hover:bg-slate-100 dark:hover:bg-stone-900 ""
        }`}
      >
        {icon}
        <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold whitespace-nowrap overflow-hidden "">
          {btnText}
        </p>
      </button>
    </div>
  );
};

function showOverlay() {
  document
    .getElementById(OVERLAY_ID)
    .classList.remove(...OVERLAY_CLASSES.disabled);
  document.getElementById(OVERLAY_ID).classList.add(...OVERLAY_CLASSES.enabled);
}

function hideOverlay() {
  document
    .getElementById(OVERLAY_ID)
    .classList.remove(...OVERLAY_CLASSES.enabled);
  document
    .getElementById(OVERLAY_ID)
    .classList.add(...OVERLAY_CLASSES.disabled);
}

export function useSystemSettingsOverlay() {
  return { showOverlay, hideOverlay };
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR VAR, { VAR, } VAR ""../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR = ""VAR-VAR-VAR-VAR""; VAR VAR = { VAR: [""VAR-10"", ""VAR-1""], VAR: [""-VAR-10"", ""VAR-0""], }; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR { VAR, VAR, VAR } = VAR(); VAR VAR = (VAR = VAR) => { VAR(VAR); VAR(VAR); }; VAR VAR = () => { VAR(); VAR(VAR); }; VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR ( <VAR VAR={VAR} VAR=""VAR VAR-0 VAR-[26px] VAR-0 VAR-VAR VAR-VAR VAR-0 -VAR-10 VAR-[18px] VAR-VAR VAR-300 VAR-VAR VAR:VAR-VAR-900 VAR VAR-VAR VAR-VAR-VAR VAR-VAR"" > <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-0 VAR-VAR-[50%] VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500""> <VAR VAR={() => { VAR(VAR); VAR(); }} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> </VAR> </VAR> <VAR VAR=""VAR-[100%] VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR:VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR-2 VAR-VAR-800 VAR:VAR-VAR-200 ""> VAR VAR VAR VAR VAR </VAR> {VAR ? ( <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> </VAR> ) : ( <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> {!VAR?.VAR && ( <VAR VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> )} <VAR VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> <VAR VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> <VAR VAR=""VAR VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> {!VAR?.VAR && ( <> <VAR VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> <VAR VAR=""VAR VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> <VAR VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> </> )} </VAR> )} </VAR> </VAR> {VAR && !!VAR && ( <VAR VAR={VAR} VAR={VAR} /> )} </VAR> ); } VAR VAR = ({ VAR, VAR, VAR, VAR }) => { VAR ( <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR={`VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR ${ VAR ? ""VAR-VAR-100 VAR:VAR-VAR-600"" : ""VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 "" }`} > {VAR} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR ""> {VAR} </VAR> </VAR> </VAR> ); }; VAR VAR() { VAR .VAR(VAR) .VAR.VAR(...VAR.VAR); VAR.VAR(VAR).VAR.VAR(...VAR.VAR); } VAR VAR() { VAR .VAR(VAR) .VAR.VAR(...VAR.VAR); VAR .VAR(VAR) .VAR.VAR(...VAR.VAR); } VAR VAR VAR() { VAR { VAR, VAR }; } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Sidebar/SettingsOverlay/index.jsx,"import React, { useEffect, useState } from ""react"";
import {
  X,
  Archive,
  Lock,
  Users,
  Database,
  MessageSquare,
  Eye,
  Key,
} from ""react-feather"";
import SystemSettingsModal, {
  useSystemSettingsModal,
} from ""../../Modals/Settings"";
import useLogo from ""../../../hooks/useLogo"";
import System from ""../../../models/system"";

const OVERLAY_ID = ""anything-llm-system-overlay"";
const OVERLAY_CLASSES = {
  enabled: [""z-10"", ""opacity-1""],
  disabled: [""-z-10"", ""opacity-0""],
};

export default function SettingsOverlay() {
  const { logo } = useLogo();
  const [tab, setTab] = useState(null);
  const [settings, setSettings] = useState(null);
  const [loading, setLoading] = useState(true);
  const { showing, hideModal, showModal } = useSystemSettingsModal();
  const selectTab = (tab = null) => {
    setTab(tab);
    showModal(true);
  };
  const handleModalClose = () => {
    hideModal();
    setTab(null);
  };

  useEffect(() => {
    async function fetchKeys() {
      const _settings = await System.keys();
      setSettings(_settings);
      setLoading(false);
    }
    fetchKeys();
  }, []);

  return (
    <div
      id={OVERLAY_ID}
      className=""absolute left-0 rounded-[26px] top-0 w-full h-full opacity-0 -z-10 p-[18px] transition-all duration-300 bg-white dark:bg-black-900 flex flex-col overflow-x-hidden items-between""
    >
      <div className=""flex w-full items-center justify-between"">
        <div className=""flex shrink-0 max-w-[50%] items-center justify-start"">
          <img
            src={logo}
            alt=""Logo""
            className=""rounded max-h-[40px]""
            style={{ objectFit: ""contain"" }}
          />
        </div>
        <div className=""flex gap-x-2 items-center text-slate-500"">
          <button
            onClick={() => {
              setTab(null);
              hideOverlay();
            }}
            className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
          >
            <X className=""h-4 w-4 "" />
          </button>
        </div>
      </div>

      <div className=""h-[100%] flex flex-col w-full justify-between pt-4 overflow-y-hidden"">
        <div className=""h-auto sidebar-items dark:sidebar-items"">
          <p className=""text-sm leading-loose my-2 text-slate-800 dark:text-slate-200 "">
            Select a setting to configure
          </p>
          {loading ? (
            <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
              <div className=""rounded-lg w-[90%] h-[36px] bg-stone-600 animate-pulse"" />
            </div>
          ) : (
            <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
              {!settings?.MultiUserMode && (
                <Option
                  btnText=""Appearance""
                  icon={<Eye className=""h-4 w-4 flex-shrink-0"" />}
                  isActive={tab === ""appearance""}
                  onClick={() => selectTab(""appearance"")}
                />
              )}
              <Option
                btnText=""LLM Preference""
                icon={<MessageSquare className=""h-4 w-4 flex-shrink-0"" />}
                isActive={tab === ""llm""}
                onClick={() => selectTab(""llm"")}
              />
              <Option
                btnText=""Vector Database""
                icon={<Database className=""h-4 w-4 flex-shrink-0"" />}
                isActive={tab === ""vectordb""}
                onClick={() => selectTab(""vectordb"")}
              />
              <Option
                btnText=""Export or Import""
                icon={<Archive className=""h-4 w-4 flex-shrink-0"" />}
                isActive={tab === ""exportimport""}
                onClick={() => selectTab(""exportimport"")}
              />
              {!settings?.MultiUserMode && (
                <>
                  <Option
                    btnText=""Password Protection""
                    icon={<Lock className=""h-4 w-4 flex-shrink-0"" />}
                    isActive={tab === ""password""}
                    onClick={() => selectTab(""password"")}
                  />
                  <Option
                    btnText=""Multi User Mode""
                    icon={<Users className=""h-4 w-4 flex-shrink-0"" />}
                    isActive={tab === ""multiuser""}
                    onClick={() => selectTab(""multiuser"")}
                  />
                  <Option
                    btnText=""API Key""
                    icon={<Key className=""h-4 w-4 flex-shrink-0"" />}
                    isActive={tab === ""apikey""}
                    onClick={() => selectTab(""apikey"")}
                  />
                </>
              )}
            </div>
          )}
        </div>
      </div>
      {showing && !!tab && (
        <SystemSettingsModal tab={tab} hideModal={handleModalClose} />
      )}
    </div>
  );
}

const Option = ({ btnText, icon, isActive, onClick }) => {
  return (
    <div className=""flex gap-x-2 items-center justify-between"">
      <button
        onClick={onClick}
        className={`flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center ${
          isActive
            ? ""bg-gray-100 dark:bg-stone-600""
            : ""hover:bg-slate-100 dark:hover:bg-stone-900 ""
        }`}
      >
        {icon}
        <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold whitespace-nowrap overflow-hidden "">
          {btnText}
        </p>
      </button>
    </div>
  );
};

function showOverlay() {
  document
    .getElementById(OVERLAY_ID)
    .classList.remove(...OVERLAY_CLASSES.disabled);
  document.getElementById(OVERLAY_ID).classList.add(...OVERLAY_CLASSES.enabled);
}

function hideOverlay() {
  document
    .getElementById(OVERLAY_ID)
    .classList.remove(...OVERLAY_CLASSES.enabled);
  document
    .getElementById(OVERLAY_ID)
    .classList.add(...OVERLAY_CLASSES.disabled);
}

export function useSystemSettingsOverlay() {
  return { showOverlay, hideOverlay };
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR VAR, { VAR, } VAR ""../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR = ""VAR-VAR-VAR-VAR""; VAR VAR = { VAR: [""VAR-10"", ""VAR-1""], VAR: [""-VAR-10"", ""VAR-0""], }; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR { VAR, VAR, VAR } = VAR(); VAR VAR = (VAR = VAR) => { VAR(VAR); VAR(VAR); }; VAR VAR = () => { VAR(); VAR(VAR); }; VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR ( <VAR VAR={VAR} VAR=""VAR VAR-0 VAR-[26px] VAR-0 VAR-VAR VAR-VAR VAR-0 -VAR-10 VAR-[18px] VAR-VAR VAR-300 VAR-VAR VAR:VAR-VAR-900 VAR VAR-VAR VAR-VAR-VAR VAR-VAR"" > <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-0 VAR-VAR-[50%] VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500""> <VAR VAR={() => { VAR(VAR); VAR(); }} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> </VAR> </VAR> <VAR VAR=""VAR-[100%] VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR:VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR-2 VAR-VAR-800 VAR:VAR-VAR-200 ""> VAR VAR VAR VAR VAR </VAR> {VAR ? ( <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> <VAR VAR=""VAR-VAR VAR-[90%] VAR-[36px] VAR-VAR-600 VAR-VAR"" /> </VAR> ) : ( <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> {!VAR?.VAR && ( <VAR VAR=""VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> )} <VAR VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> <VAR VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> <VAR VAR=""VAR VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> {!VAR?.VAR && ( <> <VAR VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> <VAR VAR=""VAR VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> <VAR VAR=""VAR VAR"" VAR={<VAR VAR=""VAR-4 VAR-4 VAR-VAR-0"" />} VAR={VAR === ""VAR""} VAR={() => VAR(""VAR"")} /> </> )} </VAR> )} </VAR> </VAR> {VAR && !!VAR && ( <VAR VAR={VAR} VAR={VAR} /> )} </VAR> ); } VAR VAR = ({ VAR, VAR, VAR, VAR }) => { VAR ( <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR={`VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR ${ VAR ? ""VAR-VAR-100 VAR:VAR-VAR-600"" : ""VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900 "" }`} > {VAR} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR ""> {VAR} </VAR> </VAR> </VAR> ); }; VAR VAR() { VAR .VAR(VAR) .VAR.VAR(...VAR.VAR); VAR.VAR(VAR).VAR.VAR(...VAR.VAR); } VAR VAR() { VAR .VAR(VAR) .VAR.VAR(...VAR.VAR); VAR .VAR(VAR) .VAR.VAR(...VAR.VAR); } VAR VAR VAR() { VAR { VAR, VAR }; } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Sidebar/index.jsx,"import React, { useEffect, useRef, useState } from ""react"";
import {
  AtSign,
  BookOpen,
  GitHub,
  LogOut,
  Menu,
  Package,
  Plus,
  Shield,
  Tool,
  X,
} from ""react-feather"";
import IndexCount from ""./IndexCount"";
import LLMStatus from ""./LLMStatus"";
import NewWorkspaceModal, {
  useNewWorkspaceModal,
} from ""../Modals/NewWorkspace"";
import ActiveWorkspaces from ""./ActiveWorkspaces"";
import paths from ""../../utils/paths"";
import Discord from ""../Icons/Discord"";
import useUser from ""../../hooks/useUser"";
import { userFromStorage } from ""../../utils/request"";
import { AUTH_TOKEN, AUTH_USER } from ""../../utils/constants"";
import useLogo from ""../../hooks/useLogo"";
import SettingsOverlay, { useSystemSettingsOverlay } from ""./SettingsOverlay"";

export default function Sidebar() {
  const { logo } = useLogo();
  const sidebarRef = useRef(null);
  const { showOverlay } = useSystemSettingsOverlay();
  const {
    showing: showingNewWsModal,
    showModal: showNewWsModal,
    hideModal: hideNewWsModal,
  } = useNewWorkspaceModal();

  return (
    <>
      <div
        ref={sidebarRef}
        style={{ height: ""calc(100% - 32px)"" }}
        className=""relative transition-all duration-500 relative m-[16px] rounded-[26px] bg-white dark:bg-black-900 min-w-[15.5%] p-[18px] ""
      >
        <SettingsOverlay />
        <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
          {/* Header Information */}
          <div className=""flex w-full items-center justify-between"">
            <div className=""flex shrink-0 max-w-[50%] items-center justify-start"">
              <img
                src={logo}
                alt=""Logo""
                className=""rounded max-h-[40px]""
                style={{ objectFit: ""contain"" }}
              />
            </div>
            <div className=""flex gap-x-2 items-center text-slate-500"">
              <AdminHome />
              <SettingsButton onClick={showOverlay} />
            </div>
          </div>

          {/* Primary Body */}
          <div className=""h-[100%] flex flex-col w-full justify-between pt-4 overflow-y-hidden"">
            <div className=""h-auto sidebar-items dark:sidebar-items"">
              <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
                <div className=""flex gap-x-2 items-center justify-between"">
                  <button
                    onClick={showNewWsModal}
                    className=""flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900""
                  >
                    <Plus className=""h-4 w-4"" />
                    <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                      New workspace
                    </p>
                  </button>
                </div>
                <ActiveWorkspaces />
              </div>
            </div>
            <div>
              <div className=""flex flex-col gap-y-2"">
                <div className=""w-full flex items-center justify-between"">
                  <LLMStatus />
                  <IndexCount />
                </div>
                <a
                  href={paths.feedback()}
                  target=""_blank""
                  className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
                >
                  <AtSign className=""h-4 w-4"" />
                  <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                    Feedback form
                  </p>
                </a>
                <ManagedHosting />
                <LogoutButton />
              </div>

              {/* Footer */}
              <div className=""flex items-end justify-between mt-2"">
                <div className=""flex gap-x-1 items-center"">
                  <a
                    href={paths.github()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <GitHub className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.docs()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <BookOpen className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.discord()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 dark:bg-slate-800 hover:bg-slate-800 group""
                  >
                    <Discord className=""h-4 w-4 stroke-slate-400 group-hover:stroke-slate-200 dark:group-hover:stroke-slate-200"" />
                  </a>
                </div>
                <a
                  href={paths.mailToMintplex()}
                  className=""transition-all duration-300 text-xs text-slate-500 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                >
                  @MintplexLabs
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      {showingNewWsModal && <NewWorkspaceModal hideModal={hideNewWsModal} />}
    </>
  );
}

export function SidebarMobileHeader() {
  const { logo } = useLogo();
  const sidebarRef = useRef(null);
  const [showSidebar, setShowSidebar] = useState(false);
  const [showBgOverlay, setShowBgOverlay] = useState(false);
  const { showOverlay } = useSystemSettingsOverlay();
  const {
    showing: showingNewWsModal,
    showModal: showNewWsModal,
    hideModal: hideNewWsModal,
  } = useNewWorkspaceModal();

  useEffect(() => {
    // Darkens the rest of the screen
    // when sidebar is open.
    function handleBg() {
      if (showSidebar) {
        setTimeout(() => {
          setShowBgOverlay(true);
        }, 300);
      } else {
        setShowBgOverlay(false);
      }
    }
    handleBg();
  }, [showSidebar]);

  return (
    <>
      <div className=""flex justify-between relative top-0 left-0 w-full rounded-b-lg px-2 pb-4 bg-white dark:bg-black-900 text-slate-800 dark:text-slate-200"">
        <button
          onClick={() => setShowSidebar(true)}
          className=""rounded-md bg-stone-200 p-2 flex items-center justify-center text-slate-800 hover:bg-stone-300 group dark:bg-stone-800 dark:text-slate-200 dark:hover:bg-stone-900 dark:border dark:border-stone-800""
        >
          <Menu className=""h-6 w-6"" />
        </button>
        <div className=""flex shrink-0 w-fit items-center justify-start"">
          <img
            src={logo}
            alt=""Logo""
            className=""rounded w-full max-h-[40px]""
            style={{ objectFit: ""contain"" }}
          />
        </div>
      </div>
      <div
        style={{
          transform: showSidebar ? `translateX(0vw)` : `translateX(-100vw)`,
        }}
        className={`z-99 fixed top-0 left-0 transition-all duration-500 w-[100vw] h-[100vh]`}
      >
        <div
          className={`${
            showBgOverlay
              ? ""transition-all opacity-1""
              : ""transition-none opacity-0""
          }  duration-500 fixed top-0 left-0 bg-black-900 bg-opacity-75 w-screen h-screen`}
          onClick={() => setShowSidebar(false)}
        />
        <div
          ref={sidebarRef}
          className=""relative h-[100vh] fixed top-0 left-0  rounded-r-[26px] bg-white dark:bg-black-900 w-[80%] p-[18px] ""
        >
          <SettingsOverlay />
          <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
            {/* Header Information */}
            <div className=""flex w-full items-center justify-between gap-x-4"">
              <div className=""flex shrink-1 w-fit items-center justify-start"">
                <img
                  src={logo}
                  alt=""Logo""
                  className=""rounded w-full max-h-[40px]""
                  style={{ objectFit: ""contain"" }}
                />
              </div>
              <div className=""flex gap-x-2 items-center text-slate-500 shink-0"">
                <AdminHome />
                <SettingsButton onClick={showOverlay} />
              </div>
            </div>

            {/* Primary Body */}
            <div className=""h-full flex flex-col w-full justify-between pt-4 overflow-y-hidden "">
              <div className=""h-auto md:sidebar-items md:dark:sidebar-items"">
                <div
                  style={{ height: ""calc(100vw - -3rem)"" }}
                  className="" flex flex-col gap-y-4 pb-8 overflow-y-scroll no-scroll""
                >
                  <div className=""flex gap-x-2 items-center justify-between"">
                    <button
                      onClick={showNewWsModal}
                      className=""flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900""
                    >
                      <Plus className=""h-4 w-4"" />
                      <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                        New workspace
                      </p>
                    </button>
                  </div>
                  <ActiveWorkspaces />
                </div>
              </div>
              <div>
                <div className=""flex flex-col gap-y-2"">
                  <div className=""w-full flex items-center justify-between"">
                    <LLMStatus />
                    <IndexCount />
                  </div>
                  <a
                    href={paths.feedback()}
                    target=""_blank""
                    className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
                  >
                    <AtSign className=""h-4 w-4"" />
                    <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                      Feedback form
                    </p>
                  </a>
                  <ManagedHosting />
                  <LogoutButton />
                </div>

                {/* Footer */}
                <div className=""flex items-end justify-between mt-2"">
                  <div className=""flex gap-x-1 items-center"">
                    <a
                      href={paths.github()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                    >
                      <GitHub className=""h-4 w-4 "" />
                    </a>
                    <a
                      href={paths.docs()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                    >
                      <BookOpen className=""h-4 w-4 "" />
                    </a>
                    <a
                      href={paths.discord()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 dark:bg-slate-800 hover:bg-slate-800 group""
                    >
                      <Discord className=""h-4 w-4 stroke-slate-400 group-hover:stroke-slate-200 dark:group-hover:stroke-slate-200"" />
                    </a>
                  </div>
                  <a
                    href={paths.mailToMintplex()}
                    className=""transition-all duration-300 text-xs text-slate-500 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                  >
                    @MintplexLabs
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        {showingNewWsModal && <NewWorkspaceModal hideModal={hideNewWsModal} />}
      </div>
    </>
  );
}

function AdminHome() {
  const { user } = useUser();
  if (!user || user?.role !== ""admin"") return null;
  return (
    <a
      href={paths.admin.system()}
      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
    >
      <Shield className=""h-4 w-4"" />
    </a>
  );
}

function LogoutButton() {
  if (!window.localStorage.getItem(AUTH_USER)) return null;
  const user = userFromStorage();
  if (!user.username) return null;

  return (
    <button
      onClick={() => {
        window.localStorage.removeItem(AUTH_USER);
        window.localStorage.removeItem(AUTH_TOKEN);
        window.location.replace(paths.home());
      }}
      className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
    >
      <LogOut className=""h-4 w-4"" />
      <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
        Log out of {user.username}
      </p>
    </button>
  );
}

function SettingsButton({ onClick }) {
  const { user } = useUser();

  if (!!user && user?.role !== ""admin"") return null;
  return (
    <button
      onClick={onClick}
      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
    >
      <Tool className=""h-4 w-4 "" />
    </button>
  );
}

function ManagedHosting() {
  if (window.location.origin.includes("".useanything.com"")) return null;
  return (
    <a
      href={paths.hosting()}
      target=""_blank""
      className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
    >
      <Package className=""h-4 w-4"" />
      <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
        Managed cloud hosting
      </p>
    </a>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR, { VAR, } VAR ""../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR ""../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR { VAR } VAR ""../../VAR/VAR""; VAR { VAR, VAR } VAR ""../../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR VAR = VAR(VAR); VAR { VAR } = VAR(); VAR { VAR: VAR, VAR: VAR, VAR: VAR, } = VAR(); VAR ( <> <VAR VAR={VAR} VAR={{ VAR: ""VAR(100% - 32px)"" }} VAR=""VAR VAR-VAR VAR-500 VAR VAR-[16px] VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-VAR-[15.5%] VAR-[18px] "" > <VAR /> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-0 VAR-VAR-[50%] VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500""> <VAR /> <VAR VAR={VAR} /> </VAR> </VAR> {} <VAR VAR=""VAR-[100%] VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR:VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> </VAR> <VAR /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR /> <VAR /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> <VAR /> <VAR /> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-400 VAR-VAR:VAR-VAR-200 VAR:VAR-VAR:VAR-VAR-200"" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-500 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> {VAR && <VAR VAR={VAR} />} </> ); } VAR VAR VAR() { VAR { VAR } = VAR(); VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR { VAR } = VAR(); VAR { VAR: VAR, VAR: VAR, VAR: VAR, } = VAR(); VAR(() => {   VAR VAR() { VAR (VAR) { VAR(() => { VAR(VAR); }, 300); } VAR { VAR(VAR); } } VAR(); }, [VAR]); VAR ( <> <VAR VAR=""VAR VAR-VAR VAR VAR-0 VAR-0 VAR-VAR VAR-VAR-VAR VAR-2 VAR-4 VAR-VAR VAR:VAR-VAR-900 VAR-VAR-800 VAR:VAR-VAR-200""> <VAR VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR-VAR-200 VAR-2 VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-300 VAR VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR VAR:VAR-VAR-800"" > <VAR VAR=""VAR-6 VAR-6"" /> </VAR> <VAR VAR=""VAR VAR-0 VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> </VAR> <VAR VAR={{ VAR: VAR ? `VAR(0vw)` : `VAR(-100vw)`, }} VAR={`VAR-99 VAR VAR-0 VAR-0 VAR-VAR VAR-500 VAR-[100vw] VAR-[100vh]`} > <VAR VAR={`${ VAR ? ""VAR-VAR VAR-1"" : ""VAR-VAR VAR-0"" } VAR-500 VAR VAR-0 VAR-0 VAR-VAR-900 VAR-VAR-75 VAR-VAR VAR-VAR`} VAR={() => VAR(VAR)} /> <VAR VAR={VAR} VAR=""VAR VAR-[100vh] VAR VAR-0 VAR-0 VAR-VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-[80%] VAR-[18px] "" > <VAR /> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR VAR-1 VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500 VAR-0""> <VAR /> <VAR VAR={VAR} /> </VAR> </VAR> {} <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR ""> <VAR VAR=""VAR-VAR VAR:VAR-VAR VAR:VAR:VAR-VAR""> <VAR VAR={{ VAR: ""VAR(100vw - -3rem)"" }} VAR="" VAR VAR-VAR VAR-VAR-4 VAR-8 VAR-VAR-VAR VAR-VAR"" > <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> </VAR> <VAR /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR /> <VAR /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> <VAR /> <VAR /> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-400 VAR-VAR:VAR-VAR-200 VAR:VAR-VAR:VAR-VAR-200"" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-500 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> {VAR && <VAR VAR={VAR} />} </VAR> </> ); } VAR VAR() { VAR { VAR } = VAR(); VAR (!VAR || VAR?.VAR !== ""VAR"") VAR VAR; VAR ( <VAR VAR={VAR.VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4"" /> </VAR> ); } VAR VAR() { VAR (!VAR.VAR.VAR(VAR)) VAR VAR; VAR VAR = VAR(); VAR (!VAR.VAR) VAR VAR; VAR ( <VAR VAR={() => { VAR.VAR.VAR(VAR); VAR.VAR.VAR(VAR); VAR.VAR.VAR(VAR.VAR()); }} VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR VAR {VAR.VAR} </VAR> </VAR> ); } VAR VAR({ VAR }) { VAR { VAR } = VAR(); VAR (!!VAR && VAR?.VAR !== ""VAR"") VAR VAR; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> ); } VAR VAR() { VAR (VAR.VAR.VAR.VAR("".VAR.VAR"")) VAR VAR; VAR ( <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/Sidebar/index.jsx,"import React, { useEffect, useRef, useState } from ""react"";
import {
  AtSign,
  BookOpen,
  GitHub,
  LogOut,
  Menu,
  Package,
  Plus,
  Shield,
  Tool,
  X,
} from ""react-feather"";
import IndexCount from ""./IndexCount"";
import LLMStatus from ""./LLMStatus"";
import NewWorkspaceModal, {
  useNewWorkspaceModal,
} from ""../Modals/NewWorkspace"";
import ActiveWorkspaces from ""./ActiveWorkspaces"";
import paths from ""../../utils/paths"";
import Discord from ""../Icons/Discord"";
import useUser from ""../../hooks/useUser"";
import { userFromStorage } from ""../../utils/request"";
import { AUTH_TOKEN, AUTH_USER } from ""../../utils/constants"";
import useLogo from ""../../hooks/useLogo"";
import SettingsOverlay, { useSystemSettingsOverlay } from ""./SettingsOverlay"";

export default function Sidebar() {
  const { logo } = useLogo();
  const sidebarRef = useRef(null);
  const { showOverlay } = useSystemSettingsOverlay();
  const {
    showing: showingNewWsModal,
    showModal: showNewWsModal,
    hideModal: hideNewWsModal,
  } = useNewWorkspaceModal();

  return (
    <>
      <div
        ref={sidebarRef}
        style={{ height: ""calc(100% - 32px)"" }}
        className=""relative transition-all duration-500 relative m-[16px] rounded-[26px] bg-white dark:bg-black-900 min-w-[15.5%] p-[18px] ""
      >
        <SettingsOverlay />
        <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
          {/* Header Information */}
          <div className=""flex w-full items-center justify-between"">
            <div className=""flex shrink-0 max-w-[50%] items-center justify-start"">
              <img
                src={logo}
                alt=""Logo""
                className=""rounded max-h-[40px]""
                style={{ objectFit: ""contain"" }}
              />
            </div>
            <div className=""flex gap-x-2 items-center text-slate-500"">
              <AdminHome />
              <SettingsButton onClick={showOverlay} />
            </div>
          </div>

          {/* Primary Body */}
          <div className=""h-[100%] flex flex-col w-full justify-between pt-4 overflow-y-hidden"">
            <div className=""h-auto sidebar-items dark:sidebar-items"">
              <div className=""flex flex-col gap-y-4 h-[65vh] pb-8 overflow-y-scroll no-scroll"">
                <div className=""flex gap-x-2 items-center justify-between"">
                  <button
                    onClick={showNewWsModal}
                    className=""flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900""
                  >
                    <Plus className=""h-4 w-4"" />
                    <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                      New workspace
                    </p>
                  </button>
                </div>
                <ActiveWorkspaces />
              </div>
            </div>
            <div>
              <div className=""flex flex-col gap-y-2"">
                <div className=""w-full flex items-center justify-between"">
                  <LLMStatus />
                  <IndexCount />
                </div>
                <a
                  href={paths.feedback()}
                  target=""_blank""
                  className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
                >
                  <AtSign className=""h-4 w-4"" />
                  <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                    Feedback form
                  </p>
                </a>
                <ManagedHosting />
                <LogoutButton />
              </div>

              {/* Footer */}
              <div className=""flex items-end justify-between mt-2"">
                <div className=""flex gap-x-1 items-center"">
                  <a
                    href={paths.github()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <GitHub className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.docs()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                  >
                    <BookOpen className=""h-4 w-4 "" />
                  </a>
                  <a
                    href={paths.discord()}
                    className=""transition-all duration-300 p-2 rounded-full bg-slate-200 dark:bg-slate-800 hover:bg-slate-800 group""
                  >
                    <Discord className=""h-4 w-4 stroke-slate-400 group-hover:stroke-slate-200 dark:group-hover:stroke-slate-200"" />
                  </a>
                </div>
                <a
                  href={paths.mailToMintplex()}
                  className=""transition-all duration-300 text-xs text-slate-500 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                >
                  @MintplexLabs
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      {showingNewWsModal && <NewWorkspaceModal hideModal={hideNewWsModal} />}
    </>
  );
}

export function SidebarMobileHeader() {
  const { logo } = useLogo();
  const sidebarRef = useRef(null);
  const [showSidebar, setShowSidebar] = useState(false);
  const [showBgOverlay, setShowBgOverlay] = useState(false);
  const { showOverlay } = useSystemSettingsOverlay();
  const {
    showing: showingNewWsModal,
    showModal: showNewWsModal,
    hideModal: hideNewWsModal,
  } = useNewWorkspaceModal();

  useEffect(() => {
    // Darkens the rest of the screen
    // when sidebar is open.
    function handleBg() {
      if (showSidebar) {
        setTimeout(() => {
          setShowBgOverlay(true);
        }, 300);
      } else {
        setShowBgOverlay(false);
      }
    }
    handleBg();
  }, [showSidebar]);

  return (
    <>
      <div className=""flex justify-between relative top-0 left-0 w-full rounded-b-lg px-2 pb-4 bg-white dark:bg-black-900 text-slate-800 dark:text-slate-200"">
        <button
          onClick={() => setShowSidebar(true)}
          className=""rounded-md bg-stone-200 p-2 flex items-center justify-center text-slate-800 hover:bg-stone-300 group dark:bg-stone-800 dark:text-slate-200 dark:hover:bg-stone-900 dark:border dark:border-stone-800""
        >
          <Menu className=""h-6 w-6"" />
        </button>
        <div className=""flex shrink-0 w-fit items-center justify-start"">
          <img
            src={logo}
            alt=""Logo""
            className=""rounded w-full max-h-[40px]""
            style={{ objectFit: ""contain"" }}
          />
        </div>
      </div>
      <div
        style={{
          transform: showSidebar ? `translateX(0vw)` : `translateX(-100vw)`,
        }}
        className={`z-99 fixed top-0 left-0 transition-all duration-500 w-[100vw] h-[100vh]`}
      >
        <div
          className={`${
            showBgOverlay
              ? ""transition-all opacity-1""
              : ""transition-none opacity-0""
          }  duration-500 fixed top-0 left-0 bg-black-900 bg-opacity-75 w-screen h-screen`}
          onClick={() => setShowSidebar(false)}
        />
        <div
          ref={sidebarRef}
          className=""relative h-[100vh] fixed top-0 left-0  rounded-r-[26px] bg-white dark:bg-black-900 w-[80%] p-[18px] ""
        >
          <SettingsOverlay />
          <div className=""w-full h-full flex flex-col overflow-x-hidden items-between"">
            {/* Header Information */}
            <div className=""flex w-full items-center justify-between gap-x-4"">
              <div className=""flex shrink-1 w-fit items-center justify-start"">
                <img
                  src={logo}
                  alt=""Logo""
                  className=""rounded w-full max-h-[40px]""
                  style={{ objectFit: ""contain"" }}
                />
              </div>
              <div className=""flex gap-x-2 items-center text-slate-500 shink-0"">
                <AdminHome />
                <SettingsButton onClick={showOverlay} />
              </div>
            </div>

            {/* Primary Body */}
            <div className=""h-full flex flex-col w-full justify-between pt-4 overflow-y-hidden "">
              <div className=""h-auto md:sidebar-items md:dark:sidebar-items"">
                <div
                  style={{ height: ""calc(100vw - -3rem)"" }}
                  className="" flex flex-col gap-y-4 pb-8 overflow-y-scroll no-scroll""
                >
                  <div className=""flex gap-x-2 items-center justify-between"">
                    <button
                      onClick={showNewWsModal}
                      className=""flex flex-grow w-[75%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 rounded-lg text-slate-800 dark:text-slate-200 justify-start items-center hover:bg-slate-100 dark:hover:bg-stone-900""
                    >
                      <Plus className=""h-4 w-4"" />
                      <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                        New workspace
                      </p>
                    </button>
                  </div>
                  <ActiveWorkspaces />
                </div>
              </div>
              <div>
                <div className=""flex flex-col gap-y-2"">
                  <div className=""w-full flex items-center justify-between"">
                    <LLMStatus />
                    <IndexCount />
                  </div>
                  <a
                    href={paths.feedback()}
                    target=""_blank""
                    className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
                  >
                    <AtSign className=""h-4 w-4"" />
                    <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
                      Feedback form
                    </p>
                  </a>
                  <ManagedHosting />
                  <LogoutButton />
                </div>

                {/* Footer */}
                <div className=""flex items-end justify-between mt-2"">
                  <div className=""flex gap-x-1 items-center"">
                    <a
                      href={paths.github()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                    >
                      <GitHub className=""h-4 w-4 "" />
                    </a>
                    <a
                      href={paths.docs()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-slate-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
                    >
                      <BookOpen className=""h-4 w-4 "" />
                    </a>
                    <a
                      href={paths.discord()}
                      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 dark:bg-slate-800 hover:bg-slate-800 group""
                    >
                      <Discord className=""h-4 w-4 stroke-slate-400 group-hover:stroke-slate-200 dark:group-hover:stroke-slate-200"" />
                    </a>
                  </div>
                  <a
                    href={paths.mailToMintplex()}
                    className=""transition-all duration-300 text-xs text-slate-500 dark:text-slate-600 hover:text-blue-600 dark:hover:text-blue-400""
                  >
                    @MintplexLabs
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        {showingNewWsModal && <NewWorkspaceModal hideModal={hideNewWsModal} />}
      </div>
    </>
  );
}

function AdminHome() {
  const { user } = useUser();
  if (!user || user?.role !== ""admin"") return null;
  return (
    <a
      href={paths.admin.system()}
      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
    >
      <Shield className=""h-4 w-4"" />
    </a>
  );
}

function LogoutButton() {
  if (!window.localStorage.getItem(AUTH_USER)) return null;
  const user = userFromStorage();
  if (!user.username) return null;

  return (
    <button
      onClick={() => {
        window.localStorage.removeItem(AUTH_USER);
        window.localStorage.removeItem(AUTH_TOKEN);
        window.location.replace(paths.home());
      }}
      className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
    >
      <LogOut className=""h-4 w-4"" />
      <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
        Log out of {user.username}
      </p>
    </button>
  );
}

function SettingsButton({ onClick }) {
  const { user } = useUser();

  if (!!user && user?.role !== ""admin"") return null;
  return (
    <button
      onClick={onClick}
      className=""transition-all duration-300 p-2 rounded-full bg-slate-200 text-slate-400 dark:bg-stone-800 hover:bg-slate-800 hover:text-slate-200 dark:hover:text-slate-200""
    >
      <Tool className=""h-4 w-4 "" />
    </button>
  );
}

function ManagedHosting() {
  if (window.location.origin.includes("".useanything.com"")) return null;
  return (
    <a
      href={paths.hosting()}
      target=""_blank""
      className=""flex flex-grow w-[100%] h-[36px] gap-x-2 py-[5px] px-4 border border-slate-400 dark:border-transparent rounded-lg text-slate-800 dark:text-slate-200 justify-center items-center hover:bg-slate-100 dark:bg-stone-800 dark:hover:bg-stone-900""
    >
      <Package className=""h-4 w-4"" />
      <p className=""text-slate-800 dark:text-slate-200 text-xs leading-loose font-semibold"">
        Managed cloud hosting
      </p>
    </a>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR } VAR ""VAR""; VAR { VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, VAR, } VAR ""VAR-VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR, { VAR, } VAR ""../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR ""../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR { VAR } VAR ""../../VAR/VAR""; VAR { VAR, VAR } VAR ""../../VAR/VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR VAR = VAR(VAR); VAR { VAR } = VAR(); VAR { VAR: VAR, VAR: VAR, VAR: VAR, } = VAR(); VAR ( <> <VAR VAR={VAR} VAR={{ VAR: ""VAR(100% - 32px)"" }} VAR=""VAR VAR-VAR VAR-500 VAR VAR-[16px] VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-VAR-[15.5%] VAR-[18px] "" > <VAR /> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-0 VAR-VAR-[50%] VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500""> <VAR /> <VAR VAR={VAR} /> </VAR> </VAR> {} <VAR VAR=""VAR-[100%] VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR VAR:VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-4 VAR-[65vh] VAR-8 VAR-VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> </VAR> <VAR /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR /> <VAR /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> <VAR /> <VAR /> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-400 VAR-VAR:VAR-VAR-200 VAR:VAR-VAR:VAR-VAR-200"" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-500 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> {VAR && <VAR VAR={VAR} />} </> ); } VAR VAR VAR() { VAR { VAR } = VAR(); VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR { VAR } = VAR(); VAR { VAR: VAR, VAR: VAR, VAR: VAR, } = VAR(); VAR(() => {   VAR VAR() { VAR (VAR) { VAR(() => { VAR(VAR); }, 300); } VAR { VAR(VAR); } } VAR(); }, [VAR]); VAR ( <> <VAR VAR=""VAR VAR-VAR VAR VAR-0 VAR-0 VAR-VAR VAR-VAR-VAR VAR-2 VAR-4 VAR-VAR VAR:VAR-VAR-900 VAR-VAR-800 VAR:VAR-VAR-200""> <VAR VAR={() => VAR(VAR)} VAR=""VAR-VAR VAR-VAR-200 VAR-2 VAR VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-300 VAR VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR VAR:VAR-VAR-800"" > <VAR VAR=""VAR-6 VAR-6"" /> </VAR> <VAR VAR=""VAR VAR-0 VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> </VAR> <VAR VAR={{ VAR: VAR ? `VAR(0vw)` : `VAR(-100vw)`, }} VAR={`VAR-99 VAR VAR-0 VAR-0 VAR-VAR VAR-500 VAR-[100vw] VAR-[100vh]`} > <VAR VAR={`${ VAR ? ""VAR-VAR VAR-1"" : ""VAR-VAR VAR-0"" } VAR-500 VAR VAR-0 VAR-0 VAR-VAR-900 VAR-VAR-75 VAR-VAR VAR-VAR`} VAR={() => VAR(VAR)} /> <VAR VAR={VAR} VAR=""VAR VAR-[100vh] VAR VAR-0 VAR-0 VAR-VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR-[80%] VAR-[18px] "" > <VAR /> <VAR VAR=""VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR-VAR VAR-VAR""> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR VAR-1 VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-VAR-[40px]"" VAR={{ VAR: ""VAR"" }} /> </VAR> <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR-500 VAR-0""> <VAR /> <VAR VAR={VAR} /> </VAR> </VAR> {} <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR-VAR ""> <VAR VAR=""VAR-VAR VAR:VAR-VAR VAR:VAR:VAR-VAR""> <VAR VAR={{ VAR: ""VAR(100vw - -3rem)"" }} VAR="" VAR VAR-VAR VAR-VAR-4 VAR-8 VAR-VAR-VAR VAR-VAR"" > <VAR VAR=""VAR VAR-VAR-2 VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-[75%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> </VAR> <VAR /> </VAR> </VAR> <VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR /> <VAR /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR </VAR> </VAR> <VAR /> <VAR /> </VAR> {} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-2""> <VAR VAR=""VAR VAR-VAR-1 VAR-VAR""> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR"" > <VAR VAR=""VAR-4 VAR-4 VAR-VAR-400 VAR-VAR:VAR-VAR-200 VAR:VAR-VAR:VAR-VAR-200"" /> </VAR> </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-VAR VAR-VAR-500 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-400"" > @VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> {VAR && <VAR VAR={VAR} />} </VAR> </> ); } VAR VAR() { VAR { VAR } = VAR(); VAR (!VAR || VAR?.VAR !== ""VAR"") VAR VAR; VAR ( <VAR VAR={VAR.VAR.VAR()} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4"" /> </VAR> ); } VAR VAR() { VAR (!VAR.VAR.VAR(VAR)) VAR VAR; VAR VAR = VAR(); VAR (!VAR.VAR) VAR VAR; VAR ( <VAR VAR={() => { VAR.VAR.VAR(VAR); VAR.VAR.VAR(VAR); VAR.VAR.VAR(VAR.VAR()); }} VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR VAR {VAR.VAR} </VAR> </VAR> ); } VAR VAR({ VAR }) { VAR { VAR } = VAR(); VAR (!!VAR && VAR?.VAR !== ""VAR"") VAR VAR; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-300 VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR-400 VAR:VAR-VAR-800 VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 "" /> </VAR> ); } VAR VAR() { VAR (VAR.VAR.VAR.VAR("".VAR.VAR"")) VAR VAR; VAR ( <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR VAR-VAR VAR-[100%] VAR-[36px] VAR-VAR-2 VAR-[5px] VAR-4 VAR VAR-VAR-400 VAR:VAR-VAR VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR:VAR-VAR-100 VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-900"" > <VAR VAR=""VAR-4 VAR-4"" /> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR VAR </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/WorkspaceChat/ChatContainer/ChatHistory/Citation/index.jsx,"import { memo, useState } from ""react"";
import { Maximize2, Minimize2 } from ""react-feather"";
import { v4 } from ""uuid"";
import { decode as HTMLDecode } from ""he"";

function combineLikeSources(sources) {
  const combined = {};
  sources.forEach((source) => {
    const { id, title, text } = source;
    if (combined.hasOwnProperty(title)) {
      combined[title].text += `\n\n ---- Chunk ${id || """"} ---- \n\n${text}`;
      combined[title].references += 1;
    } else {
      combined[title] = { title, text, references: 1 };
    }
  });
  return Object.values(combined);
}

export default function Citations({ sources = [] }) {
  if (sources.length === 0) return null;

  return (
    <div className=""flex flex-col mt-4 justify-left"">
      <div className=""flex flex-col justify-left overflow-x-scroll "">
        <div className=""w-full flex overflow-x-scroll items-center gap-4 mt-1 doc__source"">
          {combineLikeSources(sources).map((source) => (
            <Citation id={source?.id || v4()} source={source} />
          ))}
        </div>
      </div>
      <p className=""w-fit text-gray-700 dark:text-stone-400 text-xs mt-1"">
        *citations may not be relevant to end result.
      </p>
    </div>
  );
}

const Citation = memo(({ source, id }) => {
  const [maximized, setMaximized] = useState(false);
  const { references = 0, title, text } = source;
  if (title?.length === 0 || text?.length === 0) return null;
  const handleMinMax = () => {
    setMaximized(!maximized);
    Array.from(
      document?.querySelectorAll(
        `div[data-citation]:not([data-citation=""${id}""])`
      )
    ).forEach((el) => {
      const func = maximized ? ""remove"" : ""add"";
      el.classList[func](""hidden"");
    });
  };

  return (
    <div
      key={id || v4()}
      data-citation={id || v4()}
      className={`transition-all duration-300 relative flex flex-col w-full md:w-80 h-40 bg-gray-100 dark:bg-stone-800 border border-gray-700 dark:border-stone-800 rounded-lg shrink-0 ${
        maximized ? ""md:w-full h-fit pb-4"" : """"
      }`}
    >
      <div className=""rounded-t-lg bg-gray-300 dark:bg-stone-900 px-4 py-2 w-full h-fit flex items-center justify-between"">
        <p className=""text-base text-gray-800 dark:text-slate-400 italic truncate w-3/4"">
          {title}
        </p>
        <button
          onClick={handleMinMax}
          className=""hover:dark:bg-stone-800 hover:bg-gray-200 dark:text-slate-400 text-gray-800 rounded-full p-1""
        >
          {maximized ? (
            <Minimize2 className=""h-4 w-4"" />
          ) : (
            <Maximize2 className=""h-4 w-4"" />
          )}
        </button>
      </div>
      <div
        className={`overflow-hidden relative w-full ${
          maximized ? ""overflow-y-scroll"" : """"
        }`}
      >
        <p className=""px-2 py-1 text-xs whitespace-pre-line text-gray-800 dark:text-slate-300 italic"">
          {references > 1 && (
            <p className=""text-xs text-gray-500 dark:text-slate-500 mb-2"">
              referenced {references} times.
            </p>
          )}
          {HTMLDecode(text)}
        </p>
        <div
          className={`absolute bottom-0 flex w-full h-[20px] fade-up-border rounded-b-lg ${
            maximized ? ""hidden"" : """"
          }`}
        />
      </div>
    </div>
  );
});",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR } VAR ""VAR-VAR""; VAR { VAR } VAR ""VAR""; VAR { VAR VAR VAR } VAR ""VAR""; VAR VAR(VAR) { VAR VAR = {}; VAR.VAR((VAR) => { VAR { VAR, VAR, VAR } = VAR; VAR (VAR.VAR(VAR)) { VAR[VAR].VAR += `\VAR\VAR ---- VAR ${VAR || """"} ---- \VAR\VAR${VAR}`; VAR[VAR].VAR += 1; } VAR { VAR[VAR] = { VAR, VAR, VAR: 1 }; } }); VAR VAR.VAR(VAR); } VAR VAR VAR VAR({ VAR = [] }) { VAR (VAR.VAR === 0) VAR VAR; VAR ( <VAR VAR=""VAR VAR-VAR VAR-4 VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR ""> <VAR VAR=""VAR-VAR VAR VAR-VAR-VAR VAR-VAR VAR-4 VAR-1 VAR""> {VAR(VAR).VAR((VAR) => ( <VAR VAR={VAR?.VAR || VAR()} VAR={VAR} /> ))} </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR:VAR-VAR-400 VAR-VAR VAR-1""> *VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> ); } VAR VAR = VAR(({ VAR, VAR }) => { VAR [VAR, VAR] = VAR(VAR); VAR { VAR = 0, VAR, VAR } = VAR; VAR (VAR?.VAR === 0 || VAR?.VAR === 0) VAR VAR; VAR VAR = () => { VAR(!VAR); VAR.VAR( VAR?.VAR( `VAR[VAR-VAR]:VAR([VAR-VAR=""${VAR}""])` ) ).VAR((VAR) => { VAR VAR = VAR ? ""VAR"" : ""VAR""; VAR.VAR[VAR](""VAR""); }); }; VAR ( <VAR VAR={VAR || VAR()} VAR-VAR={VAR || VAR()} VAR={`VAR-VAR VAR-300 VAR VAR VAR-VAR VAR-VAR VAR:VAR-80 VAR-40 VAR-VAR-100 VAR:VAR-VAR-800 VAR VAR-VAR-700 VAR:VAR-VAR-800 VAR-VAR VAR-0 ${ VAR ? ""VAR:VAR-VAR VAR-VAR VAR-4"" : """" }`} > <VAR VAR=""VAR-VAR-VAR VAR-VAR-300 VAR:VAR-VAR-900 VAR-4 VAR-2 VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-800 VAR:VAR-VAR-400 VAR VAR VAR-3/4""> {VAR} </VAR> <VAR VAR={VAR} VAR=""VAR:VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR-VAR-400 VAR-VAR-800 VAR-VAR VAR-1"" > {VAR ? ( <VAR VAR=""VAR-4 VAR-4"" /> ) : ( <VAR VAR=""VAR-4 VAR-4"" /> )} </VAR> </VAR> <VAR VAR={`VAR-VAR VAR VAR-VAR ${ VAR ? ""VAR-VAR-VAR"" : """" }`} > <VAR VAR=""VAR-2 VAR-1 VAR-VAR VAR-VAR-VAR VAR-VAR-800 VAR:VAR-VAR-300 VAR""> {VAR > 1 && ( <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-500 VAR-2""> VAR {VAR} VAR. </VAR> )} {VAR(VAR)} </VAR> <VAR VAR={`VAR VAR-0 VAR VAR-VAR VAR-[20px] VAR-VAR-VAR VAR-VAR-VAR ${ VAR ? ""VAR"" : """" }`} /> </VAR> </VAR> ); }); ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/WorkspaceChat/ChatContainer/ChatHistory/Citation/index.jsx,"import { memo, useState } from ""react"";
import { Maximize2, Minimize2 } from ""react-feather"";
import { v4 } from ""uuid"";
import { decode as HTMLDecode } from ""he"";

function combineLikeSources(sources) {
  const combined = {};
  sources.forEach((source) => {
    const { id, title, text } = source;
    if (combined.hasOwnProperty(title)) {
      combined[title].text += `\n\n ---- Chunk ${id || """"} ---- \n\n${text}`;
      combined[title].references += 1;
    } else {
      combined[title] = { title, text, references: 1 };
    }
  });
  return Object.values(combined);
}

export default function Citations({ sources = [] }) {
  if (sources.length === 0) return null;

  return (
    <div className=""flex flex-col mt-4 justify-left"">
      <div className=""flex flex-col justify-left overflow-x-scroll "">
        <div className=""w-full flex overflow-x-scroll items-center gap-4 mt-1 doc__source"">
          {combineLikeSources(sources).map((source) => (
            <Citation id={source?.id || v4()} source={source} />
          ))}
        </div>
      </div>
      <p className=""w-fit text-gray-700 dark:text-stone-400 text-xs mt-1"">
        *citations may not be relevant to end result.
      </p>
    </div>
  );
}

const Citation = memo(({ source, id }) => {
  const [maximized, setMaximized] = useState(false);
  const { references = 0, title, text } = source;
  if (title?.length === 0 || text?.length === 0) return null;
  const handleMinMax = () => {
    setMaximized(!maximized);
    Array.from(
      document?.querySelectorAll(
        `div[data-citation]:not([data-citation=""${id}""])`
      )
    ).forEach((el) => {
      const func = maximized ? ""remove"" : ""add"";
      el.classList[func](""hidden"");
    });
  };

  return (
    <div
      key={id || v4()}
      data-citation={id || v4()}
      className={`transition-all duration-300 relative flex flex-col w-full md:w-80 h-40 bg-gray-100 dark:bg-stone-800 border border-gray-700 dark:border-stone-800 rounded-lg shrink-0 ${
        maximized ? ""md:w-full h-fit pb-4"" : """"
      }`}
    >
      <div className=""rounded-t-lg bg-gray-300 dark:bg-stone-900 px-4 py-2 w-full h-fit flex items-center justify-between"">
        <p className=""text-base text-gray-800 dark:text-slate-400 italic truncate w-3/4"">
          {title}
        </p>
        <button
          onClick={handleMinMax}
          className=""hover:dark:bg-stone-800 hover:bg-gray-200 dark:text-slate-400 text-gray-800 rounded-full p-1""
        >
          {maximized ? (
            <Minimize2 className=""h-4 w-4"" />
          ) : (
            <Maximize2 className=""h-4 w-4"" />
          )}
        </button>
      </div>
      <div
        className={`overflow-hidden relative w-full ${
          maximized ? ""overflow-y-scroll"" : """"
        }`}
      >
        <p className=""px-2 py-1 text-xs whitespace-pre-line text-gray-800 dark:text-slate-300 italic"">
          {references > 1 && (
            <p className=""text-xs text-gray-500 dark:text-slate-500 mb-2"">
              referenced {references} times.
            </p>
          )}
          {HTMLDecode(text)}
        </p>
        <div
          className={`absolute bottom-0 flex w-full h-[20px] fade-up-border rounded-b-lg ${
            maximized ? ""hidden"" : """"
          }`}
        />
      </div>
    </div>
  );
});",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR { VAR, VAR } VAR ""VAR-VAR""; VAR { VAR } VAR ""VAR""; VAR { VAR VAR VAR } VAR ""VAR""; VAR VAR(VAR) { VAR VAR = {}; VAR.VAR((VAR) => { VAR { VAR, VAR, VAR } = VAR; VAR (VAR.VAR(VAR)) { VAR[VAR].VAR += `\VAR\VAR ---- VAR ${VAR || """"} ---- \VAR\VAR${VAR}`; VAR[VAR].VAR += 1; } VAR { VAR[VAR] = { VAR, VAR, VAR: 1 }; } }); VAR VAR.VAR(VAR); } VAR VAR VAR VAR({ VAR = [] }) { VAR (VAR.VAR === 0) VAR VAR; VAR ( <VAR VAR=""VAR VAR-VAR VAR-4 VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR-VAR ""> <VAR VAR=""VAR-VAR VAR VAR-VAR-VAR VAR-VAR VAR-4 VAR-1 VAR""> {VAR(VAR).VAR((VAR) => ( <VAR VAR={VAR?.VAR || VAR()} VAR={VAR} /> ))} </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR:VAR-VAR-400 VAR-VAR VAR-1""> *VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> ); } VAR VAR = VAR(({ VAR, VAR }) => { VAR [VAR, VAR] = VAR(VAR); VAR { VAR = 0, VAR, VAR } = VAR; VAR (VAR?.VAR === 0 || VAR?.VAR === 0) VAR VAR; VAR VAR = () => { VAR(!VAR); VAR.VAR( VAR?.VAR( `VAR[VAR-VAR]:VAR([VAR-VAR=""${VAR}""])` ) ).VAR((VAR) => { VAR VAR = VAR ? ""VAR"" : ""VAR""; VAR.VAR[VAR](""VAR""); }); }; VAR ( <VAR VAR={VAR || VAR()} VAR-VAR={VAR || VAR()} VAR={`VAR-VAR VAR-300 VAR VAR VAR-VAR VAR-VAR VAR:VAR-80 VAR-40 VAR-VAR-100 VAR:VAR-VAR-800 VAR VAR-VAR-700 VAR:VAR-VAR-800 VAR-VAR VAR-0 ${ VAR ? ""VAR:VAR-VAR VAR-VAR VAR-4"" : """" }`} > <VAR VAR=""VAR-VAR-VAR VAR-VAR-300 VAR:VAR-VAR-900 VAR-4 VAR-2 VAR-VAR VAR-VAR VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-800 VAR:VAR-VAR-400 VAR VAR VAR-3/4""> {VAR} </VAR> <VAR VAR={VAR} VAR=""VAR:VAR:VAR-VAR-800 VAR:VAR-VAR-200 VAR:VAR-VAR-400 VAR-VAR-800 VAR-VAR VAR-1"" > {VAR ? ( <VAR VAR=""VAR-4 VAR-4"" /> ) : ( <VAR VAR=""VAR-4 VAR-4"" /> )} </VAR> </VAR> <VAR VAR={`VAR-VAR VAR VAR-VAR ${ VAR ? ""VAR-VAR-VAR"" : """" }`} > <VAR VAR=""VAR-2 VAR-1 VAR-VAR VAR-VAR-VAR VAR-VAR-800 VAR:VAR-VAR-300 VAR""> {VAR > 1 && ( <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-500 VAR-2""> VAR {VAR} VAR. </VAR> )} {VAR(VAR)} </VAR> <VAR VAR={`VAR VAR-0 VAR VAR-VAR VAR-[20px] VAR-VAR-VAR VAR-VAR-VAR ${ VAR ? ""VAR"" : """" }`} /> </VAR> </VAR> ); }); ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/WorkspaceChat/ChatContainer/ChatHistory/HistoricalMessage/index.jsx,"import { memo, forwardRef } from ""react"";
import { AlertTriangle } from ""react-feather"";
import Jazzicon from ""../../../../UserIcon"";
import renderMarkdown from ""../../../../../utils/chat/markdown"";
import { userFromStorage } from ""../../../../../utils/request"";
import Citations from ""../Citation"";

const HistoricalMessage = forwardRef(
  ({ message, role, workspace, sources = [], error = false }, ref) => {
    if (role === ""user"") {
      return (
        <div className=""flex justify-end mb-4 items-start"">
          <div className=""mr-2 py-1 px-4 w-fit md:max-w-[75%] bg-slate-200 dark:bg-amber-800 rounded-b-2xl rounded-tl-2xl rounded-tr-sm"">
            <span
              className={`inline-block p-2 rounded-lg whitespace-pre-line text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base`}
            >
              {message}
            </span>
          </div>
          <Jazzicon size={30} user={{ uid: userFromStorage()?.username }} />
        </div>
      );
    }

    if (error) {
      return (
        <div className=""flex justify-start mb-4 items-end"">
          <Jazzicon size={30} user={{ uid: workspace.slug }} />
          <div className=""ml-2 max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-t-2xl rounded-br-2xl rounded-bl-sm"">
            <span
              className={`inline-block p-2 rounded-lg bg-red-50 text-red-500`}
            >
              <AlertTriangle className=""h-4 w-4 mb-1 inline-block"" /> Could not
              respond to message.
            </span>
          </div>
        </div>
      );
    }

    return (
      <div ref={ref} className=""flex justify-start items-end mb-4"">
        <Jazzicon size={30} user={{ uid: workspace.slug }} />
        <div className=""ml-2 py-3 px-4 overflow-x-scroll w-fit md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-t-2xl rounded-br-2xl rounded-bl-sm"">
          <span
            className=""no-scroll whitespace-pre-line text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base flex flex-col gap-y-1""
            dangerouslySetInnerHTML={{ __html: renderMarkdown(message) }}
          />
          <Citations sources={sources} />
        </div>
      </div>
    );
  }
);

export default memo(HistoricalMessage);",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR""; VAR VAR VAR ""../../../../../VAR/VAR/VAR""; VAR { VAR } VAR ""../../../../../VAR/VAR""; VAR VAR VAR ""../VAR""; VAR VAR = VAR( ({ VAR, VAR, VAR, VAR = [], VAR = VAR }, VAR) => { VAR (VAR === ""VAR"") { VAR ( <VAR VAR=""VAR VAR-VAR VAR-4 VAR-VAR""> <VAR VAR=""VAR-2 VAR-1 VAR-4 VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR={`VAR-VAR VAR-2 VAR-VAR VAR-VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR`} > {VAR} </VAR> </VAR> <VAR VAR={30} VAR={{ VAR: VAR()?.VAR }} /> </VAR> ); } VAR (VAR) { VAR ( <VAR VAR=""VAR VAR-VAR VAR-4 VAR-VAR""> <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR={`VAR-VAR VAR-2 VAR-VAR VAR-VAR-50 VAR-VAR-500`} > <VAR VAR=""VAR-4 VAR-4 VAR-1 VAR-VAR"" /> VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR VAR-4""> <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-3 VAR-4 VAR-VAR-VAR VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR VAR VAR-VAR VAR-VAR-1"" VAR={{ VAR: VAR(VAR) }} /> <VAR VAR={VAR} /> </VAR> </VAR> ); } ); VAR VAR VAR(VAR); ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/WorkspaceChat/ChatContainer/ChatHistory/HistoricalMessage/index.jsx,"import { memo, forwardRef } from ""react"";
import { AlertTriangle } from ""react-feather"";
import Jazzicon from ""../../../../UserIcon"";
import renderMarkdown from ""../../../../../utils/chat/markdown"";
import { userFromStorage } from ""../../../../../utils/request"";
import Citations from ""../Citation"";

const HistoricalMessage = forwardRef(
  ({ message, role, workspace, sources = [], error = false }, ref) => {
    if (role === ""user"") {
      return (
        <div className=""flex justify-end mb-4 items-start"">
          <div className=""mr-2 py-1 px-4 w-fit md:max-w-[75%] bg-slate-200 dark:bg-amber-800 rounded-b-2xl rounded-tl-2xl rounded-tr-sm"">
            <span
              className={`inline-block p-2 rounded-lg whitespace-pre-line text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base`}
            >
              {message}
            </span>
          </div>
          <Jazzicon size={30} user={{ uid: userFromStorage()?.username }} />
        </div>
      );
    }

    if (error) {
      return (
        <div className=""flex justify-start mb-4 items-end"">
          <Jazzicon size={30} user={{ uid: workspace.slug }} />
          <div className=""ml-2 max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-t-2xl rounded-br-2xl rounded-bl-sm"">
            <span
              className={`inline-block p-2 rounded-lg bg-red-50 text-red-500`}
            >
              <AlertTriangle className=""h-4 w-4 mb-1 inline-block"" /> Could not
              respond to message.
            </span>
          </div>
        </div>
      );
    }

    return (
      <div ref={ref} className=""flex justify-start items-end mb-4"">
        <Jazzicon size={30} user={{ uid: workspace.slug }} />
        <div className=""ml-2 py-3 px-4 overflow-x-scroll w-fit md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-t-2xl rounded-br-2xl rounded-bl-sm"">
          <span
            className=""no-scroll whitespace-pre-line text-slate-800 dark:text-slate-200 font-[500] md:font-semibold text-sm md:text-base flex flex-col gap-y-1""
            dangerouslySetInnerHTML={{ __html: renderMarkdown(message) }}
          />
          <Citations sources={sources} />
        </div>
      </div>
    );
  }
);

export default memo(HistoricalMessage);",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR""; VAR VAR VAR ""../../../../../VAR/VAR/VAR""; VAR { VAR } VAR ""../../../../../VAR/VAR""; VAR VAR VAR ""../VAR""; VAR VAR = VAR( ({ VAR, VAR, VAR, VAR = [], VAR = VAR }, VAR) => { VAR (VAR === ""VAR"") { VAR ( <VAR VAR=""VAR VAR-VAR VAR-4 VAR-VAR""> <VAR VAR=""VAR-2 VAR-1 VAR-4 VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-200 VAR:VAR-VAR-800 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR={`VAR-VAR VAR-2 VAR-VAR VAR-VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR`} > {VAR} </VAR> </VAR> <VAR VAR={30} VAR={{ VAR: VAR()?.VAR }} /> </VAR> ); } VAR (VAR) { VAR ( <VAR VAR=""VAR VAR-VAR VAR-4 VAR-VAR""> <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR={`VAR-VAR VAR-2 VAR-VAR VAR-VAR-50 VAR-VAR-500`} > <VAR VAR=""VAR-4 VAR-4 VAR-1 VAR-VAR"" /> VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR VAR-4""> <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-3 VAR-4 VAR-VAR-VAR VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR VAR VAR-VAR VAR-VAR-1"" VAR={{ VAR: VAR(VAR) }} /> <VAR VAR={VAR} /> </VAR> </VAR> ); } ); VAR VAR VAR(VAR); ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/WorkspaceChat/ChatContainer/ChatHistory/PromptReply/index.jsx,"import { forwardRef, memo } from ""react"";
import { AlertTriangle } from ""react-feather"";
import Jazzicon from ""../../../../UserIcon"";
import renderMarkdown from ""../../../../../utils/chat/markdown"";
import Citations from ""../Citation"";

const PromptReply = forwardRef(
  (
    { uuid, reply, pending, error, workspace, sources = [], closed = true },
    ref
  ) => {
    if (!reply && !sources.length === 0 && !pending && !error) return null;
    if (pending) {
      return (
        <div
          ref={ref}
          className=""chat__message flex justify-start mb-4 items-end""
        >
          <Jazzicon size={30} user={{ uid: workspace.slug }} />
          <div className=""ml-2 pt-2 px-6 w-fit md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-t-2xl rounded-br-2xl rounded-bl-sm"">
            <span className={`inline-block p-2`}>
              <div className=""dot-falling""></div>
            </span>
          </div>
        </div>
      );
    }

    if (error) {
      return (
        <div className=""chat__message flex justify-start mb-4 items-center"">
          <Jazzicon size={30} user={{ uid: workspace.slug }} />
          <div className=""ml-2 py-3 px-4 rounded-br-3xl rounded-tr-3xl rounded-tl-xl text-slate-100 "">
            <div className=""bg-red-50 text-red-500 rounded-lg w-fit flex flex-col p-2"">
              <span className={`inline-block`}>
                <AlertTriangle className=""h-4 w-4 mb-1 inline-block"" /> Could
                not respond to message.
              </span>
              <span className=""text-xs"">Reason: {error || ""unknown""}</span>
            </div>
          </div>
        </div>
      );
    }

    return (
      <div key={uuid} ref={ref} className=""mb-4 flex justify-start items-end"">
        <Jazzicon size={30} user={{ uid: workspace.slug }} />
        <div className=""ml-2 py-3 px-4 overflow-x-scroll w-fit md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-t-2xl rounded-br-2xl rounded-bl-sm"">
          <span
            className=""whitespace-pre-line text-slate-800 dark:text-slate-200 flex flex-col gap-y-1 font-[500] md:font-semibold text-sm md:text-base""
            dangerouslySetInnerHTML={{ __html: renderMarkdown(reply) }}
          />
          <Citations sources={sources} />
        </div>
      </div>
    );
  }
);

export default memo(PromptReply);",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR""; VAR VAR VAR ""../../../../../VAR/VAR/VAR""; VAR VAR VAR ""../VAR""; VAR VAR = VAR( ( { VAR, VAR, VAR, VAR, VAR, VAR = [], VAR = VAR }, VAR ) => { VAR (!VAR && !VAR.VAR === 0 && !VAR && !VAR) VAR VAR; VAR (VAR) { VAR ( <VAR VAR={VAR} VAR=""VAR VAR VAR-VAR VAR-4 VAR-VAR"" > <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-2 VAR-6 VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR={`VAR-VAR VAR-2`}> <VAR VAR=""VAR-VAR""></VAR> </VAR> </VAR> </VAR> ); } VAR (VAR) { VAR ( <VAR VAR=""VAR VAR VAR-VAR VAR-4 VAR-VAR""> <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-3 VAR-4 VAR-VAR-3xl VAR-VAR-3xl VAR-VAR-VAR VAR-VAR-100 ""> <VAR VAR=""VAR-VAR-50 VAR-VAR-500 VAR-VAR VAR-VAR VAR VAR-VAR VAR-2""> <VAR VAR={`VAR-VAR`}> <VAR VAR=""VAR-4 VAR-4 VAR-1 VAR-VAR"" /> VAR VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR-VAR"">VAR: {VAR || ""VAR""}</VAR> </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR-4 VAR VAR-VAR VAR-VAR""> <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-3 VAR-4 VAR-VAR-VAR VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR VAR-VAR VAR-VAR-1 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR"" VAR={{ VAR: VAR(VAR) }} /> <VAR VAR={VAR} /> </VAR> </VAR> ); } ); VAR VAR VAR(VAR); ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/WorkspaceChat/ChatContainer/ChatHistory/PromptReply/index.jsx,"import { forwardRef, memo } from ""react"";
import { AlertTriangle } from ""react-feather"";
import Jazzicon from ""../../../../UserIcon"";
import renderMarkdown from ""../../../../../utils/chat/markdown"";
import Citations from ""../Citation"";

const PromptReply = forwardRef(
  (
    { uuid, reply, pending, error, workspace, sources = [], closed = true },
    ref
  ) => {
    if (!reply && !sources.length === 0 && !pending && !error) return null;
    if (pending) {
      return (
        <div
          ref={ref}
          className=""chat__message flex justify-start mb-4 items-end""
        >
          <Jazzicon size={30} user={{ uid: workspace.slug }} />
          <div className=""ml-2 pt-2 px-6 w-fit md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-t-2xl rounded-br-2xl rounded-bl-sm"">
            <span className={`inline-block p-2`}>
              <div className=""dot-falling""></div>
            </span>
          </div>
        </div>
      );
    }

    if (error) {
      return (
        <div className=""chat__message flex justify-start mb-4 items-center"">
          <Jazzicon size={30} user={{ uid: workspace.slug }} />
          <div className=""ml-2 py-3 px-4 rounded-br-3xl rounded-tr-3xl rounded-tl-xl text-slate-100 "">
            <div className=""bg-red-50 text-red-500 rounded-lg w-fit flex flex-col p-2"">
              <span className={`inline-block`}>
                <AlertTriangle className=""h-4 w-4 mb-1 inline-block"" /> Could
                not respond to message.
              </span>
              <span className=""text-xs"">Reason: {error || ""unknown""}</span>
            </div>
          </div>
        </div>
      );
    }

    return (
      <div key={uuid} ref={ref} className=""mb-4 flex justify-start items-end"">
        <Jazzicon size={30} user={{ uid: workspace.slug }} />
        <div className=""ml-2 py-3 px-4 overflow-x-scroll w-fit md:max-w-[75%] bg-orange-100 dark:bg-stone-700 rounded-t-2xl rounded-br-2xl rounded-bl-sm"">
          <span
            className=""whitespace-pre-line text-slate-800 dark:text-slate-200 flex flex-col gap-y-1 font-[500] md:font-semibold text-sm md:text-base""
            dangerouslySetInnerHTML={{ __html: renderMarkdown(reply) }}
          />
          <Citations sources={sources} />
        </div>
      </div>
    );
  }
);

export default memo(PromptReply);",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR""; VAR VAR VAR ""../../../../../VAR/VAR/VAR""; VAR VAR VAR ""../VAR""; VAR VAR = VAR( ( { VAR, VAR, VAR, VAR, VAR, VAR = [], VAR = VAR }, VAR ) => { VAR (!VAR && !VAR.VAR === 0 && !VAR && !VAR) VAR VAR; VAR (VAR) { VAR ( <VAR VAR={VAR} VAR=""VAR VAR VAR-VAR VAR-4 VAR-VAR"" > <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-2 VAR-6 VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR={`VAR-VAR VAR-2`}> <VAR VAR=""VAR-VAR""></VAR> </VAR> </VAR> </VAR> ); } VAR (VAR) { VAR ( <VAR VAR=""VAR VAR VAR-VAR VAR-4 VAR-VAR""> <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-3 VAR-4 VAR-VAR-3xl VAR-VAR-3xl VAR-VAR-VAR VAR-VAR-100 ""> <VAR VAR=""VAR-VAR-50 VAR-VAR-500 VAR-VAR VAR-VAR VAR VAR-VAR VAR-2""> <VAR VAR={`VAR-VAR`}> <VAR VAR=""VAR-4 VAR-4 VAR-1 VAR-VAR"" /> VAR VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR-VAR"">VAR: {VAR || ""VAR""}</VAR> </VAR> </VAR> </VAR> ); } VAR ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR-4 VAR VAR-VAR VAR-VAR""> <VAR VAR={30} VAR={{ VAR: VAR.VAR }} /> <VAR VAR=""VAR-2 VAR-3 VAR-4 VAR-VAR-VAR VAR-VAR VAR:VAR-VAR-[75%] VAR-VAR-100 VAR:VAR-VAR-700 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR-VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR VAR-VAR VAR-VAR-1 VAR-[500] VAR:VAR-VAR VAR-VAR VAR:VAR-VAR"" VAR={{ VAR: VAR(VAR) }} /> <VAR VAR={VAR} /> </VAR> </VAR> ); } ); VAR VAR VAR(VAR); ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/WorkspaceChat/ChatContainer/PromptInput/index.jsx,"import React, { useState, useRef, memo, useEffect } from ""react"";
import { isMobile } from ""react-device-detect"";
import { Loader, Menu, X } from ""react-feather"";

export default function PromptInput({
  workspace,
  message,
  submit,
  onChange,
  inputDisabled,
  buttonDisabled,
}) {
  const [showMenu, setShowMenu] = useState(false);
  const formRef = useRef(null);
  const [_, setFocused] = useState(false);
  const handleSubmit = (e) => {
    setFocused(false);
    submit(e);
  };
  const captureEnter = (event) => {
    if (event.keyCode == 13) {
      if (!event.shiftKey) {
        submit(event);
      }
    }
  };
  const adjustTextArea = (event) => {
    if (isMobile) return false;
    const element = event.target;
    element.style.height = ""1px"";
    element.style.height =
      event.target.value.length !== 0
        ? 25 + element.scrollHeight + ""px""
        : ""1px"";
  };

  const setTextCommand = (command = """") => {
    const storageKey = `workspace_chat_mode_${workspace.slug}`;
    if (command === ""/query"") {
      window.localStorage.setItem(storageKey, ""query"");
      window.dispatchEvent(new Event(""workspace_chat_mode_update""));
      return;
    } else if (command === ""/conversation"") {
      window.localStorage.setItem(storageKey, ""chat"");
      window.dispatchEvent(new Event(""workspace_chat_mode_update""));
      return;
    }

    onChange({ target: { value: `${command} ${message}` } });
  };

  return (
    <div className=""w-full fixed md:absolute bottom-0 left-0 z-10 md:z-0"">
      <form
        onSubmit={handleSubmit}
        className=""flex flex-col gap-y-1 bg-white dark:bg-black-900 md:bg-transparent rounded-t-lg md:w-3/4 w-full mx-auto""
      >
        <div className=""flex items-center py-2 px-4 rounded-lg"">
          <CommandMenu
            workspace={workspace}
            show={showMenu}
            handleClick={setTextCommand}
            hide={() => setShowMenu(false)}
          />
          <button
            onClick={() => setShowMenu(!showMenu)}
            type=""button""
            className=""p-2 text-slate-500 bg-transparent rounded-md hover:bg-gray-200 dark:hover:bg-stone-500 dark:hover:text-slate-200""
          >
            <Menu className=""w-4 h-4 md:h-6 md:w-6"" />
          </button>
          <textarea
            onKeyUp={adjustTextArea}
            onKeyDown={captureEnter}
            onChange={onChange}
            required={true}
            maxLength={240}
            disabled={inputDisabled}
            onFocus={() => setFocused(true)}
            onBlur={(e) => {
              setFocused(false);
              adjustTextArea(e);
            }}
            value={message}
            className=""cursor-text max-h-[100px] md:min-h-[40px] block mx-2 md:mx-4 p-2.5 w-full text-[16px] md:text-sm rounded-lg border bg-gray-50 border-gray-300 placeholder-gray-400 text-gray-900 dark:text-white dark:bg-stone-600 dark:border-stone-700 dark:placeholder-stone-400""
            placeholder={
              isMobile
                ? ""Enter your message here.""
                : ""Shift + Enter for newline. Enter to submit.""
            }
          />
          <button
            ref={formRef}
            type=""submit""
            disabled={buttonDisabled}
            className=""inline-flex justify-center p-0 md:p-2 rounded-full cursor-pointer text-black-900 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-stone-500 group""
          >
            {buttonDisabled ? (
              <Loader className=""w-6 h-6 animate-spin"" />
            ) : (
              <svg
                aria-hidden=""true""
                className=""w-6 h-6 rotate-45 fill-gray-500 dark:fill-slate-500 group-hover:dark:fill-slate-200""
                fill=""currentColor""
                viewBox=""0 0 20 20""
                xmlns=""http://www.w3.org/2000/svg""
              >
                <path d=""M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z""></path>
              </svg>
            )}
            <span className=""sr-only"">Send message</span>
          </button>
        </div>
        <Tracking workspaceSlug={workspace.slug} />
      </form>
    </div>
  );
}

const Tracking = memo(({ workspaceSlug }) => {
  const storageKey = `workspace_chat_mode_${workspaceSlug}`;
  const [chatMode, setChatMode] = useState(
    window.localStorage.getItem(storageKey) ?? ""chat""
  );

  useEffect(() => {
    function watchForChatModeChange() {
      if (!workspaceSlug) return;
      window.addEventListener(`workspace_chat_mode_update`, () => {
        try {
          const chatMode = window.localStorage.getItem(storageKey);
          setChatMode(chatMode);
        } catch {}
      });
    }
    watchForChatModeChange();
  }, [workspaceSlug]);

  return (
    <div className=""flex flex-col md:flex-row w-full justify-center items-center gap-2 mb-2 px-4 mx:px-0"">
      <p className=""bg-gray-200 dark:bg-stone-600 text-gray-800 dark:text-slate-400 text-xs px-2 rounded-lg font-mono text-center"">
        Chat mode: {chatMode}
      </p>
      <p className=""text-slate-400 text-xs text-center"">
        Responses from system may produce inaccurate or invalid responses - use
        with caution.
      </p>
    </div>
  );
});

function CommandMenu({ workspace, show, handleClick, hide }) {
  if (!show) return null;
  const COMMANDS = [
    {
      cmd: ""/conversation"",
      description: ""- switch to chat mode (remembers recent chat history) ."",
    },
    {
      cmd: ""/query"",
      description: ""- switch to query mode (does not remember previous chats)."",
    },
    { cmd: ""/reset"", description: ""- clear current chat history."" },
  ];

  return (
    <div className=""absolute top-[-25vh] md:top-[-23vh] min-h-[200px] flex flex-col rounded-lg border border-slate-400 p-2 pt-4 bg-gray-50 dark:bg-stone-600"">
      <div className=""flex justify-between items-center border-b border-slate-400 px-2 py-1 "">
        <p className=""text-gray-800 dark:text-slate-200"">Available Commands</p>
        <button
          type=""button""
          onClick={hide}
          className=""p-2 rounded-lg hover:bg-gray-200 hover:dark:bg-slate-500 rounded-full text-gray-800 dark:text-slate-400""
        >
          <X className=""h-4 w-4"" />
        </button>
      </div>

      <div className=""flex flex-col"">
        {COMMANDS.map((item, i) => {
          const { cmd, description } = item;
          return (
            <div className=""border-b border-slate-400 p-1"">
              <button
                key={i}
                type=""button""
                onClick={() => {
                  handleClick(cmd);
                  hide();
                }}
                className=""w-full px-4 py-2 flex items-center rounded-lg hover:bg-gray-300 hover:dark:bg-slate-500 gap-x-1 disabled:cursor-not-allowed""
              >
                <p className=""text-gray-800 dark:text-slate-200 font-semibold"">
                  {cmd}
                </p>
                <p className=""text-gray-800 dark:text-slate-300 text-sm"">
                  {description}
                </p>
              </button>
            </div>
          );
        })}
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR { VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR({ VAR, VAR, VAR, VAR, VAR, VAR, }) { VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = (VAR) => { VAR(VAR); VAR(VAR); }; VAR VAR = (VAR) => { VAR (VAR.VAR == 13) { VAR (!VAR.VAR) { VAR(VAR); } } }; VAR VAR = (VAR) => { VAR (VAR) VAR VAR; VAR VAR = VAR.VAR; VAR.VAR.VAR = ""1px""; VAR.VAR.VAR = VAR.VAR.VAR.VAR !== 0 ? 25 + VAR.VAR + ""VAR"" : ""1px""; }; VAR VAR = (VAR = """") => { VAR VAR = `VAR${VAR.VAR}`; VAR (VAR === ""/VAR"") { VAR.VAR.VAR(VAR, ""VAR""); VAR.VAR(VAR VAR(""VAR"")); VAR; } VAR VAR (VAR === ""/VAR"") { VAR.VAR.VAR(VAR, ""VAR""); VAR.VAR(VAR VAR(""VAR"")); VAR; } VAR({ VAR: { VAR: `${VAR} ${VAR}` } }); }; VAR ( <VAR VAR=""VAR-VAR VAR VAR:VAR VAR-0 VAR-0 VAR-10 VAR:VAR-0""> <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR VAR-VAR-VAR VAR:VAR-3/4 VAR-VAR VAR-VAR"" > <VAR VAR=""VAR VAR-VAR VAR-2 VAR-4 VAR-VAR""> <VAR VAR={VAR} VAR={VAR} VAR={VAR} VAR={() => VAR(VAR)} /> <VAR VAR={() => VAR(!VAR)} VAR=""VAR"" VAR=""VAR-2 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 VAR:VAR-6 VAR:VAR-6"" /> </VAR> <VAR VAR={VAR} VAR={VAR} VAR={VAR} VAR={VAR} VAR={240} VAR={VAR} VAR={() => VAR(VAR)} VAR={(VAR) => { VAR(VAR); VAR(VAR); }} VAR={VAR} VAR=""VAR-VAR VAR-VAR-[100px] VAR:VAR-VAR-[40px] VAR VAR-2 VAR:VAR-4 VAR-2.5 VAR-VAR VAR-[16px] VAR:VAR-VAR VAR-VAR VAR VAR-VAR-50 VAR-VAR-300 VAR-VAR-400 VAR-VAR-900 VAR:VAR-VAR VAR:VAR-VAR-600 VAR:VAR-VAR-700 VAR:VAR-VAR-400"" VAR={ VAR ? ""VAR VAR VAR VAR."" : ""VAR + VAR VAR VAR. VAR VAR VAR."" } /> <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR-VAR VAR-0 VAR:VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR-200 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-500 VAR"" > {VAR ? ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR"" /> ) : ( <VAR VAR-VAR=""VAR"" VAR=""VAR-6 VAR-6 VAR-45 VAR-VAR-500 VAR:VAR-VAR-500 VAR-VAR:VAR:VAR-VAR-200"" VAR=""VAR"" VAR=""0 0 20 20"" VAR=""VAR: > <VAR VAR=""VAR.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z""></VAR> </VAR> )} <VAR VAR=""VAR-VAR"">VAR VAR</VAR> </VAR> </VAR> <VAR VAR={VAR.VAR} /> </VAR> </VAR> ); } VAR VAR = VAR(({ VAR }) => { VAR VAR = `VAR${VAR}`; VAR [VAR, VAR] = VAR( VAR.VAR.VAR(VAR) ?? ""VAR"" ); VAR(() => { VAR VAR() { VAR (!VAR) VAR; VAR.VAR(`VAR`, () => { VAR { VAR VAR = VAR.VAR.VAR(VAR); VAR(VAR); } VAR {} }); } VAR(); }, [VAR]); VAR ( <VAR VAR=""VAR VAR-VAR VAR:VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-2 VAR-2 VAR-4 VAR:VAR-0""> <VAR VAR=""VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR-800 VAR:VAR-VAR-400 VAR-VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR: {VAR} </VAR> <VAR VAR=""VAR-VAR-400 VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR - VAR VAR VAR. </VAR> </VAR> ); }); VAR VAR({ VAR, VAR, VAR, VAR }) { VAR (!VAR) VAR VAR; VAR VAR = [ { VAR: ""/VAR"", VAR: ""- VAR VAR VAR VAR (VAR VAR VAR VAR) ."", }, { VAR: ""/VAR"", VAR: ""- VAR VAR VAR VAR (VAR VAR VAR VAR VAR)."", }, { VAR: ""/VAR"", VAR: ""- VAR VAR VAR VAR."" }, ]; VAR ( <VAR VAR=""VAR VAR-[-25vh] VAR:VAR-[-23vh] VAR-VAR-[200px] VAR VAR-VAR VAR-VAR VAR VAR-VAR-400 VAR-2 VAR-4 VAR-VAR-50 VAR:VAR-VAR-600""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-400 VAR-2 VAR-1 ""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200"">VAR VAR</VAR> <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR-2 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-500 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-400"" > <VAR VAR=""VAR-4 VAR-4"" /> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR""> {VAR.VAR((VAR, VAR) => { VAR { VAR, VAR } = VAR; VAR ( <VAR VAR=""VAR-VAR VAR-VAR-400 VAR-1""> <VAR VAR={VAR} VAR=""VAR"" VAR={() => { VAR(VAR); VAR(); }} VAR=""VAR-VAR VAR-4 VAR-2 VAR VAR-VAR VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-500 VAR-VAR-1 VAR:VAR-VAR-VAR"" > <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR""> {VAR} </VAR> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-300 VAR-VAR""> {VAR} </VAR> </VAR> </VAR> ); })} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/WorkspaceChat/ChatContainer/PromptInput/index.jsx,"import React, { useState, useRef, memo, useEffect } from ""react"";
import { isMobile } from ""react-device-detect"";
import { Loader, Menu, X } from ""react-feather"";

export default function PromptInput({
  workspace,
  message,
  submit,
  onChange,
  inputDisabled,
  buttonDisabled,
}) {
  const [showMenu, setShowMenu] = useState(false);
  const formRef = useRef(null);
  const [_, setFocused] = useState(false);
  const handleSubmit = (e) => {
    setFocused(false);
    submit(e);
  };
  const captureEnter = (event) => {
    if (event.keyCode == 13) {
      if (!event.shiftKey) {
        submit(event);
      }
    }
  };
  const adjustTextArea = (event) => {
    if (isMobile) return false;
    const element = event.target;
    element.style.height = ""1px"";
    element.style.height =
      event.target.value.length !== 0
        ? 25 + element.scrollHeight + ""px""
        : ""1px"";
  };

  const setTextCommand = (command = """") => {
    const storageKey = `workspace_chat_mode_${workspace.slug}`;
    if (command === ""/query"") {
      window.localStorage.setItem(storageKey, ""query"");
      window.dispatchEvent(new Event(""workspace_chat_mode_update""));
      return;
    } else if (command === ""/conversation"") {
      window.localStorage.setItem(storageKey, ""chat"");
      window.dispatchEvent(new Event(""workspace_chat_mode_update""));
      return;
    }

    onChange({ target: { value: `${command} ${message}` } });
  };

  return (
    <div className=""w-full fixed md:absolute bottom-0 left-0 z-10 md:z-0"">
      <form
        onSubmit={handleSubmit}
        className=""flex flex-col gap-y-1 bg-white dark:bg-black-900 md:bg-transparent rounded-t-lg md:w-3/4 w-full mx-auto""
      >
        <div className=""flex items-center py-2 px-4 rounded-lg"">
          <CommandMenu
            workspace={workspace}
            show={showMenu}
            handleClick={setTextCommand}
            hide={() => setShowMenu(false)}
          />
          <button
            onClick={() => setShowMenu(!showMenu)}
            type=""button""
            className=""p-2 text-slate-500 bg-transparent rounded-md hover:bg-gray-200 dark:hover:bg-stone-500 dark:hover:text-slate-200""
          >
            <Menu className=""w-4 h-4 md:h-6 md:w-6"" />
          </button>
          <textarea
            onKeyUp={adjustTextArea}
            onKeyDown={captureEnter}
            onChange={onChange}
            required={true}
            maxLength={240}
            disabled={inputDisabled}
            onFocus={() => setFocused(true)}
            onBlur={(e) => {
              setFocused(false);
              adjustTextArea(e);
            }}
            value={message}
            className=""cursor-text max-h-[100px] md:min-h-[40px] block mx-2 md:mx-4 p-2.5 w-full text-[16px] md:text-sm rounded-lg border bg-gray-50 border-gray-300 placeholder-gray-400 text-gray-900 dark:text-white dark:bg-stone-600 dark:border-stone-700 dark:placeholder-stone-400""
            placeholder={
              isMobile
                ? ""Enter your message here.""
                : ""Shift + Enter for newline. Enter to submit.""
            }
          />
          <button
            ref={formRef}
            type=""submit""
            disabled={buttonDisabled}
            className=""inline-flex justify-center p-0 md:p-2 rounded-full cursor-pointer text-black-900 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-stone-500 group""
          >
            {buttonDisabled ? (
              <Loader className=""w-6 h-6 animate-spin"" />
            ) : (
              <svg
                aria-hidden=""true""
                className=""w-6 h-6 rotate-45 fill-gray-500 dark:fill-slate-500 group-hover:dark:fill-slate-200""
                fill=""currentColor""
                viewBox=""0 0 20 20""
                xmlns=""http://www.w3.org/2000/svg""
              >
                <path d=""M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z""></path>
              </svg>
            )}
            <span className=""sr-only"">Send message</span>
          </button>
        </div>
        <Tracking workspaceSlug={workspace.slug} />
      </form>
    </div>
  );
}

const Tracking = memo(({ workspaceSlug }) => {
  const storageKey = `workspace_chat_mode_${workspaceSlug}`;
  const [chatMode, setChatMode] = useState(
    window.localStorage.getItem(storageKey) ?? ""chat""
  );

  useEffect(() => {
    function watchForChatModeChange() {
      if (!workspaceSlug) return;
      window.addEventListener(`workspace_chat_mode_update`, () => {
        try {
          const chatMode = window.localStorage.getItem(storageKey);
          setChatMode(chatMode);
        } catch {}
      });
    }
    watchForChatModeChange();
  }, [workspaceSlug]);

  return (
    <div className=""flex flex-col md:flex-row w-full justify-center items-center gap-2 mb-2 px-4 mx:px-0"">
      <p className=""bg-gray-200 dark:bg-stone-600 text-gray-800 dark:text-slate-400 text-xs px-2 rounded-lg font-mono text-center"">
        Chat mode: {chatMode}
      </p>
      <p className=""text-slate-400 text-xs text-center"">
        Responses from system may produce inaccurate or invalid responses - use
        with caution.
      </p>
    </div>
  );
});

function CommandMenu({ workspace, show, handleClick, hide }) {
  if (!show) return null;
  const COMMANDS = [
    {
      cmd: ""/conversation"",
      description: ""- switch to chat mode (remembers recent chat history) ."",
    },
    {
      cmd: ""/query"",
      description: ""- switch to query mode (does not remember previous chats)."",
    },
    { cmd: ""/reset"", description: ""- clear current chat history."" },
  ];

  return (
    <div className=""absolute top-[-25vh] md:top-[-23vh] min-h-[200px] flex flex-col rounded-lg border border-slate-400 p-2 pt-4 bg-gray-50 dark:bg-stone-600"">
      <div className=""flex justify-between items-center border-b border-slate-400 px-2 py-1 "">
        <p className=""text-gray-800 dark:text-slate-200"">Available Commands</p>
        <button
          type=""button""
          onClick={hide}
          className=""p-2 rounded-lg hover:bg-gray-200 hover:dark:bg-slate-500 rounded-full text-gray-800 dark:text-slate-400""
        >
          <X className=""h-4 w-4"" />
        </button>
      </div>

      <div className=""flex flex-col"">
        {COMMANDS.map((item, i) => {
          const { cmd, description } = item;
          return (
            <div className=""border-b border-slate-400 p-1"">
              <button
                key={i}
                type=""button""
                onClick={() => {
                  handleClick(cmd);
                  hide();
                }}
                className=""w-full px-4 py-2 flex items-center rounded-lg hover:bg-gray-300 hover:dark:bg-slate-500 gap-x-1 disabled:cursor-not-allowed""
              >
                <p className=""text-gray-800 dark:text-slate-200 font-semibold"">
                  {cmd}
                </p>
                <p className=""text-gray-800 dark:text-slate-300 text-sm"">
                  {description}
                </p>
              </button>
            </div>
          );
        })}
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR, VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR { VAR, VAR, VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR({ VAR, VAR, VAR, VAR, VAR, VAR, }) { VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = (VAR) => { VAR(VAR); VAR(VAR); }; VAR VAR = (VAR) => { VAR (VAR.VAR == 13) { VAR (!VAR.VAR) { VAR(VAR); } } }; VAR VAR = (VAR) => { VAR (VAR) VAR VAR; VAR VAR = VAR.VAR; VAR.VAR.VAR = ""1px""; VAR.VAR.VAR = VAR.VAR.VAR.VAR !== 0 ? 25 + VAR.VAR + ""VAR"" : ""1px""; }; VAR VAR = (VAR = """") => { VAR VAR = `VAR${VAR.VAR}`; VAR (VAR === ""/VAR"") { VAR.VAR.VAR(VAR, ""VAR""); VAR.VAR(VAR VAR(""VAR"")); VAR; } VAR VAR (VAR === ""/VAR"") { VAR.VAR.VAR(VAR, ""VAR""); VAR.VAR(VAR VAR(""VAR"")); VAR; } VAR({ VAR: { VAR: `${VAR} ${VAR}` } }); }; VAR ( <VAR VAR=""VAR-VAR VAR VAR:VAR VAR-0 VAR-0 VAR-10 VAR:VAR-0""> <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR VAR-VAR-VAR VAR:VAR-3/4 VAR-VAR VAR-VAR"" > <VAR VAR=""VAR VAR-VAR VAR-2 VAR-4 VAR-VAR""> <VAR VAR={VAR} VAR={VAR} VAR={VAR} VAR={() => VAR(VAR)} /> <VAR VAR={() => VAR(!VAR)} VAR=""VAR"" VAR=""VAR-2 VAR-VAR-500 VAR-VAR VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-200"" > <VAR VAR=""VAR-4 VAR-4 VAR:VAR-6 VAR:VAR-6"" /> </VAR> <VAR VAR={VAR} VAR={VAR} VAR={VAR} VAR={VAR} VAR={240} VAR={VAR} VAR={() => VAR(VAR)} VAR={(VAR) => { VAR(VAR); VAR(VAR); }} VAR={VAR} VAR=""VAR-VAR VAR-VAR-[100px] VAR:VAR-VAR-[40px] VAR VAR-2 VAR:VAR-4 VAR-2.5 VAR-VAR VAR-[16px] VAR:VAR-VAR VAR-VAR VAR VAR-VAR-50 VAR-VAR-300 VAR-VAR-400 VAR-VAR-900 VAR:VAR-VAR VAR:VAR-VAR-600 VAR:VAR-VAR-700 VAR:VAR-VAR-400"" VAR={ VAR ? ""VAR VAR VAR VAR."" : ""VAR + VAR VAR VAR. VAR VAR VAR."" } /> <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR-VAR VAR-0 VAR:VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR-200 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-500 VAR"" > {VAR ? ( <VAR VAR=""VAR-6 VAR-6 VAR-VAR"" /> ) : ( <VAR VAR-VAR=""VAR"" VAR=""VAR-6 VAR-6 VAR-45 VAR-VAR-500 VAR:VAR-VAR-500 VAR-VAR:VAR:VAR-VAR-200"" VAR=""VAR"" VAR=""0 0 20 20"" VAR=""VAR: > <VAR VAR=""VAR.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z""></VAR> </VAR> )} <VAR VAR=""VAR-VAR"">VAR VAR</VAR> </VAR> </VAR> <VAR VAR={VAR.VAR} /> </VAR> </VAR> ); } VAR VAR = VAR(({ VAR }) => { VAR VAR = `VAR${VAR}`; VAR [VAR, VAR] = VAR( VAR.VAR.VAR(VAR) ?? ""VAR"" ); VAR(() => { VAR VAR() { VAR (!VAR) VAR; VAR.VAR(`VAR`, () => { VAR { VAR VAR = VAR.VAR.VAR(VAR); VAR(VAR); } VAR {} }); } VAR(); }, [VAR]); VAR ( <VAR VAR=""VAR VAR-VAR VAR:VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-2 VAR-2 VAR-4 VAR:VAR-0""> <VAR VAR=""VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR-800 VAR:VAR-VAR-400 VAR-VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR""> VAR VAR: {VAR} </VAR> <VAR VAR=""VAR-VAR-400 VAR-VAR VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR - VAR VAR VAR. </VAR> </VAR> ); }); VAR VAR({ VAR, VAR, VAR, VAR }) { VAR (!VAR) VAR VAR; VAR VAR = [ { VAR: ""/VAR"", VAR: ""- VAR VAR VAR VAR (VAR VAR VAR VAR) ."", }, { VAR: ""/VAR"", VAR: ""- VAR VAR VAR VAR (VAR VAR VAR VAR VAR)."", }, { VAR: ""/VAR"", VAR: ""- VAR VAR VAR VAR."" }, ]; VAR ( <VAR VAR=""VAR VAR-[-25vh] VAR:VAR-[-23vh] VAR-VAR-[200px] VAR VAR-VAR VAR-VAR VAR VAR-VAR-400 VAR-2 VAR-4 VAR-VAR-50 VAR:VAR-VAR-600""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-400 VAR-2 VAR-1 ""> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200"">VAR VAR</VAR> <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR-2 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-500 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-400"" > <VAR VAR=""VAR-4 VAR-4"" /> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR""> {VAR.VAR((VAR, VAR) => { VAR { VAR, VAR } = VAR; VAR ( <VAR VAR=""VAR-VAR VAR-VAR-400 VAR-1""> <VAR VAR={VAR} VAR=""VAR"" VAR={() => { VAR(VAR); VAR(); }} VAR=""VAR-VAR VAR-4 VAR-2 VAR VAR-VAR VAR-VAR VAR:VAR-VAR-300 VAR:VAR:VAR-VAR-500 VAR-VAR-1 VAR:VAR-VAR-VAR"" > <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR""> {VAR} </VAR> <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-300 VAR-VAR""> {VAR} </VAR> </VAR> </VAR> ); })} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/WorkspaceChat/index.jsx,"import React, { useEffect, useState } from ""react"";
import Workspace from ""../../models/workspace"";
import LoadingChat from ""./LoadingChat"";
import ChatContainer from ""./ChatContainer"";
import paths from ""../../utils/paths"";

export default function WorkspaceChat({ loading, workspace }) {
  const [history, setHistory] = useState([]);
  const [loadingHistory, setLoadingHistory] = useState(true);

  useEffect(() => {
    async function getHistory() {
      if (loading) return;
      if (!workspace?.slug) {
        setLoadingHistory(false);
        return false;
      }

      const chatHistory = await Workspace.chatHistory(workspace.slug);
      setHistory(chatHistory);
      setLoadingHistory(false);
    }
    getHistory();
  }, [workspace, loading]);

  if (loadingHistory) return <LoadingChat />;
  if (!loading && !loadingHistory && !workspace) {
    return (
      <>
        {loading === false && !workspace && (
          <dialog
            open={true}
            style={{ zIndex: 100 }}
            className=""fixed top-0 flex bg-black bg-opacity-50 w-[100vw] h-full items-center justify-center ""
          >
            <div className=""w-fit px-10 p-4 w-1/4 rounded-lg bg-white shadow dark:bg-stone-700 text-black dark:text-slate-200"">
              <div className=""flex flex-col w-full"">
                <p className=""font-semibold text-red-500"">
                  We cannot locate this workspace!
                </p>
                <p className=""text-sm mt-4"">
                  It looks like a workspace by this name is not available.
                </p>

                <div className=""flex w-full justify-center items-center mt-4"">
                  <a
                    href={paths.home()}
                    className=""border border-gray-800 text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:border-slate-200 dark:hover:bg-stone-900""
                  >
                    Go back to homepage
                  </a>
                </div>
              </div>
            </div>
          </dialog>
        )}
        <LoadingChat />
      </>
    );
  }

  return <ChatContainer workspace={workspace} knownHistory={history} />;
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR VAR({ VAR, VAR }) { VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR VAR() { VAR (VAR) VAR; VAR (!VAR?.VAR) { VAR(VAR); VAR VAR; } VAR VAR = VAR VAR.VAR(VAR.VAR); VAR(VAR); VAR(VAR); } VAR(); }, [VAR, VAR]); VAR (VAR) VAR <VAR />; VAR (!VAR && !VAR && !VAR) { VAR ( <> {VAR === VAR && !VAR && ( <VAR VAR={VAR} VAR={{ VAR: 100 }} VAR=""VAR VAR-0 VAR VAR-VAR VAR-VAR-50 VAR-[100vw] VAR-VAR VAR-VAR VAR-VAR "" > <VAR VAR=""VAR-VAR VAR-10 VAR-4 VAR-1/4 VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700 VAR-VAR VAR:VAR-VAR-200""> <VAR VAR=""VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-500""> VAR VAR VAR VAR VAR! </VAR> <VAR VAR=""VAR-VAR VAR-4""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-4""> <VAR VAR={VAR.VAR()} VAR=""VAR VAR-VAR-800 VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR VAR VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> )} <VAR /> </> ); } VAR <VAR VAR={VAR} VAR={VAR} />; } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/components/WorkspaceChat/index.jsx,"import React, { useEffect, useState } from ""react"";
import Workspace from ""../../models/workspace"";
import LoadingChat from ""./LoadingChat"";
import ChatContainer from ""./ChatContainer"";
import paths from ""../../utils/paths"";

export default function WorkspaceChat({ loading, workspace }) {
  const [history, setHistory] = useState([]);
  const [loadingHistory, setLoadingHistory] = useState(true);

  useEffect(() => {
    async function getHistory() {
      if (loading) return;
      if (!workspace?.slug) {
        setLoadingHistory(false);
        return false;
      }

      const chatHistory = await Workspace.chatHistory(workspace.slug);
      setHistory(chatHistory);
      setLoadingHistory(false);
    }
    getHistory();
  }, [workspace, loading]);

  if (loadingHistory) return <LoadingChat />;
  if (!loading && !loadingHistory && !workspace) {
    return (
      <>
        {loading === false && !workspace && (
          <dialog
            open={true}
            style={{ zIndex: 100 }}
            className=""fixed top-0 flex bg-black bg-opacity-50 w-[100vw] h-full items-center justify-center ""
          >
            <div className=""w-fit px-10 p-4 w-1/4 rounded-lg bg-white shadow dark:bg-stone-700 text-black dark:text-slate-200"">
              <div className=""flex flex-col w-full"">
                <p className=""font-semibold text-red-500"">
                  We cannot locate this workspace!
                </p>
                <p className=""text-sm mt-4"">
                  It looks like a workspace by this name is not available.
                </p>

                <div className=""flex w-full justify-center items-center mt-4"">
                  <a
                    href={paths.home()}
                    className=""border border-gray-800 text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:border-slate-200 dark:hover:bg-stone-900""
                  >
                    Go back to homepage
                  </a>
                </div>
              </div>
            </div>
          </dialog>
        )}
        <LoadingChat />
      </>
    );
  }

  return <ChatContainer workspace={workspace} knownHistory={history} />;
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../VAR/VAR""; VAR VAR VAR VAR({ VAR, VAR }) { VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR(VAR); VAR(() => { VAR VAR VAR() { VAR (VAR) VAR; VAR (!VAR?.VAR) { VAR(VAR); VAR VAR; } VAR VAR = VAR VAR.VAR(VAR.VAR); VAR(VAR); VAR(VAR); } VAR(); }, [VAR, VAR]); VAR (VAR) VAR <VAR />; VAR (!VAR && !VAR && !VAR) { VAR ( <> {VAR === VAR && !VAR && ( <VAR VAR={VAR} VAR={{ VAR: 100 }} VAR=""VAR VAR-0 VAR VAR-VAR VAR-VAR-50 VAR-[100vw] VAR-VAR VAR-VAR VAR-VAR "" > <VAR VAR=""VAR-VAR VAR-10 VAR-4 VAR-1/4 VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700 VAR-VAR VAR:VAR-VAR-200""> <VAR VAR=""VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-500""> VAR VAR VAR VAR VAR! </VAR> <VAR VAR=""VAR-VAR VAR-4""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-4""> <VAR VAR={VAR.VAR()} VAR=""VAR VAR-VAR-800 VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR VAR VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> )} <VAR /> </> ); } VAR <VAR VAR={VAR} VAR={VAR} />; } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/ApiKeys/NewApiKeyModal/index.jsx,"import React, { useEffect, useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../models/admin"";
import paths from ""../../../../utils/paths"";
const DIALOG_ID = `new-api-key-modal`;

function hideModal() {
  document.getElementById(DIALOG_ID)?.close();
}

export const NewApiKeyModalId = DIALOG_ID;
export default function NewApiKeyModal() {
  const [apiKey, setApiKey] = useState(null);
  const [error, setError] = useState(null);
  const [copied, setCopied] = useState(false);

  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const { apiKey: newApiKey, error } = await Admin.generateApiKey();
    if (!!newApiKey) setApiKey(newApiKey);
    setError(error);
  };
  const copyApiKey = () => {
    if (!apiKey) return false;
    window.navigator.clipboard.writeText(apiKey.secret);
    setCopied(true);
  };
  useEffect(() => {
    function resetStatus() {
      if (!copied) return false;
      setTimeout(() => {
        setCopied(false);
      }, 3000);
    }
    resetStatus();
  }, [copied]);

  return (
    <dialog id={DIALOG_ID} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Create new API key
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                {apiKey && (
                  <input
                    type=""text""
                    defaultValue={`${apiKey.secret}`}
                    disabled={true}
                    className=""rounded-lg px-4 py-2 text-gray-800 bg-gray-100 dark:text-slate-200 dark:bg-stone-800""
                  />
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  Once created the API key can be used to programmatically
                  access and configure this AnythingLLM instance.
                </p>
                <a
                  href={paths.apiDocs()}
                  target=""_blank""
                  className=""text-blue-600 dark:text-blue-300 hover:underline""
                >
                  Read the API documentation &rarr;
                </a>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              {!apiKey ? (
                <>
                  <button
                    onClick={hideModal}
                    type=""button""
                    className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
                  >
                    Cancel
                  </button>
                  <button
                    type=""submit""
                    className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
                  >
                    Create API key
                  </button>
                </>
              ) : (
                <button
                  onClick={copyApiKey}
                  type=""button""
                  disabled={copied}
                  className=""w-full disabled:bg-green-200 disabled:text-green-600 text-gray-800 bg-gray-100 px-4 py-2 rounded-lg dark:text-slate-200 dark:bg-stone-900""
                >
                  {copied ? ""Copied API key"" : ""Copy API key""}
                </button>
              )}
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = `VAR-VAR-VAR-VAR`; VAR VAR() { VAR.VAR(VAR)?.VAR(); } VAR VAR VAR = VAR; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR { VAR: VAR, VAR } = VAR VAR.VAR(); VAR (!!VAR) VAR(VAR); VAR(VAR); }; VAR VAR = () => { VAR (!VAR) VAR VAR; VAR.VAR.VAR.VAR(VAR.VAR); VAR(VAR); }; VAR(() => { VAR VAR() { VAR (!VAR) VAR VAR; VAR(() => { VAR(VAR); }, 3000); } VAR(); }, [VAR]); VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} {VAR && ( <VAR VAR=""VAR"" VAR={`${VAR.VAR}`} VAR={VAR} VAR=""VAR-VAR VAR-4 VAR-2 VAR-VAR-800 VAR-VAR-100 VAR:VAR-VAR-200 VAR:VAR-VAR-800"" /> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR-VAR-600 VAR:VAR-VAR-300 VAR:VAR"" > VAR VAR VAR VAR &VAR; </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> {!VAR ? ( <> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR VAR </VAR> </> ) : ( <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR-800 VAR-VAR-100 VAR-4 VAR-2 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900"" > {VAR ? ""VAR VAR VAR"" : ""VAR VAR VAR""} </VAR> )} </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/ApiKeys/NewApiKeyModal/index.jsx,"import React, { useEffect, useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../models/admin"";
import paths from ""../../../../utils/paths"";
const DIALOG_ID = `new-api-key-modal`;

function hideModal() {
  document.getElementById(DIALOG_ID)?.close();
}

export const NewApiKeyModalId = DIALOG_ID;
export default function NewApiKeyModal() {
  const [apiKey, setApiKey] = useState(null);
  const [error, setError] = useState(null);
  const [copied, setCopied] = useState(false);

  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const { apiKey: newApiKey, error } = await Admin.generateApiKey();
    if (!!newApiKey) setApiKey(newApiKey);
    setError(error);
  };
  const copyApiKey = () => {
    if (!apiKey) return false;
    window.navigator.clipboard.writeText(apiKey.secret);
    setCopied(true);
  };
  useEffect(() => {
    function resetStatus() {
      if (!copied) return false;
      setTimeout(() => {
        setCopied(false);
      }, 3000);
    }
    resetStatus();
  }, [copied]);

  return (
    <dialog id={DIALOG_ID} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Create new API key
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                {apiKey && (
                  <input
                    type=""text""
                    defaultValue={`${apiKey.secret}`}
                    disabled={true}
                    className=""rounded-lg px-4 py-2 text-gray-800 bg-gray-100 dark:text-slate-200 dark:bg-stone-800""
                  />
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  Once created the API key can be used to programmatically
                  access and configure this AnythingLLM instance.
                </p>
                <a
                  href={paths.apiDocs()}
                  target=""_blank""
                  className=""text-blue-600 dark:text-blue-300 hover:underline""
                >
                  Read the API documentation &rarr;
                </a>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              {!apiKey ? (
                <>
                  <button
                    onClick={hideModal}
                    type=""button""
                    className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
                  >
                    Cancel
                  </button>
                  <button
                    type=""submit""
                    className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
                  >
                    Create API key
                  </button>
                </>
              ) : (
                <button
                  onClick={copyApiKey}
                  type=""button""
                  disabled={copied}
                  className=""w-full disabled:bg-green-200 disabled:text-green-600 text-gray-800 bg-gray-100 px-4 py-2 rounded-lg dark:text-slate-200 dark:bg-stone-900""
                >
                  {copied ? ""Copied API key"" : ""Copy API key""}
                </button>
              )}
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = `VAR-VAR-VAR-VAR`; VAR VAR() { VAR.VAR(VAR)?.VAR(); } VAR VAR VAR = VAR; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR { VAR: VAR, VAR } = VAR VAR.VAR(); VAR (!!VAR) VAR(VAR); VAR(VAR); }; VAR VAR = () => { VAR (!VAR) VAR VAR; VAR.VAR.VAR.VAR(VAR.VAR); VAR(VAR); }; VAR(() => { VAR VAR() { VAR (!VAR) VAR VAR; VAR(() => { VAR(VAR); }, 3000); } VAR(); }, [VAR]); VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} {VAR && ( <VAR VAR=""VAR"" VAR={`${VAR.VAR}`} VAR={VAR} VAR=""VAR-VAR VAR-4 VAR-2 VAR-VAR-800 VAR-VAR-100 VAR:VAR-VAR-200 VAR:VAR-VAR-800"" /> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR-VAR-600 VAR:VAR-VAR-300 VAR:VAR"" > VAR VAR VAR VAR &VAR; </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> {!VAR ? ( <> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR VAR </VAR> </> ) : ( <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR-800 VAR-VAR-100 VAR-4 VAR-2 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900"" > {VAR ? ""VAR VAR VAR"" : ""VAR VAR VAR""} </VAR> )} </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/ApiKeys/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import { PlusCircle } from ""react-feather"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import ApiKeyRow from ""./ApiKeyRow"";
import NewApiKeyModal, { NewApiKeyModalId } from ""./NewApiKeyModal"";
import paths from ""../../../utils/paths"";

export default function AdminApiKeys() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                API Keys
              </p>
              <button
                onClick={() =>
                  document?.getElementById(NewApiKeyModalId)?.showModal()
                }
                className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
              >
                <PlusCircle className=""h-4 w-4"" /> Generate New API Key
              </button>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              API keys allow the holder to programmatically access and manage
              this AnythingLLM instance.
            </p>
            <a
              href={paths.apiDocs()}
              target=""_blank""
              className=""text-blue-600 dark:text-blue-300 hover:underline""
            >
              Read the API documentation &rarr;
            </a>
          </div>
          <ApiKeysContainer />
        </div>
        <NewApiKeyModal />
      </div>
    </div>
  );
}

function ApiKeysContainer() {
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [apiKeys, setApiKeys] = useState([]);
  useEffect(() => {
    async function fetchExistingKeys() {
      const { apiKeys: foundKeys } = await Admin.getApiKeys();
      setApiKeys(foundKeys);
      setLoading(false);
    }
    fetchExistingKeys();
  }, []);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <table className=""md:w-3/4 w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
      <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
        <tr>
          <th scope=""col"" className=""px-6 py-3"">
            API Key
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created By
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {apiKeys.map((apiKey) => (
          <ApiKeyRow key={apiKey.id} apiKey={apiKey} />
        ))}
      </tbody>
    </table>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR={() => VAR?.VAR(VAR)?.VAR() } VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > <VAR VAR=""VAR-4 VAR-4"" /> VAR VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR-VAR-600 VAR:VAR-VAR-300 VAR:VAR"" > VAR VAR VAR VAR &VAR; </VAR> </VAR> <VAR /> </VAR> <VAR /> </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR { VAR: VAR } = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <VAR VAR=""VAR:VAR-3/4 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} /> ))} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/ApiKeys/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import { PlusCircle } from ""react-feather"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import ApiKeyRow from ""./ApiKeyRow"";
import NewApiKeyModal, { NewApiKeyModalId } from ""./NewApiKeyModal"";
import paths from ""../../../utils/paths"";

export default function AdminApiKeys() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                API Keys
              </p>
              <button
                onClick={() =>
                  document?.getElementById(NewApiKeyModalId)?.showModal()
                }
                className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
              >
                <PlusCircle className=""h-4 w-4"" /> Generate New API Key
              </button>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              API keys allow the holder to programmatically access and manage
              this AnythingLLM instance.
            </p>
            <a
              href={paths.apiDocs()}
              target=""_blank""
              className=""text-blue-600 dark:text-blue-300 hover:underline""
            >
              Read the API documentation &rarr;
            </a>
          </div>
          <ApiKeysContainer />
        </div>
        <NewApiKeyModal />
      </div>
    </div>
  );
}

function ApiKeysContainer() {
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [apiKeys, setApiKeys] = useState([]);
  useEffect(() => {
    async function fetchExistingKeys() {
      const { apiKeys: foundKeys } = await Admin.getApiKeys();
      setApiKeys(foundKeys);
      setLoading(false);
    }
    fetchExistingKeys();
  }, []);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <table className=""md:w-3/4 w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
      <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
        <tr>
          <th scope=""col"" className=""px-6 py-3"">
            API Key
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created By
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {apiKeys.map((apiKey) => (
          <ApiKeyRow key={apiKey.id} apiKey={apiKey} />
        ))}
      </tbody>
    </table>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR={() => VAR?.VAR(VAR)?.VAR() } VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > <VAR VAR=""VAR-4 VAR-4"" /> VAR VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> <VAR VAR={VAR.VAR()} VAR=""VAR"" VAR=""VAR-VAR-600 VAR:VAR-VAR-300 VAR:VAR"" > VAR VAR VAR VAR &VAR; </VAR> </VAR> <VAR /> </VAR> <VAR /> </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR { VAR: VAR } = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <VAR VAR=""VAR:VAR-3/4 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} /> ))} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Appearance/index.jsx,"import React, { useState, useEffect } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import Admin from ""../../../models/admin"";
import AnythingLLMLight from ""../../../media/logo/anything-llm-light.png"";
import AnythingLLMDark from ""../../../media/logo/anything-llm-dark.png"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import useLogo from ""../../../hooks/useLogo"";
import System from ""../../../models/system"";
import EditingChatBubble from ""../../../components/EditingChatBubble"";
import showToast from ""../../../utils/toast"";

export default function Appearance() {
  const { logo: _initLogo } = useLogo();
  const [logo, setLogo] = useState("""");
  const prefersDarkMode = usePrefersDarkMode();
  const [hasChanges, setHasChanges] = useState(false);
  const [messages, setMessages] = useState([]);

  useEffect(() => {
    async function setInitLogo() {
      setLogo(_initLogo || """");
    }
    setInitLogo();
  }, [_initLogo]);

  useEffect(() => {
    async function fetchMessages() {
      const messages = await System.getWelcomeMessages();
      setMessages(messages);
    }
    fetchMessages();
  }, []);

  const handleFileUpload = async (event) => {
    const file = event.target.files[0];
    if (!file) return false;

    const formData = new FormData();
    formData.append(""logo"", file);
    const { success, error } = await Admin.uploadLogo(formData);
    if (!success) {
      showToast(`Failed to upload logo: ${error}`, ""error"");
      return;
    }

    const logoURL = await System.fetchLogo();
    setLogo(logoURL);
    showToast(""Image uploaded successfully."", ""success"");
  };

  const handleRemoveLogo = async () => {
    const { success, error } = await Admin.removeCustomLogo();
    if (!success) {
      console.error(""Failed to remove logo:"", error);
      showToast(`Failed to remove logo: ${error}`, ""error"");
      return;
    }

    const logoURL = await System.fetchLogo();
    setLogo(logoURL);
    showToast(""Image successfully removed."", ""success"");
  };

  const addMessage = (type) => {
    if (type === ""user"") {
      setMessages([
        ...messages,
        { user: ""Double click to edit..."", response: """" },
      ]);
    } else {
      setMessages([
        ...messages,
        { user: """", response: ""Double click to edit..."" },
      ]);
    }
  };

  const removeMessage = (index) => {
    setHasChanges(true);
    setMessages(messages.filter((_, i) => i !== index));
  };

  const handleMessageChange = (index, type, value) => {
    setHasChanges(true);
    const newMessages = [...messages];
    newMessages[index][type] = value;
    setMessages(newMessages);
  };

  const handleMessageSave = async () => {
    const { success, error } = await Admin.setWelcomeMessages(messages);
    if (!success) {
      showToast(`Failed to update welcome messages: ${error}`, ""error"");
      return;
    }
    showToast(""Successfully updated welcome messages."", ""success"");
    setHasChanges(false);
  };

  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""px-1 md:px-8"">
          <div className=""mb-6"">
            <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
              Appearance Settings
            </p>
            <p className=""mt-2 text-sm font-base text-slate-600 dark:text-slate-200"">
              Customize the appearance settings of your platform.
            </p>
          </div>
          <div className=""mb-6"">
            <div className=""flex flex-col gap-y-2"">
              <h2 className=""leading-tight font-medium text-black dark:text-white"">
                Custom Logo
              </h2>
              <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                Change the logo that appears in the sidebar.
              </p>
            </div>
            <div className=""flex md:flex-row flex-col items-center"">
              <img
                src={logo}
                alt=""Uploaded Logo""
                className=""w-48 h-48 object-contain mr-6""
                onError={(e) =>
                  (e.target.src = prefersDarkMode
                    ? AnythingLLMLight
                    : AnythingLLMDark)
                }
              />
              <div className=""flex flex-col"">
                <div className=""mb-4"">
                  <label className=""cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"">
                    Upload Image
                    <input
                      type=""file""
                      accept=""image/*""
                      className=""hidden""
                      onChange={handleFileUpload}
                    />
                  </label>
                  <button
                    onClick={handleRemoveLogo}
                    className=""ml-4 cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                  >
                    Remove Custom Logo
                  </button>
                </div>
                <div className=""text-sm text-gray-600 dark:text-gray-300"">
                  Upload your logo. Recommended size: 800x200.
                </div>
              </div>
            </div>
          </div>
          <div className=""mb-6"">
            <div className=""flex flex-col gap-y-2"">
              <h2 className=""leading-tight font-medium text-black dark:text-white"">
                Custom Messages
              </h2>
              <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                Change the default messages that are displayed to the users.
              </p>
            </div>
            <div className=""mt-6 flex flex-col gap-y-6"">
              {messages.map((message, index) => (
                <div key={index} className=""flex flex-col gap-y-2"">
                  {message.user && (
                    <EditingChatBubble
                      message={message}
                      index={index}
                      type=""user""
                      handleMessageChange={handleMessageChange}
                      removeMessage={removeMessage}
                    />
                  )}
                  {message.response && (
                    <EditingChatBubble
                      message={message}
                      index={index}
                      type=""response""
                      handleMessageChange={handleMessageChange}
                      removeMessage={removeMessage}
                    />
                  )}
                </div>
              ))}
              <div className=""flex gap-4 mt-4 justify-between"">
                <button
                  className=""self-end text-orange-500 hover:text-orange-700 transition""
                  onClick={() => addMessage(""response"")}
                >
                  + System Message
                </button>
                <button
                  className=""self-end text-orange-500 hover:text-orange-700 transition""
                  onClick={() => addMessage(""user"")}
                >
                  + User Message
                </button>
              </div>
            </div>
            {hasChanges && (
              <div className=""flex justify-center py-6"">
                <button
                  className=""ml-4 cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                  onClick={handleMessageSave}
                >
                  Save Messages
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR/VAR-VAR-VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR/VAR-VAR-VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR { VAR: VAR } = VAR(); VAR [VAR, VAR] = VAR(""""); VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR(VAR || """"); } VAR(); }, [VAR]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); } VAR(); }, []); VAR VAR = VAR (VAR) => { VAR VAR = VAR.VAR.VAR[0]; VAR (!VAR) VAR VAR; VAR VAR = VAR VAR(); VAR.VAR(""VAR"", VAR); VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(""VAR VAR VAR."", ""VAR""); }; VAR VAR = VAR () => { VAR { VAR, VAR } = VAR VAR.VAR(); VAR (!VAR) { VAR.VAR(""VAR VAR VAR VAR:"", VAR); VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(""VAR VAR VAR."", ""VAR""); }; VAR VAR = (VAR) => { VAR (VAR === ""VAR"") { VAR([ ...VAR, { VAR: ""VAR VAR VAR VAR..."", VAR: """" }, ]); } VAR { VAR([ ...VAR, { VAR: """", VAR: ""VAR VAR VAR VAR..."" }, ]); } }; VAR VAR = (VAR) => { VAR(VAR); VAR(VAR.VAR((VAR, VAR) => VAR !== VAR)); }; VAR VAR = (VAR, VAR, VAR) => { VAR(VAR); VAR VAR = [...VAR]; VAR[VAR][VAR] = VAR; VAR(VAR); }; VAR VAR = VAR () => { VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR(`VAR VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR(""VAR VAR VAR VAR."", ""VAR""); VAR(VAR); }; VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-6""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR-2 VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR VAR:VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR VAR"" VAR=""VAR-48 VAR-48 VAR-VAR VAR-6"" VAR={(VAR) => (VAR.VAR.VAR = VAR ? VAR : VAR) } /> <VAR VAR=""VAR VAR-VAR""> <VAR VAR=""VAR-4""> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600""> VAR VAR <VAR VAR=""VAR"" VAR=""VAR/*"" VAR=""VAR"" VAR={VAR} /> </VAR> <VAR VAR={VAR} VAR=""VAR-4 VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300""> VAR VAR VAR. VAR VAR: 800x200. </VAR> </VAR> </VAR> </VAR> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR-6""> {VAR.VAR((VAR, VAR) => ( <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-2""> {VAR.VAR && ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} VAR={VAR} /> )} {VAR.VAR && ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} VAR={VAR} /> )} </VAR> ))} <VAR VAR=""VAR VAR-4 VAR-4 VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR"" VAR={() => VAR(""VAR"")} > + VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR"" VAR={() => VAR(""VAR"")} > + VAR VAR </VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR VAR-VAR VAR-6""> <VAR VAR=""VAR-4 VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" VAR={VAR} > VAR VAR </VAR> </VAR> )} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Appearance/index.jsx,"import React, { useState, useEffect } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import Admin from ""../../../models/admin"";
import AnythingLLMLight from ""../../../media/logo/anything-llm-light.png"";
import AnythingLLMDark from ""../../../media/logo/anything-llm-dark.png"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import useLogo from ""../../../hooks/useLogo"";
import System from ""../../../models/system"";
import EditingChatBubble from ""../../../components/EditingChatBubble"";
import showToast from ""../../../utils/toast"";

export default function Appearance() {
  const { logo: _initLogo } = useLogo();
  const [logo, setLogo] = useState("""");
  const prefersDarkMode = usePrefersDarkMode();
  const [hasChanges, setHasChanges] = useState(false);
  const [messages, setMessages] = useState([]);

  useEffect(() => {
    async function setInitLogo() {
      setLogo(_initLogo || """");
    }
    setInitLogo();
  }, [_initLogo]);

  useEffect(() => {
    async function fetchMessages() {
      const messages = await System.getWelcomeMessages();
      setMessages(messages);
    }
    fetchMessages();
  }, []);

  const handleFileUpload = async (event) => {
    const file = event.target.files[0];
    if (!file) return false;

    const formData = new FormData();
    formData.append(""logo"", file);
    const { success, error } = await Admin.uploadLogo(formData);
    if (!success) {
      showToast(`Failed to upload logo: ${error}`, ""error"");
      return;
    }

    const logoURL = await System.fetchLogo();
    setLogo(logoURL);
    showToast(""Image uploaded successfully."", ""success"");
  };

  const handleRemoveLogo = async () => {
    const { success, error } = await Admin.removeCustomLogo();
    if (!success) {
      console.error(""Failed to remove logo:"", error);
      showToast(`Failed to remove logo: ${error}`, ""error"");
      return;
    }

    const logoURL = await System.fetchLogo();
    setLogo(logoURL);
    showToast(""Image successfully removed."", ""success"");
  };

  const addMessage = (type) => {
    if (type === ""user"") {
      setMessages([
        ...messages,
        { user: ""Double click to edit..."", response: """" },
      ]);
    } else {
      setMessages([
        ...messages,
        { user: """", response: ""Double click to edit..."" },
      ]);
    }
  };

  const removeMessage = (index) => {
    setHasChanges(true);
    setMessages(messages.filter((_, i) => i !== index));
  };

  const handleMessageChange = (index, type, value) => {
    setHasChanges(true);
    const newMessages = [...messages];
    newMessages[index][type] = value;
    setMessages(newMessages);
  };

  const handleMessageSave = async () => {
    const { success, error } = await Admin.setWelcomeMessages(messages);
    if (!success) {
      showToast(`Failed to update welcome messages: ${error}`, ""error"");
      return;
    }
    showToast(""Successfully updated welcome messages."", ""success"");
    setHasChanges(false);
  };

  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""px-1 md:px-8"">
          <div className=""mb-6"">
            <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
              Appearance Settings
            </p>
            <p className=""mt-2 text-sm font-base text-slate-600 dark:text-slate-200"">
              Customize the appearance settings of your platform.
            </p>
          </div>
          <div className=""mb-6"">
            <div className=""flex flex-col gap-y-2"">
              <h2 className=""leading-tight font-medium text-black dark:text-white"">
                Custom Logo
              </h2>
              <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                Change the logo that appears in the sidebar.
              </p>
            </div>
            <div className=""flex md:flex-row flex-col items-center"">
              <img
                src={logo}
                alt=""Uploaded Logo""
                className=""w-48 h-48 object-contain mr-6""
                onError={(e) =>
                  (e.target.src = prefersDarkMode
                    ? AnythingLLMLight
                    : AnythingLLMDark)
                }
              />
              <div className=""flex flex-col"">
                <div className=""mb-4"">
                  <label className=""cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"">
                    Upload Image
                    <input
                      type=""file""
                      accept=""image/*""
                      className=""hidden""
                      onChange={handleFileUpload}
                    />
                  </label>
                  <button
                    onClick={handleRemoveLogo}
                    className=""ml-4 cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                  >
                    Remove Custom Logo
                  </button>
                </div>
                <div className=""text-sm text-gray-600 dark:text-gray-300"">
                  Upload your logo. Recommended size: 800x200.
                </div>
              </div>
            </div>
          </div>
          <div className=""mb-6"">
            <div className=""flex flex-col gap-y-2"">
              <h2 className=""leading-tight font-medium text-black dark:text-white"">
                Custom Messages
              </h2>
              <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                Change the default messages that are displayed to the users.
              </p>
            </div>
            <div className=""mt-6 flex flex-col gap-y-6"">
              {messages.map((message, index) => (
                <div key={index} className=""flex flex-col gap-y-2"">
                  {message.user && (
                    <EditingChatBubble
                      message={message}
                      index={index}
                      type=""user""
                      handleMessageChange={handleMessageChange}
                      removeMessage={removeMessage}
                    />
                  )}
                  {message.response && (
                    <EditingChatBubble
                      message={message}
                      index={index}
                      type=""response""
                      handleMessageChange={handleMessageChange}
                      removeMessage={removeMessage}
                    />
                  )}
                </div>
              ))}
              <div className=""flex gap-4 mt-4 justify-between"">
                <button
                  className=""self-end text-orange-500 hover:text-orange-700 transition""
                  onClick={() => addMessage(""response"")}
                >
                  + System Message
                </button>
                <button
                  className=""self-end text-orange-500 hover:text-orange-700 transition""
                  onClick={() => addMessage(""user"")}
                >
                  + User Message
                </button>
              </div>
            </div>
            {hasChanges && (
              <div className=""flex justify-center py-6"">
                <button
                  className=""ml-4 cursor-pointer text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600""
                  onClick={handleMessageSave}
                >
                  Save Messages
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR/VAR-VAR-VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR/VAR-VAR-VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR { VAR: VAR } = VAR(); VAR [VAR, VAR] = VAR(""""); VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR(VAR || """"); } VAR(); }, [VAR]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); } VAR(); }, []); VAR VAR = VAR (VAR) => { VAR VAR = VAR.VAR.VAR[0]; VAR (!VAR) VAR VAR; VAR VAR = VAR VAR(); VAR.VAR(""VAR"", VAR); VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(""VAR VAR VAR."", ""VAR""); }; VAR VAR = VAR () => { VAR { VAR, VAR } = VAR VAR.VAR(); VAR (!VAR) { VAR.VAR(""VAR VAR VAR VAR:"", VAR); VAR(`VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(""VAR VAR VAR."", ""VAR""); }; VAR VAR = (VAR) => { VAR (VAR === ""VAR"") { VAR([ ...VAR, { VAR: ""VAR VAR VAR VAR..."", VAR: """" }, ]); } VAR { VAR([ ...VAR, { VAR: """", VAR: ""VAR VAR VAR VAR..."" }, ]); } }; VAR VAR = (VAR) => { VAR(VAR); VAR(VAR.VAR((VAR, VAR) => VAR !== VAR)); }; VAR VAR = (VAR, VAR, VAR) => { VAR(VAR); VAR VAR = [...VAR]; VAR[VAR][VAR] = VAR; VAR(VAR); }; VAR VAR = VAR () => { VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!VAR) { VAR(`VAR VAR VAR VAR VAR: ${VAR}`, ""VAR""); VAR; } VAR(""VAR VAR VAR VAR."", ""VAR""); VAR(VAR); }; VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-6""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR=""VAR-2 VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR VAR:VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR VAR"" VAR=""VAR-48 VAR-48 VAR-VAR VAR-6"" VAR={(VAR) => (VAR.VAR.VAR = VAR ? VAR : VAR) } /> <VAR VAR=""VAR VAR-VAR""> <VAR VAR=""VAR-4""> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600""> VAR VAR <VAR VAR=""VAR"" VAR=""VAR/*"" VAR=""VAR"" VAR={VAR} /> </VAR> <VAR VAR={VAR} VAR=""VAR-4 VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" > VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300""> VAR VAR VAR. VAR VAR: 800x200. </VAR> </VAR> </VAR> </VAR> <VAR VAR=""VAR-6""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-6 VAR VAR-VAR VAR-VAR-6""> {VAR.VAR((VAR, VAR) => ( <VAR VAR={VAR} VAR=""VAR VAR-VAR VAR-VAR-2""> {VAR.VAR && ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} VAR={VAR} /> )} {VAR.VAR && ( <VAR VAR={VAR} VAR={VAR} VAR=""VAR"" VAR={VAR} VAR={VAR} /> )} </VAR> ))} <VAR VAR=""VAR VAR-4 VAR-4 VAR-VAR""> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR"" VAR={() => VAR(""VAR"")} > + VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR-500 VAR:VAR-VAR-700 VAR"" VAR={() => VAR(""VAR"")} > + VAR VAR </VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR VAR-VAR VAR-6""> <VAR VAR=""VAR-4 VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR-700 VAR:VAR-VAR-300 VAR:VAR-VAR-500 VAR:VAR:VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR-600"" VAR={VAR} > VAR VAR </VAR> </VAR> )} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Chats/ChatRow/index.jsx,"import { useRef } from ""react"";
import Admin from ""../../../../models/admin"";
import truncate from ""truncate"";
import { X } from ""react-feather"";

export default function ChatRow({ chat }) {
  const rowRef = useRef(null);
  const handleDelete = async () => {
    if (
      !window.confirm(
        `Are you sure you want to delete this chat?\n\nThis action is irreversible.`
      )
    )
      return false;
    rowRef?.current?.remove();
    await Admin.deleteChat(chat.id);
  };

  return (
    <>
      <tr ref={rowRef} className=""bg-transparent"">
        <td className=""px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"">
          {chat.id}
        </td>
        <td className=""px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"">
          {chat.user?.username}
        </td>
        <td className=""px-6 py-4 font-mono"">{chat.workspace?.name}</td>
        <td
          onClick={() => {
            document.getElementById(`chat-${chat.id}-prompt`)?.showModal();
          }}
          className=""px-6 py-4 hover:dark:bg-stone-700 hover:bg-gray-100 cursor-pointer""
        >
          {truncate(chat.prompt, 40)}
        </td>
        <td
          onClick={() => {
            document.getElementById(`chat-${chat.id}-response`)?.showModal();
          }}
          className=""px-6 py-4 hover:dark:bg-stone-600 hover:bg-gray-100 cursor-pointer""
        >
          {truncate(JSON.parse(chat.response)?.text, 40)}
        </td>
        <td className=""px-6 py-4"">{chat.createdAt}</td>
        <td className=""px-6 py-4 flex items-center gap-x-6"">
          <button
            onClick={handleDelete}
            className=""font-medium text-red-600 dark:text-red-300 px-2 py-1 rounded-lg hover:bg-red-50 hover:dark:bg-red-800 hover:dark:bg-opacity-20""
          >
            Delete
          </button>
        </td>
      </tr>
      <TextPreview text={chat.prompt} modalName={`chat-${chat.id}-prompt`} />
      <TextPreview
        text={JSON.parse(chat.response)?.text}
        modalName={`chat-${chat.id}-response`}
      />
    </>
  );
}

function hideModal(modalName) {
  document.getElementById(modalName)?.close();
}

const TextPreview = ({ text, modalName }) => {
  return (
    <dialog id={modalName} className=""bg-transparent outline-none w-full"">
      <div className=""relative w-full max-w-2xl max-h-full min-w-1/2"">
        <div className=""min-w-1/2 relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Viewing Text
            </h3>
            <button
              onClick={() => hideModal(modalName)}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <div className=""w-full p-4 w-full flex"">
            <pre className=""w-full flex h-[200px] py-2 px-4 overflow-scroll rounded-lg bg-stone-400 bg-gray-200 text-gray-800 dark:text-slate-800 font-mono"">
              {text}
            </pre>
          </div>
        </div>
      </div>
    </dialog>
  );
};",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR({ VAR }) { VAR VAR = VAR(VAR); VAR VAR = VAR () => { VAR ( !VAR.VAR( `VAR VAR VAR VAR VAR VAR VAR VAR VAR?\VAR\VAR VAR VAR VAR.` ) ) VAR VAR; VAR?.VAR?.VAR(); VAR VAR.VAR(VAR.VAR); }; VAR ( <> <VAR VAR={VAR} VAR=""VAR-VAR""> <VAR VAR=""VAR-6 VAR-4 VAR-VAR VAR-VAR-900 VAR-VAR VAR:VAR-VAR""> {VAR.VAR} </VAR> <VAR VAR=""VAR-6 VAR-4 VAR-VAR VAR-VAR-900 VAR-VAR VAR:VAR-VAR""> {VAR.VAR?.VAR} </VAR> <VAR VAR=""VAR-6 VAR-4 VAR-VAR"">{VAR.VAR?.VAR}</VAR> <VAR VAR={() => { VAR.VAR(`VAR-${VAR.VAR}-VAR`)?.VAR(); }} VAR=""VAR-6 VAR-4 VAR:VAR:VAR-VAR-700 VAR:VAR-VAR-100 VAR-VAR"" > {VAR(VAR.VAR, 40)} </VAR> <VAR VAR={() => { VAR.VAR(`VAR-${VAR.VAR}-VAR`)?.VAR(); }} VAR=""VAR-6 VAR-4 VAR:VAR:VAR-VAR-600 VAR:VAR-VAR-100 VAR-VAR"" > {VAR(VAR.VAR(VAR.VAR)?.VAR, 40)} </VAR> <VAR VAR=""VAR-6 VAR-4"">{VAR.VAR}</VAR> <VAR VAR=""VAR-6 VAR-4 VAR VAR-VAR VAR-VAR-6""> <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300 VAR-2 VAR-1 VAR-VAR VAR:VAR-VAR-50 VAR:VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-20"" > VAR </VAR> </VAR> </VAR> <VAR VAR={VAR.VAR} VAR={`VAR-${VAR.VAR}-VAR`} /> <VAR VAR={VAR.VAR(VAR.VAR)?.VAR} VAR={`VAR-${VAR.VAR}-VAR`} /> </> ); } VAR VAR(VAR) { VAR.VAR(VAR)?.VAR(); } VAR VAR = ({ VAR, VAR }) => { VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR VAR-VAR-1/2""> <VAR VAR=""VAR-VAR-1/2 VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR={() => VAR(VAR)} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-4 VAR-VAR VAR""> <VAR VAR=""VAR-VAR VAR VAR-[200px] VAR-2 VAR-4 VAR-VAR VAR-VAR VAR-VAR-400 VAR-VAR-200 VAR-VAR-800 VAR:VAR-VAR-800 VAR-VAR""> {VAR} </VAR> </VAR> </VAR> </VAR> </VAR> ); }; ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Chats/ChatRow/index.jsx,"import { useRef } from ""react"";
import Admin from ""../../../../models/admin"";
import truncate from ""truncate"";
import { X } from ""react-feather"";

export default function ChatRow({ chat }) {
  const rowRef = useRef(null);
  const handleDelete = async () => {
    if (
      !window.confirm(
        `Are you sure you want to delete this chat?\n\nThis action is irreversible.`
      )
    )
      return false;
    rowRef?.current?.remove();
    await Admin.deleteChat(chat.id);
  };

  return (
    <>
      <tr ref={rowRef} className=""bg-transparent"">
        <td className=""px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"">
          {chat.id}
        </td>
        <td className=""px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"">
          {chat.user?.username}
        </td>
        <td className=""px-6 py-4 font-mono"">{chat.workspace?.name}</td>
        <td
          onClick={() => {
            document.getElementById(`chat-${chat.id}-prompt`)?.showModal();
          }}
          className=""px-6 py-4 hover:dark:bg-stone-700 hover:bg-gray-100 cursor-pointer""
        >
          {truncate(chat.prompt, 40)}
        </td>
        <td
          onClick={() => {
            document.getElementById(`chat-${chat.id}-response`)?.showModal();
          }}
          className=""px-6 py-4 hover:dark:bg-stone-600 hover:bg-gray-100 cursor-pointer""
        >
          {truncate(JSON.parse(chat.response)?.text, 40)}
        </td>
        <td className=""px-6 py-4"">{chat.createdAt}</td>
        <td className=""px-6 py-4 flex items-center gap-x-6"">
          <button
            onClick={handleDelete}
            className=""font-medium text-red-600 dark:text-red-300 px-2 py-1 rounded-lg hover:bg-red-50 hover:dark:bg-red-800 hover:dark:bg-opacity-20""
          >
            Delete
          </button>
        </td>
      </tr>
      <TextPreview text={chat.prompt} modalName={`chat-${chat.id}-prompt`} />
      <TextPreview
        text={JSON.parse(chat.response)?.text}
        modalName={`chat-${chat.id}-response`}
      />
    </>
  );
}

function hideModal(modalName) {
  document.getElementById(modalName)?.close();
}

const TextPreview = ({ text, modalName }) => {
  return (
    <dialog id={modalName} className=""bg-transparent outline-none w-full"">
      <div className=""relative w-full max-w-2xl max-h-full min-w-1/2"">
        <div className=""min-w-1/2 relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Viewing Text
            </h3>
            <button
              onClick={() => hideModal(modalName)}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <div className=""w-full p-4 w-full flex"">
            <pre className=""w-full flex h-[200px] py-2 px-4 overflow-scroll rounded-lg bg-stone-400 bg-gray-200 text-gray-800 dark:text-slate-800 font-mono"">
              {text}
            </pre>
          </div>
        </div>
      </div>
    </dialog>
  );
};",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR } VAR ""VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR VAR({ VAR }) { VAR VAR = VAR(VAR); VAR VAR = VAR () => { VAR ( !VAR.VAR( `VAR VAR VAR VAR VAR VAR VAR VAR VAR?\VAR\VAR VAR VAR VAR.` ) ) VAR VAR; VAR?.VAR?.VAR(); VAR VAR.VAR(VAR.VAR); }; VAR ( <> <VAR VAR={VAR} VAR=""VAR-VAR""> <VAR VAR=""VAR-6 VAR-4 VAR-VAR VAR-VAR-900 VAR-VAR VAR:VAR-VAR""> {VAR.VAR} </VAR> <VAR VAR=""VAR-6 VAR-4 VAR-VAR VAR-VAR-900 VAR-VAR VAR:VAR-VAR""> {VAR.VAR?.VAR} </VAR> <VAR VAR=""VAR-6 VAR-4 VAR-VAR"">{VAR.VAR?.VAR}</VAR> <VAR VAR={() => { VAR.VAR(`VAR-${VAR.VAR}-VAR`)?.VAR(); }} VAR=""VAR-6 VAR-4 VAR:VAR:VAR-VAR-700 VAR:VAR-VAR-100 VAR-VAR"" > {VAR(VAR.VAR, 40)} </VAR> <VAR VAR={() => { VAR.VAR(`VAR-${VAR.VAR}-VAR`)?.VAR(); }} VAR=""VAR-6 VAR-4 VAR:VAR:VAR-VAR-600 VAR:VAR-VAR-100 VAR-VAR"" > {VAR(VAR.VAR(VAR.VAR)?.VAR, 40)} </VAR> <VAR VAR=""VAR-6 VAR-4"">{VAR.VAR}</VAR> <VAR VAR=""VAR-6 VAR-4 VAR VAR-VAR VAR-VAR-6""> <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR-600 VAR:VAR-VAR-300 VAR-2 VAR-1 VAR-VAR VAR:VAR-VAR-50 VAR:VAR:VAR-VAR-800 VAR:VAR:VAR-VAR-20"" > VAR </VAR> </VAR> </VAR> <VAR VAR={VAR.VAR} VAR={`VAR-${VAR.VAR}-VAR`} /> <VAR VAR={VAR.VAR(VAR.VAR)?.VAR} VAR={`VAR-${VAR.VAR}-VAR`} /> </> ); } VAR VAR(VAR) { VAR.VAR(VAR)?.VAR(); } VAR VAR = ({ VAR, VAR }) => { VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR VAR-VAR-1/2""> <VAR VAR=""VAR-VAR-1/2 VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR </VAR> <VAR VAR={() => VAR(VAR)} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-4 VAR-VAR VAR""> <VAR VAR=""VAR-VAR VAR VAR-[200px] VAR-2 VAR-4 VAR-VAR VAR-VAR VAR-VAR-400 VAR-VAR-200 VAR-VAR-800 VAR:VAR-VAR-800 VAR-VAR""> {VAR} </VAR> </VAR> </VAR> </VAR> </VAR> ); }; ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Chats/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import useQuery from ""../../../hooks/useQuery"";
import ChatRow from ""./ChatRow"";

export default function AdminChats() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                Workspace Chats
              </p>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              These are all the recorded chats and messages that have been sent
              by users ordered by their creation date.
            </p>
          </div>
          <ChatsContainer />
        </div>
      </div>
    </div>
  );
}

function ChatsContainer() {
  const query = useQuery();
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [chats, setChats] = useState([]);
  const [offset, setOffset] = useState(Number(query.get(""offset"") || 0));
  const [canNext, setCanNext] = useState(false);

  const handlePrevious = () => {
    if (chats.length === 0) {
      setOffset(0);
      return;
    }

    const chat = chats.at(-1);
    if (chat.id - 20 <= 0) {
      setOffset(0);
      return;
    }

    setOffset(chat.id - 1);
  };
  const handleNext = () => {
    setOffset(chats[0].id + 1);
  };

  useEffect(() => {
    async function fetchChats() {
      const { chats: _chats, hasPages = false } = await Admin.chats(offset);
      setChats(_chats);
      setCanNext(hasPages);
      setLoading(false);
    }
    fetchChats();
  }, [offset]);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <>
      <table className=""md:w-full w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
        <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
          <tr>
            <th scope=""col"" className=""px-6 py-3 rounded-tl-lg"">
              Id
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Sent By
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Workspace
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Prompt
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Response
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Sent At
            </th>
            <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
              Actions
            </th>
          </tr>
        </thead>
        <tbody>
          {chats.map((chat) => (
            <ChatRow key={chat.id} chat={chat} />
          ))}
        </tbody>
      </table>
      <div className=""flex w-full justify-between items-center"">
        <button
          onClick={handlePrevious}
          className=""px-4 py-2 rounded-lg border border-gray-800 dark:border-slate-200 text-gray-800 text-slate-200 disabled:invisible""
          disabled={offset === 0}
        >
          {"" ""}
          Previous Page
        </button>
        <button
          onClick={handleNext}
          className=""px-4 py-2 rounded-lg border border-gray-800 dark:border-slate-200 text-gray-800 text-slate-200 disabled:invisible""
          disabled={!canNext}
        >
          Next Page
        </button>
      </div>
    </>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR /> </VAR> </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(); VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR(VAR(VAR.VAR(""VAR"") || 0)); VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR (VAR.VAR === 0) { VAR(0); VAR; } VAR VAR = VAR.VAR(-1); VAR (VAR.VAR - 20 <= 0) { VAR(0); VAR; } VAR(VAR.VAR - 1); }; VAR VAR = () => { VAR(VAR[0].VAR + 1); }; VAR(() => { VAR VAR VAR() { VAR { VAR: VAR, VAR = VAR } = VAR VAR.VAR(VAR); VAR(VAR); VAR(VAR); VAR(VAR); } VAR(); }, [VAR]); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <> <VAR VAR=""VAR:VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} /> ))} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR-4 VAR-2 VAR-VAR VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR-800 VAR-VAR-200 VAR:VAR"" VAR={VAR === 0} > {"" ""} VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR-4 VAR-2 VAR-VAR VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR-800 VAR-VAR-200 VAR:VAR"" VAR={!VAR} > VAR VAR </VAR> </VAR> </> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Chats/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import useQuery from ""../../../hooks/useQuery"";
import ChatRow from ""./ChatRow"";

export default function AdminChats() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                Workspace Chats
              </p>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              These are all the recorded chats and messages that have been sent
              by users ordered by their creation date.
            </p>
          </div>
          <ChatsContainer />
        </div>
      </div>
    </div>
  );
}

function ChatsContainer() {
  const query = useQuery();
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [chats, setChats] = useState([]);
  const [offset, setOffset] = useState(Number(query.get(""offset"") || 0));
  const [canNext, setCanNext] = useState(false);

  const handlePrevious = () => {
    if (chats.length === 0) {
      setOffset(0);
      return;
    }

    const chat = chats.at(-1);
    if (chat.id - 20 <= 0) {
      setOffset(0);
      return;
    }

    setOffset(chat.id - 1);
  };
  const handleNext = () => {
    setOffset(chats[0].id + 1);
  };

  useEffect(() => {
    async function fetchChats() {
      const { chats: _chats, hasPages = false } = await Admin.chats(offset);
      setChats(_chats);
      setCanNext(hasPages);
      setLoading(false);
    }
    fetchChats();
  }, [offset]);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <>
      <table className=""md:w-full w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
        <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
          <tr>
            <th scope=""col"" className=""px-6 py-3 rounded-tl-lg"">
              Id
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Sent By
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Workspace
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Prompt
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Response
            </th>
            <th scope=""col"" className=""px-6 py-3"">
              Sent At
            </th>
            <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
              Actions
            </th>
          </tr>
        </thead>
        <tbody>
          {chats.map((chat) => (
            <ChatRow key={chat.id} chat={chat} />
          ))}
        </tbody>
      </table>
      <div className=""flex w-full justify-between items-center"">
        <button
          onClick={handlePrevious}
          className=""px-4 py-2 rounded-lg border border-gray-800 dark:border-slate-200 text-gray-800 text-slate-200 disabled:invisible""
          disabled={offset === 0}
        >
          {"" ""}
          Previous Page
        </button>
        <button
          onClick={handleNext}
          className=""px-4 py-2 rounded-lg border border-gray-800 dark:border-slate-200 text-gray-800 text-slate-200 disabled:invisible""
          disabled={!canNext}
        >
          Next Page
        </button>
      </div>
    </>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR /> </VAR> </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(); VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR(VAR(VAR.VAR(""VAR"") || 0)); VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR (VAR.VAR === 0) { VAR(0); VAR; } VAR VAR = VAR.VAR(-1); VAR (VAR.VAR - 20 <= 0) { VAR(0); VAR; } VAR(VAR.VAR - 1); }; VAR VAR = () => { VAR(VAR[0].VAR + 1); }; VAR(() => { VAR VAR VAR() { VAR { VAR: VAR, VAR = VAR } = VAR VAR.VAR(VAR); VAR(VAR); VAR(VAR); VAR(VAR); } VAR(); }, [VAR]); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <> <VAR VAR=""VAR:VAR-VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} /> ))} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR={VAR} VAR=""VAR-4 VAR-2 VAR-VAR VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR-800 VAR-VAR-200 VAR:VAR"" VAR={VAR === 0} > {"" ""} VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR-4 VAR-2 VAR-VAR VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR-800 VAR-VAR-200 VAR:VAR"" VAR={!VAR} > VAR VAR </VAR> </VAR> </> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Invitations/NewInviteModal/index.jsx,"import React, { useEffect, useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../models/admin"";
const DIALOG_ID = `new-invite-modal`;

function hideModal() {
  document.getElementById(DIALOG_ID)?.close();
}

export const NewInviteModalId = DIALOG_ID;
export default function NewInviteModal() {
  const [invite, setInvite] = useState(null);
  const [error, setError] = useState(null);
  const [copied, setCopied] = useState(false);

  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const { invite: newInvite, error } = await Admin.newInvite();
    if (!!newInvite) setInvite(newInvite);
    setError(error);
  };
  const copyInviteLink = () => {
    if (!invite) return false;
    window.navigator.clipboard.writeText(
      `${window.location.origin}/accept-invite/${invite.code}`
    );
    setCopied(true);
  };
  useEffect(() => {
    function resetStatus() {
      if (!copied) return false;
      setTimeout(() => {
        setCopied(false);
      }, 3000);
    }
    resetStatus();
  }, [copied]);

  return (
    <dialog id={DIALOG_ID} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Create new invite
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                {invite && (
                  <input
                    type=""url""
                    defaultValue={`${window.location.origin}/accept-invite/${invite.code}`}
                    disabled={true}
                    className=""rounded-lg px-4 py-2 text-gray-800 bg-gray-100 dark:text-slate-200 dark:bg-stone-800""
                  />
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creation you will be able to copy the invite and send it
                  to a new user where they can create an account as a default
                  user.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              {!invite ? (
                <>
                  <button
                    onClick={hideModal}
                    type=""button""
                    className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
                  >
                    Cancel
                  </button>
                  <button
                    type=""submit""
                    className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
                  >
                    Create Invite
                  </button>
                </>
              ) : (
                <button
                  onClick={copyInviteLink}
                  type=""button""
                  disabled={copied}
                  className=""w-full disabled:bg-green-200 disabled:text-green-600 text-gray-800 bg-gray-100 px-4 py-2 rounded-lg dark:text-slate-200 dark:bg-stone-900""
                >
                  {copied ? ""Copied Link"" : ""Copy Invite Link""}
                </button>
              )}
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = `VAR-VAR-VAR`; VAR VAR() { VAR.VAR(VAR)?.VAR(); } VAR VAR VAR = VAR; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR { VAR: VAR, VAR } = VAR VAR.VAR(); VAR (!!VAR) VAR(VAR); VAR(VAR); }; VAR VAR = () => { VAR (!VAR) VAR VAR; VAR.VAR.VAR.VAR( `${VAR.VAR.VAR}/VAR-VAR/${VAR.VAR}` ); VAR(VAR); }; VAR(() => { VAR VAR() { VAR (!VAR) VAR VAR; VAR(() => { VAR(VAR); }, 3000); } VAR(); }, [VAR]); VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} {VAR && ( <VAR VAR=""VAR"" VAR={`${VAR.VAR.VAR}/VAR-VAR/${VAR.VAR}`} VAR={VAR} VAR=""VAR-VAR VAR-4 VAR-2 VAR-VAR-800 VAR-VAR-100 VAR:VAR-VAR-200 VAR:VAR-VAR-800"" /> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> {!VAR ? ( <> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </> ) : ( <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR-800 VAR-VAR-100 VAR-4 VAR-2 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900"" > {VAR ? ""VAR VAR"" : ""VAR VAR VAR""} </VAR> )} </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Invitations/NewInviteModal/index.jsx,"import React, { useEffect, useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../models/admin"";
const DIALOG_ID = `new-invite-modal`;

function hideModal() {
  document.getElementById(DIALOG_ID)?.close();
}

export const NewInviteModalId = DIALOG_ID;
export default function NewInviteModal() {
  const [invite, setInvite] = useState(null);
  const [error, setError] = useState(null);
  const [copied, setCopied] = useState(false);

  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const { invite: newInvite, error } = await Admin.newInvite();
    if (!!newInvite) setInvite(newInvite);
    setError(error);
  };
  const copyInviteLink = () => {
    if (!invite) return false;
    window.navigator.clipboard.writeText(
      `${window.location.origin}/accept-invite/${invite.code}`
    );
    setCopied(true);
  };
  useEffect(() => {
    function resetStatus() {
      if (!copied) return false;
      setTimeout(() => {
        setCopied(false);
      }, 3000);
    }
    resetStatus();
  }, [copied]);

  return (
    <dialog id={DIALOG_ID} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Create new invite
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                {invite && (
                  <input
                    type=""url""
                    defaultValue={`${window.location.origin}/accept-invite/${invite.code}`}
                    disabled={true}
                    className=""rounded-lg px-4 py-2 text-gray-800 bg-gray-100 dark:text-slate-200 dark:bg-stone-800""
                  />
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creation you will be able to copy the invite and send it
                  to a new user where they can create an account as a default
                  user.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              {!invite ? (
                <>
                  <button
                    onClick={hideModal}
                    type=""button""
                    className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
                  >
                    Cancel
                  </button>
                  <button
                    type=""submit""
                    className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
                  >
                    Create Invite
                  </button>
                </>
              ) : (
                <button
                  onClick={copyInviteLink}
                  type=""button""
                  disabled={copied}
                  className=""w-full disabled:bg-green-200 disabled:text-green-600 text-gray-800 bg-gray-100 px-4 py-2 rounded-lg dark:text-slate-200 dark:bg-stone-900""
                >
                  {copied ? ""Copied Link"" : ""Copy Invite Link""}
                </button>
              )}
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR, VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = `VAR-VAR-VAR`; VAR VAR() { VAR.VAR(VAR)?.VAR(); } VAR VAR VAR = VAR; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR { VAR: VAR, VAR } = VAR VAR.VAR(); VAR (!!VAR) VAR(VAR); VAR(VAR); }; VAR VAR = () => { VAR (!VAR) VAR VAR; VAR.VAR.VAR.VAR( `${VAR.VAR.VAR}/VAR-VAR/${VAR.VAR}` ); VAR(VAR); }; VAR(() => { VAR VAR() { VAR (!VAR) VAR VAR; VAR(() => { VAR(VAR); }, 3000); } VAR(); }, [VAR]); VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} {VAR && ( <VAR VAR=""VAR"" VAR={`${VAR.VAR.VAR}/VAR-VAR/${VAR.VAR}`} VAR={VAR} VAR=""VAR-VAR VAR-4 VAR-2 VAR-VAR-800 VAR-VAR-100 VAR:VAR-VAR-200 VAR:VAR-VAR-800"" /> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> {!VAR ? ( <> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </> ) : ( <VAR VAR={VAR} VAR=""VAR"" VAR={VAR} VAR=""VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-600 VAR-VAR-800 VAR-VAR-100 VAR-4 VAR-2 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900"" > {VAR ? ""VAR VAR"" : ""VAR VAR VAR""} </VAR> )} </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Invitations/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import { Mail } from ""react-feather"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import InviteRow from ""./InviteRow"";
import NewInviteModal, { NewInviteModalId } from ""./NewInviteModal"";

export default function AdminInvites() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                Invitations
              </p>
              <button
                onClick={() =>
                  document?.getElementById(NewInviteModalId)?.showModal()
                }
                className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
              >
                <Mail className=""h-4 w-4"" /> Create Invite Link
              </button>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              Create invitation links for people in your organization to accept
              and sign up with. Invitations can only be used by a single user.
            </p>
          </div>
          <InvitationsContainer />
        </div>
        <NewInviteModal />
      </div>
    </div>
  );
}

function InvitationsContainer() {
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [invites, setInvites] = useState([]);
  useEffect(() => {
    async function fetchInvites() {
      const _invites = await Admin.invites();
      setInvites(_invites);
      setLoading(false);
    }
    fetchInvites();
  }, []);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <table className=""md:w-3/4 w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
      <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
        <tr>
          <th scope=""col"" className=""px-6 py-3"">
            Status
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tl-lg"">
            Accepted By
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created By
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {invites.map((invite) => (
          <InviteRow key={invite.id} invite={invite} />
        ))}
      </tbody>
    </table>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR </VAR> <VAR VAR={() => VAR?.VAR(VAR)?.VAR() } VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > <VAR VAR=""VAR-4 VAR-4"" /> VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR /> </VAR> <VAR /> </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <VAR VAR=""VAR:VAR-3/4 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} /> ))} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Invitations/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import { Mail } from ""react-feather"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import InviteRow from ""./InviteRow"";
import NewInviteModal, { NewInviteModalId } from ""./NewInviteModal"";

export default function AdminInvites() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                Invitations
              </p>
              <button
                onClick={() =>
                  document?.getElementById(NewInviteModalId)?.showModal()
                }
                className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
              >
                <Mail className=""h-4 w-4"" /> Create Invite Link
              </button>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              Create invitation links for people in your organization to accept
              and sign up with. Invitations can only be used by a single user.
            </p>
          </div>
          <InvitationsContainer />
        </div>
        <NewInviteModal />
      </div>
    </div>
  );
}

function InvitationsContainer() {
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [invites, setInvites] = useState([]);
  useEffect(() => {
    async function fetchInvites() {
      const _invites = await Admin.invites();
      setInvites(_invites);
      setLoading(false);
    }
    fetchInvites();
  }, []);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <table className=""md:w-3/4 w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
      <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
        <tr>
          <th scope=""col"" className=""px-6 py-3"">
            Status
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tl-lg"">
            Accepted By
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created By
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {invites.map((invite) => (
          <InviteRow key={invite.id} invite={invite} />
        ))}
      </tbody>
    </table>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR </VAR> <VAR VAR={() => VAR?.VAR(VAR)?.VAR() } VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > <VAR VAR=""VAR-4 VAR-4"" /> VAR VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR /> </VAR> <VAR /> </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <VAR VAR=""VAR:VAR-3/4 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} /> ))} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/System/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import Admin from ""../../../models/admin"";
import showToast from ""../../../utils/toast"";

export default function AdminSystem() {
  const [saving, setSaving] = useState(false);
  const [hasChanges, setHasChanges] = useState(false);
  const [canDelete, setCanDelete] = useState(false);
  const [messageLimit, setMessageLimit] = useState({
    enabled: false,
    limit: 10,
  });
  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    await Admin.updateSystemPreferences({
      users_can_delete_workspaces: canDelete,
      limit_user_messages: messageLimit.enabled,
      message_limit: messageLimit.limit,
    });
    setSaving(false);
    setHasChanges(false);
    showToast(""System preferences updated successfully."", ""success"");
  };

  useEffect(() => {
    async function fetchSettings() {
      const { settings } = await Admin.systemPreferences();
      if (!settings) return;
      setCanDelete(settings?.users_can_delete_workspaces);
      setMessageLimit({
        enabled: settings.limit_user_messages,
        limit: settings.message_limit,
      });
    }
    fetchSettings();
  }, []);

  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <form
          onSubmit={handleSubmit}
          onChange={() => setHasChanges(true)}
          className=""flex w-full""
        >
          <div className=""flex flex-col w-full px-1 md:px-8"">
            <div className=""w-full flex flex-col gap-y-1"">
              <div className=""items-center flex gap-x-4"">
                <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                  System Preferences
                </p>
                {hasChanges && (
                  <button
                    type=""submit""
                    disabled={saving}
                    className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
                  >
                    {saving ? ""Saving..."" : ""Save changes""}
                  </button>
                )}
              </div>
              <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
                These are the overall settings and configurations of your
                instance.
              </p>
            </div>

            <div className=""my-4"">
              <div className=""flex flex-col gap-y-2 mb-2.5"">
                <label className=""leading-tight font-medium text-black dark:text-white"">
                  Users can delete workspaces
                </label>
                <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                  allow non-admin users to delete workspaces that they are a
                  part of. This would delete the workspace for everyone.
                </p>
              </div>
              <label className=""relative inline-flex cursor-pointer items-center"">
                <input
                  type=""checkbox""
                  name=""users_can_delete_workspaces""
                  checked={canDelete}
                  onChange={(e) => setCanDelete(e.target.checked)}
                  className=""peer sr-only""
                />
                <div className=""peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800""></div>
                <span className=""ml-3 text-sm font-medium text-gray-900 dark:text-gray-300""></span>
              </label>
            </div>

            <div className=""my-4"">
              <div className=""flex flex-col gap-y-2 mb-2.5"">
                <label className=""leading-tight font-medium text-black dark:text-white"">
                  Limit messages per user per day
                </label>
                <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                  Restrict non-admin users to a number of successful queries or
                  chats within a 24 hour window. Enable this to prevent users
                  from running up OpenAI costs.
                </p>
              </div>
              <label className=""relative inline-flex cursor-pointer items-center"">
                <input
                  type=""checkbox""
                  name=""limit_user_messages""
                  value=""yes""
                  checked={messageLimit.enabled}
                  onChange={(e) => {
                    setMessageLimit({
                      ...messageLimit,
                      enabled: e.target.checked,
                    });
                  }}
                  className=""peer sr-only""
                />
                <div className=""peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800""></div>
                <span className=""ml-3 text-sm font-medium text-gray-900 dark:text-gray-300""></span>
              </label>
            </div>
            {messageLimit.enabled && (
              <div className=""mb-4"">
                <label className="" block flex items-center gap-x-1 font-medium text-black dark:text-white"">
                  Message limit per day
                </label>
                <div className=""relative"">
                  <input
                    type=""number""
                    name=""message_limit""
                    onScroll={(e) => e.target.blur()}
                    onChange={(e) => {
                      setMessageLimit({
                        enabled: true,
                        limit: Number(e?.target?.value || 0),
                      });
                    }}
                    value={messageLimit.limit}
                    min={1}
                    max={300}
                    className=""w-1/3 my-2 rounded-lg border border-stroke bg-transparent py-4 pl-6 pr-10 text-gray-800 dark:text-slate-200 outline-none focus:border-primary focus-visible:shadow-none dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary""
                  />
                </div>
              </div>
            )}
          </div>
        </form>
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR({ VAR: VAR, VAR: 10, }); VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR VAR.VAR({ VAR: VAR, VAR: VAR.VAR, VAR: VAR.VAR, }); VAR(VAR); VAR(VAR); VAR(""VAR VAR VAR VAR."", ""VAR""); }; VAR(() => { VAR VAR VAR() { VAR { VAR } = VAR VAR.VAR(); VAR (!VAR) VAR; VAR(VAR?.VAR); VAR({ VAR: VAR.VAR, VAR: VAR.VAR, }); } VAR(); }, []); VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR={VAR} VAR={() => VAR(VAR)} VAR=""VAR VAR-VAR"" > <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> {VAR && ( <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> )} </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-4""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2 VAR-2.5""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR"" VAR=""VAR"" VAR={VAR} VAR={(VAR) => VAR(VAR.VAR.VAR)} VAR=""VAR VAR-VAR"" /> <VAR VAR=""VAR VAR-6 VAR-11 VAR-VAR VAR-VAR-200 VAR:VAR VAR:VAR-[2px] VAR:VAR-[2px] VAR:VAR-5 VAR:VAR-5 VAR:VAR-VAR VAR:VAR VAR:VAR-VAR-300 VAR:VAR-VAR VAR:VAR-VAR VAR:VAR-[''] VAR-VAR:VAR-VAR-600 VAR-VAR:VAR:VAR-VAR-VAR VAR-VAR:VAR:VAR-VAR VAR-VAR:VAR-VAR VAR-VAR:VAR-4 VAR-VAR:VAR-VAR-300 VAR:VAR-VAR-600 VAR:VAR-VAR-700 VAR:VAR-VAR:VAR-VAR-800""></VAR> <VAR VAR=""VAR-3 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR-300""></VAR> </VAR> </VAR> <VAR VAR=""VAR-4""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2 VAR-2.5""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR 24 VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR"" VAR={VAR.VAR} VAR={(VAR) => { VAR({ ...VAR, VAR: VAR.VAR.VAR, }); }} VAR=""VAR VAR-VAR"" /> <VAR VAR=""VAR VAR-6 VAR-11 VAR-VAR VAR-VAR-200 VAR:VAR VAR:VAR-[2px] VAR:VAR-[2px] VAR:VAR-5 VAR:VAR-5 VAR:VAR-VAR VAR:VAR VAR:VAR-VAR-300 VAR:VAR-VAR VAR:VAR-VAR VAR:VAR-[''] VAR-VAR:VAR-VAR-600 VAR-VAR:VAR:VAR-VAR-VAR VAR-VAR:VAR:VAR-VAR VAR-VAR:VAR-VAR VAR-VAR:VAR-4 VAR-VAR:VAR-VAR-300 VAR:VAR-VAR-600 VAR:VAR-VAR-700 VAR:VAR-VAR:VAR-VAR-800""></VAR> <VAR VAR=""VAR-3 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR-300""></VAR> </VAR> </VAR> {VAR.VAR && ( <VAR VAR=""VAR-4""> <VAR VAR="" VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR""> <VAR VAR=""VAR"" VAR=""VAR"" VAR={(VAR) => VAR.VAR.VAR()} VAR={(VAR) => { VAR({ VAR: VAR, VAR: VAR(VAR?.VAR?.VAR || 0), }); }} VAR={VAR.VAR} VAR={1} VAR={300} VAR=""VAR-1/3 VAR-2 VAR-VAR VAR VAR-VAR VAR-VAR VAR-4 VAR-6 VAR-10 VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR:VAR-VAR VAR:VAR-VAR-VAR VAR:VAR-VAR-VAR VAR:VAR:VAR-VAR"" /> </VAR> </VAR> )} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/System/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import Admin from ""../../../models/admin"";
import showToast from ""../../../utils/toast"";

export default function AdminSystem() {
  const [saving, setSaving] = useState(false);
  const [hasChanges, setHasChanges] = useState(false);
  const [canDelete, setCanDelete] = useState(false);
  const [messageLimit, setMessageLimit] = useState({
    enabled: false,
    limit: 10,
  });
  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    await Admin.updateSystemPreferences({
      users_can_delete_workspaces: canDelete,
      limit_user_messages: messageLimit.enabled,
      message_limit: messageLimit.limit,
    });
    setSaving(false);
    setHasChanges(false);
    showToast(""System preferences updated successfully."", ""success"");
  };

  useEffect(() => {
    async function fetchSettings() {
      const { settings } = await Admin.systemPreferences();
      if (!settings) return;
      setCanDelete(settings?.users_can_delete_workspaces);
      setMessageLimit({
        enabled: settings.limit_user_messages,
        limit: settings.message_limit,
      });
    }
    fetchSettings();
  }, []);

  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <form
          onSubmit={handleSubmit}
          onChange={() => setHasChanges(true)}
          className=""flex w-full""
        >
          <div className=""flex flex-col w-full px-1 md:px-8"">
            <div className=""w-full flex flex-col gap-y-1"">
              <div className=""items-center flex gap-x-4"">
                <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                  System Preferences
                </p>
                {hasChanges && (
                  <button
                    type=""submit""
                    disabled={saving}
                    className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
                  >
                    {saving ? ""Saving..."" : ""Save changes""}
                  </button>
                )}
              </div>
              <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
                These are the overall settings and configurations of your
                instance.
              </p>
            </div>

            <div className=""my-4"">
              <div className=""flex flex-col gap-y-2 mb-2.5"">
                <label className=""leading-tight font-medium text-black dark:text-white"">
                  Users can delete workspaces
                </label>
                <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                  allow non-admin users to delete workspaces that they are a
                  part of. This would delete the workspace for everyone.
                </p>
              </div>
              <label className=""relative inline-flex cursor-pointer items-center"">
                <input
                  type=""checkbox""
                  name=""users_can_delete_workspaces""
                  checked={canDelete}
                  onChange={(e) => setCanDelete(e.target.checked)}
                  className=""peer sr-only""
                />
                <div className=""peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800""></div>
                <span className=""ml-3 text-sm font-medium text-gray-900 dark:text-gray-300""></span>
              </label>
            </div>

            <div className=""my-4"">
              <div className=""flex flex-col gap-y-2 mb-2.5"">
                <label className=""leading-tight font-medium text-black dark:text-white"">
                  Limit messages per user per day
                </label>
                <p className=""leading-tight text-sm text-gray-500 dark:text-slate-400"">
                  Restrict non-admin users to a number of successful queries or
                  chats within a 24 hour window. Enable this to prevent users
                  from running up OpenAI costs.
                </p>
              </div>
              <label className=""relative inline-flex cursor-pointer items-center"">
                <input
                  type=""checkbox""
                  name=""limit_user_messages""
                  value=""yes""
                  checked={messageLimit.enabled}
                  onChange={(e) => {
                    setMessageLimit({
                      ...messageLimit,
                      enabled: e.target.checked,
                    });
                  }}
                  className=""peer sr-only""
                />
                <div className=""peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800""></div>
                <span className=""ml-3 text-sm font-medium text-gray-900 dark:text-gray-300""></span>
              </label>
            </div>
            {messageLimit.enabled && (
              <div className=""mb-4"">
                <label className="" block flex items-center gap-x-1 font-medium text-black dark:text-white"">
                  Message limit per day
                </label>
                <div className=""relative"">
                  <input
                    type=""number""
                    name=""message_limit""
                    onScroll={(e) => e.target.blur()}
                    onChange={(e) => {
                      setMessageLimit({
                        enabled: true,
                        limit: Number(e?.target?.value || 0),
                      });
                    }}
                    value={messageLimit.limit}
                    min={1}
                    max={300}
                    className=""w-1/3 my-2 rounded-lg border border-stroke bg-transparent py-4 pl-6 pr-10 text-gray-800 dark:text-slate-200 outline-none focus:border-primary focus-visible:shadow-none dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary""
                  />
                </div>
              </div>
            )}
          </div>
        </form>
      </div>
    </div>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR({ VAR: VAR, VAR: 10, }); VAR VAR = VAR (VAR) => { VAR.VAR(); VAR(VAR); VAR VAR.VAR({ VAR: VAR, VAR: VAR.VAR, VAR: VAR.VAR, }); VAR(VAR); VAR(VAR); VAR(""VAR VAR VAR VAR."", ""VAR""); }; VAR(() => { VAR VAR VAR() { VAR { VAR } = VAR VAR.VAR(); VAR (!VAR) VAR; VAR(VAR?.VAR); VAR({ VAR: VAR.VAR, VAR: VAR.VAR, }); } VAR(); }, []); VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR={VAR} VAR={() => VAR(VAR)} VAR=""VAR VAR-VAR"" > <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> {VAR && ( <VAR VAR=""VAR"" VAR={VAR} VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > {VAR ? ""VAR..."" : ""VAR VAR""} </VAR> )} </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR-4""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2 VAR-2.5""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR"" VAR=""VAR"" VAR={VAR} VAR={(VAR) => VAR(VAR.VAR.VAR)} VAR=""VAR VAR-VAR"" /> <VAR VAR=""VAR VAR-6 VAR-11 VAR-VAR VAR-VAR-200 VAR:VAR VAR:VAR-[2px] VAR:VAR-[2px] VAR:VAR-5 VAR:VAR-5 VAR:VAR-VAR VAR:VAR VAR:VAR-VAR-300 VAR:VAR-VAR VAR:VAR-VAR VAR:VAR-[''] VAR-VAR:VAR-VAR-600 VAR-VAR:VAR:VAR-VAR-VAR VAR-VAR:VAR:VAR-VAR VAR-VAR:VAR-VAR VAR-VAR:VAR-4 VAR-VAR:VAR-VAR-300 VAR:VAR-VAR-600 VAR:VAR-VAR-700 VAR:VAR-VAR:VAR-VAR-800""></VAR> <VAR VAR=""VAR-3 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR-300""></VAR> </VAR> </VAR> <VAR VAR=""VAR-4""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2 VAR-2.5""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400""> VAR VAR-VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR 24 VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR"" VAR={VAR.VAR} VAR={(VAR) => { VAR({ ...VAR, VAR: VAR.VAR.VAR, }); }} VAR=""VAR VAR-VAR"" /> <VAR VAR=""VAR VAR-6 VAR-11 VAR-VAR VAR-VAR-200 VAR:VAR VAR:VAR-[2px] VAR:VAR-[2px] VAR:VAR-5 VAR:VAR-5 VAR:VAR-VAR VAR:VAR VAR:VAR-VAR-300 VAR:VAR-VAR VAR:VAR-VAR VAR:VAR-[''] VAR-VAR:VAR-VAR-600 VAR-VAR:VAR:VAR-VAR-VAR VAR-VAR:VAR:VAR-VAR VAR-VAR:VAR-VAR VAR-VAR:VAR-4 VAR-VAR:VAR-VAR-300 VAR:VAR-VAR-600 VAR:VAR-VAR-700 VAR:VAR-VAR:VAR-VAR-800""></VAR> <VAR VAR=""VAR-3 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR-300""></VAR> </VAR> </VAR> {VAR.VAR && ( <VAR VAR=""VAR-4""> <VAR VAR="" VAR VAR VAR-VAR VAR-VAR-1 VAR-VAR VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR=""VAR""> <VAR VAR=""VAR"" VAR=""VAR"" VAR={(VAR) => VAR.VAR.VAR()} VAR={(VAR) => { VAR({ VAR: VAR, VAR: VAR(VAR?.VAR?.VAR || 0), }); }} VAR={VAR.VAR} VAR={1} VAR={300} VAR=""VAR-1/3 VAR-2 VAR-VAR VAR VAR-VAR VAR-VAR VAR-4 VAR-6 VAR-10 VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR VAR-VAR:VAR-VAR VAR:VAR-VAR-VAR VAR:VAR-VAR-VAR VAR:VAR:VAR-VAR"" /> </VAR> </VAR> )} </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Users/NewUserModal/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../models/admin"";
const DIALOG_ID = `new-user-modal`;

function hideModal() {
  document.getElementById(DIALOG_ID)?.close();
}

export const NewUserModalId = DIALOG_ID;
export default function NewUserModal() {
  const [error, setError] = useState(null);
  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { user, error } = await Admin.newUser(data);
    if (!!user) window.location.reload();
    setError(error);
  };

  return (
    <dialog id={DIALOG_ID} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Add user to instance
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""username""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Username
                  </label>
                  <input
                    name=""username""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""User's username""
                    minLength={2}
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""password""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Password
                  </label>
                  <input
                    name=""password""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""User's initial password""
                    required={true}
                    minLength={8}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""role""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Role
                  </label>
                  <select
                    name=""role""
                    required={true}
                    defaultValue={""default""}
                    className=""rounded-lg bg-gray-50 px-4 py-2 text-sm text-gray-800 outline-none dark:text-slate-200 dark:bg-stone-600""
                  >
                    <option value=""default"">Member</option>
                    <option value=""admin"">Administrator</option>
                  </select>
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creating a user they will need to login with their
                  initial login to get access.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Add user
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = `VAR-VAR-VAR`; VAR VAR() { VAR.VAR(VAR)?.VAR(); } VAR VAR VAR = VAR; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!!VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR'VAR VAR"" VAR={2} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR'VAR VAR VAR"" VAR={VAR} VAR={8} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR={VAR} VAR={""VAR""} VAR=""VAR-VAR VAR-VAR-50 VAR-4 VAR-2 VAR-VAR VAR-VAR-800 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-600"" > <VAR VAR=""VAR"">VAR</VAR> <VAR VAR=""VAR"">VAR</VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Users/NewUserModal/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../models/admin"";
const DIALOG_ID = `new-user-modal`;

function hideModal() {
  document.getElementById(DIALOG_ID)?.close();
}

export const NewUserModalId = DIALOG_ID;
export default function NewUserModal() {
  const [error, setError] = useState(null);
  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { user, error } = await Admin.newUser(data);
    if (!!user) window.location.reload();
    setError(error);
  };

  return (
    <dialog id={DIALOG_ID} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Add user to instance
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""username""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Username
                  </label>
                  <input
                    name=""username""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""User's username""
                    minLength={2}
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""password""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Password
                  </label>
                  <input
                    name=""password""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""User's initial password""
                    required={true}
                    minLength={8}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""role""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Role
                  </label>
                  <select
                    name=""role""
                    required={true}
                    defaultValue={""default""}
                    className=""rounded-lg bg-gray-50 px-4 py-2 text-sm text-gray-800 outline-none dark:text-slate-200 dark:bg-stone-600""
                  >
                    <option value=""default"">Member</option>
                    <option value=""admin"">Administrator</option>
                  </select>
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creating a user they will need to login with their
                  initial login to get access.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Add user
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = `VAR-VAR-VAR`; VAR VAR() { VAR.VAR(VAR)?.VAR(); } VAR VAR VAR = VAR; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR } = VAR VAR.VAR(VAR); VAR (!!VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR'VAR VAR"" VAR={2} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR'VAR VAR VAR"" VAR={VAR} VAR={8} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR={VAR} VAR={""VAR""} VAR=""VAR-VAR VAR-VAR-50 VAR-4 VAR-2 VAR-VAR VAR-VAR-800 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-600"" > <VAR VAR=""VAR"">VAR</VAR> <VAR VAR=""VAR"">VAR</VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Users/UserRow/EditUserModal/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../../models/admin"";

export const EditUserModalId = (user) => `edit-user-${user.id}-modal`;
export default function EditUserModal({ user }) {
  const [error, setError] = useState(null);
  const hideModal = () => {
    document.getElementById(EditUserModalId(user)).close();
  };
  const handleUpdate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) {
      if (!value || value === null) continue;
      data[key] = value;
    }
    const { success, error } = await Admin.updateUser(user.id, data);
    if (success) window.location.reload();
    setError(error);
  };

  return (
    <dialog id={EditUserModalId(user)} className=""bg-transparent outline-none"">
      <div className=""relative w-[75vw] max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Edit {user.username}
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleUpdate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""username""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Username
                  </label>
                  <input
                    name=""username""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""User's username""
                    minLength={2}
                    defaultValue={user.username}
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""password""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    New Password
                  </label>
                  <input
                    name=""password""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder={`${user.username}'s new password`}
                    minLength={8}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""role""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Role
                  </label>
                  <select
                    name=""role""
                    required={true}
                    defaultValue={user.role}
                    className=""rounded-lg bg-gray-50 px-4 py-2 text-sm text-gray-800 outline-none dark:text-slate-200 dark:bg-stone-600""
                  >
                    <option value=""default"">Member</option>
                    <option value=""admin"">Administrator</option>
                  </select>
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Update user
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../../VAR/VAR""; VAR VAR VAR = (VAR) => `VAR-VAR-${VAR.VAR}-VAR`; VAR VAR VAR VAR({ VAR }) { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR.VAR(VAR(VAR)).VAR(); }; VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) { VAR (!VAR || VAR === VAR) VAR; VAR[VAR] = VAR; } VAR { VAR, VAR } = VAR VAR.VAR(VAR.VAR, VAR); VAR (VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR={VAR(VAR)} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-[75vw] VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR {VAR.VAR} </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR'VAR VAR"" VAR={2} VAR={VAR.VAR} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={`${VAR.VAR}'VAR VAR VAR`} VAR={8} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR={VAR} VAR={VAR.VAR} VAR=""VAR-VAR VAR-VAR-50 VAR-4 VAR-2 VAR-VAR VAR-VAR-800 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-600"" > <VAR VAR=""VAR"">VAR</VAR> <VAR VAR=""VAR"">VAR</VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Users/UserRow/EditUserModal/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../../models/admin"";

export const EditUserModalId = (user) => `edit-user-${user.id}-modal`;
export default function EditUserModal({ user }) {
  const [error, setError] = useState(null);
  const hideModal = () => {
    document.getElementById(EditUserModalId(user)).close();
  };
  const handleUpdate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) {
      if (!value || value === null) continue;
      data[key] = value;
    }
    const { success, error } = await Admin.updateUser(user.id, data);
    if (success) window.location.reload();
    setError(error);
  };

  return (
    <dialog id={EditUserModalId(user)} className=""bg-transparent outline-none"">
      <div className=""relative w-[75vw] max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Edit {user.username}
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleUpdate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""username""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Username
                  </label>
                  <input
                    name=""username""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""User's username""
                    minLength={2}
                    defaultValue={user.username}
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""password""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    New Password
                  </label>
                  <input
                    name=""password""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder={`${user.username}'s new password`}
                    minLength={8}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""role""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Role
                  </label>
                  <select
                    name=""role""
                    required={true}
                    defaultValue={user.role}
                    className=""rounded-lg bg-gray-50 px-4 py-2 text-sm text-gray-800 outline-none dark:text-slate-200 dark:bg-stone-600""
                  >
                    <option value=""default"">Member</option>
                    <option value=""admin"">Administrator</option>
                  </select>
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Update user
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../../VAR/VAR""; VAR VAR VAR = (VAR) => `VAR-VAR-${VAR.VAR}-VAR`; VAR VAR VAR VAR({ VAR }) { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR.VAR(VAR(VAR)).VAR(); }; VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) { VAR (!VAR || VAR === VAR) VAR; VAR[VAR] = VAR; } VAR { VAR, VAR } = VAR VAR.VAR(VAR.VAR, VAR); VAR (VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR={VAR(VAR)} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-[75vw] VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR {VAR.VAR} </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR'VAR VAR"" VAR={2} VAR={VAR.VAR} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR={`${VAR.VAR}'VAR VAR VAR`} VAR={8} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR={VAR} VAR={VAR.VAR} VAR=""VAR-VAR VAR-VAR-50 VAR-4 VAR-2 VAR-VAR VAR-VAR-800 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-600"" > <VAR VAR=""VAR"">VAR</VAR> <VAR VAR=""VAR"">VAR</VAR> </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Users/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import { UserPlus } from ""react-feather"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import UserRow from ""./UserRow"";
import useUser from ""../../../hooks/useUser"";
import NewUserModal, { NewUserModalId } from ""./NewUserModal"";

export default function AdminUsers() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                Instance users
              </p>
              <button
                onClick={() =>
                  document?.getElementById(NewUserModalId)?.showModal()
                }
                className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
              >
                <UserPlus className=""h-4 w-4"" /> Add user
              </button>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              These are all the accounts which have an account on this instance.
              Removing an account will instantly remove their access to this
              instance.
            </p>
          </div>
          <UsersContainer />
        </div>
        <NewUserModal />
      </div>
    </div>
  );
}

function UsersContainer() {
  const { user: currUser } = useUser();
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [users, setUsers] = useState([]);
  useEffect(() => {
    async function fetchUsers() {
      const _users = await Admin.users();
      setUsers(_users);
      setLoading(false);
    }
    fetchUsers();
  }, []);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <table className=""md:w-3/4 w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
      <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
        <tr>
          <th scope=""col"" className=""px-6 py-3 rounded-tl-lg"">
            Username
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Role
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created On
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {users.map((user) => (
          <UserRow key={user.id} currUser={currUser} user={user} />
        ))}
      </tbody>
    </table>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR={() => VAR?.VAR(VAR)?.VAR() } VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > <VAR VAR=""VAR-4 VAR-4"" /> VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR /> </VAR> <VAR /> </VAR> </VAR> ); } VAR VAR() { VAR { VAR: VAR } = VAR(); VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <VAR VAR=""VAR:VAR-3/4 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} VAR={VAR} /> ))} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Users/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import { UserPlus } from ""react-feather"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import UserRow from ""./UserRow"";
import useUser from ""../../../hooks/useUser"";
import NewUserModal, { NewUserModalId } from ""./NewUserModal"";

export default function AdminUsers() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                Instance users
              </p>
              <button
                onClick={() =>
                  document?.getElementById(NewUserModalId)?.showModal()
                }
                className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
              >
                <UserPlus className=""h-4 w-4"" /> Add user
              </button>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              These are all the accounts which have an account on this instance.
              Removing an account will instantly remove their access to this
              instance.
            </p>
          </div>
          <UsersContainer />
        </div>
        <NewUserModal />
      </div>
    </div>
  );
}

function UsersContainer() {
  const { user: currUser } = useUser();
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [users, setUsers] = useState([]);
  useEffect(() => {
    async function fetchUsers() {
      const _users = await Admin.users();
      setUsers(_users);
      setLoading(false);
    }
    fetchUsers();
  }, []);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <table className=""md:w-3/4 w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
      <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
        <tr>
          <th scope=""col"" className=""px-6 py-3 rounded-tl-lg"">
            Username
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Role
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created On
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {users.map((user) => (
          <UserRow key={user.id} currUser={currUser} user={user} />
        ))}
      </tbody>
    </table>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR={() => VAR?.VAR(VAR)?.VAR() } VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > <VAR VAR=""VAR-4 VAR-4"" /> VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR /> </VAR> <VAR /> </VAR> </VAR> ); } VAR VAR() { VAR { VAR: VAR } = VAR(); VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <VAR VAR=""VAR:VAR-3/4 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} VAR={VAR} /> ))} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Workspaces/NewWorkspaceModal/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../models/admin"";
const DIALOG_ID = `new-workspace-modal`;

function hideModal() {
  document.getElementById(DIALOG_ID)?.close();
}

export const NewWorkspaceModalId = DIALOG_ID;
export default function NewWorkspaceModal() {
  const [error, setError] = useState(null);
  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const form = new FormData(e.target);
    const { workspace, error } = await Admin.newWorkspace(form.get(""name""));
    if (!!workspace) window.location.reload();
    setError(error);
  };

  return (
    <dialog id={DIALOG_ID} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Add workspace to Instance
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""name""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Workspace name
                  </label>
                  <input
                    name=""name""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""My workspace""
                    minLength={4}
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creating this workspace only admins will be able to see
                  it. You can add users after it has been created.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Create workspace
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = `VAR-VAR-VAR`; VAR VAR() { VAR.VAR(VAR)?.VAR(); } VAR VAR VAR = VAR; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = VAR VAR(VAR.VAR); VAR { VAR, VAR } = VAR VAR.VAR(VAR.VAR(""VAR"")); VAR (!!VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={4} VAR={VAR} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Workspaces/NewWorkspaceModal/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../models/admin"";
const DIALOG_ID = `new-workspace-modal`;

function hideModal() {
  document.getElementById(DIALOG_ID)?.close();
}

export const NewWorkspaceModalId = DIALOG_ID;
export default function NewWorkspaceModal() {
  const [error, setError] = useState(null);
  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const form = new FormData(e.target);
    const { workspace, error } = await Admin.newWorkspace(form.get(""name""));
    if (!!workspace) window.location.reload();
    setError(error);
  };

  return (
    <dialog id={DIALOG_ID} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Add workspace to Instance
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""name""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Workspace name
                  </label>
                  <input
                    name=""name""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""My workspace""
                    minLength={4}
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creating this workspace only admins will be able to see
                  it. You can add users after it has been created.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Create workspace
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../VAR/VAR""; VAR VAR = `VAR-VAR-VAR`; VAR VAR() { VAR.VAR(VAR)?.VAR(); } VAR VAR VAR = VAR; VAR VAR VAR VAR() { VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = VAR VAR(VAR.VAR); VAR { VAR, VAR } = VAR VAR.VAR(VAR.VAR(""VAR"")); VAR (!!VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={4} VAR={VAR} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Workspaces/WorkspaceRow/EditWorkspaceUsersModal/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../../models/admin"";
import { titleCase } from ""text-case"";

export const EditWorkspaceUsersModalId = (workspace) =>
  `edit-workspace-${workspace.id}-modal`;
export default function EditWorkspaceUsersModal({ workspace, users }) {
  const [error, setError] = useState(null);
  const hideModal = () => {
    document.getElementById(EditWorkspaceUsersModalId(workspace)).close();
  };
  const handleUpdate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {
      userIds: [],
    };
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) {
      if (key.includes(""user-"") && value === ""yes"") {
        const [_, id] = key.split(`-`);
        data.userIds.push(+id);
      }
    }
    const { success, error } = await Admin.updateUsersInWorkspace(
      workspace.id,
      data.userIds
    );
    if (success) window.location.reload();
    setError(error);
  };

  return (
    <dialog
      id={EditWorkspaceUsersModalId(workspace)}
      className=""bg-transparent outline-none""
    >
      <div className=""relative w-[75vw] max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Edit {workspace.name}
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleUpdate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                {users
                  .filter((user) => user.role !== ""admin"")
                  .map((user) => {
                    return (
                      <div
                        key={`workspace-${workspace.id}-user-${user.id}`}
                        data-workspace={workspace.id}
                        className=""flex items-center pl-4 border border-gray-200 rounded dark:border-gray-400 group hover:bg-stone-600 cursor-pointer""
                        onClick={() => {
                          document
                            .getElementById(
                              `workspace-${workspace.id}-user-${user.id}`
                            )
                            ?.click();
                        }}
                      >
                        <input
                          id={`workspace-${workspace.id}-user-${user.id}`}
                          defaultChecked={workspace.userIds.includes(user.id)}
                          type=""checkbox""
                          value=""yes""
                          name={`user-${user.id}`}
                          className=""w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 pointer-events-none""
                        />
                        <label
                          htmlFor={`user-${user.id}`}
                          className=""pointer-events-none w-full py-4 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300""
                        >
                          {titleCase(user.username)}
                        </label>
                      </div>
                    );
                  })}
                <div className=""flex items-center gap-x-4"">
                  <button
                    type=""button""
                    className=""w-full p-4 flex dark:text-slate-200 text-gray-800 items-center pl-4 border border-gray-200 rounded dark:border-gray-400 group hover:bg-stone-600 cursor-pointer""
                    onClick={() => {
                      document
                        .getElementById(`workspace-${workspace.id}-select-all`)
                        ?.click();
                      Array.from(
                        document.querySelectorAll(
                          `[data-workspace='${workspace.id}']`
                        )
                      ).forEach((el) => {
                        if (!el.firstChild.checked) el.firstChild.click();
                      });
                    }}
                  >
                    Select All
                  </button>
                  <button
                    type=""button""
                    className=""w-full p-4 flex dark:text-slate-200 text-gray-800 items-center pl-4 border border-gray-200 rounded dark:border-gray-400 group hover:bg-stone-600 cursor-pointer""
                    onClick={() => {
                      document
                        .getElementById(`workspace-${workspace.id}-select-all`)
                        ?.click();
                      Array.from(
                        document.querySelectorAll(
                          `[data-workspace='${workspace.id}']`
                        )
                      ).forEach((el) => {
                        if (el.firstChild.checked) el.firstChild.click();
                      });
                    }}
                  >
                    Deselect All
                  </button>
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Update workspace
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR = (VAR) => `VAR-VAR-${VAR.VAR}-VAR`; VAR VAR VAR VAR({ VAR, VAR }) { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR.VAR(VAR(VAR)).VAR(); }; VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = { VAR: [], }; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) { VAR (VAR.VAR(""VAR-"") && VAR === ""VAR"") { VAR [VAR, VAR] = VAR.VAR(`-`); VAR.VAR.VAR(+VAR); } } VAR { VAR, VAR } = VAR VAR.VAR( VAR.VAR, VAR.VAR ); VAR (VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR={VAR(VAR)} VAR=""VAR-VAR VAR-VAR"" > <VAR VAR=""VAR VAR-[75vw] VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR {VAR.VAR} </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> {VAR .VAR((VAR) => VAR.VAR !== ""VAR"") .VAR((VAR) => { VAR ( <VAR VAR={`VAR-${VAR.VAR}-VAR-${VAR.VAR}`} VAR-VAR={VAR.VAR} VAR=""VAR VAR-VAR VAR-4 VAR VAR-VAR-200 VAR VAR:VAR-VAR-400 VAR VAR:VAR-VAR-600 VAR-VAR"" VAR={() => { VAR .VAR( `VAR-${VAR.VAR}-VAR-${VAR.VAR}` ) ?.VAR(); }} > <VAR VAR={`VAR-${VAR.VAR}-VAR-${VAR.VAR}`} VAR={VAR.VAR.VAR(VAR.VAR)} VAR=""VAR"" VAR=""VAR"" VAR={`VAR-${VAR.VAR}`} VAR=""VAR-4 VAR-4 VAR-VAR-600 VAR-VAR-100 VAR-VAR-300 VAR VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-600 VAR:VAR-VAR-VAR-800 VAR:VAR-2 VAR:VAR-VAR-700 VAR:VAR-VAR-600 VAR-VAR-VAR"" /> <VAR VAR={`VAR-${VAR.VAR}`} VAR=""VAR-VAR-VAR VAR-VAR VAR-4 VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR-300"" > {VAR(VAR.VAR)} </VAR> </VAR> ); })} <VAR VAR=""VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR"" VAR=""VAR-VAR VAR-4 VAR VAR:VAR-VAR-200 VAR-VAR-800 VAR-VAR VAR-4 VAR VAR-VAR-200 VAR VAR:VAR-VAR-400 VAR VAR:VAR-VAR-600 VAR-VAR"" VAR={() => { VAR .VAR(`VAR-${VAR.VAR}-VAR-VAR`) ?.VAR(); VAR.VAR( VAR.VAR( `[VAR-VAR='${VAR.VAR}']` ) ).VAR((VAR) => { VAR (!VAR.VAR.VAR) VAR.VAR.VAR(); }); }} > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR VAR-4 VAR VAR:VAR-VAR-200 VAR-VAR-800 VAR-VAR VAR-4 VAR VAR-VAR-200 VAR VAR:VAR-VAR-400 VAR VAR:VAR-VAR-600 VAR-VAR"" VAR={() => { VAR .VAR(`VAR-${VAR.VAR}-VAR-VAR`) ?.VAR(); VAR.VAR( VAR.VAR( `[VAR-VAR='${VAR.VAR}']` ) ).VAR((VAR) => { VAR (VAR.VAR.VAR) VAR.VAR.VAR(); }); }} > VAR VAR </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Workspaces/WorkspaceRow/EditWorkspaceUsersModal/index.jsx,"import React, { useState } from ""react"";
import { X } from ""react-feather"";
import Admin from ""../../../../../models/admin"";
import { titleCase } from ""text-case"";

export const EditWorkspaceUsersModalId = (workspace) =>
  `edit-workspace-${workspace.id}-modal`;
export default function EditWorkspaceUsersModal({ workspace, users }) {
  const [error, setError] = useState(null);
  const hideModal = () => {
    document.getElementById(EditWorkspaceUsersModalId(workspace)).close();
  };
  const handleUpdate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {
      userIds: [],
    };
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) {
      if (key.includes(""user-"") && value === ""yes"") {
        const [_, id] = key.split(`-`);
        data.userIds.push(+id);
      }
    }
    const { success, error } = await Admin.updateUsersInWorkspace(
      workspace.id,
      data.userIds
    );
    if (success) window.location.reload();
    setError(error);
  };

  return (
    <dialog
      id={EditWorkspaceUsersModalId(workspace)}
      className=""bg-transparent outline-none""
    >
      <div className=""relative w-[75vw] max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Edit {workspace.name}
            </h3>
            <button
              onClick={hideModal}
              type=""button""
              className=""text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white""
              data-modal-hide=""staticModal""
            >
              <X className=""text-gray-300 text-lg"" />
            </button>
          </div>
          <form onSubmit={handleUpdate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                {users
                  .filter((user) => user.role !== ""admin"")
                  .map((user) => {
                    return (
                      <div
                        key={`workspace-${workspace.id}-user-${user.id}`}
                        data-workspace={workspace.id}
                        className=""flex items-center pl-4 border border-gray-200 rounded dark:border-gray-400 group hover:bg-stone-600 cursor-pointer""
                        onClick={() => {
                          document
                            .getElementById(
                              `workspace-${workspace.id}-user-${user.id}`
                            )
                            ?.click();
                        }}
                      >
                        <input
                          id={`workspace-${workspace.id}-user-${user.id}`}
                          defaultChecked={workspace.userIds.includes(user.id)}
                          type=""checkbox""
                          value=""yes""
                          name={`user-${user.id}`}
                          className=""w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 pointer-events-none""
                        />
                        <label
                          htmlFor={`user-${user.id}`}
                          className=""pointer-events-none w-full py-4 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300""
                        >
                          {titleCase(user.username)}
                        </label>
                      </div>
                    );
                  })}
                <div className=""flex items-center gap-x-4"">
                  <button
                    type=""button""
                    className=""w-full p-4 flex dark:text-slate-200 text-gray-800 items-center pl-4 border border-gray-200 rounded dark:border-gray-400 group hover:bg-stone-600 cursor-pointer""
                    onClick={() => {
                      document
                        .getElementById(`workspace-${workspace.id}-select-all`)
                        ?.click();
                      Array.from(
                        document.querySelectorAll(
                          `[data-workspace='${workspace.id}']`
                        )
                      ).forEach((el) => {
                        if (!el.firstChild.checked) el.firstChild.click();
                      });
                    }}
                  >
                    Select All
                  </button>
                  <button
                    type=""button""
                    className=""w-full p-4 flex dark:text-slate-200 text-gray-800 items-center pl-4 border border-gray-200 rounded dark:border-gray-400 group hover:bg-stone-600 cursor-pointer""
                    onClick={() => {
                      document
                        .getElementById(`workspace-${workspace.id}-select-all`)
                        ?.click();
                      Array.from(
                        document.querySelectorAll(
                          `[data-workspace='${workspace.id}']`
                        )
                      ).forEach((el) => {
                        if (el.firstChild.checked) el.firstChild.click();
                      });
                    }}
                  >
                    Deselect All
                  </button>
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                onClick={hideModal}
                type=""button""
                className=""text-gray-800 hover:bg-gray-100 px-4 py-1 rounded-lg dark:text-slate-200 dark:hover:bg-stone-900""
              >
                Cancel
              </button>
              <button
                type=""submit""
                className=""text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Update workspace
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR = (VAR) => `VAR-VAR-${VAR.VAR}-VAR`; VAR VAR VAR VAR({ VAR, VAR }) { VAR [VAR, VAR] = VAR(VAR); VAR VAR = () => { VAR.VAR(VAR(VAR)).VAR(); }; VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = { VAR: [], }; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) { VAR (VAR.VAR(""VAR-"") && VAR === ""VAR"") { VAR [VAR, VAR] = VAR.VAR(`-`); VAR.VAR.VAR(+VAR); } } VAR { VAR, VAR } = VAR VAR.VAR( VAR.VAR, VAR.VAR ); VAR (VAR) VAR.VAR.VAR(); VAR(VAR); }; VAR ( <VAR VAR={VAR(VAR)} VAR=""VAR-VAR VAR-VAR"" > <VAR VAR=""VAR VAR-[75vw] VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR {VAR.VAR} </VAR> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-400 VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR-900 VAR-VAR VAR-VAR VAR-1.5 VAR-VAR VAR-VAR VAR-VAR VAR:VAR:VAR-VAR-600 VAR:VAR:VAR-VAR"" VAR-VAR-VAR=""VAR"" > <VAR VAR=""VAR-VAR-300 VAR-VAR"" /> </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> {VAR .VAR((VAR) => VAR.VAR !== ""VAR"") .VAR((VAR) => { VAR ( <VAR VAR={`VAR-${VAR.VAR}-VAR-${VAR.VAR}`} VAR-VAR={VAR.VAR} VAR=""VAR VAR-VAR VAR-4 VAR VAR-VAR-200 VAR VAR:VAR-VAR-400 VAR VAR:VAR-VAR-600 VAR-VAR"" VAR={() => { VAR .VAR( `VAR-${VAR.VAR}-VAR-${VAR.VAR}` ) ?.VAR(); }} > <VAR VAR={`VAR-${VAR.VAR}-VAR-${VAR.VAR}`} VAR={VAR.VAR.VAR(VAR.VAR)} VAR=""VAR"" VAR=""VAR"" VAR={`VAR-${VAR.VAR}`} VAR=""VAR-4 VAR-4 VAR-VAR-600 VAR-VAR-100 VAR-VAR-300 VAR VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-600 VAR:VAR-VAR-VAR-800 VAR:VAR-2 VAR:VAR-VAR-700 VAR:VAR-VAR-600 VAR-VAR-VAR"" /> <VAR VAR={`VAR-${VAR.VAR}`} VAR=""VAR-VAR-VAR VAR-VAR VAR-4 VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR-300"" > {VAR(VAR.VAR)} </VAR> </VAR> ); })} <VAR VAR=""VAR VAR-VAR VAR-VAR-4""> <VAR VAR=""VAR"" VAR=""VAR-VAR VAR-4 VAR VAR:VAR-VAR-200 VAR-VAR-800 VAR-VAR VAR-4 VAR VAR-VAR-200 VAR VAR:VAR-VAR-400 VAR VAR:VAR-VAR-600 VAR-VAR"" VAR={() => { VAR .VAR(`VAR-${VAR.VAR}-VAR-VAR`) ?.VAR(); VAR.VAR( VAR.VAR( `[VAR-VAR='${VAR.VAR}']` ) ).VAR((VAR) => { VAR (!VAR.VAR.VAR) VAR.VAR.VAR(); }); }} > VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR VAR-4 VAR VAR:VAR-VAR-200 VAR-VAR-800 VAR-VAR VAR-4 VAR VAR-VAR-200 VAR VAR:VAR-VAR-400 VAR VAR:VAR-VAR-600 VAR-VAR"" VAR={() => { VAR .VAR(`VAR-${VAR.VAR}-VAR-VAR`) ?.VAR(); VAR.VAR( VAR.VAR( `[VAR-VAR='${VAR.VAR}']` ) ).VAR((VAR) => { VAR (VAR.VAR.VAR) VAR.VAR.VAR(); }); }} > VAR VAR </VAR> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR={VAR} VAR=""VAR"" VAR=""VAR-VAR-800 VAR:VAR-VAR-100 VAR-4 VAR-1 VAR-VAR VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Workspaces/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import { BookOpen } from ""react-feather"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import WorkspaceRow from ""./WorkspaceRow"";
import NewWorkspaceModal, { NewWorkspaceModalId } from ""./NewWorkspaceModal"";

export default function AdminWorkspaces() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                Instance workspaces
              </p>
              <button
                onClick={() =>
                  document?.getElementById(NewWorkspaceModalId)?.showModal()
                }
                className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
              >
                <BookOpen className=""h-4 w-4"" /> New Workspace
              </button>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              These are all the workspaces that exist on this instance. Removing
              a workspace will delete all of it's associated chats and settings.
            </p>
          </div>
          <WorkspacesContainer />
        </div>
        <NewWorkspaceModal />
      </div>
    </div>
  );
}

function WorkspacesContainer() {
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [users, setUsers] = useState([]);
  const [workspaces, setWorkspaces] = useState([]);

  useEffect(() => {
    async function fetchData() {
      const _users = await Admin.users();
      const _workspaces = await Admin.workspaces();
      setUsers(_users);
      setWorkspaces(_workspaces);
      setLoading(false);
    }
    fetchData();
  }, []);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <table className=""md:w-3/4 w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
      <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
        <tr>
          <th scope=""col"" className=""px-6 py-3 rounded-tl-lg"">
            Name
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Link
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Users
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created On
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {workspaces.map((workspace) => (
          <WorkspaceRow
            key={workspace.id}
            workspace={workspace}
            users={users}
          />
        ))}
      </tbody>
    </table>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR={() => VAR?.VAR(VAR)?.VAR() } VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > <VAR VAR=""VAR-4 VAR-4"" /> VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR'VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR /> </VAR> <VAR /> </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <VAR VAR=""VAR:VAR-3/4 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} VAR={VAR} /> ))} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Admin/Workspaces/index.jsx,"import { useEffect, useState } from ""react"";
import Sidebar, { SidebarMobileHeader } from ""../../../components/AdminSidebar"";
import { isMobile } from ""react-device-detect"";
import * as Skeleton from ""react-loading-skeleton"";
import ""react-loading-skeleton/dist/skeleton.css"";
import { BookOpen } from ""react-feather"";
import usePrefersDarkMode from ""../../../hooks/usePrefersDarkMode"";
import Admin from ""../../../models/admin"";
import WorkspaceRow from ""./WorkspaceRow"";
import NewWorkspaceModal, { NewWorkspaceModalId } from ""./NewWorkspaceModal"";

export default function AdminWorkspaces() {
  return (
    <div className=""w-screen h-screen overflow-hidden bg-orange-100 dark:bg-stone-700 flex"">
      {!isMobile && <Sidebar />}
      <div
        style={{ height: isMobile ? ""100%"" : ""calc(100% - 32px)"" }}
        className=""transition-all duration-500 relative md:ml-[2px] md:mr-[8px] md:my-[16px] md:rounded-[26px] bg-white dark:bg-black-900 md:min-w-[82%] p-[18px] h-full overflow-y-scroll""
      >
        {isMobile && <SidebarMobileHeader />}
        <div className=""flex flex-col w-full px-1 md:px-8"">
          <div className=""w-full flex flex-col gap-y-1"">
            <div className=""items-center flex gap-x-4"">
              <p className=""text-3xl font-semibold text-slate-600 dark:text-slate-200"">
                Instance workspaces
              </p>
              <button
                onClick={() =>
                  document?.getElementById(NewWorkspaceModalId)?.showModal()
                }
                className=""border border-slate-800 dark:border-slate-200 px-4 py-1 rounded-lg text-slate-800 dark:text-slate-200 text-sm items-center flex gap-x-2 hover:bg-slate-800 hover:text-slate-100 dark:hover:bg-slate-200 dark:hover:text-slate-800""
              >
                <BookOpen className=""h-4 w-4"" /> New Workspace
              </button>
            </div>
            <p className=""text-sm font-base text-slate-600 dark:text-slate-200"">
              These are all the workspaces that exist on this instance. Removing
              a workspace will delete all of it's associated chats and settings.
            </p>
          </div>
          <WorkspacesContainer />
        </div>
        <NewWorkspaceModal />
      </div>
    </div>
  );
}

function WorkspacesContainer() {
  const darkMode = usePrefersDarkMode();
  const [loading, setLoading] = useState(true);
  const [users, setUsers] = useState([]);
  const [workspaces, setWorkspaces] = useState([]);

  useEffect(() => {
    async function fetchData() {
      const _users = await Admin.users();
      const _workspaces = await Admin.workspaces();
      setUsers(_users);
      setWorkspaces(_workspaces);
      setLoading(false);
    }
    fetchData();
  }, []);

  if (loading) {
    return (
      <Skeleton.default
        height=""80vh""
        width=""100%""
        baseColor={darkMode ? ""#2a3a53"" : null}
        highlightColor={darkMode ? ""#395073"" : null}
        count={1}
        className=""w-full p-4 rounded-b-2xl rounded-tr-2xl rounded-tl-sm mt-6""
        containerClassName=""flex w-full""
      />
    );
  }

  return (
    <table className=""md:w-3/4 w-full text-sm text-left text-gray-500 dark:text-gray-400 rounded-lg mt-5"">
      <thead className=""text-xs text-gray-700 uppercase bg-gray-50 dark:bg-stone-800 dark:text-gray-400"">
        <tr>
          <th scope=""col"" className=""px-6 py-3 rounded-tl-lg"">
            Name
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Link
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Users
          </th>
          <th scope=""col"" className=""px-6 py-3"">
            Created On
          </th>
          <th scope=""col"" className=""px-6 py-3 rounded-tr-lg"">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {workspaces.map((workspace) => (
          <WorkspaceRow
            key={workspace.id}
            workspace={workspace}
            users={users}
          />
        ))}
      </tbody>
    </table>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR, VAR } VAR ""VAR""; VAR VAR, { VAR } VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR * VAR VAR VAR ""VAR-VAR-VAR""; VAR ""VAR-VAR-VAR/VAR/VAR.VAR""; VAR { VAR } VAR ""VAR-VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""./VAR""; VAR VAR, { VAR } VAR ""./VAR""; VAR VAR VAR VAR() { VAR ( <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR VAR-VAR-100 VAR:VAR-VAR-700 VAR""> {!VAR && <VAR />} <VAR VAR={{ VAR: VAR ? ""100%"" : ""VAR(100% - 32px)"" }} VAR=""VAR-VAR VAR-500 VAR VAR:VAR-[2px] VAR:VAR-[8px] VAR:VAR-[16px] VAR:VAR-[26px] VAR-VAR VAR:VAR-VAR-900 VAR:VAR-VAR-[82%] VAR-[18px] VAR-VAR VAR-VAR-VAR"" > {VAR && <VAR />} <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-1 VAR:VAR-8""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-1""> <VAR VAR=""VAR-VAR VAR VAR-VAR-4""> <VAR VAR=""VAR-3xl VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR </VAR> <VAR VAR={() => VAR?.VAR(VAR)?.VAR() } VAR=""VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-4 VAR-1 VAR-VAR VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR-VAR VAR VAR-VAR-2 VAR:VAR-VAR-800 VAR:VAR-VAR-100 VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-800"" > <VAR VAR=""VAR-4 VAR-4"" /> VAR VAR </VAR> </VAR> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-600 VAR:VAR-VAR-200""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR VAR VAR VAR VAR'VAR VAR VAR VAR VAR. </VAR> </VAR> <VAR /> </VAR> <VAR /> </VAR> </VAR> ); } VAR VAR() { VAR VAR = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR [VAR, VAR] = VAR([]); VAR [VAR, VAR] = VAR([]); VAR(() => { VAR VAR VAR() { VAR VAR = VAR VAR.VAR(); VAR VAR = VAR VAR.VAR(); VAR(VAR); VAR(VAR); VAR(VAR); } VAR(); }, []); VAR (VAR) { VAR ( <VAR.VAR VAR=""80vh"" VAR=""100%"" VAR={VAR ? "" VAR={VAR ? "" VAR={1} VAR=""VAR-VAR VAR-4 VAR-VAR-2xl VAR-VAR-2xl VAR-VAR-VAR VAR-6"" VAR=""VAR VAR-VAR"" /> ); } VAR ( <VAR VAR=""VAR:VAR-3/4 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-500 VAR:VAR-VAR-400 VAR-VAR VAR-5""> <VAR VAR=""VAR-VAR VAR-VAR-700 VAR VAR-VAR-50 VAR:VAR-VAR-800 VAR:VAR-VAR-400""> <VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3""> VAR VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR-6 VAR-3 VAR-VAR-VAR""> VAR </VAR> </VAR> </VAR> <VAR> {VAR.VAR((VAR) => ( <VAR VAR={VAR.VAR} VAR={VAR} VAR={VAR} /> ))} </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Invite/NewUserModal/index.jsx,"import React, { useState } from ""react"";
import Invite from ""../../../models/invite"";
import paths from ""../../../utils/paths"";
import { useParams } from ""react-router-dom"";

export default function NewUserModal() {
  const { code } = useParams();
  const [error, setError] = useState(null);
  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { success, error } = await Invite.acceptInvite(code, data);
    if (!!success) window.location.replace(paths.home());
    setError(error);
  };

  return (
    <dialog open={true} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Create a new account
            </h3>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""username""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Username
                  </label>
                  <input
                    name=""username""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""My username""
                    minLength={2}
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""password""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Password
                  </label>
                  <input
                    name=""password""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""Your password""
                    required={true}
                    minLength={8}
                    autoComplete=""off""
                  />
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creating your account you will be able to login with
                  these credentials and start using workspaces.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                type=""submit""
                className=""w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Accept Invitation
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR } = VAR VAR.VAR(VAR, VAR); VAR (!!VAR) VAR.VAR.VAR(VAR.VAR()); VAR(VAR); }; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={2} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={VAR} VAR={8} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR"" VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/pages/Invite/NewUserModal/index.jsx,"import React, { useState } from ""react"";
import Invite from ""../../../models/invite"";
import paths from ""../../../utils/paths"";
import { useParams } from ""react-router-dom"";

export default function NewUserModal() {
  const { code } = useParams();
  const [error, setError] = useState(null);
  const handleCreate = async (e) => {
    setError(null);
    e.preventDefault();
    const data = {};
    const form = new FormData(e.target);
    for (var [key, value] of form.entries()) data[key] = value;
    const { success, error } = await Invite.acceptInvite(code, data);
    if (!!success) window.location.replace(paths.home());
    setError(error);
  };

  return (
    <dialog open={true} className=""bg-transparent outline-none"">
      <div className=""relative w-full max-w-2xl max-h-full"">
        <div className=""relative bg-white rounded-lg shadow dark:bg-stone-700"">
          <div className=""flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"">
            <h3 className=""text-xl font-semibold text-gray-900 dark:text-white"">
              Create a new account
            </h3>
          </div>
          <form onSubmit={handleCreate}>
            <div className=""p-6 space-y-6 flex h-full w-full"">
              <div className=""w-full flex flex-col gap-y-4"">
                <div>
                  <label
                    htmlFor=""username""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Username
                  </label>
                  <input
                    name=""username""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""My username""
                    minLength={2}
                    required={true}
                    autoComplete=""off""
                  />
                </div>
                <div>
                  <label
                    htmlFor=""password""
                    className=""block mb-2 text-sm font-medium text-gray-900 dark:text-white""
                  >
                    Password
                  </label>
                  <input
                    name=""password""
                    type=""text""
                    className=""bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-stone-600 dark:border-stone-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500""
                    placeholder=""Your password""
                    required={true}
                    minLength={8}
                    autoComplete=""off""
                  />
                </div>
                {error && (
                  <p className=""text-red-600 dark:text-red-400 text-sm"">
                    Error: {error}
                  </p>
                )}
                <p className=""text-gray-800 dark:text-slate-200 text-xs md:text-sm"">
                  After creating your account you will be able to login with
                  these credentials and start using workspaces.
                </p>
              </div>
            </div>
            <div className=""flex w-full justify-between items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"">
              <button
                type=""submit""
                className=""w-full text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-black dark:text-slate-200 dark:border-transparent dark:hover:text-slate-200 dark:hover:bg-gray-900 dark:focus:ring-gray-800""
              >
                Accept Invitation
              </button>
            </div>
          </form>
        </div>
      </div>
    </dialog>
  );
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR, { VAR } VAR ""VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR VAR VAR ""../../../VAR/VAR""; VAR { VAR } VAR ""VAR-VAR-VAR""; VAR VAR VAR VAR() { VAR { VAR } = VAR(); VAR [VAR, VAR] = VAR(VAR); VAR VAR = VAR (VAR) => { VAR(VAR); VAR.VAR(); VAR VAR = {}; VAR VAR = VAR VAR(VAR.VAR); VAR (VAR [VAR, VAR] VAR VAR.VAR()) VAR[VAR] = VAR; VAR { VAR, VAR } = VAR VAR.VAR(VAR, VAR); VAR (!!VAR) VAR.VAR.VAR(VAR.VAR()); VAR(VAR); }; VAR ( <VAR VAR={VAR} VAR=""VAR-VAR VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR-2xl VAR-VAR-VAR""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR VAR:VAR-VAR-700""> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-4 VAR-VAR VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR""> VAR VAR VAR VAR </VAR> </VAR> <VAR VAR={VAR}> <VAR VAR=""VAR-6 VAR-VAR-6 VAR VAR-VAR VAR-VAR""> <VAR VAR=""VAR-VAR VAR VAR-VAR VAR-VAR-4""> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={2} VAR={VAR} VAR=""VAR"" /> </VAR> <VAR> <VAR VAR=""VAR"" VAR=""VAR VAR-2 VAR-VAR VAR-VAR VAR-VAR-900 VAR:VAR-VAR"" > VAR </VAR> <VAR VAR=""VAR"" VAR=""VAR"" VAR=""VAR-VAR-50 VAR VAR-VAR-300 VAR-VAR-900 VAR-VAR VAR-VAR VAR:VAR-VAR-500 VAR:VAR-VAR-500 VAR VAR-VAR VAR-2.5 VAR:VAR-VAR-600 VAR:VAR-VAR-600 VAR:VAR-VAR-400 VAR:VAR-VAR VAR:VAR:VAR-VAR-500 VAR:VAR:VAR-VAR-500"" VAR=""VAR VAR"" VAR={VAR} VAR={8} VAR=""VAR"" /> </VAR> {VAR && ( <VAR VAR=""VAR-VAR-600 VAR:VAR-VAR-400 VAR-VAR""> VAR: {VAR} </VAR> )} <VAR VAR=""VAR-VAR-800 VAR:VAR-VAR-200 VAR-VAR VAR:VAR-VAR""> VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR. </VAR> </VAR> </VAR> <VAR VAR=""VAR VAR-VAR VAR-VAR VAR-VAR VAR-6 VAR-VAR-2 VAR-VAR VAR-VAR-200 VAR-VAR VAR:VAR-VAR-600""> <VAR VAR=""VAR"" VAR=""VAR-VAR VAR-VAR-500 VAR-VAR VAR:VAR-VAR-100 VAR:VAR-4 VAR:VAR-VAR VAR:VAR-VAR-300 VAR-VAR VAR VAR-VAR-200 VAR-VAR VAR-VAR VAR-5 VAR-2.5 VAR:VAR-VAR-900 VAR:VAR-10 VAR:VAR-VAR VAR:VAR-VAR-200 VAR:VAR-VAR VAR:VAR:VAR-VAR-200 VAR:VAR:VAR-VAR-900 VAR:VAR:VAR-VAR-800"" > VAR VAR </VAR> </VAR> </VAR> </VAR> </VAR> </VAR> ); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/utils/chat/markdown.js,"import { encode as HTMLEncode } from ""he"";
import markdownIt from ""markdown-it"";
const markdown = markdownIt({
  html: true,
  typographer: true,
  highlight: function (str) {
    return `<div class=""whitespace-pre-line w-fit rounded-lg bg-black-900 px-4 pt-10 pb-4 relative font-mono font-normal text-sm text-slate-200""><div class=""w-full flex items-center absolute top-0 left-0 text-slate-200 bg-stone-800 px-4 py-2 text-xs font-sans justify-between rounded-t-md""><button onclick='window.copySnippet();' class=""flex ml-auto gap-2""><svg stroke=""currentColor"" fill=""none"" stroke-width=""2"" viewBox=""0 0 24 24"" stroke-linecap=""round"" stroke-linejoin=""round"" class=""h-4 w-4"" height=""1em"" width=""1em"" xmlns=""http://www.w3.org/2000/svg""><path d=""M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2""></path><rect x=""8"" y=""2"" width=""8"" height=""4"" rx=""1"" ry=""1""></rect></svg>Copy code</button></div><pre class='markdown'>${HTMLEncode(
      str
    )}<pre></div>`;
  },
});

window.copySnippet = function () {
  if (!event?.target) return false;

  const target = event?.target;
  const markdown =
    target.parentElement?.parentElement?.querySelector("".markdown"")?.innerText;
  if (!markdown) return false;

  window.navigator.clipboard.writeText(markdown);
  target.classList.add(""text-green-500"");
  const originalText = target.innerHTML;
  target.innerText = ""Copied!"";
  target.setAttribute(""disabled"", true);

  setTimeout(() => {
    target.classList.remove(""text-green-500"");
    target.innerHTML = originalText;
    target.removeAttribute(""disabled"");
  }, 5000);
};

export default function renderMarkdown(text = """") {
  return markdown.render(text);
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR VAR VAR } VAR ""VAR""; VAR VAR VAR ""VAR-VAR""; VAR VAR = VAR({ VAR: VAR, VAR: VAR, VAR: VAR (VAR) { VAR `<VAR VAR=""VAR-VAR-VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR-4 VAR-10 VAR-4 VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-200""><VAR VAR=""VAR-VAR VAR VAR-VAR VAR VAR-0 VAR-0 VAR-VAR-200 VAR-VAR-800 VAR-4 VAR-2 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-VAR""><VAR VAR='VAR.VAR();' VAR=""VAR VAR-VAR VAR-2""><VAR VAR=""VAR"" VAR=""VAR"" VAR-VAR=""2"" VAR=""0 0 24 24"" VAR-VAR=""VAR"" VAR-VAR=""VAR"" VAR=""VAR-4 VAR-4"" VAR=""1em"" VAR=""1em"" VAR=""VAR: VAR )}<VAR></VAR>`; }, }); VAR.VAR = VAR () { VAR (!VAR?.VAR) VAR VAR; VAR VAR = VAR?.VAR; VAR VAR = VAR.VAR?.VAR?.VAR("".VAR"")?.VAR; VAR (!VAR) VAR VAR; VAR.VAR.VAR.VAR(VAR); VAR.VAR.VAR(""VAR-VAR-500""); VAR VAR = VAR.VAR; VAR.VAR = ""VAR!""; VAR.VAR(""VAR"", VAR); VAR(() => { VAR.VAR.VAR(""VAR-VAR-500""); VAR.VAR = VAR; VAR.VAR(""VAR""); }, 5000); }; VAR VAR VAR VAR(VAR = """") { VAR VAR.VAR(VAR); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,frontend/src/utils/chat/markdown.js,"import { encode as HTMLEncode } from ""he"";
import markdownIt from ""markdown-it"";
const markdown = markdownIt({
  html: true,
  typographer: true,
  highlight: function (str) {
    return `<div class=""whitespace-pre-line w-fit rounded-lg bg-black-900 px-4 pt-10 pb-4 relative font-mono font-normal text-sm text-slate-200""><div class=""w-full flex items-center absolute top-0 left-0 text-slate-200 bg-stone-800 px-4 py-2 text-xs font-sans justify-between rounded-t-md""><button onclick='window.copySnippet();' class=""flex ml-auto gap-2""><svg stroke=""currentColor"" fill=""none"" stroke-width=""2"" viewBox=""0 0 24 24"" stroke-linecap=""round"" stroke-linejoin=""round"" class=""h-4 w-4"" height=""1em"" width=""1em"" xmlns=""http://www.w3.org/2000/svg""><path d=""M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2""></path><rect x=""8"" y=""2"" width=""8"" height=""4"" rx=""1"" ry=""1""></rect></svg>Copy code</button></div><pre class='markdown'>${HTMLEncode(
      str
    )}<pre></div>`;
  },
});

window.copySnippet = function () {
  if (!event?.target) return false;

  const target = event?.target;
  const markdown =
    target.parentElement?.parentElement?.querySelector("".markdown"")?.innerText;
  if (!markdown) return false;

  window.navigator.clipboard.writeText(markdown);
  target.classList.add(""text-green-500"");
  const originalText = target.innerHTML;
  target.innerText = ""Copied!"";
  target.setAttribute(""disabled"", true);

  setTimeout(() => {
    target.classList.remove(""text-green-500"");
    target.innerHTML = originalText;
    target.removeAttribute(""disabled"");
  }, 5000);
};

export default function renderMarkdown(text = """") {
  return markdown.render(text);
}",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR VAR VAR } VAR ""VAR""; VAR VAR VAR ""VAR-VAR""; VAR VAR = VAR({ VAR: VAR, VAR: VAR, VAR: VAR (VAR) { VAR `<VAR VAR=""VAR-VAR-VAR VAR-VAR VAR-VAR VAR-VAR-900 VAR-4 VAR-10 VAR-4 VAR VAR-VAR VAR-VAR VAR-VAR VAR-VAR-200""><VAR VAR=""VAR-VAR VAR VAR-VAR VAR VAR-0 VAR-0 VAR-VAR-200 VAR-VAR-800 VAR-4 VAR-2 VAR-VAR VAR-VAR VAR-VAR VAR-VAR-VAR""><VAR VAR='VAR.VAR();' VAR=""VAR VAR-VAR VAR-2""><VAR VAR=""VAR"" VAR=""VAR"" VAR-VAR=""2"" VAR=""0 0 24 24"" VAR-VAR=""VAR"" VAR-VAR=""VAR"" VAR=""VAR-4 VAR-4"" VAR=""1em"" VAR=""1em"" VAR=""VAR: VAR )}<VAR></VAR>`; }, }); VAR.VAR = VAR () { VAR (!VAR?.VAR) VAR VAR; VAR VAR = VAR?.VAR; VAR VAR = VAR.VAR?.VAR?.VAR("".VAR"")?.VAR; VAR (!VAR) VAR VAR; VAR.VAR.VAR.VAR(VAR); VAR.VAR.VAR(""VAR-VAR-500""); VAR VAR = VAR.VAR; VAR.VAR = ""VAR!""; VAR.VAR(""VAR"", VAR); VAR(() => { VAR.VAR.VAR(""VAR-VAR-500""); VAR.VAR = VAR; VAR.VAR(""VAR""); }, 5000); }; VAR VAR VAR VAR(VAR = """") { VAR VAR.VAR(VAR); } ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,server/endpoints/chat.js,"const { v4: uuidv4 } = require(""uuid"");
const { reqBody, userFromSession, multiUserMode } = require(""../utils/http"");
const { Workspace } = require(""../models/workspace"");
const { chatWithWorkspace } = require(""../utils/chats"");
const { validatedRequest } = require(""../utils/middleware/validatedRequest"");
const { WorkspaceChats } = require(""../models/workspaceChats"");
const { SystemSettings } = require(""../models/systemSettings"");
const { Telemetry } = require(""../models/telemetry"");
const { escape } = require(""sqlstring-sqlite"");

function chatEndpoints(app) {
  if (!app) return;

  app.post(
    ""/workspace/:slug/chat"",
    [validatedRequest],
    async (request, response) => {
      try {
        const user = await userFromSession(request, response);
        const { slug } = request.params;
        const { message, mode = ""query"" } = reqBody(request);
        const workspace = multiUserMode(response)
          ? await Workspace.getWithUser(user, `slug = ${escape(slug)}`)
          : await Workspace.get(`slug = ${escape(slug)}`);

        if (!workspace) {
          response.sendStatus(400).end();
          return;
        }

        if (multiUserMode(response) && user.role !== ""admin"") {
          const limitMessages =
            (await SystemSettings.get(`label = 'limit_user_messages'`))
              ?.value === ""true"";

          if (limitMessages) {
            const systemLimit = Number(
              (await SystemSettings.get(`label = 'message_limit'`))?.value
            );
            if (!!systemLimit) {
              const currentChatCount = await WorkspaceChats.count(
                `user_id = ${user.id} AND createdAt > datetime(CURRENT_TIMESTAMP, '-1 days')`
              );
              if (currentChatCount >= systemLimit) {
                response.status(500).json({
                  id: uuidv4(),
                  type: ""abort"",
                  textResponse: null,
                  sources: [],
                  close: true,
                  error: `You have met your maximum 24 hour chat quota of ${systemLimit} chats set by the instance administrators. Try again later.`,
                });
                return;
              }
            }
          }
        }

        const result = await chatWithWorkspace(workspace, message, mode, user);
        await Telemetry.sendTelemetry(""sent_chat"", {
          multiUserMode: multiUserMode(response),
          LLMSelection: process.env.LLM_PROVIDER || ""openai"",
          VectorDbSelection: process.env.VECTOR_DB || ""pinecone"",
        });
        response.status(200).json({ ...result });
      } catch (e) {
        response.status(500).json({
          id: uuidv4(),
          type: ""abort"",
          textResponse: null,
          sources: [],
          close: true,
          error: e.message,
        });
      }
    }
  );
}

module.exports = { chatEndpoints };",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4899,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR: VAR } = VAR(""VAR""); VAR { VAR, VAR, VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""VAR-VAR""); VAR VAR(VAR) { VAR (!VAR) VAR; VAR.VAR( ""/VAR/:VAR/VAR"", [VAR], VAR (VAR, VAR) => { VAR { VAR VAR = VAR VAR(VAR, VAR); VAR { VAR } = VAR.VAR; VAR { VAR, VAR = ""VAR"" } = VAR(VAR); VAR VAR = VAR(VAR) ? VAR VAR.VAR(VAR, `VAR = ${VAR(VAR)}`) : VAR VAR.VAR(`VAR = ${VAR(VAR)}`); VAR (!VAR) { VAR.VAR(400).VAR(); VAR; } VAR (VAR(VAR) && VAR.VAR !== ""VAR"") { VAR VAR = (VAR VAR.VAR(`VAR = 'VAR'`)) ?.VAR === ""VAR""; VAR (VAR) { VAR VAR = VAR( (VAR VAR.VAR(`VAR = 'VAR'`))?.VAR ); VAR (!!VAR) { VAR VAR = VAR VAR.VAR( `VAR = ${VAR.VAR} VAR VAR > VAR(VAR, '-1 VAR')` ); VAR (VAR >= VAR) { VAR.VAR(500).VAR({ VAR: VAR(), VAR: ""VAR"", VAR: VAR, VAR: [], VAR: VAR, VAR: `VAR VAR VAR VAR VAR 24 VAR VAR VAR VAR ${VAR} VAR VAR VAR VAR VAR VAR. VAR VAR VAR.`, }); VAR; } } } } VAR VAR = VAR VAR(VAR, VAR, VAR, VAR); VAR VAR.VAR(""VAR"", { VAR: VAR(VAR), VAR: VAR.VAR.VAR || ""VAR"", VAR: VAR.VAR.VAR || ""VAR"", }); VAR.VAR(200).VAR({ ...VAR }); } VAR (VAR) { VAR.VAR(500).VAR({ VAR: VAR(), VAR: ""VAR"", VAR: VAR, VAR: [], VAR: VAR, VAR: VAR.VAR, }); } } ); } VAR.VAR = { VAR }; ",16
anything-llm_dc3dfbf31495fe316b21ee184b9317b38101d30e,server/endpoints/chat.js,"const { v4: uuidv4 } = require(""uuid"");
const { reqBody, userFromSession, multiUserMode } = require(""../utils/http"");
const { Workspace } = require(""../models/workspace"");
const { chatWithWorkspace } = require(""../utils/chats"");
const { validatedRequest } = require(""../utils/middleware/validatedRequest"");
const { WorkspaceChats } = require(""../models/workspaceChats"");
const { SystemSettings } = require(""../models/systemSettings"");
const { Telemetry } = require(""../models/telemetry"");
const { escape } = require(""sqlstring-sqlite"");

function chatEndpoints(app) {
  if (!app) return;

  app.post(
    ""/workspace/:slug/chat"",
    [validatedRequest],
    async (request, response) => {
      try {
        const user = await userFromSession(request, response);
        const { slug } = request.params;
        const { message, mode = ""query"" } = reqBody(request);
        const workspace = multiUserMode(response)
          ? await Workspace.getWithUser(user, `slug = ${escape(slug)}`)
          : await Workspace.get(`slug = ${escape(slug)}`);

        if (!workspace) {
          response.sendStatus(400).end();
          return;
        }

        if (multiUserMode(response) && user.role !== ""admin"") {
          const limitMessages =
            (await SystemSettings.get(`label = 'limit_user_messages'`))
              ?.value === ""true"";

          if (limitMessages) {
            const systemLimit = Number(
              (await SystemSettings.get(`label = 'message_limit'`))?.value
            );
            if (!!systemLimit) {
              const currentChatCount = await WorkspaceChats.count(
                `user_id = ${user.id} AND createdAt > datetime(CURRENT_TIMESTAMP, '-1 days')`
              );
              if (currentChatCount >= systemLimit) {
                response.status(500).json({
                  id: uuidv4(),
                  type: ""abort"",
                  textResponse: null,
                  sources: [],
                  close: true,
                  error: `You have met your maximum 24 hour chat quota of ${systemLimit} chats set by the instance administrators. Try again later.`,
                });
                return;
              }
            }
          }
        }

        const result = await chatWithWorkspace(workspace, message, mode, user);
        await Telemetry.sendTelemetry(""sent_chat"", {
          multiUserMode: multiUserMode(response),
          LLMSelection: process.env.LLM_PROVIDER || ""openai"",
          VectorDbSelection: process.env.VECTOR_DB || ""pinecone"",
        });
        response.status(200).json({ ...result });
      } catch (e) {
        response.status(500).json({
          id: uuidv4(),
          type: ""abort"",
          textResponse: null,
          sources: [],
          close: true,
          error: e.message,
        });
      }
    }
  );
}

module.exports = { chatEndpoints };",,dc3dfbf31495fe316b21ee184b9317b38101d30e,CVE-2023-4898,dc3dfbf31495fe316b21ee184b9317b38101d30e,https://github.com/mintplex-labs/anything-llm,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR { VAR: VAR } = VAR(""VAR""); VAR { VAR, VAR, VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""../VAR/VAR""); VAR { VAR } = VAR(""VAR-VAR""); VAR VAR(VAR) { VAR (!VAR) VAR; VAR.VAR( ""/VAR/:VAR/VAR"", [VAR], VAR (VAR, VAR) => { VAR { VAR VAR = VAR VAR(VAR, VAR); VAR { VAR } = VAR.VAR; VAR { VAR, VAR = ""VAR"" } = VAR(VAR); VAR VAR = VAR(VAR) ? VAR VAR.VAR(VAR, `VAR = ${VAR(VAR)}`) : VAR VAR.VAR(`VAR = ${VAR(VAR)}`); VAR (!VAR) { VAR.VAR(400).VAR(); VAR; } VAR (VAR(VAR) && VAR.VAR !== ""VAR"") { VAR VAR = (VAR VAR.VAR(`VAR = 'VAR'`)) ?.VAR === ""VAR""; VAR (VAR) { VAR VAR = VAR( (VAR VAR.VAR(`VAR = 'VAR'`))?.VAR ); VAR (!!VAR) { VAR VAR = VAR VAR.VAR( `VAR = ${VAR.VAR} VAR VAR > VAR(VAR, '-1 VAR')` ); VAR (VAR >= VAR) { VAR.VAR(500).VAR({ VAR: VAR(), VAR: ""VAR"", VAR: VAR, VAR: [], VAR: VAR, VAR: `VAR VAR VAR VAR VAR 24 VAR VAR VAR VAR ${VAR} VAR VAR VAR VAR VAR VAR. VAR VAR VAR.`, }); VAR; } } } } VAR VAR = VAR VAR(VAR, VAR, VAR, VAR); VAR VAR.VAR(""VAR"", { VAR: VAR(VAR), VAR: VAR.VAR.VAR || ""VAR"", VAR: VAR.VAR.VAR || ""VAR"", }); VAR.VAR(200).VAR({ ...VAR }); } VAR (VAR) { VAR.VAR(500).VAR({ VAR: VAR(), VAR: ""VAR"", VAR: VAR, VAR: [], VAR: VAR, VAR: VAR.VAR, }); } } ); } VAR.VAR = { VAR }; ",16
envoy_fe7c69c248f4fe5a9080c7ccb35275b5218bb5ab,test/common/stream_info/stream_info_impl_test.cc,"TEST_F(StreamInfoImplTest, SetFrom) {
  StreamInfoImpl s1(Http::Protocol::Http2, test_time_.timeSystem(), nullptr);

  s1.addBytesReceived(1);
  s1.downstreamTiming().onLastDownstreamRxByteReceived(test_time_.timeSystem());

#ifdef __clang__
#if defined(__linux__)
#if defined(__has_feature) && !(__has_feature(thread_sanitizer))
  ASSERT_TRUE(sizeof(s1) == 760 || sizeof(s1) == 776 || sizeof(s1) == 800)
      << ""If adding fields to StreamInfoImpl, please check to see if you ""
         ""need to add them to setFromForRecreateStream! Current size ""
      << sizeof(s1);
#endif
#endif
#endif

  StreamInfoImpl s2(Http::Protocol::Http11, test_time_.timeSystem(), nullptr);
  s2.setFromForRecreateStream(s1);
  EXPECT_EQ(s1.startTime(), s2.startTime());
  EXPECT_EQ(s1.startTimeMonotonic(), s2.startTimeMonotonic());
  EXPECT_EQ(s1.downstreamTiming().lastDownstreamRxByteReceived(),
            s2.downstreamTiming().lastDownstreamRxByteReceived());
  EXPECT_EQ(s1.protocol(), s2.protocol());
  EXPECT_EQ(s1.bytesReceived(), s2.bytesReceived());
  EXPECT_EQ(s1.getDownstreamBytesMeter(), s2.getDownstreamBytesMeter());
}
",,fe7c69c248f4fe5a9080c7ccb35275b5218bb5ab,CVE-2022-29227,fe7c69c248f4fe5a9080c7ccb35275b5218bb5ab,https://github.com/envoyproxy/envoy,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR(VAR, VAR) { VAR VAR(VAR::VAR::VAR, VAR.VAR(), VAR); VAR.VAR(1); VAR.VAR().VAR(VAR.VAR());    VAR(VAR(VAR) == 760 || VAR(VAR) == 776 || VAR(VAR) == 800) << ""VAR VAR VAR VAR VAR, VAR VAR VAR VAR VAR VAR "" ""VAR VAR VAR VAR VAR VAR! VAR VAR "" << VAR(VAR);    VAR VAR(VAR::VAR::VAR, VAR.VAR(), VAR); VAR.VAR(VAR); VAR(VAR.VAR(), VAR.VAR()); VAR(VAR.VAR(), VAR.VAR()); VAR(VAR.VAR().VAR(), VAR.VAR().VAR()); VAR(VAR.VAR(), VAR.VAR()); VAR(VAR.VAR(), VAR.VAR()); VAR(VAR.VAR(), VAR.VAR()); } ",16
linux_18a0d89e54ca0f6f33582f99ae39867b2c975559,drivers/video/aty/radeon_pm.c,"static void radeonfb_whack_power_state(struct radeonfb_info *rinfo, pci_power_t state)
{
	u16 pwr_cmd;

	for (;;) {
		pci_read_config_word(rinfo->pdev,
				     rinfo->pm_reg+PCI_PM_CTRL,
				     &pwr_cmd);
		if (pwr_cmd & 2)
			break;
		pwr_cmd = (pwr_cmd & ~PCI_PM_CTRL_STATE_MASK) | 2;
		pci_write_config_word(rinfo->pdev,
				      rinfo->pm_reg+PCI_PM_CTRL,
				      pwr_cmd);
		msleep(500);
	}
	rinfo->pdev->current_state = state;
}

		/* The chip seems to need us to whack the PM register
		 * repeatedly until it sticks. We do that -prior- to
		 * calling pci_set_power_state()
		 */
		radeonfb_whack_power_state(rinfo, PCI_D2);",,18a0d89e54ca0f6f33582f99ae39867b2c975559,CVE-2009-0787,18a0d89e54ca0f6f33582f99ae39867b2c975559,https://github.com/torvalds/linux,CPE_DIRECT_COMMIT,68,COMPLETED,"VAR VAR VAR(VAR VAR *VAR, VAR VAR) { VAR VAR; VAR (;;) { VAR(VAR->VAR, VAR->VAR+VAR, &VAR); VAR (VAR & 2) VAR; VAR = (VAR & ~VAR) | 2; VAR(VAR->VAR, VAR->VAR+VAR, VAR); VAR(500); } VAR->VAR->VAR = VAR; } /* VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR * VAR VAR VAR VAR. VAR VAR VAR -VAR- VAR * VAR VAR() */ VAR(VAR, VAR); ",16
linux_7926aff5c57b577ab0f43364ff0c59d968f6a414,drivers/net/usrtl8150.c,"	void *buf;
	int ret;

	buf = kmalloc(size, GFP_NOIO);
	if (!buf)
		return -ENOMEM;

	ret = usb_control_msg(dev->udev, usb_rcvctrlpipe(dev->udev, 0),
			      RTL8150_REQ_GET_REGS, RTL8150_REQT_READ,
			      indx, 0, buf, size, 500);
	if (ret > 0 && ret <= size)
		memcpy(data, buf, ret);
	kfree(buf);
	return ret;
static int set_registers(rtl8150_t * dev, u16 indx, u16 size, const void *data)
	void *buf;
	int ret;

	buf = kmemdup(data, size, GFP_NOIO);
	if (!buf)
		return -ENOMEM;

	ret = usb_control_msg(dev->udev, usb_sndctrlpipe(dev->udev, 0),
			      RTL8150_REQ_SET_REGS, RTL8150_REQT_WRITE,
			      indx, 0, buf, size, 500);
	kfree(buf);
	return ret;","	return usb_control_msg(dev->udev, usb_rcvctrlpipe(dev->udev, 0),
			       RTL8150_REQ_GET_REGS, RTL8150_REQT_READ,
			       indx, 0, data, size, 500);
static int set_registers(rtl8150_t * dev, u16 indx, u16 size, void *data)
	return usb_control_msg(dev->udev, usb_sndctrlpipe(dev->udev, 0),
			       RTL8150_REQ_SET_REGS, RTL8150_REQT_WRITE,
			       indx, 0, data, size, 500);",7926aff5c57b577ab0f43364ff0c59d968f6a414,CVE-2017-8069,7926aff5c57b577ab0f43364ff0c59d968f6a414,https://github.com/torvalds/linux,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR *VAR; VAR VAR; VAR = VAR(VAR, VAR); VAR (!VAR) VAR -VAR; VAR = VAR(VAR->VAR, VAR(VAR->VAR, 0), VAR, VAR, VAR, 0, VAR, VAR, 500); VAR (VAR > 0 && VAR <= VAR) VAR(VAR, VAR, VAR); VAR(VAR); VAR VAR; VAR VAR VAR(VAR * VAR, VAR VAR, VAR VAR, VAR VAR *VAR) VAR *VAR; VAR VAR; VAR = VAR(VAR, VAR, VAR); VAR (!VAR) VAR -VAR; VAR = VAR(VAR->VAR, VAR(VAR->VAR, 0), VAR, VAR, VAR, 0, VAR, VAR, 500); VAR(VAR); VAR VAR; VAR VAR(VAR->VAR, VAR(VAR->VAR, 0), VAR, VAR, VAR, 0, VAR, VAR, 500); VAR VAR VAR(VAR * VAR, VAR VAR, VAR VAR, VAR *VAR) VAR VAR(VAR->VAR, VAR(VAR->VAR, 0), VAR, VAR, VAR, 0, VAR, VAR, 500);",16
nautobot_64312a4297b5ca49b6cdedf477e41e8e4fd61cce,nautobot/core/tests/test_views.py,"            ""If further assistance is required, please join the <code>#nautobot</code> channel on ""
            '<a href=""https://slack.networktocode.com/"" rel=""noopener noreferrer"">Network to Code\'s '
            ""Slack community</a> and post your question."",
            ""If further assistance is required, please join the <code>#nautobot</code> channel on ""
            '<a href=""https://slack.networktocode.com/"" rel=""noopener noreferrer"">Network to Code\'s '
            ""Slack community</a> and post your question."",
        """"""Nautobot's custom 500 page should be used and should include a custom support message if defined.""""""","            ""If further assistance is required, please join the <code>#nautobot</code> channel ""
            'on <a href=""https://slack.networktocode.com/"">Network to Code\'s Slack community</a> '
            ""and post your question."",
            ""If further assistance is required, please join the <code>#nautobot</code> channel ""
            'on <a href=""https://slack.networktocode.com/"">Network to Code\'s Slack community</a> '
            ""and post your question."",
        """"""Nautobot's custom 500 page should be used and should include a default support message.""""""",64312a4297b5ca49b6cdedf477e41e8e4fd61cce,CVE-2024-23345,64312a4297b5ca49b6cdedf477e41e8e4fd61cce,https://github.com/nautobot/nautobot,NVD_DIRECT_COMMIT,1337,COMPLETED,"""VAR VAR VAR VAR VAR, VAR VAR VAR <VAR> '<VAR VAR=""VAR: ""VAR VAR</VAR> VAR VAR VAR VAR."", ""VAR VAR VAR VAR VAR, VAR VAR VAR <VAR> '<VAR VAR=""VAR: ""VAR VAR</VAR> VAR VAR VAR VAR."", """"""VAR'VAR VAR 500 VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR."""""" ""VAR VAR VAR VAR VAR, VAR VAR VAR <VAR> 'VAR <VAR VAR=""VAR: ""VAR VAR VAR VAR."", ""VAR VAR VAR VAR VAR, VAR VAR VAR <VAR> 'VAR <VAR VAR=""VAR: ""VAR VAR VAR VAR."", """"""VAR'VAR VAR 500 VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR VAR.""""""",16
urllib3_0aa3e24fcd75f1bb59ab159e9f8adb44055b2271,dummyserver/proxy.py,"#!/usr/bin/env python
#
# Simple asynchronous HTTP proxy with tunnelling (CONNECT).
#
# GET/POST proxying based on
# http://groups.google.com/group/python-tornado/msg/7bea08e7a049cf26
#
# Copyright (C) 2012 Senko Rasic <senko.rasic@dobarkod.hr>
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the ""Software""), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED ""AS IS"", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
# THE SOFTWARE.

import sys
import socket

import tornado.httpserver
import tornado.ioloop
import tornado.iostream
import tornado.web
import tornado.httpclient

__all__ = ['ProxyHandler', 'run_proxy']


class ProxyHandler(tornado.web.RequestHandler):
    SUPPORTED_METHODS = ['GET', 'POST', 'CONNECT']

    @tornado.web.asynchronous
    def get(self):

        def handle_response(response):
            if response.error and not isinstance(response.error,
                                                 tornado.httpclient.HTTPError):
                self.set_status(500)
                self.write('Internal server error:\n' + str(response.error))
                self.finish()
            else:
                self.set_status(response.code)
                for header in ('Date', 'Cache-Control', 'Server',
                               'Content-Type', 'Location'):
                    v = response.headers.get(header)
                    if v:
                        self.set_header(header, v)
                if response.body:
                    self.write(response.body)
                self.finish()

        req = tornado.httpclient.HTTPRequest(
            url=self.request.uri,
            method=self.request.method, body=self.request.body,
            headers=self.request.headers, follow_redirects=False,
            allow_nonstandard_methods=True)

        client = tornado.httpclient.AsyncHTTPClient()
        try:
            client.fetch(req, handle_response)
        except tornado.httpclient.HTTPError as e:
            if hasattr(e, 'response') and e.response:
                self.handle_response(e.response)
            else:
                self.set_status(500)
                self.write('Internal server error:\n' + str(e))
                self.finish()

    @tornado.web.asynchronous
    def post(self):
        return self.get()

    @tornado.web.asynchronous
    def connect(self):
        host, port = self.request.uri.split(':')
        client = self.request.connection.stream

        def read_from_client(data):
            upstream.write(data)

        def read_from_upstream(data):
            client.write(data)

        def client_close(data=None):
            if upstream.closed():
                return
            if data:
                upstream.write(data)
            upstream.close()

        def upstream_close(data=None):
            if client.closed():
                return
            if data:
                client.write(data)
            client.close()

        def start_tunnel():
            client.read_until_close(client_close, read_from_client)
            upstream.read_until_close(upstream_close, read_from_upstream)
            client.write(b'HTTP/1.0 200 Connection established\r\n\r\n')

        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM, 0)
        upstream = tornado.iostream.IOStream(s)
        upstream.connect((host, int(port)), start_tunnel)


def run_proxy(port, start_ioloop=True):
    """"""
    Run proxy on the specified port. If start_ioloop is True (default),
    the tornado IOLoop will be started immediately.
    """"""
    app = tornado.web.Application([
        (r'.*', ProxyHandler),
    ])
    app.listen(port)
    ioloop = tornado.ioloop.IOLoop.instance()
    if start_ioloop:
        ioloop.start()


if __name__ == '__main__':
    port = 8888
    if len(sys.argv) > 1:
        port = int(sys.argv[1])

    print(""Starting HTTP proxy on port %d"" % port)
    run_proxy(port)",,0aa3e24fcd75f1bb59ab159e9f8adb44055b2271,CVE-2019-11236,0aa3e24fcd75f1bb59ab159e9f8adb44055b2271,https://github.com/urllib3/urllib3,NVD_GIT_REPOBASED,98,COMPLETED,"                          VAR VAR VAR VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR = ['VAR', 'VAR'] VAR VAR(VAR.VAR.VAR): VAR = ['VAR', 'VAR', 'VAR'] @VAR.VAR.VAR VAR VAR(VAR): VAR VAR(VAR): VAR VAR.VAR VAR VAR VAR(VAR.VAR, VAR.VAR.VAR): VAR.VAR(500) VAR.VAR('VAR VAR VAR:\VAR' + VAR(VAR.VAR)) VAR.VAR() VAR: VAR.VAR(VAR.VAR) VAR VAR VAR ('VAR', 'VAR-VAR', 'VAR', 'VAR-VAR', 'VAR'): VAR = VAR.VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR, VAR) VAR VAR.VAR: VAR.VAR(VAR.VAR) VAR.VAR() VAR = VAR.VAR.VAR( VAR=VAR.VAR.VAR, VAR=VAR.VAR.VAR, VAR=VAR.VAR.VAR, VAR=VAR.VAR.VAR, VAR=VAR, VAR=VAR) VAR = VAR.VAR.VAR() VAR: VAR.VAR(VAR, VAR) VAR VAR.VAR.VAR VAR VAR: VAR VAR(VAR, 'VAR') VAR VAR.VAR: VAR.VAR(VAR.VAR) VAR: VAR.VAR(500) VAR.VAR('VAR VAR VAR:\VAR' + VAR(VAR)) VAR.VAR() @VAR.VAR.VAR VAR VAR(VAR): VAR VAR.VAR() @VAR.VAR.VAR VAR VAR(VAR): VAR, VAR = VAR.VAR.VAR.VAR(':') VAR = VAR.VAR.VAR.VAR VAR VAR(VAR): VAR.VAR(VAR) VAR VAR(VAR): VAR.VAR(VAR) VAR VAR(VAR=VAR): VAR VAR.VAR(): VAR VAR VAR: VAR.VAR(VAR) VAR.VAR() VAR VAR(VAR=VAR): VAR VAR.VAR(): VAR VAR VAR: VAR.VAR(VAR) VAR.VAR() VAR VAR(): VAR.VAR(VAR, VAR) VAR.VAR(VAR, VAR) VAR.VAR(VAR'VAR/1.0 200 VAR VAR\VAR\VAR\VAR\VAR') VAR = VAR.VAR(VAR.VAR, VAR.VAR, 0) VAR = VAR.VAR.VAR(VAR) VAR.VAR((VAR, VAR(VAR)), VAR) VAR VAR(VAR, VAR=VAR): """""" VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR (VAR), VAR VAR VAR VAR VAR VAR VAR. """""" VAR = VAR.VAR.VAR([ (VAR'.*', VAR), ]) VAR.VAR(VAR) VAR = VAR.VAR.VAR.VAR() VAR VAR: VAR.VAR() VAR VAR == 'VAR': VAR = 8888 VAR VAR(VAR.VAR) > 1: VAR = VAR(VAR.VAR[1]) VAR(""VAR VAR VAR VAR VAR %VAR"" % VAR) VAR(VAR) ",16
urllib3_0aa3e24fcd75f1bb59ab159e9f8adb44055b2271,test/test_retry.py,"import pytest

from urllib3.response import HTTPResponse
from urllib3.packages.six.moves import xrange
from urllib3.util.retry import Retry, RequestHistory
from urllib3.exceptions import (
    ConnectTimeoutError,
    MaxRetryError,
    ReadTimeoutError,
    ResponseError,
)


class TestRetry(object):

    def test_string(self):
        """""" Retry string representation looks the way we expect """"""
        retry = Retry()
        assert str(retry) == 'Retry(total=10, connect=None, read=None, redirect=None, status=None)'
        for _ in range(3):
            retry = retry.increment(method='GET')
        assert str(retry) == 'Retry(total=7, connect=None, read=None, redirect=None, status=None)'

    def test_retry_both_specified(self):
        """"""Total can win if it's lower than the connect value""""""
        error = ConnectTimeoutError()
        retry = Retry(connect=3, total=2)
        retry = retry.increment(error=error)
        retry = retry.increment(error=error)
        with pytest.raises(MaxRetryError) as e:
            retry.increment(error=error)
        assert e.value.reason == error

    def test_retry_higher_total_loses(self):
        """""" A lower connect timeout than the total is honored """"""
        error = ConnectTimeoutError()
        retry = Retry(connect=2, total=3)
        retry = retry.increment(error=error)
        retry = retry.increment(error=error)
        with pytest.raises(MaxRetryError):
            retry.increment(error=error)

    def test_retry_higher_total_loses_vs_read(self):
        """""" A lower read timeout than the total is honored """"""
        error = ReadTimeoutError(None, ""/"", ""read timed out"")
        retry = Retry(read=2, total=3)
        retry = retry.increment(method='GET', error=error)
        retry = retry.increment(method='GET', error=error)
        with pytest.raises(MaxRetryError):
            retry.increment(method='GET', error=error)

    def test_retry_total_none(self):
        """""" if Total is none, connect error should take precedence """"""
        error = ConnectTimeoutError()
        retry = Retry(connect=2, total=None)
        retry = retry.increment(error=error)
        retry = retry.increment(error=error)
        with pytest.raises(MaxRetryError) as e:
            retry.increment(error=error)
        assert e.value.reason == error

        error = ReadTimeoutError(None, ""/"", ""read timed out"")
        retry = Retry(connect=2, total=None)
        retry = retry.increment(method='GET', error=error)
        retry = retry.increment(method='GET', error=error)
        retry = retry.increment(method='GET', error=error)
        assert not retry.is_exhausted()

    def test_retry_default(self):
        """""" If no value is specified, should retry connects 3 times """"""
        retry = Retry()
        assert retry.total == 10
        assert retry.connect is None
        assert retry.read is None
        assert retry.redirect is None

        error = ConnectTimeoutError()
        retry = Retry(connect=1)
        retry = retry.increment(error=error)
        with pytest.raises(MaxRetryError):
            retry.increment(error=error)

        retry = Retry(connect=1)
        retry = retry.increment(error=error)
        assert not retry.is_exhausted()

        assert Retry(0).raise_on_redirect
        assert not Retry(False).raise_on_redirect

    def test_retry_read_zero(self):
        """""" No second chances on read timeouts, by default """"""
        error = ReadTimeoutError(None, ""/"", ""read timed out"")
        retry = Retry(read=0)
        with pytest.raises(MaxRetryError) as e:
            retry.increment(method='GET', error=error)
        assert e.value.reason == error

    def test_status_counter(self):
        resp = HTTPResponse(status=400)
        retry = Retry(status=2)
        retry = retry.increment(response=resp)
        retry = retry.increment(response=resp)
        with pytest.raises(MaxRetryError) as e:
            retry.increment(response=resp)
        assert str(e.value.reason) == ResponseError.SPECIFIC_ERROR.format(status_code=400)

    def test_backoff(self):
        """""" Backoff is computed correctly """"""
        max_backoff = Retry.BACKOFF_MAX

        retry = Retry(total=100, backoff_factor=0.2)
        assert retry.get_backoff_time() == 0  # First request

        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0  # First retry

        retry = retry.increment(method='GET')
        assert retry.backoff_factor == 0.2
        assert retry.total == 98
        assert retry.get_backoff_time() == 0.4  # Start backoff

        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0.8

        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 1.6

        for _ in xrange(10):
            retry = retry.increment(method='GET')

        assert retry.get_backoff_time() == max_backoff

    def test_zero_backoff(self):
        retry = Retry()
        assert retry.get_backoff_time() == 0
        retry = retry.increment(method='GET')
        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0

    def test_backoff_reset_after_redirect(self):
        retry = Retry(total=100, redirect=5, backoff_factor=0.2)
        retry = retry.increment(method='GET')
        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0.4
        redirect_response = HTTPResponse(status=302, headers={'location': 'test'})
        retry = retry.increment(method='GET', response=redirect_response)
        assert retry.get_backoff_time() == 0
        retry = retry.increment(method='GET')
        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0.4

    def test_sleep(self):
        # sleep a very small amount of time so our code coverage is happy
        retry = Retry(backoff_factor=0.0001)
        retry = retry.increment(method='GET')
        retry = retry.increment(method='GET')
        retry.sleep()

    def test_status_forcelist(self):
        retry = Retry(status_forcelist=xrange(500, 600))
        assert not retry.is_retry('GET', status_code=200)
        assert not retry.is_retry('GET', status_code=400)
        assert retry.is_retry('GET', status_code=500)

        retry = Retry(total=1, status_forcelist=[418])
        assert not retry.is_retry('GET', status_code=400)
        assert retry.is_retry('GET', status_code=418)

        # String status codes are not matched.
        retry = Retry(total=1, status_forcelist=['418'])
        assert not retry.is_retry('GET', status_code=418)

    def test_method_whitelist_with_status_forcelist(self):
        # Falsey method_whitelist means to retry on any method.
        retry = Retry(status_forcelist=[500], method_whitelist=None)
        assert retry.is_retry('GET', status_code=500)
        assert retry.is_retry('POST', status_code=500)

        # Criteria of method_whitelist and status_forcelist are ANDed.
        retry = Retry(status_forcelist=[500], method_whitelist=['POST'])
        assert not retry.is_retry('GET', status_code=500)
        assert retry.is_retry('POST', status_code=500)

    def test_exhausted(self):
        assert not Retry(0).is_exhausted()
        assert Retry(-1).is_exhausted()
        assert Retry(1).increment(method='GET').total == 0

    @pytest.mark.parametrize('total', [-1, 0])
    def test_disabled(self, total):
        with pytest.raises(MaxRetryError):
            Retry(total).increment(method='GET')

    def test_error_message(self):
        retry = Retry(total=0)
        with pytest.raises(MaxRetryError) as e:
            retry = retry.increment(method='GET',
                                    error=ReadTimeoutError(None, ""/"", ""read timed out""))
        assert 'Caused by redirect' not in str(e.value)
        assert str(e.value.reason) == 'None: read timed out'

        retry = Retry(total=1)
        with pytest.raises(MaxRetryError) as e:
            retry = retry.increment('POST', '/')
            retry = retry.increment('POST', '/')
        assert 'Caused by redirect' not in str(e.value)
        assert isinstance(e.value.reason, ResponseError)
        assert str(e.value.reason) == ResponseError.GENERIC_ERROR

        retry = Retry(total=1)
        response = HTTPResponse(status=500)
        with pytest.raises(MaxRetryError) as e:
            retry = retry.increment('POST', '/', response=response)
            retry = retry.increment('POST', '/', response=response)
        assert 'Caused by redirect' not in str(e.value)
        msg = ResponseError.SPECIFIC_ERROR.format(status_code=500)
        assert str(e.value.reason) == msg

        retry = Retry(connect=1)
        with pytest.raises(MaxRetryError) as e:
            retry = retry.increment(error=ConnectTimeoutError('conntimeout'))
            retry = retry.increment(error=ConnectTimeoutError('conntimeout'))
        assert 'Caused by redirect' not in str(e.value)
        assert str(e.value.reason) == 'conntimeout'

    def test_history(self):
        retry = Retry(total=10, method_whitelist=frozenset(['GET', 'POST']))
        assert retry.history == tuple()
        connection_error = ConnectTimeoutError('conntimeout')
        retry = retry.increment('GET', '/test1', None, connection_error)
        history = (RequestHistory('GET', '/test1', connection_error, None, None),)
        assert retry.history == history

        read_error = ReadTimeoutError(None, ""/test2"", ""read timed out"")
        retry = retry.increment('POST', '/test2', None, read_error)
        history = (RequestHistory('GET', '/test1', connection_error, None, None),
                   RequestHistory('POST', '/test2', read_error, None, None))
        assert retry.history == history

        response = HTTPResponse(status=500)
        retry = retry.increment('GET', '/test3', response, None)
        history = (RequestHistory('GET', '/test1', connection_error, None, None),
                   RequestHistory('POST', '/test2', read_error, None, None),
                   RequestHistory('GET', '/test3', None, 500, None))
        assert retry.history == history

    def test_retry_method_not_in_whitelist(self):
        error = ReadTimeoutError(None, ""/"", ""read timed out"")
        retry = Retry()
        with pytest.raises(ReadTimeoutError):
            retry.increment(method='POST', error=error)

    def test_retry_default_remove_headers_on_redirect(self):
        retry = Retry()

        assert list(retry.remove_headers_on_redirect) == ['Authorization']

    def test_retry_set_remove_headers_on_redirect(self):
        retry = Retry(remove_headers_on_redirect=['X-API-Secret'])

        assert list(retry.remove_headers_on_redirect) == ['X-API-Secret']",,0aa3e24fcd75f1bb59ab159e9f8adb44055b2271,CVE-2019-11236,0aa3e24fcd75f1bb59ab159e9f8adb44055b2271,https://github.com/urllib3/urllib3,NVD_GIT_REPOBASED,98,COMPLETED,"VAR VAR VAR VAR.VAR VAR VAR VAR VAR.VAR.VAR.VAR VAR VAR VAR VAR.VAR.VAR VAR VAR, VAR VAR VAR.VAR VAR ( VAR, VAR, VAR, VAR, ) VAR VAR(VAR): VAR VAR(VAR): """""" VAR VAR VAR VAR VAR VAR VAR VAR """""" VAR = VAR() VAR VAR(VAR) == 'VAR(VAR=10, VAR=VAR, VAR=VAR, VAR=VAR, VAR=VAR)' VAR VAR VAR VAR(3): VAR = VAR.VAR(VAR='VAR') VAR VAR(VAR) == 'VAR(VAR=7, VAR=VAR, VAR=VAR, VAR=VAR, VAR=VAR)' VAR VAR(VAR): """"""VAR VAR VAR VAR VAR'VAR VAR VAR VAR VAR VAR"""""" VAR = VAR() VAR = VAR(VAR=3, VAR=2) VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR=VAR) VAR VAR.VAR.VAR == VAR VAR VAR(VAR): """""" VAR VAR VAR VAR VAR VAR VAR VAR VAR """""" VAR = VAR() VAR = VAR(VAR=2, VAR=3) VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR): VAR.VAR(VAR=VAR) VAR VAR(VAR): """""" VAR VAR VAR VAR VAR VAR VAR VAR VAR """""" VAR = VAR(VAR, ""/"", ""VAR VAR VAR"") VAR = VAR(VAR=2, VAR=3) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR.VAR(VAR): VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR(VAR): """""" VAR VAR VAR VAR, VAR VAR VAR VAR VAR """""" VAR = VAR() VAR = VAR(VAR=2, VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR=VAR) VAR VAR.VAR.VAR == VAR VAR = VAR(VAR, ""/"", ""VAR VAR VAR"") VAR = VAR(VAR=2, VAR=VAR) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR VAR.VAR() VAR VAR(VAR): """""" VAR VAR VAR VAR VAR, VAR VAR VAR 3 VAR """""" VAR = VAR() VAR VAR.VAR == 10 VAR VAR.VAR VAR VAR VAR VAR.VAR VAR VAR VAR VAR.VAR VAR VAR VAR = VAR() VAR = VAR(VAR=1) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR): VAR.VAR(VAR=VAR) VAR = VAR(VAR=1) VAR = VAR.VAR(VAR=VAR) VAR VAR VAR.VAR() VAR VAR(0).VAR VAR VAR VAR(VAR).VAR VAR VAR(VAR): """""" VAR VAR VAR VAR VAR VAR, VAR VAR """""" VAR = VAR(VAR, ""/"", ""VAR VAR VAR"") VAR = VAR(VAR=0) VAR VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR.VAR.VAR == VAR VAR VAR(VAR): VAR = VAR(VAR=400) VAR = VAR(VAR=2) VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR=VAR) VAR VAR(VAR.VAR.VAR) == VAR.VAR.VAR(VAR=400) VAR VAR(VAR): """""" VAR VAR VAR VAR """""" VAR = VAR.VAR VAR = VAR(VAR=100, VAR=0.2) VAR VAR.VAR() == 0  VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0  VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR == 0.2 VAR VAR.VAR == 98 VAR VAR.VAR() == 0.4  VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0.8 VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 1.6 VAR VAR VAR VAR(10): VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == VAR VAR VAR(VAR): VAR = VAR() VAR VAR.VAR() == 0 VAR = VAR.VAR(VAR='VAR') VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0 VAR VAR(VAR): VAR = VAR(VAR=100, VAR=5, VAR=0.2) VAR = VAR.VAR(VAR='VAR') VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0.4 VAR = VAR(VAR=302, VAR={'VAR': 'VAR'}) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR.VAR() == 0 VAR = VAR.VAR(VAR='VAR') VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0.4 VAR VAR(VAR):  VAR = VAR(VAR=0.0001) VAR = VAR.VAR(VAR='VAR') VAR = VAR.VAR(VAR='VAR') VAR.VAR() VAR VAR(VAR): VAR = VAR(VAR=VAR(500, 600)) VAR VAR VAR.VAR('VAR', VAR=200) VAR VAR VAR.VAR('VAR', VAR=400) VAR VAR.VAR('VAR', VAR=500) VAR = VAR(VAR=1, VAR=[418]) VAR VAR VAR.VAR('VAR', VAR=400) VAR VAR.VAR('VAR', VAR=418)  VAR = VAR(VAR=1, VAR=['418']) VAR VAR VAR.VAR('VAR', VAR=418) VAR VAR(VAR):  VAR = VAR(VAR=[500], VAR=VAR) VAR VAR.VAR('VAR', VAR=500) VAR VAR.VAR('VAR', VAR=500)  VAR = VAR(VAR=[500], VAR=['VAR']) VAR VAR VAR.VAR('VAR', VAR=500) VAR VAR.VAR('VAR', VAR=500) VAR VAR(VAR): VAR VAR VAR(0).VAR() VAR VAR(-1).VAR() VAR VAR(1).VAR(VAR='VAR').VAR == 0 @VAR.VAR.VAR('VAR', [-1, 0]) VAR VAR(VAR, VAR): VAR VAR.VAR(VAR): VAR(VAR).VAR(VAR='VAR') VAR VAR(VAR): VAR = VAR(VAR=0) VAR VAR.VAR(VAR) VAR VAR: VAR = VAR.VAR(VAR='VAR', VAR=VAR(VAR, ""/"", ""VAR VAR VAR"")) VAR 'VAR VAR VAR' VAR VAR VAR(VAR.VAR) VAR VAR(VAR.VAR.VAR) == 'VAR: VAR VAR VAR' VAR = VAR(VAR=1) VAR VAR.VAR(VAR) VAR VAR: VAR = VAR.VAR('VAR', '/') VAR = VAR.VAR('VAR', '/') VAR 'VAR VAR VAR' VAR VAR VAR(VAR.VAR) VAR VAR(VAR.VAR.VAR, VAR) VAR VAR(VAR.VAR.VAR) == VAR.VAR VAR = VAR(VAR=1) VAR = VAR(VAR=500) VAR VAR.VAR(VAR) VAR VAR: VAR = VAR.VAR('VAR', '/', VAR=VAR) VAR = VAR.VAR('VAR', '/', VAR=VAR) VAR 'VAR VAR VAR' VAR VAR VAR(VAR.VAR) VAR = VAR.VAR.VAR(VAR=500) VAR VAR(VAR.VAR.VAR) == VAR VAR = VAR(VAR=1) VAR VAR.VAR(VAR) VAR VAR: VAR = VAR.VAR(VAR=VAR('VAR')) VAR = VAR.VAR(VAR=VAR('VAR')) VAR 'VAR VAR VAR' VAR VAR VAR(VAR.VAR) VAR VAR(VAR.VAR.VAR) == 'VAR' VAR VAR(VAR): VAR = VAR(VAR=10, VAR=VAR(['VAR', 'VAR'])) VAR VAR.VAR == VAR() VAR = VAR('VAR') VAR = VAR.VAR('VAR', '/VAR', VAR, VAR) VAR = (VAR('VAR', '/VAR', VAR, VAR, VAR),) VAR VAR.VAR == VAR VAR = VAR(VAR, ""/VAR"", ""VAR VAR VAR"") VAR = VAR.VAR('VAR', '/VAR', VAR, VAR) VAR = (VAR('VAR', '/VAR', VAR, VAR, VAR), VAR('VAR', '/VAR', VAR, VAR, VAR)) VAR VAR.VAR == VAR VAR = VAR(VAR=500) VAR = VAR.VAR('VAR', '/VAR', VAR, VAR) VAR = (VAR('VAR', '/VAR', VAR, VAR, VAR), VAR('VAR', '/VAR', VAR, VAR, VAR), VAR('VAR', '/VAR', VAR, 500, VAR)) VAR VAR.VAR == VAR VAR VAR(VAR): VAR = VAR(VAR, ""/"", ""VAR VAR VAR"") VAR = VAR() VAR VAR.VAR(VAR): VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR(VAR): VAR = VAR() VAR VAR(VAR.VAR) == ['VAR'] VAR VAR(VAR): VAR = VAR(VAR=['VAR-VAR-VAR']) VAR VAR(VAR.VAR) == ['VAR-VAR-VAR'] ",16
urllib3_2d4a3fee6de2fa45eb82169361918f759269b4ec,dummyserver/proxy.py,"#!/usr/bin/env python
#
# Simple asynchronous HTTP proxy with tunnelling (CONNECT).
#
# GET/POST proxying based on
# http://groups.google.com/group/python-tornado/msg/7bea08e7a049cf26
#
# Copyright (C) 2012 Senko Rasic <senko.rasic@dobarkod.hr>
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the ""Software""), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED ""AS IS"", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
# THE SOFTWARE.

import socket
import ssl
import sys

import tornado.gen
import tornado.httpclient
import tornado.httpserver
import tornado.ioloop
import tornado.iostream
import tornado.web

__all__ = [""ProxyHandler"", ""run_proxy""]


class ProxyHandler(tornado.web.RequestHandler):
    SUPPORTED_METHODS = [""GET"", ""POST"", ""CONNECT""]

    @tornado.gen.coroutine
    def get(self):
        def handle_response(response):
            if response.error and not isinstance(
                response.error, tornado.httpclient.HTTPError
            ):
                self.set_status(500)
                self.write(""Internal server error:\n"" + str(response.error))
                self.finish()
            else:
                self.set_status(response.code)
                for header in (
                    ""Date"",
                    ""Cache-Control"",
                    ""Server"",
                    ""Content-Type"",
                    ""Location"",
                ):
                    v = response.headers.get(header)
                    if v:
                        self.set_header(header, v)
                if response.body:
                    self.write(response.body)
                self.finish()

        upstream_ca_certs = self.application.settings.get(""upstream_ca_certs"", None)
        ssl_options = None

        if upstream_ca_certs:
            ssl_options = ssl.create_default_context(cafile=upstream_ca_certs)

        req = tornado.httpclient.HTTPRequest(
            url=self.request.uri,
            method=self.request.method,
            body=self.request.body,
            headers=self.request.headers,
            follow_redirects=False,
            allow_nonstandard_methods=True,
            ssl_options=ssl_options,
        )

        client = tornado.httpclient.AsyncHTTPClient()
        try:
            response = yield client.fetch(req)
            yield handle_response(response)
        except tornado.httpclient.HTTPError as e:
            if hasattr(e, ""response"") and e.response:
                yield handle_response(e.response)
            else:
                self.set_status(500)
                self.write(""Internal server error:\n"" + str(e))
                self.finish()

    @tornado.gen.coroutine
    def post(self):
        yield self.get()

    @tornado.gen.coroutine
    def connect(self):
        host, port = self.request.uri.split("":"")
        client = self.request.connection.stream

        @tornado.gen.coroutine
        def start_forward(reader, writer):
            while True:
                try:
                    data = yield reader.read_bytes(4096, partial=True)
                except tornado.iostream.StreamClosedError:
                    break
                if not data:
                    break
                writer.write(data)
            writer.close()

        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM, 0)
        upstream = tornado.iostream.IOStream(s)
        yield upstream.connect((host, int(port)))

        client.write(b""HTTP/1.0 200 Connection established\r\n\r\n"")
        fu1 = start_forward(client, upstream)
        fu2 = start_forward(upstream, client)
        yield [fu1, fu2]


def run_proxy(port, start_ioloop=True):
    """"""
    Run proxy on the specified port. If start_ioloop is True (default),
    the tornado IOLoop will be started immediately.
    """"""
    app = tornado.web.Application([(r"".*"", ProxyHandler)])
    app.listen(port)
    ioloop = tornado.ioloop.IOLoop.instance()
    if start_ioloop:
        ioloop.start()


if __name__ == ""__main__"":
    port = 8888
    if len(sys.argv) > 1:
        port = int(sys.argv[1])

    print(""Starting HTTP proxy on port %d"" % port)
    run_proxy(port)",,2d4a3fee6de2fa45eb82169361918f759269b4ec,CVE-2021-33503,2d4a3fee6de2fa45eb82169361918f759269b4ec,https://github.com/urllib3/urllib3,NVD_DIRECT_COMMIT,1337,COMPLETED,"                          VAR VAR VAR VAR VAR VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR = [""VAR"", ""VAR""] VAR VAR(VAR.VAR.VAR): VAR = [""VAR"", ""VAR"", ""VAR""] @VAR.VAR.VAR VAR VAR(VAR): VAR VAR(VAR): VAR VAR.VAR VAR VAR VAR( VAR.VAR, VAR.VAR.VAR ): VAR.VAR(500) VAR.VAR(""VAR VAR VAR:\VAR"" + VAR(VAR.VAR)) VAR.VAR() VAR: VAR.VAR(VAR.VAR) VAR VAR VAR ( ""VAR"", ""VAR-VAR"", ""VAR"", ""VAR-VAR"", ""VAR"", ): VAR = VAR.VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR, VAR) VAR VAR.VAR: VAR.VAR(VAR.VAR) VAR.VAR() VAR = VAR.VAR.VAR.VAR(""VAR"", VAR) VAR = VAR VAR VAR: VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR.VAR( VAR=VAR.VAR.VAR, VAR=VAR.VAR.VAR, VAR=VAR.VAR.VAR, VAR=VAR.VAR.VAR, VAR=VAR, VAR=VAR, VAR=VAR, ) VAR = VAR.VAR.VAR() VAR: VAR = VAR VAR.VAR(VAR) VAR VAR(VAR) VAR VAR.VAR.VAR VAR VAR: VAR VAR(VAR, ""VAR"") VAR VAR.VAR: VAR VAR(VAR.VAR) VAR: VAR.VAR(500) VAR.VAR(""VAR VAR VAR:\VAR"" + VAR(VAR)) VAR.VAR() @VAR.VAR.VAR VAR VAR(VAR): VAR VAR.VAR() @VAR.VAR.VAR VAR VAR(VAR): VAR, VAR = VAR.VAR.VAR.VAR("":"") VAR = VAR.VAR.VAR.VAR @VAR.VAR.VAR VAR VAR(VAR, VAR): VAR VAR: VAR: VAR = VAR VAR.VAR(4096, VAR=VAR) VAR VAR.VAR.VAR: VAR VAR VAR VAR: VAR VAR.VAR(VAR) VAR.VAR() VAR = VAR.VAR(VAR.VAR, VAR.VAR, 0) VAR = VAR.VAR.VAR(VAR) VAR VAR.VAR((VAR, VAR(VAR))) VAR.VAR(VAR""VAR/1.0 200 VAR VAR\VAR\VAR\VAR\VAR"") VAR = VAR(VAR, VAR) VAR = VAR(VAR, VAR) VAR [VAR, VAR] VAR VAR(VAR, VAR=VAR): """""" VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR (VAR), VAR VAR VAR VAR VAR VAR VAR. """""" VAR = VAR.VAR.VAR([(VAR"".*"", VAR)]) VAR.VAR(VAR) VAR = VAR.VAR.VAR.VAR() VAR VAR: VAR.VAR() VAR VAR == ""VAR"": VAR = 8888 VAR VAR(VAR.VAR) > 1: VAR = VAR(VAR.VAR[1]) VAR(""VAR VAR VAR VAR VAR %VAR"" % VAR) VAR(VAR) ",16
urllib3_9b76785331243689a9d52cef3db05ef7462cb02d,dummyserver/proxy.py,"#!/usr/bin/env python
#
# Simple asynchronous HTTP proxy with tunnelling (CONNECT).
#
# GET/POST proxying based on
# http://groups.google.com/group/python-tornado/msg/7bea08e7a049cf26
#
# Copyright (C) 2012 Senko Rasic <senko.rasic@dobarkod.hr>
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the ""Software""), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED ""AS IS"", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
# THE SOFTWARE.

import sys
import socket

import tornado.httpserver
import tornado.ioloop
import tornado.iostream
import tornado.web
import tornado.httpclient

__all__ = ['ProxyHandler', 'run_proxy']


class ProxyHandler(tornado.web.RequestHandler):
    SUPPORTED_METHODS = ['GET', 'POST', 'CONNECT']

    @tornado.web.asynchronous
    def get(self):

        def handle_response(response):
            if response.error and not isinstance(response.error,
                                                 tornado.httpclient.HTTPError):
                self.set_status(500)
                self.write('Internal server error:\n' + str(response.error))
                self.finish()
            else:
                self.set_status(response.code)
                for header in ('Date', 'Cache-Control', 'Server',
                               'Content-Type', 'Location'):
                    v = response.headers.get(header)
                    if v:
                        self.set_header(header, v)
                if response.body:
                    self.write(response.body)
                self.finish()

        req = tornado.httpclient.HTTPRequest(
            url=self.request.uri,
            method=self.request.method, body=self.request.body,
            headers=self.request.headers, follow_redirects=False,
            allow_nonstandard_methods=True)

        client = tornado.httpclient.AsyncHTTPClient()
        try:
            client.fetch(req, handle_response)
        except tornado.httpclient.HTTPError as e:
            if hasattr(e, 'response') and e.response:
                self.handle_response(e.response)
            else:
                self.set_status(500)
                self.write('Internal server error:\n' + str(e))
                self.finish()

    @tornado.web.asynchronous
    def post(self):
        return self.get()

    @tornado.web.asynchronous
    def connect(self):
        host, port = self.request.uri.split(':')
        client = self.request.connection.stream

        def read_from_client(data):
            upstream.write(data)

        def read_from_upstream(data):
            client.write(data)

        def client_close(data=None):
            if upstream.closed():
                return
            if data:
                upstream.write(data)
            upstream.close()

        def upstream_close(data=None):
            if client.closed():
                return
            if data:
                client.write(data)
            client.close()

        def start_tunnel():
            client.read_until_close(client_close, read_from_client)
            upstream.read_until_close(upstream_close, read_from_upstream)
            client.write(b'HTTP/1.0 200 Connection established\r\n\r\n')

        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM, 0)
        upstream = tornado.iostream.IOStream(s)
        upstream.connect((host, int(port)), start_tunnel)


def run_proxy(port, start_ioloop=True):
    """"""
    Run proxy on the specified port. If start_ioloop is True (default),
    the tornado IOLoop will be started immediately.
    """"""
    app = tornado.web.Application([
        (r'.*', ProxyHandler),
    ])
    app.listen(port)
    ioloop = tornado.ioloop.IOLoop.instance()
    if start_ioloop:
        ioloop.start()


if __name__ == '__main__':
    port = 8888
    if len(sys.argv) > 1:
        port = int(sys.argv[1])

    print(""Starting HTTP proxy on port %d"" % port)
    run_proxy(port)",,9b76785331243689a9d52cef3db05ef7462cb02d,CVE-2019-11236,9b76785331243689a9d52cef3db05ef7462cb02d,https://github.com/urllib3/urllib3,NVD_GIT_REPOBASED,70,COMPLETED,"                          VAR VAR VAR VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR = ['VAR', 'VAR'] VAR VAR(VAR.VAR.VAR): VAR = ['VAR', 'VAR', 'VAR'] @VAR.VAR.VAR VAR VAR(VAR): VAR VAR(VAR): VAR VAR.VAR VAR VAR VAR(VAR.VAR, VAR.VAR.VAR): VAR.VAR(500) VAR.VAR('VAR VAR VAR:\VAR' + VAR(VAR.VAR)) VAR.VAR() VAR: VAR.VAR(VAR.VAR) VAR VAR VAR ('VAR', 'VAR-VAR', 'VAR', 'VAR-VAR', 'VAR'): VAR = VAR.VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR, VAR) VAR VAR.VAR: VAR.VAR(VAR.VAR) VAR.VAR() VAR = VAR.VAR.VAR( VAR=VAR.VAR.VAR, VAR=VAR.VAR.VAR, VAR=VAR.VAR.VAR, VAR=VAR.VAR.VAR, VAR=VAR, VAR=VAR) VAR = VAR.VAR.VAR() VAR: VAR.VAR(VAR, VAR) VAR VAR.VAR.VAR VAR VAR: VAR VAR(VAR, 'VAR') VAR VAR.VAR: VAR.VAR(VAR.VAR) VAR: VAR.VAR(500) VAR.VAR('VAR VAR VAR:\VAR' + VAR(VAR)) VAR.VAR() @VAR.VAR.VAR VAR VAR(VAR): VAR VAR.VAR() @VAR.VAR.VAR VAR VAR(VAR): VAR, VAR = VAR.VAR.VAR.VAR(':') VAR = VAR.VAR.VAR.VAR VAR VAR(VAR): VAR.VAR(VAR) VAR VAR(VAR): VAR.VAR(VAR) VAR VAR(VAR=VAR): VAR VAR.VAR(): VAR VAR VAR: VAR.VAR(VAR) VAR.VAR() VAR VAR(VAR=VAR): VAR VAR.VAR(): VAR VAR VAR: VAR.VAR(VAR) VAR.VAR() VAR VAR(): VAR.VAR(VAR, VAR) VAR.VAR(VAR, VAR) VAR.VAR(VAR'VAR/1.0 200 VAR VAR\VAR\VAR\VAR\VAR') VAR = VAR.VAR(VAR.VAR, VAR.VAR, 0) VAR = VAR.VAR.VAR(VAR) VAR.VAR((VAR, VAR(VAR)), VAR) VAR VAR(VAR, VAR=VAR): """""" VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR (VAR), VAR VAR VAR VAR VAR VAR VAR. """""" VAR = VAR.VAR.VAR([ (VAR'.*', VAR), ]) VAR.VAR(VAR) VAR = VAR.VAR.VAR.VAR() VAR VAR: VAR.VAR() VAR VAR == 'VAR': VAR = 8888 VAR VAR(VAR.VAR) > 1: VAR = VAR(VAR.VAR[1]) VAR(""VAR VAR VAR VAR VAR %VAR"" % VAR) VAR(VAR) ",16
urllib3_9b76785331243689a9d52cef3db05ef7462cb02d,test/test_retry.py,"import pytest

from urllib3.response import HTTPResponse
from urllib3.packages.six.moves import xrange
from urllib3.util.retry import Retry, RequestHistory
from urllib3.exceptions import (
    ConnectTimeoutError,
    MaxRetryError,
    ReadTimeoutError,
    ResponseError,
)


class TestRetry(object):

    def test_string(self):
        """""" Retry string representation looks the way we expect """"""
        retry = Retry()
        assert str(retry) == 'Retry(total=10, connect=None, read=None, redirect=None, status=None)'
        for _ in range(3):
            retry = retry.increment(method='GET')
        assert str(retry) == 'Retry(total=7, connect=None, read=None, redirect=None, status=None)'

    def test_retry_both_specified(self):
        """"""Total can win if it's lower than the connect value""""""
        error = ConnectTimeoutError()
        retry = Retry(connect=3, total=2)
        retry = retry.increment(error=error)
        retry = retry.increment(error=error)
        with pytest.raises(MaxRetryError) as e:
            retry.increment(error=error)
        assert e.value.reason == error

    def test_retry_higher_total_loses(self):
        """""" A lower connect timeout than the total is honored """"""
        error = ConnectTimeoutError()
        retry = Retry(connect=2, total=3)
        retry = retry.increment(error=error)
        retry = retry.increment(error=error)
        with pytest.raises(MaxRetryError):
            retry.increment(error=error)

    def test_retry_higher_total_loses_vs_read(self):
        """""" A lower read timeout than the total is honored """"""
        error = ReadTimeoutError(None, ""/"", ""read timed out"")
        retry = Retry(read=2, total=3)
        retry = retry.increment(method='GET', error=error)
        retry = retry.increment(method='GET', error=error)
        with pytest.raises(MaxRetryError):
            retry.increment(method='GET', error=error)

    def test_retry_total_none(self):
        """""" if Total is none, connect error should take precedence """"""
        error = ConnectTimeoutError()
        retry = Retry(connect=2, total=None)
        retry = retry.increment(error=error)
        retry = retry.increment(error=error)
        with pytest.raises(MaxRetryError) as e:
            retry.increment(error=error)
        assert e.value.reason == error

        error = ReadTimeoutError(None, ""/"", ""read timed out"")
        retry = Retry(connect=2, total=None)
        retry = retry.increment(method='GET', error=error)
        retry = retry.increment(method='GET', error=error)
        retry = retry.increment(method='GET', error=error)
        assert not retry.is_exhausted()

    def test_retry_default(self):
        """""" If no value is specified, should retry connects 3 times """"""
        retry = Retry()
        assert retry.total == 10
        assert retry.connect is None
        assert retry.read is None
        assert retry.redirect is None

        error = ConnectTimeoutError()
        retry = Retry(connect=1)
        retry = retry.increment(error=error)
        with pytest.raises(MaxRetryError):
            retry.increment(error=error)

        retry = Retry(connect=1)
        retry = retry.increment(error=error)
        assert not retry.is_exhausted()

        assert Retry(0).raise_on_redirect
        assert not Retry(False).raise_on_redirect

    def test_retry_read_zero(self):
        """""" No second chances on read timeouts, by default """"""
        error = ReadTimeoutError(None, ""/"", ""read timed out"")
        retry = Retry(read=0)
        with pytest.raises(MaxRetryError) as e:
            retry.increment(method='GET', error=error)
        assert e.value.reason == error

    def test_status_counter(self):
        resp = HTTPResponse(status=400)
        retry = Retry(status=2)
        retry = retry.increment(response=resp)
        retry = retry.increment(response=resp)
        with pytest.raises(MaxRetryError) as e:
            retry.increment(response=resp)
        assert str(e.value.reason) == ResponseError.SPECIFIC_ERROR.format(status_code=400)

    def test_backoff(self):
        """""" Backoff is computed correctly """"""
        max_backoff = Retry.BACKOFF_MAX

        retry = Retry(total=100, backoff_factor=0.2)
        assert retry.get_backoff_time() == 0  # First request

        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0  # First retry

        retry = retry.increment(method='GET')
        assert retry.backoff_factor == 0.2
        assert retry.total == 98
        assert retry.get_backoff_time() == 0.4  # Start backoff

        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0.8

        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 1.6

        for _ in xrange(10):
            retry = retry.increment(method='GET')

        assert retry.get_backoff_time() == max_backoff

    def test_zero_backoff(self):
        retry = Retry()
        assert retry.get_backoff_time() == 0
        retry = retry.increment(method='GET')
        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0

    def test_backoff_reset_after_redirect(self):
        retry = Retry(total=100, redirect=5, backoff_factor=0.2)
        retry = retry.increment(method='GET')
        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0.4
        redirect_response = HTTPResponse(status=302, headers={'location': 'test'})
        retry = retry.increment(method='GET', response=redirect_response)
        assert retry.get_backoff_time() == 0
        retry = retry.increment(method='GET')
        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0.4

    def test_sleep(self):
        # sleep a very small amount of time so our code coverage is happy
        retry = Retry(backoff_factor=0.0001)
        retry = retry.increment(method='GET')
        retry = retry.increment(method='GET')
        retry.sleep()

    def test_status_forcelist(self):
        retry = Retry(status_forcelist=xrange(500, 600))
        assert not retry.is_retry('GET', status_code=200)
        assert not retry.is_retry('GET', status_code=400)
        assert retry.is_retry('GET', status_code=500)

        retry = Retry(total=1, status_forcelist=[418])
        assert not retry.is_retry('GET', status_code=400)
        assert retry.is_retry('GET', status_code=418)

        # String status codes are not matched.
        retry = Retry(total=1, status_forcelist=['418'])
        assert not retry.is_retry('GET', status_code=418)

    def test_method_whitelist_with_status_forcelist(self):
        # Falsey method_whitelist means to retry on any method.
        retry = Retry(status_forcelist=[500], method_whitelist=None)
        assert retry.is_retry('GET', status_code=500)
        assert retry.is_retry('POST', status_code=500)

        # Criteria of method_whitelist and status_forcelist are ANDed.
        retry = Retry(status_forcelist=[500], method_whitelist=['POST'])
        assert not retry.is_retry('GET', status_code=500)
        assert retry.is_retry('POST', status_code=500)

    def test_exhausted(self):
        assert not Retry(0).is_exhausted()
        assert Retry(-1).is_exhausted()
        assert Retry(1).increment(method='GET').total == 0

    @pytest.mark.parametrize('total', [-1, 0])
    def test_disabled(self, total):
        with pytest.raises(MaxRetryError):
            Retry(total).increment(method='GET')

    def test_error_message(self):
        retry = Retry(total=0)
        with pytest.raises(MaxRetryError) as e:
            retry = retry.increment(method='GET',
                                    error=ReadTimeoutError(None, ""/"", ""read timed out""))
        assert 'Caused by redirect' not in str(e.value)
        assert str(e.value.reason) == 'None: read timed out'

        retry = Retry(total=1)
        with pytest.raises(MaxRetryError) as e:
            retry = retry.increment('POST', '/')
            retry = retry.increment('POST', '/')
        assert 'Caused by redirect' not in str(e.value)
        assert isinstance(e.value.reason, ResponseError)
        assert str(e.value.reason) == ResponseError.GENERIC_ERROR

        retry = Retry(total=1)
        response = HTTPResponse(status=500)
        with pytest.raises(MaxRetryError) as e:
            retry = retry.increment('POST', '/', response=response)
            retry = retry.increment('POST', '/', response=response)
        assert 'Caused by redirect' not in str(e.value)
        msg = ResponseError.SPECIFIC_ERROR.format(status_code=500)
        assert str(e.value.reason) == msg

        retry = Retry(connect=1)
        with pytest.raises(MaxRetryError) as e:
            retry = retry.increment(error=ConnectTimeoutError('conntimeout'))
            retry = retry.increment(error=ConnectTimeoutError('conntimeout'))
        assert 'Caused by redirect' not in str(e.value)
        assert str(e.value.reason) == 'conntimeout'

    def test_history(self):
        retry = Retry(total=10, method_whitelist=frozenset(['GET', 'POST']))
        assert retry.history == tuple()
        connection_error = ConnectTimeoutError('conntimeout')
        retry = retry.increment('GET', '/test1', None, connection_error)
        history = (RequestHistory('GET', '/test1', connection_error, None, None),)
        assert retry.history == history

        read_error = ReadTimeoutError(None, ""/test2"", ""read timed out"")
        retry = retry.increment('POST', '/test2', None, read_error)
        history = (RequestHistory('GET', '/test1', connection_error, None, None),
                   RequestHistory('POST', '/test2', read_error, None, None))
        assert retry.history == history

        response = HTTPResponse(status=500)
        retry = retry.increment('GET', '/test3', response, None)
        history = (RequestHistory('GET', '/test1', connection_error, None, None),
                   RequestHistory('POST', '/test2', read_error, None, None),
                   RequestHistory('GET', '/test3', None, 500, None))
        assert retry.history == history

    def test_retry_method_not_in_whitelist(self):
        error = ReadTimeoutError(None, ""/"", ""read timed out"")
        retry = Retry()
        with pytest.raises(ReadTimeoutError):
            retry.increment(method='POST', error=error)

    def test_retry_default_remove_headers_on_redirect(self):
        retry = Retry()

        assert list(retry.remove_headers_on_redirect) == ['authorization']

    def test_retry_set_remove_headers_on_redirect(self):
        retry = Retry(remove_headers_on_redirect=['x-api-secret'])

        assert list(retry.remove_headers_on_redirect) == ['x-api-secret']",,9b76785331243689a9d52cef3db05ef7462cb02d,CVE-2019-11236,9b76785331243689a9d52cef3db05ef7462cb02d,https://github.com/urllib3/urllib3,NVD_GIT_REPOBASED,70,COMPLETED,"VAR VAR VAR VAR.VAR VAR VAR VAR VAR.VAR.VAR.VAR VAR VAR VAR VAR.VAR.VAR VAR VAR, VAR VAR VAR.VAR VAR ( VAR, VAR, VAR, VAR, ) VAR VAR(VAR): VAR VAR(VAR): """""" VAR VAR VAR VAR VAR VAR VAR VAR """""" VAR = VAR() VAR VAR(VAR) == 'VAR(VAR=10, VAR=VAR, VAR=VAR, VAR=VAR, VAR=VAR)' VAR VAR VAR VAR(3): VAR = VAR.VAR(VAR='VAR') VAR VAR(VAR) == 'VAR(VAR=7, VAR=VAR, VAR=VAR, VAR=VAR, VAR=VAR)' VAR VAR(VAR): """"""VAR VAR VAR VAR VAR'VAR VAR VAR VAR VAR VAR"""""" VAR = VAR() VAR = VAR(VAR=3, VAR=2) VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR=VAR) VAR VAR.VAR.VAR == VAR VAR VAR(VAR): """""" VAR VAR VAR VAR VAR VAR VAR VAR VAR """""" VAR = VAR() VAR = VAR(VAR=2, VAR=3) VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR): VAR.VAR(VAR=VAR) VAR VAR(VAR): """""" VAR VAR VAR VAR VAR VAR VAR VAR VAR """""" VAR = VAR(VAR, ""/"", ""VAR VAR VAR"") VAR = VAR(VAR=2, VAR=3) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR.VAR(VAR): VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR(VAR): """""" VAR VAR VAR VAR, VAR VAR VAR VAR VAR """""" VAR = VAR() VAR = VAR(VAR=2, VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR=VAR) VAR VAR.VAR.VAR == VAR VAR = VAR(VAR, ""/"", ""VAR VAR VAR"") VAR = VAR(VAR=2, VAR=VAR) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR VAR.VAR() VAR VAR(VAR): """""" VAR VAR VAR VAR VAR, VAR VAR VAR 3 VAR """""" VAR = VAR() VAR VAR.VAR == 10 VAR VAR.VAR VAR VAR VAR VAR.VAR VAR VAR VAR VAR.VAR VAR VAR VAR = VAR() VAR = VAR(VAR=1) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR): VAR.VAR(VAR=VAR) VAR = VAR(VAR=1) VAR = VAR.VAR(VAR=VAR) VAR VAR VAR.VAR() VAR VAR(0).VAR VAR VAR VAR(VAR).VAR VAR VAR(VAR): """""" VAR VAR VAR VAR VAR VAR, VAR VAR """""" VAR = VAR(VAR, ""/"", ""VAR VAR VAR"") VAR = VAR(VAR=0) VAR VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR.VAR.VAR == VAR VAR VAR(VAR): VAR = VAR(VAR=400) VAR = VAR(VAR=2) VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR=VAR) VAR VAR(VAR.VAR.VAR) == VAR.VAR.VAR(VAR=400) VAR VAR(VAR): """""" VAR VAR VAR VAR """""" VAR = VAR.VAR VAR = VAR(VAR=100, VAR=0.2) VAR VAR.VAR() == 0  VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0  VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR == 0.2 VAR VAR.VAR == 98 VAR VAR.VAR() == 0.4  VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0.8 VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 1.6 VAR VAR VAR VAR(10): VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == VAR VAR VAR(VAR): VAR = VAR() VAR VAR.VAR() == 0 VAR = VAR.VAR(VAR='VAR') VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0 VAR VAR(VAR): VAR = VAR(VAR=100, VAR=5, VAR=0.2) VAR = VAR.VAR(VAR='VAR') VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0.4 VAR = VAR(VAR=302, VAR={'VAR': 'VAR'}) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR.VAR() == 0 VAR = VAR.VAR(VAR='VAR') VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0.4 VAR VAR(VAR):  VAR = VAR(VAR=0.0001) VAR = VAR.VAR(VAR='VAR') VAR = VAR.VAR(VAR='VAR') VAR.VAR() VAR VAR(VAR): VAR = VAR(VAR=VAR(500, 600)) VAR VAR VAR.VAR('VAR', VAR=200) VAR VAR VAR.VAR('VAR', VAR=400) VAR VAR.VAR('VAR', VAR=500) VAR = VAR(VAR=1, VAR=[418]) VAR VAR VAR.VAR('VAR', VAR=400) VAR VAR.VAR('VAR', VAR=418)  VAR = VAR(VAR=1, VAR=['418']) VAR VAR VAR.VAR('VAR', VAR=418) VAR VAR(VAR):  VAR = VAR(VAR=[500], VAR=VAR) VAR VAR.VAR('VAR', VAR=500) VAR VAR.VAR('VAR', VAR=500)  VAR = VAR(VAR=[500], VAR=['VAR']) VAR VAR VAR.VAR('VAR', VAR=500) VAR VAR.VAR('VAR', VAR=500) VAR VAR(VAR): VAR VAR VAR(0).VAR() VAR VAR(-1).VAR() VAR VAR(1).VAR(VAR='VAR').VAR == 0 @VAR.VAR.VAR('VAR', [-1, 0]) VAR VAR(VAR, VAR): VAR VAR.VAR(VAR): VAR(VAR).VAR(VAR='VAR') VAR VAR(VAR): VAR = VAR(VAR=0) VAR VAR.VAR(VAR) VAR VAR: VAR = VAR.VAR(VAR='VAR', VAR=VAR(VAR, ""/"", ""VAR VAR VAR"")) VAR 'VAR VAR VAR' VAR VAR VAR(VAR.VAR) VAR VAR(VAR.VAR.VAR) == 'VAR: VAR VAR VAR' VAR = VAR(VAR=1) VAR VAR.VAR(VAR) VAR VAR: VAR = VAR.VAR('VAR', '/') VAR = VAR.VAR('VAR', '/') VAR 'VAR VAR VAR' VAR VAR VAR(VAR.VAR) VAR VAR(VAR.VAR.VAR, VAR) VAR VAR(VAR.VAR.VAR) == VAR.VAR VAR = VAR(VAR=1) VAR = VAR(VAR=500) VAR VAR.VAR(VAR) VAR VAR: VAR = VAR.VAR('VAR', '/', VAR=VAR) VAR = VAR.VAR('VAR', '/', VAR=VAR) VAR 'VAR VAR VAR' VAR VAR VAR(VAR.VAR) VAR = VAR.VAR.VAR(VAR=500) VAR VAR(VAR.VAR.VAR) == VAR VAR = VAR(VAR=1) VAR VAR.VAR(VAR) VAR VAR: VAR = VAR.VAR(VAR=VAR('VAR')) VAR = VAR.VAR(VAR=VAR('VAR')) VAR 'VAR VAR VAR' VAR VAR VAR(VAR.VAR) VAR VAR(VAR.VAR.VAR) == 'VAR' VAR VAR(VAR): VAR = VAR(VAR=10, VAR=VAR(['VAR', 'VAR'])) VAR VAR.VAR == VAR() VAR = VAR('VAR') VAR = VAR.VAR('VAR', '/VAR', VAR, VAR) VAR = (VAR('VAR', '/VAR', VAR, VAR, VAR),) VAR VAR.VAR == VAR VAR = VAR(VAR, ""/VAR"", ""VAR VAR VAR"") VAR = VAR.VAR('VAR', '/VAR', VAR, VAR) VAR = (VAR('VAR', '/VAR', VAR, VAR, VAR), VAR('VAR', '/VAR', VAR, VAR, VAR)) VAR VAR.VAR == VAR VAR = VAR(VAR=500) VAR = VAR.VAR('VAR', '/VAR', VAR, VAR) VAR = (VAR('VAR', '/VAR', VAR, VAR, VAR), VAR('VAR', '/VAR', VAR, VAR, VAR), VAR('VAR', '/VAR', VAR, 500, VAR)) VAR VAR.VAR == VAR VAR VAR(VAR): VAR = VAR(VAR, ""/"", ""VAR VAR VAR"") VAR = VAR() VAR VAR.VAR(VAR): VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR(VAR): VAR = VAR() VAR VAR(VAR.VAR) == ['VAR'] VAR VAR(VAR): VAR = VAR(VAR=['VAR-VAR-VAR']) VAR VAR(VAR.VAR) == ['VAR-VAR-VAR'] ",16
urllib3_a74c9cfbaed9f811e7563cfc3dce894928e0221a,dummyserver/proxy.py,"#!/usr/bin/env python
#
# Simple asynchronous HTTP proxy with tunnelling (CONNECT).
#
# GET/POST proxying based on
# http://groups.google.com/group/python-tornado/msg/7bea08e7a049cf26
#
# Copyright (C) 2012 Senko Rasic <senko.rasic@dobarkod.hr>
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the ""Software""), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED ""AS IS"", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
# THE SOFTWARE.

import sys
import socket

import tornado.httpserver
import tornado.ioloop
import tornado.iostream
import tornado.web
import tornado.httpclient

__all__ = ['ProxyHandler', 'run_proxy']


class ProxyHandler(tornado.web.RequestHandler):
    SUPPORTED_METHODS = ['GET', 'POST', 'CONNECT']

    @tornado.web.asynchronous
    def get(self):

        def handle_response(response):
            if response.error and not isinstance(response.error,
                                                 tornado.httpclient.HTTPError):
                self.set_status(500)
                self.write('Internal server error:\n' + str(response.error))
                self.finish()
            else:
                self.set_status(response.code)
                for header in ('Date', 'Cache-Control', 'Server',
                               'Content-Type', 'Location'):
                    v = response.headers.get(header)
                    if v:
                        self.set_header(header, v)
                if response.body:
                    self.write(response.body)
                self.finish()

        req = tornado.httpclient.HTTPRequest(
            url=self.request.uri,
            method=self.request.method, body=self.request.body,
            headers=self.request.headers, follow_redirects=False,
            allow_nonstandard_methods=True)

        client = tornado.httpclient.AsyncHTTPClient()
        try:
            client.fetch(req, handle_response)
        except tornado.httpclient.HTTPError as e:
            if hasattr(e, 'response') and e.response:
                self.handle_response(e.response)
            else:
                self.set_status(500)
                self.write('Internal server error:\n' + str(e))
                self.finish()

    @tornado.web.asynchronous
    def post(self):
        return self.get()

    @tornado.web.asynchronous
    def connect(self):
        host, port = self.request.uri.split(':')
        client = self.request.connection.stream

        def read_from_client(data):
            upstream.write(data)

        def read_from_upstream(data):
            client.write(data)

        def client_close(data=None):
            if upstream.closed():
                return
            if data:
                upstream.write(data)
            upstream.close()

        def upstream_close(data=None):
            if client.closed():
                return
            if data:
                client.write(data)
            client.close()

        def start_tunnel():
            client.read_until_close(client_close, read_from_client)
            upstream.read_until_close(upstream_close, read_from_upstream)
            client.write(b'HTTP/1.0 200 Connection established\r\n\r\n')

        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM, 0)
        upstream = tornado.iostream.IOStream(s)
        upstream.connect((host, int(port)), start_tunnel)


def run_proxy(port, start_ioloop=True):
    """"""
    Run proxy on the specified port. If start_ioloop is True (default),
    the tornado IOLoop will be started immediately.
    """"""
    app = tornado.web.Application([
        (r'.*', ProxyHandler),
    ])
    app.listen(port)
    ioloop = tornado.ioloop.IOLoop.instance()
    if start_ioloop:
        ioloop.start()


if __name__ == '__main__':
    port = 8888
    if len(sys.argv) > 1:
        port = int(sys.argv[1])

    print(""Starting HTTP proxy on port %d"" % port)
    run_proxy(port)",,a74c9cfbaed9f811e7563cfc3dce894928e0221a,CVE-2020-7212,a74c9cfbaed9f811e7563cfc3dce894928e0221a,https://github.com/urllib3/urllib3,NVD_DIRECT_COMMIT,1337,COMPLETED,"                          VAR VAR VAR VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR VAR.VAR VAR = ['VAR', 'VAR'] VAR VAR(VAR.VAR.VAR): VAR = ['VAR', 'VAR', 'VAR'] @VAR.VAR.VAR VAR VAR(VAR): VAR VAR(VAR): VAR VAR.VAR VAR VAR VAR(VAR.VAR, VAR.VAR.VAR): VAR.VAR(500) VAR.VAR('VAR VAR VAR:\VAR' + VAR(VAR.VAR)) VAR.VAR() VAR: VAR.VAR(VAR.VAR) VAR VAR VAR ('VAR', 'VAR-VAR', 'VAR', 'VAR-VAR', 'VAR'): VAR = VAR.VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR, VAR) VAR VAR.VAR: VAR.VAR(VAR.VAR) VAR.VAR() VAR = VAR.VAR.VAR( VAR=VAR.VAR.VAR, VAR=VAR.VAR.VAR, VAR=VAR.VAR.VAR, VAR=VAR.VAR.VAR, VAR=VAR, VAR=VAR) VAR = VAR.VAR.VAR() VAR: VAR.VAR(VAR, VAR) VAR VAR.VAR.VAR VAR VAR: VAR VAR(VAR, 'VAR') VAR VAR.VAR: VAR.VAR(VAR.VAR) VAR: VAR.VAR(500) VAR.VAR('VAR VAR VAR:\VAR' + VAR(VAR)) VAR.VAR() @VAR.VAR.VAR VAR VAR(VAR): VAR VAR.VAR() @VAR.VAR.VAR VAR VAR(VAR): VAR, VAR = VAR.VAR.VAR.VAR(':') VAR = VAR.VAR.VAR.VAR VAR VAR(VAR): VAR.VAR(VAR) VAR VAR(VAR): VAR.VAR(VAR) VAR VAR(VAR=VAR): VAR VAR.VAR(): VAR VAR VAR: VAR.VAR(VAR) VAR.VAR() VAR VAR(VAR=VAR): VAR VAR.VAR(): VAR VAR VAR: VAR.VAR(VAR) VAR.VAR() VAR VAR(): VAR.VAR(VAR, VAR) VAR.VAR(VAR, VAR) VAR.VAR(VAR'VAR/1.0 200 VAR VAR\VAR\VAR\VAR\VAR') VAR = VAR.VAR(VAR.VAR, VAR.VAR, 0) VAR = VAR.VAR.VAR(VAR) VAR.VAR((VAR, VAR(VAR)), VAR) VAR VAR(VAR, VAR=VAR): """""" VAR VAR VAR VAR VAR VAR. VAR VAR VAR VAR (VAR), VAR VAR VAR VAR VAR VAR VAR. """""" VAR = VAR.VAR.VAR([ (VAR'.*', VAR), ]) VAR.VAR(VAR) VAR = VAR.VAR.VAR.VAR() VAR VAR: VAR.VAR() VAR VAR == 'VAR': VAR = 8888 VAR VAR(VAR.VAR) > 1: VAR = VAR(VAR.VAR[1]) VAR(""VAR VAR VAR VAR VAR %VAR"" % VAR) VAR(VAR) ",16
urllib3_a74c9cfbaed9f811e7563cfc3dce894928e0221a,test/test_retry.py,"import pytest

from urllib3.response import HTTPResponse
from urllib3.packages.six.moves import xrange
from urllib3.util.retry import Retry, RequestHistory
from urllib3.exceptions import (
    ConnectTimeoutError,
    MaxRetryError,
    ReadTimeoutError,
    ResponseError,
)


class TestRetry(object):

    def test_string(self):
        """""" Retry string representation looks the way we expect """"""
        retry = Retry()
        assert str(retry) == 'Retry(total=10, connect=None, read=None, redirect=None, status=None)'
        for _ in range(3):
            retry = retry.increment(method='GET')
        assert str(retry) == 'Retry(total=7, connect=None, read=None, redirect=None, status=None)'

    def test_retry_both_specified(self):
        """"""Total can win if it's lower than the connect value""""""
        error = ConnectTimeoutError()
        retry = Retry(connect=3, total=2)
        retry = retry.increment(error=error)
        retry = retry.increment(error=error)
        with pytest.raises(MaxRetryError) as e:
            retry.increment(error=error)
        assert e.value.reason == error

    def test_retry_higher_total_loses(self):
        """""" A lower connect timeout than the total is honored """"""
        error = ConnectTimeoutError()
        retry = Retry(connect=2, total=3)
        retry = retry.increment(error=error)
        retry = retry.increment(error=error)
        with pytest.raises(MaxRetryError):
            retry.increment(error=error)

    def test_retry_higher_total_loses_vs_read(self):
        """""" A lower read timeout than the total is honored """"""
        error = ReadTimeoutError(None, ""/"", ""read timed out"")
        retry = Retry(read=2, total=3)
        retry = retry.increment(method='GET', error=error)
        retry = retry.increment(method='GET', error=error)
        with pytest.raises(MaxRetryError):
            retry.increment(method='GET', error=error)

    def test_retry_total_none(self):
        """""" if Total is none, connect error should take precedence """"""
        error = ConnectTimeoutError()
        retry = Retry(connect=2, total=None)
        retry = retry.increment(error=error)
        retry = retry.increment(error=error)
        with pytest.raises(MaxRetryError) as e:
            retry.increment(error=error)
        assert e.value.reason == error

        error = ReadTimeoutError(None, ""/"", ""read timed out"")
        retry = Retry(connect=2, total=None)
        retry = retry.increment(method='GET', error=error)
        retry = retry.increment(method='GET', error=error)
        retry = retry.increment(method='GET', error=error)
        assert not retry.is_exhausted()

    def test_retry_default(self):
        """""" If no value is specified, should retry connects 3 times """"""
        retry = Retry()
        assert retry.total == 10
        assert retry.connect is None
        assert retry.read is None
        assert retry.redirect is None

        error = ConnectTimeoutError()
        retry = Retry(connect=1)
        retry = retry.increment(error=error)
        with pytest.raises(MaxRetryError):
            retry.increment(error=error)

        retry = Retry(connect=1)
        retry = retry.increment(error=error)
        assert not retry.is_exhausted()

        assert Retry(0).raise_on_redirect
        assert not Retry(False).raise_on_redirect

    def test_retry_read_zero(self):
        """""" No second chances on read timeouts, by default """"""
        error = ReadTimeoutError(None, ""/"", ""read timed out"")
        retry = Retry(read=0)
        with pytest.raises(MaxRetryError) as e:
            retry.increment(method='GET', error=error)
        assert e.value.reason == error

    def test_status_counter(self):
        resp = HTTPResponse(status=400)
        retry = Retry(status=2)
        retry = retry.increment(response=resp)
        retry = retry.increment(response=resp)
        with pytest.raises(MaxRetryError) as e:
            retry.increment(response=resp)
        assert str(e.value.reason) == ResponseError.SPECIFIC_ERROR.format(status_code=400)

    def test_backoff(self):
        """""" Backoff is computed correctly """"""
        max_backoff = Retry.BACKOFF_MAX

        retry = Retry(total=100, backoff_factor=0.2)
        assert retry.get_backoff_time() == 0  # First request

        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0  # First retry

        retry = retry.increment(method='GET')
        assert retry.backoff_factor == 0.2
        assert retry.total == 98
        assert retry.get_backoff_time() == 0.4  # Start backoff

        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0.8

        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 1.6

        for _ in xrange(10):
            retry = retry.increment(method='GET')

        assert retry.get_backoff_time() == max_backoff

    def test_zero_backoff(self):
        retry = Retry()
        assert retry.get_backoff_time() == 0
        retry = retry.increment(method='GET')
        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0

    def test_backoff_reset_after_redirect(self):
        retry = Retry(total=100, redirect=5, backoff_factor=0.2)
        retry = retry.increment(method='GET')
        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0.4
        redirect_response = HTTPResponse(status=302, headers={'location': 'test'})
        retry = retry.increment(method='GET', response=redirect_response)
        assert retry.get_backoff_time() == 0
        retry = retry.increment(method='GET')
        retry = retry.increment(method='GET')
        assert retry.get_backoff_time() == 0.4

    def test_sleep(self):
        # sleep a very small amount of time so our code coverage is happy
        retry = Retry(backoff_factor=0.0001)
        retry = retry.increment(method='GET')
        retry = retry.increment(method='GET')
        retry.sleep()

    def test_status_forcelist(self):
        retry = Retry(status_forcelist=xrange(500, 600))
        assert not retry.is_retry('GET', status_code=200)
        assert not retry.is_retry('GET', status_code=400)
        assert retry.is_retry('GET', status_code=500)

        retry = Retry(total=1, status_forcelist=[418])
        assert not retry.is_retry('GET', status_code=400)
        assert retry.is_retry('GET', status_code=418)

        # String status codes are not matched.
        retry = Retry(total=1, status_forcelist=['418'])
        assert not retry.is_retry('GET', status_code=418)

    def test_method_whitelist_with_status_forcelist(self):
        # Falsey method_whitelist means to retry on any method.
        retry = Retry(status_forcelist=[500], method_whitelist=None)
        assert retry.is_retry('GET', status_code=500)
        assert retry.is_retry('POST', status_code=500)

        # Criteria of method_whitelist and status_forcelist are ANDed.
        retry = Retry(status_forcelist=[500], method_whitelist=['POST'])
        assert not retry.is_retry('GET', status_code=500)
        assert retry.is_retry('POST', status_code=500)

    def test_exhausted(self):
        assert not Retry(0).is_exhausted()
        assert Retry(-1).is_exhausted()
        assert Retry(1).increment(method='GET').total == 0

    @pytest.mark.parametrize('total', [-1, 0])
    def test_disabled(self, total):
        with pytest.raises(MaxRetryError):
            Retry(total).increment(method='GET')

    def test_error_message(self):
        retry = Retry(total=0)
        with pytest.raises(MaxRetryError) as e:
            retry = retry.increment(method='GET',
                                    error=ReadTimeoutError(None, ""/"", ""read timed out""))
        assert 'Caused by redirect' not in str(e.value)
        assert str(e.value.reason) == 'None: read timed out'

        retry = Retry(total=1)
        with pytest.raises(MaxRetryError) as e:
            retry = retry.increment('POST', '/')
            retry = retry.increment('POST', '/')
        assert 'Caused by redirect' not in str(e.value)
        assert isinstance(e.value.reason, ResponseError)
        assert str(e.value.reason) == ResponseError.GENERIC_ERROR

        retry = Retry(total=1)
        response = HTTPResponse(status=500)
        with pytest.raises(MaxRetryError) as e:
            retry = retry.increment('POST', '/', response=response)
            retry = retry.increment('POST', '/', response=response)
        assert 'Caused by redirect' not in str(e.value)
        msg = ResponseError.SPECIFIC_ERROR.format(status_code=500)
        assert str(e.value.reason) == msg

        retry = Retry(connect=1)
        with pytest.raises(MaxRetryError) as e:
            retry = retry.increment(error=ConnectTimeoutError('conntimeout'))
            retry = retry.increment(error=ConnectTimeoutError('conntimeout'))
        assert 'Caused by redirect' not in str(e.value)
        assert str(e.value.reason) == 'conntimeout'

    def test_history(self):
        retry = Retry(total=10, method_whitelist=frozenset(['GET', 'POST']))
        assert retry.history == tuple()
        connection_error = ConnectTimeoutError('conntimeout')
        retry = retry.increment('GET', '/test1', None, connection_error)
        history = (RequestHistory('GET', '/test1', connection_error, None, None),)
        assert retry.history == history

        read_error = ReadTimeoutError(None, ""/test2"", ""read timed out"")
        retry = retry.increment('POST', '/test2', None, read_error)
        history = (RequestHistory('GET', '/test1', connection_error, None, None),
                   RequestHistory('POST', '/test2', read_error, None, None))
        assert retry.history == history

        response = HTTPResponse(status=500)
        retry = retry.increment('GET', '/test3', response, None)
        history = (RequestHistory('GET', '/test1', connection_error, None, None),
                   RequestHistory('POST', '/test2', read_error, None, None),
                   RequestHistory('GET', '/test3', None, 500, None))
        assert retry.history == history

    def test_retry_method_not_in_whitelist(self):
        error = ReadTimeoutError(None, ""/"", ""read timed out"")
        retry = Retry()
        with pytest.raises(ReadTimeoutError):
            retry.increment(method='POST', error=error)

    def test_retry_default_remove_headers_on_redirect(self):
        retry = Retry()

        assert list(retry.remove_headers_on_redirect) == ['authorization']

    def test_retry_set_remove_headers_on_redirect(self):
        retry = Retry(remove_headers_on_redirect=['X-API-Secret'])

        assert list(retry.remove_headers_on_redirect) == ['x-api-secret']",,a74c9cfbaed9f811e7563cfc3dce894928e0221a,CVE-2020-7212,a74c9cfbaed9f811e7563cfc3dce894928e0221a,https://github.com/urllib3/urllib3,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR VAR VAR.VAR VAR VAR VAR VAR.VAR.VAR.VAR VAR VAR VAR VAR.VAR.VAR VAR VAR, VAR VAR VAR.VAR VAR ( VAR, VAR, VAR, VAR, ) VAR VAR(VAR): VAR VAR(VAR): """""" VAR VAR VAR VAR VAR VAR VAR VAR """""" VAR = VAR() VAR VAR(VAR) == 'VAR(VAR=10, VAR=VAR, VAR=VAR, VAR=VAR, VAR=VAR)' VAR VAR VAR VAR(3): VAR = VAR.VAR(VAR='VAR') VAR VAR(VAR) == 'VAR(VAR=7, VAR=VAR, VAR=VAR, VAR=VAR, VAR=VAR)' VAR VAR(VAR): """"""VAR VAR VAR VAR VAR'VAR VAR VAR VAR VAR VAR"""""" VAR = VAR() VAR = VAR(VAR=3, VAR=2) VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR=VAR) VAR VAR.VAR.VAR == VAR VAR VAR(VAR): """""" VAR VAR VAR VAR VAR VAR VAR VAR VAR """""" VAR = VAR() VAR = VAR(VAR=2, VAR=3) VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR): VAR.VAR(VAR=VAR) VAR VAR(VAR): """""" VAR VAR VAR VAR VAR VAR VAR VAR VAR """""" VAR = VAR(VAR, ""/"", ""VAR VAR VAR"") VAR = VAR(VAR=2, VAR=3) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR.VAR(VAR): VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR(VAR): """""" VAR VAR VAR VAR, VAR VAR VAR VAR VAR """""" VAR = VAR() VAR = VAR(VAR=2, VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR=VAR) VAR VAR.VAR.VAR == VAR VAR = VAR(VAR, ""/"", ""VAR VAR VAR"") VAR = VAR(VAR=2, VAR=VAR) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR VAR.VAR() VAR VAR(VAR): """""" VAR VAR VAR VAR VAR, VAR VAR VAR 3 VAR """""" VAR = VAR() VAR VAR.VAR == 10 VAR VAR.VAR VAR VAR VAR VAR.VAR VAR VAR VAR VAR.VAR VAR VAR VAR = VAR() VAR = VAR(VAR=1) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR): VAR.VAR(VAR=VAR) VAR = VAR(VAR=1) VAR = VAR.VAR(VAR=VAR) VAR VAR VAR.VAR() VAR VAR(0).VAR VAR VAR VAR(VAR).VAR VAR VAR(VAR): """""" VAR VAR VAR VAR VAR VAR, VAR VAR """""" VAR = VAR(VAR, ""/"", ""VAR VAR VAR"") VAR = VAR(VAR=0) VAR VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR.VAR.VAR == VAR VAR VAR(VAR): VAR = VAR(VAR=400) VAR = VAR(VAR=2) VAR = VAR.VAR(VAR=VAR) VAR = VAR.VAR(VAR=VAR) VAR VAR.VAR(VAR) VAR VAR: VAR.VAR(VAR=VAR) VAR VAR(VAR.VAR.VAR) == VAR.VAR.VAR(VAR=400) VAR VAR(VAR): """""" VAR VAR VAR VAR """""" VAR = VAR.VAR VAR = VAR(VAR=100, VAR=0.2) VAR VAR.VAR() == 0  VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0  VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR == 0.2 VAR VAR.VAR == 98 VAR VAR.VAR() == 0.4  VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0.8 VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 1.6 VAR VAR VAR VAR(10): VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == VAR VAR VAR(VAR): VAR = VAR() VAR VAR.VAR() == 0 VAR = VAR.VAR(VAR='VAR') VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0 VAR VAR(VAR): VAR = VAR(VAR=100, VAR=5, VAR=0.2) VAR = VAR.VAR(VAR='VAR') VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0.4 VAR = VAR(VAR=302, VAR={'VAR': 'VAR'}) VAR = VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR.VAR() == 0 VAR = VAR.VAR(VAR='VAR') VAR = VAR.VAR(VAR='VAR') VAR VAR.VAR() == 0.4 VAR VAR(VAR):  VAR = VAR(VAR=0.0001) VAR = VAR.VAR(VAR='VAR') VAR = VAR.VAR(VAR='VAR') VAR.VAR() VAR VAR(VAR): VAR = VAR(VAR=VAR(500, 600)) VAR VAR VAR.VAR('VAR', VAR=200) VAR VAR VAR.VAR('VAR', VAR=400) VAR VAR.VAR('VAR', VAR=500) VAR = VAR(VAR=1, VAR=[418]) VAR VAR VAR.VAR('VAR', VAR=400) VAR VAR.VAR('VAR', VAR=418)  VAR = VAR(VAR=1, VAR=['418']) VAR VAR VAR.VAR('VAR', VAR=418) VAR VAR(VAR):  VAR = VAR(VAR=[500], VAR=VAR) VAR VAR.VAR('VAR', VAR=500) VAR VAR.VAR('VAR', VAR=500)  VAR = VAR(VAR=[500], VAR=['VAR']) VAR VAR VAR.VAR('VAR', VAR=500) VAR VAR.VAR('VAR', VAR=500) VAR VAR(VAR): VAR VAR VAR(0).VAR() VAR VAR(-1).VAR() VAR VAR(1).VAR(VAR='VAR').VAR == 0 @VAR.VAR.VAR('VAR', [-1, 0]) VAR VAR(VAR, VAR): VAR VAR.VAR(VAR): VAR(VAR).VAR(VAR='VAR') VAR VAR(VAR): VAR = VAR(VAR=0) VAR VAR.VAR(VAR) VAR VAR: VAR = VAR.VAR(VAR='VAR', VAR=VAR(VAR, ""/"", ""VAR VAR VAR"")) VAR 'VAR VAR VAR' VAR VAR VAR(VAR.VAR) VAR VAR(VAR.VAR.VAR) == 'VAR: VAR VAR VAR' VAR = VAR(VAR=1) VAR VAR.VAR(VAR) VAR VAR: VAR = VAR.VAR('VAR', '/') VAR = VAR.VAR('VAR', '/') VAR 'VAR VAR VAR' VAR VAR VAR(VAR.VAR) VAR VAR(VAR.VAR.VAR, VAR) VAR VAR(VAR.VAR.VAR) == VAR.VAR VAR = VAR(VAR=1) VAR = VAR(VAR=500) VAR VAR.VAR(VAR) VAR VAR: VAR = VAR.VAR('VAR', '/', VAR=VAR) VAR = VAR.VAR('VAR', '/', VAR=VAR) VAR 'VAR VAR VAR' VAR VAR VAR(VAR.VAR) VAR = VAR.VAR.VAR(VAR=500) VAR VAR(VAR.VAR.VAR) == VAR VAR = VAR(VAR=1) VAR VAR.VAR(VAR) VAR VAR: VAR = VAR.VAR(VAR=VAR('VAR')) VAR = VAR.VAR(VAR=VAR('VAR')) VAR 'VAR VAR VAR' VAR VAR VAR(VAR.VAR) VAR VAR(VAR.VAR.VAR) == 'VAR' VAR VAR(VAR): VAR = VAR(VAR=10, VAR=VAR(['VAR', 'VAR'])) VAR VAR.VAR == VAR() VAR = VAR('VAR') VAR = VAR.VAR('VAR', '/VAR', VAR, VAR) VAR = (VAR('VAR', '/VAR', VAR, VAR, VAR),) VAR VAR.VAR == VAR VAR = VAR(VAR, ""/VAR"", ""VAR VAR VAR"") VAR = VAR.VAR('VAR', '/VAR', VAR, VAR) VAR = (VAR('VAR', '/VAR', VAR, VAR, VAR), VAR('VAR', '/VAR', VAR, VAR, VAR)) VAR VAR.VAR == VAR VAR = VAR(VAR=500) VAR = VAR.VAR('VAR', '/VAR', VAR, VAR) VAR = (VAR('VAR', '/VAR', VAR, VAR, VAR), VAR('VAR', '/VAR', VAR, VAR, VAR), VAR('VAR', '/VAR', VAR, 500, VAR)) VAR VAR.VAR == VAR VAR VAR(VAR): VAR = VAR(VAR, ""/"", ""VAR VAR VAR"") VAR = VAR() VAR VAR.VAR(VAR): VAR.VAR(VAR='VAR', VAR=VAR) VAR VAR(VAR): VAR = VAR() VAR VAR(VAR.VAR) == ['VAR'] VAR VAR(VAR): VAR = VAR(VAR=['VAR-VAR-VAR']) VAR VAR(VAR.VAR) == ['VAR-VAR-VAR'] ",16
vim_85b6747abc15a7a81086db31289cf1b8b17e6cb1,src/testdir/test_ex_mode.vim,"func Test_ex_mode_large_indent()
  new
  set ts=500 ai
  call setline(1, ""\t"")
  exe ""normal gQi\<CR>.""
  set ts=8 noai
  bwipe!
endfunc

",,85b6747abc15a7a81086db31289cf1b8b17e6cb1,CVE-2022-0359,85b6747abc15a7a81086db31289cf1b8b17e6cb1,https://github.com/vim/vim,NVD_DIRECT_COMMIT,1337,COMPLETED,"VAR VAR() VAR VAR VAR=500 VAR VAR VAR(1, ""\VAR"") VAR ""VAR VAR\<VAR>."" VAR VAR=8 VAR VAR! VAR ",16
